-- Clean SQL to fix project-media bucket for PDF support
-- Copy and paste this directly into Supabase SQL editor

UPDATE storage.buckets SET allowed_mime_types = ARRAY['application/pdf','application/msword','text/plain','text/csv','application/rtf','application/zip','application/acad','application/x-acad','application/autocad','application/x-autocad','application/dwg','application/x-dwg','image/vnd.dwg','drawing/dwg','application/dxf','application/x-dxf','image/vnd.dxf','drawing/dxf','application/dwt','application/x-dwt','application/dws','application/x-dws','application/dwf','application/x-dwf','model/vnd.dwf','application/octet-stream','image/jpeg','image/png','image/gif','image/webp','image/svg+xml'] WHERE id = 'project-media';

INSERT INTO storage.buckets (id, name, public, file_size_limit, allowed_mime_types) VALUES ('project-media', 'project-media', false, 52428800, ARRAY['application/pdf','application/msword','text/plain','text/csv','application/rtf','application/zip','application/acad','application/x-acad','application/autocad','application/x-autocad','application/dwg','application/x-dwg','image/vnd.dwg','drawing/dwg','application/dxf','application/x-dxf','image/vnd.dxf','drawing/dxf','application/dwt','application/x-dwt','application/dws','application/x-dws','application/dwf','application/x-dwf','model/vnd.dwf','application/octet-stream','image/jpeg','image/png','image/gif','image/webp','image/svg+xml']) ON CONFLICT (id) DO UPDATE SET allowed_mime_types = EXCLUDED.allowed_mime_types;
