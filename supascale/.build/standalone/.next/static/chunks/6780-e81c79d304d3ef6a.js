"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6780],{1275:(e,t,s)=>{s.d(t,{d:()=>x,t:()=>m});var a=s(95155),r=s(12115),n=s(42529),l=s(6132),o=s(52056),c=s(23327),i=s(65229),d=s(64269);let u=(0,r.createContext)(void 0);function m(e){let{children:t}=e,[s,n]=(0,r.useState)([]),l=(0,r.useCallback)(e=>{var t;let s=Math.random().toString(36).slice(2,11);return n(t=>[...t,{...e,id:s}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==s))},null!=(t=e.duration)?t:e.action?1e4:5e3),s},[]),o=(0,r.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,a.jsxs)(u.Provider,{value:{toasts:s,addToast:l,removeToast:o},children:[t,(0,a.jsx)(h,{toasts:s,onRemove:o})]})}function x(){let e=(0,r.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return{toast:e.addToast,success:(t,s)=>e.addToast({type:"success",title:t,description:s}),error:(t,s)=>e.addToast({type:"error",title:t,description:s}),warning:(t,s)=>e.addToast({type:"warning",title:t,description:s}),info:(t,s)=>e.addToast({type:"info",title:t,description:s})}}function h(e){let{toasts:t,onRemove:s}=e;return(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full",children:t.map(e=>(0,a.jsx)(g,{toast:e,onRemove:s},e.id))})}let p={success:n.A,error:l.A,warning:o.A,info:c.A},f={success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"};function g(e){let{toast:t,onRemove:s}=e,r=p[t.type];return(0,a.jsxs)("div",{className:(0,d.cn)("flex items-start gap-3 p-4 rounded-lg shadow-lg border","bg-background-elevated border-border","animate-in slide-in-from-right-full"),role:"alert",children:[(0,a.jsx)(r,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",f[t.type])}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.title}),t.description&&(0,a.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:t.description}),t.action&&(0,a.jsx)("button",{onClick:()=>{var e;null==(e=t.action)||e.onClick(),s(t.id)},className:"mt-2 text-sm font-medium text-brand hover:text-brand/80 transition-colors",children:t.action.label})]}),(0,a.jsxs)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 text-foreground-muted hover:text-foreground transition-colors",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})}},1375:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},3998:(e,t,s)=>{s.d(t,{Button:()=>o});var a=s(95155),r=s(12115),n=s(64269),l=s(35299);let o=(0,r.forwardRef)((e,t)=>{let{className:s,variant:r="primary",size:o="md",loading:c,disabled:i,children:d,...u}=e;return(0,a.jsxs)("button",{ref:t,className:(0,n.cn)("\n      inline-flex items-center justify-center font-medium\n      transition-all duration-150 focus-visible:outline-none focus-visible:ring-1\n      focus-visible:ring-brand focus-visible:ring-offset-1\n      disabled:pointer-events-none disabled:opacity-50\n      rounded-lg\n    ",{primary:"\n        bg-brand text-white hover:bg-brand/90\n        border border-brand-secondary\n        shadow-xs active:shadow-none active:bg-brand-secondary\n      ",secondary:"\n        bg-background-tertiary text-foreground\n        border border-border hover:border-border-hover\n        hover:bg-background-elevated shadow-xs\n        active:shadow-none\n      ",ghost:"\n        text-foreground-secondary hover:text-foreground\n        hover:bg-background-tertiary\n        border border-transparent\n        active:bg-background-secondary\n      ",destructive:"\n        bg-error text-white hover:bg-error/90\n        border border-red-700\n        shadow-xs active:shadow-none active:bg-red-700\n      ",outline:"\n        border border-brand text-brand\n        hover:bg-brand/10\n        active:bg-brand/20\n      "}[r],{sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2",icon:"h-10 w-10"}[o],s),disabled:i||c,...u,children:[c&&(0,a.jsx)(l.A,{className:"h-4 w-4 animate-spin"}),d]})});o.displayName="Button"},4478:(e,t,s)=>{s.d(t,{RestoreDialog:()=>w});var a=s(95155),r=s(12115),n=s(51834),l=s(3998),o=s(11647),c=s(18653),i=s(1275),d=s(1375),u=s(85710),m=s(20523),x=s(28150),h=s(15870),p=s(61362),f=s(52056),g=s(48314),b=s(78874),j=s(50803),y=s(12108),v=s(24033),N=s(64269);let k={full:{label:"Full Backup",icon:d.A,description:"Restore all components from this backup"},database:{label:"Database",icon:u.A,description:"Restore PostgreSQL database (requires project to be running)"},storage:{label:"Storage",icon:m.A,description:"Restore all storage bucket files"},functions:{label:"Functions",icon:x.A,description:"Restore Edge Functions source code"},config:{label:"Config",icon:h.A,description:"Restore environment and Docker configuration"}};function w(e){var t;let{backup:s,open:d,onClose:u,onRestoreComplete:m}=e,x=(0,i.d)(),[h,w]=(0,r.useState)(!1),[A,C]=(0,r.useState)([]),[S,B]=(0,r.useState)(!1),[M,R]=(0,r.useState)("select"),[D,T]=(0,r.useState)(null),[z,F]=(0,r.useState)([]),[E,P]=(0,r.useState)([]),[L,q]=(0,r.useState)(!0),Z=(0,r.useRef)(null),W=(0,r.useRef)(null),H="full"===s.type&&(null==(t=s.metadata)?void 0:t.components)?s.metadata.components:[s.type],O=(e,t,s)=>{F(a=>[...a,{timestamp:new Date,type:e,message:t,data:s}])},V=async()=>{R("restoring"),w(!0),F([]),P([]),O("info","Connecting to restore stream...");try{let e=await fetch("/api/v1/backups/".concat(s.id,"/restore/stream"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({restoreTypes:A,forceRestore:S})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to start restore")}if(!e.body)throw Error("No response body");let t=e.body.getReader(),a=new TextDecoder,r="";for(;;){let{done:e,value:s}=await t.read();if(e)break;let n=(r+=a.decode(s,{stream:!0})).split("\n");r=n.pop()||"";let l="",o="";for(let e of n)if(e.startsWith("event: "))l=e.slice(7);else if(e.startsWith("data: ")&&(o=e.slice(6),l&&o)){try{let e=JSON.parse(o);I(l,e)}catch(e){console.error("Failed to parse SSE data:",e)}l="",o=""}}}catch(t){let e=t instanceof Error?t.message:"Restore failed";O("error",e),T({success:!1,error:e}),R("complete")}finally{w(!1)}},I=(e,t)=>{switch(e){case"start":case"info":O("info",t.message,t);break;case"command":O("command",t.cmd,t);break;case"output":t.stdout&&O("output",t.stdout),t.stderr&&O("output",t.stderr);break;case"warning":O("warning",t.message,t);break;case"step":P(e=>{let s=e.findIndex(e=>e.step===t.step),a={step:t.step,status:t.status,message:t.message};if(s>=0){let t=[...e];return t[s]=a,t}return[...e,a]}),O("step","[".concat(t.step,"] ").concat(t.message),t);break;case"complete":T({success:!0,warnings:t.warnings,duration:t.duration}),R("complete"),O("info",t.message),null==m||m();break;case"error":T({success:!1,error:t.error,warnings:t.warnings,duration:t.duration}),R("complete"),O("error",t.error)}};(0,r.useEffect)(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth"})},[z]),(0,r.useEffect)(()=>()=>{W.current&&W.current.close()},[]);let _=()=>{h||(R("select"),C([]),T(null),B(!1),F([]),P([]),u())},U=k[s.type],G=U.icon;return(0,a.jsxs)(n.lG,{open:d,onClose:_,title:"Restore from Backup",className:"restoring"===M||"complete"===M?"max-w-4xl":"max-w-2xl",children:["select"===M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-background-tertiary rounded-lg",children:[(0,a.jsx)(G,{className:"h-8 w-8 text-brand flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:s.filename}),(0,a.jsxs)("p",{className:"text-sm text-foreground-muted",children:[U.label," • ",(0,N.z3)(s.size)]})]})]}),H.length>1&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Select Components to Restore"}),(0,a.jsx)(l.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{C([...H])},children:"Select All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:H.map(e=>{let t=k[e],s=t.icon,r=A.includes(e);return(0,a.jsx)("button",{type:"button",onClick:()=>{A.includes(e)?C(A.filter(t=>t!==e)):C([...A,e])},className:"p-3 border rounded-lg text-left transition-colors ".concat(r?"border-brand bg-brand/10":"border-border hover:border-brand/50"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(s,{className:"h-5 w-5 ".concat(r?"text-brand":"text-foreground-muted")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:t.label}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:t.description})]}),r&&(0,a.jsx)(p.A,{className:"h-4 w-4 text-brand"})]})},e)})})]}),1===H.length&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-muted",children:["This will restore the ",k[s.type].label.toLowerCase()," from this backup."]}),(0,a.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>C([s.type]),className:A.length>0?"border-brand bg-brand/10":"",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2 ".concat(A.length>0?"text-brand":"text-foreground-muted")}),A.length>0?"Selected":"Select to Restore"]})]}),(0,a.jsxs)(n.Es,{children:[(0,a.jsx)(l.Button,{type:"button",variant:"outline",onClick:_,children:"Cancel"}),(0,a.jsx)(l.Button,{type:"button",onClick:()=>{if(0===A.length)return void x.error("Select components","Please select at least one component to restore");R("confirm")},disabled:0===A.length,children:"Continue"})]})]}),"confirm"===M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-4 bg-warning/10 border border-warning/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-warning",children:"Warning: This action cannot be undone"}),(0,a.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Restoring will overwrite existing data. Make sure you have a recent backup of current data if needed."})]})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Components to restore:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:A.map(e=>{let t=k[e],s=t.icon;return(0,a.jsxs)(o.E,{variant:"secondary",children:[(0,a.jsx)(s,{className:"h-3 w-3 mr-1"}),t.label]},e)})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"forceRestore",checked:S,onChange:e=>B(e.target.checked),className:"mt-1"}),(0,a.jsxs)("label",{htmlFor:"forceRestore",className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Force restore"}),(0,a.jsx)("p",{className:"text-foreground-muted",children:"Override safety checks (e.g., restore config while project is running)"})]})]}),(0,a.jsxs)(n.Es,{children:[(0,a.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>R("select"),children:"Back"}),(0,a.jsxs)(l.Button,{type:"button",variant:"destructive",onClick:V,children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Restore Now"]})]})]}),"restoring"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:E.map(e=>(0,a.jsxs)(o.E,{variant:"completed"===e.status?"success":"failed"===e.status?"error":"running"===e.status?"info":"secondary",children:["running"===e.status&&(0,a.jsx)(c.y,{size:"sm",className:"mr-1"}),"completed"===e.status&&(0,a.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"failed"===e.status&&(0,a.jsx)(b.A,{className:"h-3 w-3 mr-1"}),e.step.replace("restore-","").replace("-"," ")]},e.step))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Live Output"})]}),(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>q(!L),children:L?(0,a.jsx)(y.A,{className:"h-4 w-4"}):(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),L&&(0,a.jsx)("div",{className:"bg-[#1a1a1a] rounded-lg font-mono text-xs max-h-[400px] overflow-auto",children:(0,a.jsxs)("div",{className:"p-4 space-y-1",children:[z.map((e,t)=>(0,a.jsxs)("div",{className:"whitespace-pre-wrap break-all ".concat("command"===e.type?"text-cyan-400":"error"===e.type?"text-red-400":"warning"===e.type?"text-yellow-400":"step"===e.type?"text-green-400":"text-gray-300"),children:["command"===e.type&&(0,a.jsx)("span",{className:"text-gray-500",children:"$ "}),e.message]},t)),h&&(0,a.jsx)("div",{className:"text-yellow-400 animate-pulse",children:"Processing..."}),(0,a.jsx)("div",{ref:Z})]})})]}),"complete"===M&&D&&(0,a.jsxs)("div",{className:"space-y-6",children:[D.success?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-success"})}),(0,a.jsx)("p",{className:"mt-4 font-medium text-lg",children:"Restore Complete"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-muted mt-1",children:["The backup has been successfully restored",D.duration&&" in ".concat((e=>{let t=Math.round(e/1e3);if(t<60)return"".concat(t,"s");let s=Math.floor(t/60);return"".concat(s,"m ").concat(t%60,"s")})(D.duration)),"."]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-full bg-error/10 flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"h-8 w-8 text-error"})}),(0,a.jsx)("p",{className:"mt-4 font-medium text-lg",children:"Restore Failed"}),(0,a.jsx)("p",{className:"text-sm text-error mt-1",children:D.error})]}),D.warnings&&D.warnings.length>0&&(0,a.jsxs)("div",{className:"p-4 bg-warning/10 border border-warning/20 rounded-lg",children:[(0,a.jsx)("p",{className:"font-medium text-warning mb-2",children:"Warnings:"}),(0,a.jsx)("ul",{className:"text-sm text-foreground-muted space-y-1",children:D.warnings.map((e,t)=>(0,a.jsxs)("li",{children:["• ",e]},t))})]}),z.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Restore Log"}),(0,a.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>q(!L),children:[L?"Hide":"Show"," Output"]})]}),L&&(0,a.jsx)("div",{className:"bg-[#1a1a1a] rounded-lg font-mono text-xs max-h-[300px] overflow-auto",children:(0,a.jsx)("div",{className:"p-4 space-y-1",children:z.map((e,t)=>(0,a.jsxs)("div",{className:"whitespace-pre-wrap break-all ".concat("command"===e.type?"text-cyan-400":"error"===e.type?"text-red-400":"warning"===e.type?"text-yellow-400":"step"===e.type?"text-green-400":"text-gray-300"),children:["command"===e.type&&(0,a.jsx)("span",{className:"text-gray-500",children:"$ "}),e.message]},t))})})]}),(0,a.jsx)(n.Es,{children:(0,a.jsx)(l.Button,{type:"button",onClick:_,children:"Close"})})]})]})}},6132:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},11647:(e,t,s)=>{s.d(t,{E:()=>n});var a=s(95155),r=s(64269);function n(e){let{className:t,variant:s="default",...n}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[s],t),...n})}},12108:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},15870:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},18653:(e,t,s)=>{s.d(t,{y:()=>n});var a=s(95155),r=s(64269);function n(e){let{size:t="md",className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-spin rounded-full border-2 border-current border-t-transparent text-brand",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],s),children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})}},19679:(e,t,s)=>{s.d(t,{DestinationDisplay:()=>m,DestinationSelector:()=>u});var a=s(95155),r=s(12115),n=s(32320),l=s(85710),o=s(34172),c=s(20523),i=s(35299);let d={s3:n.A,gcs:l.A,azure:o.A,local:c.A,r2:n.A,minio:o.A,backblaze:n.A};function u(e){var t;let{value:s,onChange:n,disabled:l}=e,[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/v1/cloud-storage"),t=await e.json();t.success&&c(t.data||[])}catch(e){console.error("Failed to fetch storage providers:",e)}finally{u(!1)}}()},[]),d)?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Destination"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-foreground-muted",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm",children:"Loading storage providers..."})]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Destination"}),(0,a.jsxs)("select",{value:s,onChange:e=>n(e.target.value),disabled:l,className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)("option",{value:"local",children:"Local Filesystem (Default)"}),o.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.type.toUpperCase(),")",e.isDefault&&" - Default"]},e.id))]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"local"===s?"Backups will be stored on the local filesystem":o.find(e=>e.id===s)?"Backups will be uploaded to ".concat(null==(t=o.find(e=>e.id===s))?void 0:t.name):"Select a storage destination"})]})}function m(e){let{destination:t,providers:s=[]}=e;if("local"===t)return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{children:"Local"})]});let r=s.find(e=>e.id===t);if(r){let e=d[r.type];return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{children:r.name})]})}return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{children:"Cloud Storage"})]})}},20063:(e,t,s)=>{var a=s(47260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},20288:(e,t,s)=>{s.d(t,{BackupProgressCard:()=>g});var a=s(95155),r=s(12115),n=s(86948),l=s(11647),o=s(18653),c=s(1375),i=s(85710),d=s(20523),u=s(28150),m=s(15870),x=s(48314),h=s(61362),p=s(78874);let f={full:{label:"Full Backup",icon:c.A},database:{label:"Database",icon:i.A},storage:{label:"Storage",icon:d.A},functions:{label:"Functions",icon:u.A},config:{label:"Config",icon:m.A}};function g(e){let{backup:t,restoreJob:s,projectName:i,onComplete:d}=e,[u,m]=(0,r.useState)(0),g=!!t,b=!!s,j=(null==t?void 0:t.status)==="running"||(null==s?void 0:s.status)==="running",y=(null==t?void 0:t.status)==="completed"||(null==s?void 0:s.status)==="completed",v=(null==t?void 0:t.status)==="failed"||(null==s?void 0:s.status)==="failed";(0,r.useEffect)(()=>{if(!j)return;let e=setInterval(()=>{m(e=>e+1)},1e3);return()=>clearInterval(e)},[j]),(0,r.useEffect)(()=>{(y||v)&&d&&d()},[y,v,d]);let N=e=>{let t=Math.floor(e/60),s=e%60;return t>0?"".concat(t,"m ").concat(s,"s"):"".concat(s,"s")},k=t?f[t.type]:s?{label:"Restore",icon:x.A}:{label:"Unknown",icon:c.A},w=k.icon;return(0,a.jsx)(n.Zp,{className:"border-2 ".concat(j?"border-brand animate-pulse":y?"border-success":v?"border-error":"border-border"),children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-lg flex items-center justify-center ".concat(j?"bg-brand/10":y?"bg-success/10":v?"bg-error/10":"bg-background-tertiary"),children:j?(0,a.jsx)(o.y,{size:"md"}):y?(0,a.jsx)(h.A,{className:"h-6 w-6 text-success"}):v?(0,a.jsx)(p.A,{className:"h-6 w-6 text-error"}):(0,a.jsx)(w,{className:"h-6 w-6 text-brand"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:g?"Creating Backup":"Restoring Backup"}),(0,a.jsx)(l.E,{variant:j?"info":y?"success":v?"error":"secondary",children:j?"In Progress":y?"Completed":v?"Failed":"Pending"})]}),(0,a.jsxs)("p",{className:"text-sm text-foreground-muted mt-0.5",children:[i&&(0,a.jsxs)(a.Fragment,{children:[i," • "]}),k.label,j&&(0,a.jsxs)(a.Fragment,{children:[" • ",N(u)]}),(y||v)&&(null==t?void 0:t.duration)&&(0,a.jsxs)(a.Fragment,{children:[" • Took ",N(Math.round(t.duration/1e3))]}),(y||v)&&(null==s?void 0:s.duration)&&(0,a.jsxs)(a.Fragment,{children:[" • Took ",N(Math.round(s.duration/1e3))]})]})]}),b&&(null==s?void 0:s.restoreTypes)&&(0,a.jsx)("div",{className:"flex items-center gap-1",children:s.restoreTypes.map(e=>{let t=f[e],s=t.icon;return(0,a.jsx)("div",{className:"h-8 w-8 rounded bg-background-tertiary flex items-center justify-center",title:t.label,children:(0,a.jsx)(s,{className:"h-4 w-4 text-foreground-muted"})},e)})})]}),v&&((null==t?void 0:t.errorMessage)||(null==s?void 0:s.errorMessage))&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-error/10 border border-error/20 rounded text-sm text-error",children:(null==t?void 0:t.errorMessage)||(null==s?void 0:s.errorMessage)}),(null==s?void 0:s.warnings)&&s.warnings.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-warning/10 border border-warning/20 rounded text-sm text-warning",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Warnings:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:s.warnings.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]})})}},20523:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},23327:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},24033:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},26983:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},28150:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])},32320:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]])},34172:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},39867:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},42529:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},44070:(e,t,s)=>{s.d(t,{BackupCard:()=>S});var a=s(95155),r=s(52619),n=s.n(r),l=s(12115),o=s(86948),c=s(11647),i=s(3998),d=s(18653),u=s(1375),m=s(85710),x=s(20523),h=s(28150),p=s(15870),f=s(99708),g=s(26983),b=s(32320),j=s(61362),y=s(78874),v=s(39867),N=s(48314),k=s(71360),w=s(64269);let A={full:{label:"Full Backup",icon:u.A,color:"text-brand"},database:{label:"Database",icon:m.A,color:"text-success"},storage:{label:"Storage",icon:x.A,color:"text-info"},functions:{label:"Functions",icon:h.A,color:"text-warning"},config:{label:"Config",icon:p.A,color:"text-foreground-muted"}},C={completed:{label:"Completed",variant:"success"},failed:{label:"Failed",variant:"error"},running:{label:"Running",variant:"info"},pending:{label:"Pending",variant:"secondary"}};function S(e){var t;let{backup:s,projectName:r,onDownload:u,onRestore:m,onDelete:x}=e,[h,p]=(0,l.useState)(!1),S=A[s.type],B=S.icon,M=C[s.status],R=async e=>{if(e.preventDefault(),e.stopPropagation(),x&&confirm("Are you sure you want to delete this backup?")){p(!0);try{await x(s.id)}finally{p(!1)}}};return(0,a.jsx)(n(),{href:"/backups/".concat(s.id),className:"block",children:(0,a.jsx)(o.Zp,{className:"hover:border-brand/50 transition-colors cursor-pointer",children:(0,a.jsxs)(o.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background-tertiary flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(B,{className:"h-5 w-5 ".concat(S.color)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground truncate",children:s.filename}),s.encrypted&&(0,a.jsx)("span",{title:"Encrypted",children:(0,a.jsx)(f.A,{className:"h-3.5 w-3.5 text-foreground-muted"})})]}),(0,a.jsxs)("p",{className:"text-sm text-foreground-muted mt-0.5",children:[r&&(0,a.jsxs)(a.Fragment,{children:[r," • "]}),S.label," • ",(0,w.z3)(s.size)]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-foreground-muted",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(0,w.mo)(s.createdAt)})]}),"local"!==s.destination&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Cloud"})]}),s.duration&&(0,a.jsxs)("span",{children:["Duration: ",Math.round(s.duration/1e3),"s"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsxs)(c.E,{variant:M.variant,children:["running"===s.status&&(0,a.jsx)(d.y,{size:"sm",className:"mr-1"}),"completed"===s.status&&(0,a.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"failed"===s.status&&(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"pending"===s.status&&(0,a.jsx)(g.A,{className:"h-3 w-3 mr-1"}),M.label]}),"completed"===s.status&&(0,a.jsxs)("div",{className:"flex items-center gap-1",onClick:e=>e.preventDefault(),children:["local"===s.destination&&u&&(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==u||u(s.id)},title:"Download backup",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})}),m&&(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==m||m(s.id)},title:"Restore from backup",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),x&&(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:R,disabled:h,title:"Delete backup",className:"text-error hover:text-error",children:h?(0,a.jsx)(d.y,{size:"sm"}):(0,a.jsx)(k.A,{className:"h-4 w-4"})})]})]})]}),"failed"===s.status&&s.errorMessage&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-error/10 border border-error/20 rounded text-xs text-error",children:s.errorMessage}),"full"===s.type&&(null==(t=s.metadata)?void 0:t.components)&&(0,a.jsx)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:s.metadata.components.map(e=>{let t=A[e],s=t.icon;return(0,a.jsxs)(c.E,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(s,{className:"h-3 w-3 mr-1"}),t.label]},e)})})]})})})}},44846:(e,t,s)=>{s.d(t,{d:()=>l});var a=s(95155),r=s(12115),n=s(64269);let l=(0,r.forwardRef)((e,t)=>{let{className:s,checked:r,onCheckedChange:l,onChange:o,...c}=e;return(0,a.jsxs)("label",{className:(0,n.cn)("relative inline-flex cursor-pointer items-center",s),children:[(0,a.jsx)("input",{type:"checkbox",role:"switch",className:"peer sr-only",ref:t,checked:r,onChange:e=>{null==o||o(e),null==l||l(e.target.checked)},...c}),(0,a.jsx)("div",{className:(0,n.cn)("h-6 w-11 rounded-full transition-colors","bg-background-tertiary border border-border","peer-checked:bg-brand peer-checked:border-brand","peer-focus-visible:ring-2 peer-focus-visible:ring-brand peer-focus-visible:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50","after:absolute after:left-[2px] after:top-[2px]","after:h-5 after:w-5 after:rounded-full","after:bg-white after:shadow-sm","after:transition-transform","peer-checked:after:translate-x-5")})]})});l.displayName="Switch"},48314:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},50803:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},51834:(e,t,s)=>{s.d(t,{Es:()=>i,lG:()=>c});var a=s(95155),r=s(12115),n=s(65229),l=s(64269),o=s(3998);function c(e){let{open:t,onClose:s,children:c,className:i,title:d}=e;return t?(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:s,"aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:(0,l.cn)("relative w-full max-w-lg max-h-[90vh] flex flex-col bg-background-secondary rounded-xl shadow-lg border border-border","animate-in fade-in-0 zoom-in-95 duration-200",i),role:"dialog","aria-modal":"true",onClick:e=>e.stopPropagation(),children:[d&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 pb-0 flex-shrink-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:d}),(0,a.jsxs)(o.Button,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8 text-foreground-muted hover:text-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:c})]})})]}):null}function i(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex items-center justify-end gap-3 p-6 pt-0",s),children:t})}},52056:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},61362:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},63581:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},64269:(e,t,s)=>{s.d(t,{Ye:()=>d,Yq:()=>i,cn:()=>n,fw:()=>o,mo:()=>c,z3:()=>l});var a=s(2821),r=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}let l=function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][t])};function o(e){let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/1e3);return a<60?"just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):a<604800?"".concat(Math.floor(a/86400),"d ago"):s.toLocaleDateString()}function c(e){let t,s=new Date,a=new Date(e),r=a.getTime()-s.getTime(),n=Math.abs(Math.floor(r/1e3));if(n<60)t="less than a minute";else if(n<3600){let e=Math.floor(n/60);t="".concat(e," minute").concat(e>1?"s":"")}else if(n<86400){let e=Math.floor(n/3600);t="".concat(e," hour").concat(e>1?"s":"")}else{if(!(n<604800))return a.toLocaleDateString();let e=Math.floor(n/86400);t="".concat(e," day").concat(e>1?"s":"")}return r>0?"in ".concat(t):"".concat(t," ago")}function i(e){return new Date(e).toLocaleString()}function d(e){return e.toLowerCase().replace(/[^a-z0-9_-]/g,"-").replace(/^[^a-z0-9]/,"").replace(/-+/g,"-").slice(0,50)}},64858:(e,t,s)=>{s.d(t,{BackupForm:()=>h});var a=s(95155),r=s(12115),n=s(20063),l=s(86948),o=s(3998),c=s(44846),i=s(18653),d=s(1275),u=s(77802),m=s(19679),x=s(1375);function h(e){var t;let{project:s,projects:h=[],onSuccess:p}=e,f=(0,n.useRouter)(),g=(0,d.d)(),[b,j]=(0,r.useState)(!1),[y,v]=(0,r.useState)((null==s?void 0:s.id)||(null==(t=h[0])?void 0:t.id)||""),[N,k]=(0,r.useState)("full"),[w,A]=(0,r.useState)("local"),[C,S]=(0,r.useState)(!1),B=s||h.find(e=>e.id===y),M=async e=>{if(e.preventDefault(),!y)return void g.error("Project required","Please select a project to backup");j(!0);try{let e=await fetch("/api/v1/backups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:y,type:N,destination:w,encrypt:C})}),t=await e.json();if(!t.success)throw Error(t.error||"Failed to create backup");g.success("Backup started","Backup is being created in the background"),null==p||p(),f.push("/backups"),f.refresh()}catch(t){let e=t instanceof Error?t.message:"Failed to create backup";g.error("Error",e)}finally{j(!1)}};return(0,a.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[!s&&h.length>0&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Select Project"}),(0,a.jsx)(l.BT,{children:"Choose the project to backup"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand",required:!0,children:h.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})})]}),B&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Project"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background-tertiary flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"h-5 w-5 text-brand"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:B.name}),(0,a.jsx)("p",{className:"text-sm text-foreground-muted",children:B.directory})]})]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Backup Type"}),(0,a.jsx)(l.BT,{children:"Select what to include in the backup"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(u.BackupTypeSelector,{value:N,onChange:k})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Destination"}),(0,a.jsx)(l.BT,{children:"Choose where to store the backup"})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(m.DestinationSelector,{value:w,onChange:A})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Options"}),(0,a.jsx)(l.BT,{children:"Additional backup settings"})]}),(0,a.jsx)(l.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Encrypt Backup"}),(0,a.jsx)("p",{className:"text-sm text-foreground-muted",children:"Encrypt the backup file using the project's encryption key"})]}),(0,a.jsx)(c.d,{checked:C,onCheckedChange:S})]})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.Button,{type:"submit",disabled:b||!y,children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.y,{size:"sm",className:"mr-2"}),"Creating Backup..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Create Backup"]})})})]})}},65229:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},77802:(e,t,s)=>{s.d(t,{BackupTypeSelector:()=>d,getBackupTypeConfig:()=>u});var a=s(95155),r=s(1375),n=s(85710),l=s(20523),o=s(28150),c=s(15870);let i=[{id:"full",label:"Full Backup",description:"Complete backup including database, storage, functions, and config",icon:r.A},{id:"database",label:"Database",description:"PostgreSQL database dump using pg_dump",icon:n.A},{id:"storage",label:"Storage",description:"All files stored in Supabase Storage buckets",icon:l.A},{id:"functions",label:"Functions",description:"Edge Functions source code and configuration",icon:o.A},{id:"config",label:"Config",description:"Environment files and Docker Compose configuration",icon:c.A}];function d(e){let{value:t,onChange:s,disabled:r}=e;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Backup Type"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:i.map(e=>{let n=e.icon,l=t===e.id;return(0,a.jsxs)("button",{type:"button",disabled:r,onClick:()=>s(e.id),className:"p-4 border rounded-lg text-left transition-colors ".concat(l?"border-brand bg-brand/10":"border-border hover:border-brand/50"," ").concat(r?"opacity-50 cursor-not-allowed":""),children:[(0,a.jsx)(n,{className:"h-5 w-5 mb-2 ".concat(l?"text-brand":"text-foreground-muted")}),(0,a.jsx)("p",{className:"font-medium",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:e.description})]},e.id)})})]})}function u(e){return i.find(t=>t.id===e)||i[0]}},78874:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},82844:(e,t,s)=>{s.d(t,{BackupHistory:()=>j});var a=s(95155),r=s(12115),n=s(3998),l=s(18653),o=s(1275),c=s(44070),i=s(4478),d=s(1375),u=s(85710),m=s(20523),x=s(28150),h=s(15870),p=s(63581),f=s(89559);let g=[{value:"all",label:"All Types",icon:d.A},{value:"full",label:"Full",icon:d.A},{value:"database",label:"Database",icon:u.A},{value:"storage",label:"Storage",icon:m.A},{value:"functions",label:"Functions",icon:x.A},{value:"config",label:"Config",icon:h.A}],b=[{value:"all",label:"All Status"},{value:"completed",label:"Completed"},{value:"running",label:"Running"},{value:"pending",label:"Pending"},{value:"failed",label:"Failed"}];function j(e){let{projectId:t,limit:s=50,showFilters:u=!0,onBackupCreated:m}=e,x=(0,o.d)(),[h,j]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[N,k]=(0,r.useState)(!1),[w,A]=(0,r.useState)("all"),[C,S]=(0,r.useState)("all"),[B,M]=(0,r.useState)(null),R=(0,r.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e?v(!0):k(!0);try{let e=new URLSearchParams;t&&e.append("projectId",t),"all"!==w&&e.append("type",w),"all"!==C&&e.append("status",C),e.append("limit",s.toString());let a=await fetch("/api/v1/backups?".concat(e)),r=await a.json();r.success&&j(r.data||[])}catch(e){console.error("Failed to fetch backups:",e)}finally{v(!1),k(!1)}},[t,w,C,s]);(0,r.useEffect)(()=>{R()},[R]);let D=async e=>{window.open("/api/v1/backups/".concat(e,"/download"),"_blank")},T=e=>{let t=h.find(t=>t.id===e);t&&M(t)},z=async e=>{try{let t=await fetch("/api/v1/backups/".concat(e),{method:"DELETE"}),s=await t.json();if(!s.success)throw Error(s.error||"Failed to delete backup");x.success("Backup deleted","Backup has been deleted successfully"),R(!1)}catch(t){let e=t instanceof Error?t.message:"Failed to delete backup";x.error("Error",e)}};return y?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.y,{size:"lg"})}):(0,a.jsxs)("div",{className:"space-y-4",children:[u&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{className:"text-sm text-foreground-muted",children:"Filter:"})]}),(0,a.jsx)("select",{value:w,onChange:e=>A(e.target.value),className:"h-8 px-2 text-sm border border-border rounded bg-background focus:outline-none focus:ring-2 focus:ring-brand",children:g.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("select",{value:C,onChange:e=>S(e.target.value),className:"h-8 px-2 text-sm border border-border rounded bg-background focus:outline-none focus:ring-2 focus:ring-brand",children:b.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{R(!1)},disabled:N,children:N?(0,a.jsx)(l.y,{size:"sm"}):(0,a.jsx)(f.A,{className:"h-4 w-4"})})]}),0===h.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 mx-auto text-foreground-muted mb-4"}),(0,a.jsx)("p",{className:"text-foreground-muted",children:"No backups found"}),("all"!==w||"all"!==C)&&(0,a.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Try adjusting your filters"})]}):(0,a.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,a.jsx)(c.BackupCard,{backup:e,onDownload:D,onRestore:T,onDelete:z},e.id))}),B&&(0,a.jsx)(i.RestoreDialog,{backup:B,open:!!B,onClose:()=>M(null),onRestoreComplete:()=>{R(!1),null==m||m()}})]})}},85710:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},86948:(e,t,s)=>{s.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>c,Zp:()=>l,aR:()=>o});var a=s(95155),r=s(12115),n=s(64269);let l=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",s),...r})});l.displayName="Card";let o=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});o.displayName="CardHeader";let c=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",s),...r})});c.displayName="CardTitle";let i=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground-secondary",s),...r})});i.displayName="CardDescription";let d=(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",(0,r.forwardRef)((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},89559:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},99708:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(71847).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}}]);