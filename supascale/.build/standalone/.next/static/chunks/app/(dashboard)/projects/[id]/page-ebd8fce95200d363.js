(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9553],{1275:(e,t,s)=>{"use strict";s.d(t,{d:()=>x,t:()=>m});var n=s(95155),a=s(12115),r=s(42529),o=s(6132),i=s(52056),c=s(23327),l=s(65229),d=s(64269);let u=(0,a.createContext)(void 0);function m(e){let{children:t}=e,[s,r]=(0,a.useState)([]),o=(0,a.useCallback)(e=>{var t;let s=Math.random().toString(36).slice(2,11);return r(t=>[...t,{...e,id:s}]),setTimeout(()=>{r(e=>e.filter(e=>e.id!==s))},null!=(t=e.duration)?t:e.action?1e4:5e3),s},[]),i=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]);return(0,n.jsxs)(u.Provider,{value:{toasts:s,addToast:o,removeToast:i},children:[t,(0,n.jsx)(h,{toasts:s,onRemove:i})]})}function x(){let e=(0,a.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return{toast:e.addToast,success:(t,s)=>e.addToast({type:"success",title:t,description:s}),error:(t,s)=>e.addToast({type:"error",title:t,description:s}),warning:(t,s)=>e.addToast({type:"warning",title:t,description:s}),info:(t,s)=>e.addToast({type:"info",title:t,description:s})}}function h(e){let{toasts:t,onRemove:s}=e;return(0,n.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full",children:t.map(e=>(0,n.jsx)(f,{toast:e,onRemove:s},e.id))})}let p={success:r.A,error:o.A,warning:i.A,info:c.A},g={success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"};function f(e){let{toast:t,onRemove:s}=e,a=p[t.type];return(0,n.jsxs)("div",{className:(0,d.cn)("flex items-start gap-3 p-4 rounded-lg shadow-lg border","bg-background-elevated border-border","animate-in slide-in-from-right-full"),role:"alert",children:[(0,n.jsx)(a,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",g[t.type])}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.title}),t.description&&(0,n.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:t.description}),t.action&&(0,n.jsx)("button",{onClick:()=>{var e;null==(e=t.action)||e.onClick(),s(t.id)},className:"mt-2 text-sm font-medium text-brand hover:text-brand/80 transition-colors",children:t.action.label})]}),(0,n.jsxs)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 text-foreground-muted hover:text-foreground transition-colors",children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})}},7287:(e,t,s)=>{"use strict";s.d(t,{ProjectQuickLinks:()=>h});var n=s(95155),a=s(52619),r=s.n(a),o=s(67405),i=s(93499),c=s(39068),l=s(23664),d=s(17910),u=s(89715),m=s(14174),x=s(76907);function h(e){let{projectId:t,ports:s,serverHost:a}=e,{isRunning:r}=(0,o.$)(t);return(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsx)(p,{href:"http://".concat(a,":").concat(s.api),icon:i.A,label:"Studio Dashboard",disabled:!r}),(0,n.jsx)(p,{href:"http://".concat(a,":").concat(s.api,"/rest/v1/"),icon:c.A,label:"REST API",disabled:!r}),(0,n.jsx)(p,{href:"http://".concat(a,":").concat(s.inbucket),icon:l.A,label:"Inbucket (Email)",disabled:!r}),(0,n.jsx)(p,{href:"/projects/".concat(t,"/settings/auth"),icon:d.A,label:"Auth Providers",internal:!0}),(0,n.jsx)(p,{href:"/projects/".concat(t,"/logs"),icon:u.A,label:"Container Logs",internal:!0}),(0,n.jsx)(p,{href:"/projects/".concat(t,"/containers"),icon:m.A,label:"Container Stats",internal:!0}),(0,n.jsx)(p,{href:"/projects/".concat(t,"/security"),icon:x.A,label:"RLS Security",internal:!0})]})}function p(e){let{href:t,icon:s,label:a,disabled:o,internal:i}=e,c="flex items-center gap-3 p-3 rounded-lg border border-border transition-colors ".concat(o?"opacity-50 cursor-not-allowed pointer-events-none":"hover:bg-background-tertiary hover:border-border-hover");return i?(0,n.jsxs)(r(),{href:t,className:c,children:[(0,n.jsx)(s,{className:"h-5 w-5 text-foreground-muted"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:a})]}):(0,n.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:c,children:[(0,n.jsx)(s,{className:"h-5 w-5 text-foreground-muted"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:a})]})}},20748:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,52619,23)),Promise.resolve().then(s.bind(s,89405)),Promise.resolve().then(s.bind(s,62927)),Promise.resolve().then(s.bind(s,41609)),Promise.resolve().then(s.bind(s,20811)),Promise.resolve().then(s.bind(s,7287)),Promise.resolve().then(s.bind(s,33174)),Promise.resolve().then(s.bind(s,3998)),Promise.resolve().then(s.bind(s,23574))},23574:(e,t,s)=>{"use strict";s.d(t,{CopyButton:()=>l});var n=s(95155),a=s(12115),r=s(5917),o=s(75426),i=s(3998),c=s(1275);function l(e){let{value:t,className:s,label:l}=e,[d,u]=(0,a.useState)(!1),m=(0,c.d)(),x=async()=>{if(!t)return void m.error("Nothing to copy");try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(t);else{let e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}u(!0),m.success(l?"".concat(l," copied"):"Copied to clipboard"),setTimeout(()=>u(!1),2e3)}catch(e){console.error("Failed to copy:",e),m.error("Failed to copy to clipboard")}};return(0,n.jsx)(i.Button,{type:"button",variant:"ghost",size:"sm",className:"h-7 px-2 ".concat(s||""),onClick:x,children:d?(0,n.jsx)(r.A,{className:"h-3 w-3 text-success"}):(0,n.jsx)(o.A,{className:"h-3 w-3"})})}},33174:(e,t,s)=>{"use strict";s.d(t,{ProjectStatusBadge:()=>c});var n=s(95155),a=s(11647),r=s(18653),o=s(67405);let i={running:"success",stopped:"secondary",degraded:"warning",error:"error",starting:"warning",stopping:"warning",unknown:"secondary"};function c(e){let{projectId:t,pollInterval:s=5e3}=e,{status:c,isLoading:l}=(0,o.$)(t,{pollInterval:s});return l?(0,n.jsxs)(a.E,{variant:"secondary",className:"mt-2",children:[(0,n.jsx)(r.y,{size:"sm",className:"mr-1"}),"Checking..."]}):(0,n.jsx)(a.E,{variant:i[c]||"secondary",className:"mt-2",children:c.charAt(0).toUpperCase()+c.slice(1)})}},41609:(e,t,s)=>{"use strict";s.d(t,{ContainerManager:()=>w});var n=s(95155),a=s(12115),r=s(86948),o=s(3998),i=s(11647),c=s(18653),l=s(51834),d=s(1275),u=s(16140),m=s(89559),x=s(12108),h=s(24033),p=s(52056),g=s(48314),f=s(59e3),v=s(85921),j=s(89715),y=s(50803);function w(e){let{projectId:t}=e,s=(0,d.d)(),[w,N]=(0,a.useState)([]),[b,C]=(0,a.useState)(!0),[k,A]=(0,a.useState)(null),[S,T]=(0,a.useState)(!1),[P,E]=(0,a.useState)(null),[z,B]=(0,a.useState)({open:!1,containerName:"",service:"",logs:"",loading:!1}),[F,_]=(0,a.useState)({open:!1,containerName:"",service:"",history:[],executing:!1}),[R,D]=(0,a.useState)(""),[O,L]=(0,a.useState)([]),[M,I]=(0,a.useState)(-1),U=(0,a.useRef)(null),$=(0,a.useRef)(null),G=(0,a.useCallback)(async()=>{try{A(null);let e=await fetch("/api/v1/projects/".concat(t,"/containers?stats=true")),s=await e.json();s.success?N(s.data.containers):A(s.error||"Failed to fetch containers")}catch(e){A("Failed to connect to server")}finally{C(!1)}},[t]);(0,a.useEffect)(()=>{G();let e=setInterval(G,1e4);return()=>clearInterval(e)},[G]);let J=async function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;for(let a=0;a<n;a++){await new Promise(e=>setTimeout(e,500));try{let n=await fetch("/api/v1/projects/".concat(t,"/containers?stats=false")),a=await n.json();if(a.success){let n=a.data.containers.find(s=>"".concat(t,"_").concat(s.service,"_1")===e||"".concat(t,"-").concat(s.service,"-1")===e);if(n){if("stopped"===s||"exited"===s){if("stopped"===n.status||"exited"===n.status)return!0}else if(n.status===s)return!0}}}catch(e){}}return!1},K=async(e,n,a)=>{E("".concat(e,"-").concat(n));let r=Date.now();try{let o=await fetch("/api/v1/projects/".concat(t,"/containers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,containerName:n,service:a})}),i=await o.json();if(!i.success){let t=Date.now()-r;t<800&&await new Promise(e=>setTimeout(e,800-t)),s.error("Failed to ".concat(e),i.error);return}let c="start"===e||"restart"===e?"running":"stopped",l=await J(n,c,10),d=Date.now()-r;d<800&&await new Promise(e=>setTimeout(e,800-d)),l?s.success("Container ".concat(e,"ed"),"".concat(a," is now ").concat("running"===c?"running":"stopped")):s.warning("".concat(e," initiated"),"".concat(a," ").concat(e," command sent. Status may take a moment to update.")),G()}catch(n){let t=Date.now()-r;t<800&&await new Promise(e=>setTimeout(e,800-t)),s.error("Error","Failed to ".concat(e," container"))}finally{E(null)}},Z=async(e,s)=>{B({open:!0,containerName:e,service:s,logs:"",loading:!0});try{let s=await fetch("/api/v1/projects/".concat(t,"/containers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"logs",containerName:e,tail:200})}),n=await s.json();n.success?B(e=>({...e,logs:n.data.logs||"No logs available",loading:!1})):B(e=>({...e,logs:"Error: ".concat(n.error),loading:!1}))}catch(e){B(e=>({...e,logs:"Failed to fetch logs",loading:!1}))}},H=async()=>{let e=R.trim();if(e&&!F.executing){L(t=>[...t,e]),I(-1),_(t=>({...t,history:[...t.history,{type:"command",content:"$ ".concat(e)}],executing:!0})),D("");try{let s=await fetch("/api/v1/projects/".concat(t,"/containers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"exec",containerName:F.containerName,service:F.service,command:e})}),n=await s.json();if(n.success){let e=n.data.stdout||n.data.stderr||"(no output)",t=0!==n.data.exitCode;_(s=>({...s,history:[...s.history,{type:t?"error":"output",content:e}],executing:!1}))}else _(e=>({...e,history:[...e.history,{type:"error",content:"Error: ".concat(n.error)}],executing:!1}))}catch(e){_(e=>({...e,history:[...e.history,{type:"error",content:"Failed to execute command"}],executing:!1}))}setTimeout(()=>{var e,t;null==(e=U.current)||e.scrollTo(0,U.current.scrollHeight),null==(t=$.current)||t.focus()},50)}},Q=w.filter(e=>"running"===e.status).length,V=w.length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(u.A,{className:"h-5 w-5"}),"Containers",(0,n.jsxs)(i.E,{variant:Q===V?"success":"warning",children:[Q,"/",V]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:G,disabled:b,children:(0,n.jsx)(m.A,{className:"h-4 w-4 ".concat(b?"animate-spin":"")})}),(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>T(!S),children:S?(0,n.jsx)(x.A,{className:"h-4 w-4"}):(0,n.jsx)(h.A,{className:"h-4 w-4"})})]})]})}),S&&(0,n.jsx)(r.Wu,{children:b&&0===w.length?(0,n.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,n.jsx)(c.y,{size:"lg"})}):k?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,n.jsx)(p.A,{className:"h-8 w-8 text-warning mb-2"}),(0,n.jsx)("p",{className:"text-sm text-foreground-muted",children:k}),(0,n.jsx)(o.Button,{variant:"outline",size:"sm",onClick:G,className:"mt-2",children:"Retry"})]}):0===w.length?(0,n.jsx)("p",{className:"text-center text-foreground-muted py-8",children:"No containers found"}):(0,n.jsx)("div",{className:"space-y-2",children:w.map(e=>{var s;let a,r=(a=e.service,"".concat(t,"_").concat(a,"_1")),l=null==P?void 0:P.includes(r);return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background-tertiary rounded-lg",children:[(0,n.jsx)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,n.jsx)("span",{className:"font-medium truncate",children:e.service}),(e=>{switch(e){case"running":return(0,n.jsx)(i.E,{variant:"success",children:"Running"});case"stopped":return(0,n.jsx)(i.E,{variant:"error",children:"Stopped"});case"exited":return(0,n.jsx)(i.E,{variant:"secondary",children:"Exited"});case"created":return(0,n.jsx)(i.E,{variant:"warning",children:"Created"});case"restarting":return(0,n.jsx)(i.E,{variant:"warning",children:"Restarting"});default:return(0,n.jsx)(i.E,{variant:"secondary",children:e})}})(e.status)]}),(0,n.jsx)("div",{className:"text-xs text-foreground-muted truncate mt-0.5",children:e.image}),e.stats&&"running"===e.status&&(0,n.jsxs)("div",{className:"text-xs text-foreground-muted mt-1",children:["CPU: ",e.stats.cpuPercent.toFixed(1),"% | Memory: ",(s=e.stats.memoryUsage)<1048576?"".concat((s/1024).toFixed(1)," KB"):s<0x40000000?"".concat((s/1048576).toFixed(1)," MB"):"".concat((s/0x40000000).toFixed(2)," GB")," (",e.stats.memoryPercent.toFixed(1),"%)"]})]})}),(0,n.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:["running"===e.status?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>K("restart",r,e.service),disabled:l,title:"Restart",children:P==="restart-".concat(r)?(0,n.jsx)(c.y,{size:"sm"}):(0,n.jsx)(g.A,{className:"h-4 w-4"})}),(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-error hover:text-error",onClick:()=>K("stop",r,e.service),disabled:l,title:"Stop",children:P==="stop-".concat(r)?(0,n.jsx)(c.y,{size:"sm"}):(0,n.jsx)(f.A,{className:"h-4 w-4"})})]}):(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-success hover:text-success",onClick:()=>K("start",r,e.service),disabled:l,title:"Start",children:P==="start-".concat(r)?(0,n.jsx)(c.y,{size:"sm"}):(0,n.jsx)(v.A,{className:"h-4 w-4"})}),(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>Z(r,e.service),title:"View Logs",children:(0,n.jsx)(j.A,{className:"h-4 w-4"})}),"running"===e.status&&(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{var t;_({open:!0,containerName:r,service:t=e.service,history:[{type:"output",content:"Connected to ".concat(t,". Type commands below.\n")}],executing:!1}),D(""),L([]),I(-1),setTimeout(()=>{var e;null==(e=$.current)||e.focus()},100)},title:"Open Terminal",children:(0,n.jsx)(y.A,{className:"h-4 w-4"})})]})]},e.service)})})})]}),(0,n.jsxs)(l.lG,{open:z.open,onClose:()=>B(e=>({...e,open:!1})),title:"Logs: ".concat(z.service),className:"max-w-4xl",children:[(0,n.jsx)("div",{className:"min-h-[300px] max-h-[60vh]",children:z.loading?(0,n.jsx)("div",{className:"flex items-center justify-center h-[300px]",children:(0,n.jsx)(c.y,{size:"lg"})}):(0,n.jsx)("pre",{className:"bg-background-tertiary p-4 rounded-lg text-xs font-mono overflow-auto max-h-[60vh] whitespace-pre-wrap",children:z.logs})}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-border",children:[(0,n.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>Z(z.containerName,z.service),disabled:z.loading,children:[(0,n.jsx)(m.A,{className:"h-4 w-4 mr-1.5 ".concat(z.loading?"animate-spin":"")}),"Refresh"]}),(0,n.jsx)(o.Button,{size:"sm",onClick:()=>B(e=>({...e,open:!1})),children:"Close"})]})]}),(0,n.jsxs)(l.lG,{open:F.open,onClose:()=>_(e=>({...e,open:!1})),title:"Terminal: ".concat(F.service),className:"max-w-4xl",children:[(0,n.jsxs)("div",{ref:U,className:"bg-[#1a1a1a] rounded-lg font-mono text-sm min-h-[400px] max-h-[60vh] overflow-auto cursor-text",onClick:()=>{var e;return null==(e=$.current)?void 0:e.focus()},children:[(0,n.jsxs)("div",{className:"p-4 pb-0",children:[F.history.map((e,t)=>(0,n.jsx)("div",{className:"whitespace-pre-wrap leading-relaxed ".concat("command"===e.type?"text-green-400":"error"===e.type?"text-red-400":"text-gray-300"),children:e.content},t)),F.executing&&(0,n.jsx)("div",{className:"text-yellow-400 animate-pulse",children:"Executing..."})]}),(0,n.jsxs)("div",{className:"p-4 pt-2 flex items-center",children:[(0,n.jsx)("span",{className:"text-green-400 mr-2 select-none",children:"$"}),(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)("input",{ref:$,type:"text",value:R,onChange:e=>D(e.target.value),onKeyDown:e=>{if("Enter"===e.key)H();else if("ArrowUp"===e.key){if(e.preventDefault(),O.length>0){let e=-1===M?O.length-1:Math.max(0,M-1);I(e),D(O[e])}}else if("ArrowDown"===e.key&&(e.preventDefault(),-1!==M)){let e=M+1;e>=O.length?(I(-1),D("")):(I(e),D(O[e]))}},className:"w-full bg-transparent text-gray-100 outline-none caret-green-400 font-mono",autoFocus:!0,disabled:F.executing,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),""===R&&!F.executing&&(0,n.jsx)("span",{className:"absolute left-0 top-0 text-green-400 animate-[blink_1s_step-end_infinite] pointer-events-none",children:"▌"})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-foreground-muted",children:[(0,n.jsx)("span",{children:"Press Enter to execute • ↑↓ for history • Click terminal to focus"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>{_(e=>({...e,history:[{type:"output",content:"Connected to ".concat(e.service,". Type commands below.\n")}]})),setTimeout(()=>{var e;return null==(e=$.current)?void 0:e.focus()},50)},children:"Clear"}),(0,n.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>_(e=>({...e,open:!1})),children:"Close"})]})]})]})]})}}},e=>{e.O(0,[2903,2619,9208,1118,8441,1255,7358],()=>e(e.s=20748)),_N_E=e.O()}]);