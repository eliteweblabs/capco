(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2965],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},12108:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},23327:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},24033:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},27937:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},37494:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},48395:(e,s,t)=>{"use strict";t.d(s,{PoolerSettingsForm:()=>p});var a=t(95155),n=t(12115),r=t(86948),c=t(3998),l=t(65142),i=t(18653),d=t(63139),o=t(90240),m=t(67405),h=t(85710),u=t(56154),x=t(23327);function p(e){let{projectId:s,apiPort:t,serverHost:p,poolerPort:y,dbPort:f}=e,{isRunning:j}=(0,m.$)(s),[g,k]=(0,n.useState)(!0),[v,N]=(0,n.useState)({defaultPoolSize:20,maxClientConn:100,dbPoolSize:5}),{isSaving:b,saveSettings:A,showRestartModal:C,closeRestartModal:w}=(0,o._)({projectId:s,category:"pooler"});(0,n.useEffect)(()=>{M()},[s]);let M=async()=>{k(!0);try{let e=await fetch("/api/v1/projects/".concat(s,"/settings?category=pooler")),t=await e.json();t.success&&N(t.data)}catch(e){}finally{k(!1)}};return g?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(i.y,{size:"lg"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(r.Zp,{className:"border-brand/30 bg-brand/5",children:(0,a.jsx)(r.Wu,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-brand flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground",children:"Connection Pooler (Supavisor)"}),(0,a.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:"Configure the connection pooler to efficiently manage database connections and improve performance."})]})]})})}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Connection Information"}),(0,a.jsx)(r.BT,{children:"Use these ports to connect to your database"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-background-tertiary rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-foreground-muted"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Direct Connection"})]}),(0,a.jsxs)("code",{className:"text-sm font-mono",children:["localhost:",f]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted mt-2",children:"Bypass pooler for admin tasks or migrations"})]}),(0,a.jsxs)("div",{className:"p-4 bg-brand/5 border border-brand/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-brand"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Pooled Connection"})]}),(0,a.jsxs)("code",{className:"text-sm font-mono",children:["localhost:",y]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted mt-2",children:"Recommended for application connections"})]})]})})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"Pool Configuration"]}),(0,a.jsx)(r.BT,{children:"Configure connection pool sizes and limits"})]}),(0,a.jsxs)(r.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Default Pool Size"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.Input,{type:"number",value:v.defaultPoolSize,onChange:e=>N(s=>({...s,defaultPoolSize:parseInt(e.target.value,10)||20})),className:"w-32",min:1,max:1e3}),(0,a.jsx)("span",{className:"text-sm text-foreground-muted",children:"connections"})]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"Default number of connections per database pool. Range: 1-1000."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Max Client Connections"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.Input,{type:"number",value:v.maxClientConn,onChange:e=>N(s=>({...s,maxClientConn:parseInt(e.target.value,10)||100})),className:"w-32",min:1,max:1e4}),(0,a.jsx)("span",{className:"text-sm text-foreground-muted",children:"connections"})]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"Maximum number of client connections allowed. Range: 1-10000."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Database Pool Size"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.Input,{type:"number",value:v.dbPoolSize,onChange:e=>N(s=>({...s,dbPoolSize:parseInt(e.target.value,10)||5})),className:"w-32",min:1,max:100}),(0,a.jsx)("span",{className:"text-sm text-foreground-muted",children:"connections"})]}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"Number of connections to maintain with the database server. Range: 1-100."})]})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Recommendations"]})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-full bg-brand/10 flex items-center justify-center flex-shrink-0 text-brand font-medium",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Use pooled connections for your app"}),(0,a.jsxs)("p",{className:"text-foreground-muted",children:["Connect through port ",y," for better resource management and connection reuse."]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-full bg-brand/10 flex items-center justify-center flex-shrink-0 text-brand font-medium",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Use direct connections for migrations"}),(0,a.jsxs)("p",{className:"text-foreground-muted",children:["Connect through port ",f," for database migrations and schema changes."]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-full bg-brand/10 flex items-center justify-center flex-shrink-0 text-brand font-medium",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Tune pool size based on load"}),(0,a.jsx)("p",{className:"text-foreground-muted",children:"Start with defaults and adjust based on your application's connection patterns."})]})]})]})})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(c.Button,{onClick:()=>{A(v)},disabled:b,children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.y,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Changes"})})]}),(0,a.jsx)(d.v,{projectId:s,apiPort:t,serverHost:p,open:C,onClose:w})]})}},50803:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]])},51708:(e,s,t)=>{Promise.resolve().then(t.bind(t,48395)),Promise.resolve().then(t.bind(t,89405)),Promise.resolve().then(t.bind(t,62927))},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},56154:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},59427:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},61362:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},65229:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65993:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},78874:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},79451:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},85710:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},89559:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},90240:(e,s,t)=>{"use strict";t.d(s,{_:()=>l});var a=t(12115),n=t(20063),r=t(1275),c=t(67405);function l(e){let{projectId:s,category:t}=e,l=(0,n.useRouter)(),i=(0,r.d)(),{isRunning:d}=(0,c.$)(s),[o,m]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!1);return{isSaving:o,saveSettings:(0,a.useCallback)(async e=>{m(!0);try{let a=await fetch("/api/v1/projects/".concat(s,"/settings"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:t,settings:e})}),n=await a.json();if(!n.success)throw Error(n.error||"Failed to save settings");return l.refresh(),d?i.toast({type:"success",title:"Settings saved",description:"Restart required for changes to take effect",action:{label:"Restart Now",onClick:()=>u(!0)},duration:15e3}):i.success("Settings saved","Start the project to apply the new configuration"),{success:!0}}catch(s){let e=s instanceof Error?s.message:"An error occurred";return i.error("Failed to save settings",e),{success:!1,error:e}}finally{m(!1)}},[s,t,d,l,i]),showRestartModal:h,closeRestartModal:(0,a.useCallback)(()=>{u(!1)},[])}}},93499:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{e.O(0,[2903,2619,3227,8441,1255,7358],()=>e(e.s=51708)),_N_E=e.O()}]);