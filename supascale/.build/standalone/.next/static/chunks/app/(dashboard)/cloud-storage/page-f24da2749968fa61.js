(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3136],{6191:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},57553:(e,t,l)=>{"use strict";l.d(t,{I2:()=>s.ProviderCard,QE:()=>a.ProviderForm});var s=l(64479),a=l(87451);l(20485),l(58782)},71089:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>f});var s=l(95155),a=l(12115),r=l(52619),c=l.n(r),o=l(3998),d=l(86948),n=l(18653),i=l(57553),u=l(32320),x=l(85710),h=l(34172),m=l(20523),p=l(6191);function f(){let[e,t]=(0,a.useState)([]),[l,r]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),j=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/v1/cloud-storage"),l=await e.json();l.success?t(l.data):g(l.error||"Failed to fetch providers")}catch(e){g("Failed to fetch providers")}finally{r(!1)}},[]);(0,a.useEffect)(()=>{j()},[j]);let v=async e=>{var t,l;let s=await fetch("/api/v1/cloud-storage/".concat(e,"/test"),{method:"POST"}),a=await s.json();return j(),null!=(l=null==(t=a.data)?void 0:t.connected)&&l},b=async e=>{let t=await fetch("/api/v1/cloud-storage/".concat(e,"/default"),{method:"POST"}),l=await t.json();if(!l.success)throw Error(l.error||"Failed to set default");j()},N=e.length,y=e.filter(e=>["s3","r2","minio","backblaze"].includes(e.type)).length,w=e.filter(e=>"gcs"===e.type).length,A=e.filter(e=>"azure"===e.type).length,k=e.filter(e=>"local"===e.type).length,S=[{label:"Total",value:N,icon:u.A,color:"text-brand"},{label:"S3-compatible",value:y,icon:u.A,color:"text-info"},{label:"Google Cloud",value:w,icon:x.A,color:"text-success"},{label:"Azure",value:A,icon:h.A,color:"text-warning"},{label:"Local",value:k,icon:m.A,color:"text-foreground-muted"}].filter(e=>e.value>0||"Total"===e.label);return l?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)(n.y,{size:"lg"})}):f?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(d.Zp,{children:(0,s.jsxs)(d.Wu,{className:"p-12 text-center",children:[(0,s.jsx)("p",{className:"text-error",children:f}),(0,s.jsx)(o.Button,{onClick:j,className:"mt-4",children:"Retry"})]})})}):(0,s.jsxs)("div",{className:"space-y-6 px-4 sm:px-6 lg:px-8 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Cloud Storage"}),(0,s.jsx)("p",{className:"text-foreground-muted",children:"Configure external storage providers for backups and data export"})]}),(0,s.jsx)(c(),{href:"/cloud-storage/new",children:(0,s.jsxs)(o.Button,{children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Add Provider"]})})]}),e.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:S.map(e=>{let t=e.icon;return(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-background-tertiary ".concat(e.color),children:(0,s.jsx)(t,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.value}),(0,s.jsx)("p",{className:"text-sm text-foreground-muted",children:e.label})]})]})})},e.label)})}),0===e.length?(0,s.jsx)(d.Zp,{children:(0,s.jsxs)(d.Wu,{className:"p-12 text-center",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 mx-auto text-foreground-muted mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No storage providers"}),(0,s.jsx)("p",{className:"text-foreground-muted mb-4",children:"Add a cloud storage provider to enable backups and data export. Supports S3, Google Cloud Storage, Azure Blob Storage, and local filesystem."}),(0,s.jsx)(c(),{href:"/cloud-storage/new",children:(0,s.jsxs)(o.Button,{children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Add Provider"]})})]})}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsx)(i.I2,{provider:e,onTest:v,onSetDefault:b},e.id))})]})}},89046:(e,t,l)=>{Promise.resolve().then(l.bind(l,71089))}},e=>{e.O(0,[2903,2619,4529,8441,1255,7358],()=>e(e.s=89046)),_N_E=e.O()}]);