(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4112],{1275:(e,s,t)=>{"use strict";t.d(s,{d:()=>x,t:()=>h});var r=t(95155),n=t(12115),a=t(42529),o=t(6132),c=t(52056),i=t(23327),l=t(65229),d=t(64269);let u=(0,n.createContext)(void 0);function h(e){let{children:s}=e,[t,a]=(0,n.useState)([]),o=(0,n.useCallback)(e=>{var s;let t=Math.random().toString(36).slice(2,11);return a(s=>[...s,{...e,id:t}]),setTimeout(()=>{a(e=>e.filter(e=>e.id!==t))},null!=(s=e.duration)?s:e.action?1e4:5e3),t},[]),c=(0,n.useCallback)(e=>{a(s=>s.filter(s=>s.id!==e))},[]);return(0,r.jsxs)(u.Provider,{value:{toasts:t,addToast:o,removeToast:c},children:[s,(0,r.jsx)(m,{toasts:t,onRemove:c})]})}function x(){let e=(0,n.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return{toast:e.addToast,success:(s,t)=>e.addToast({type:"success",title:s,description:t}),error:(s,t)=>e.addToast({type:"error",title:s,description:t}),warning:(s,t)=>e.addToast({type:"warning",title:s,description:t}),info:(s,t)=>e.addToast({type:"info",title:s,description:t})}}function m(e){let{toasts:s,onRemove:t}=e;return(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full",children:s.map(e=>(0,r.jsx)(f,{toast:e,onRemove:t},e.id))})}let g={success:a.A,error:o.A,warning:c.A,info:i.A},p={success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"};function f(e){let{toast:s,onRemove:t}=e,n=g[s.type];return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-start gap-3 p-4 rounded-lg shadow-lg border","bg-background-elevated border-border","animate-in slide-in-from-right-full"),role:"alert",children:[(0,r.jsx)(n,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",p[s.type])}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:s.title}),s.description&&(0,r.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:s.description}),s.action&&(0,r.jsx)("button",{onClick:()=>{var e;null==(e=s.action)||e.onClick(),t(s.id)},className:"mt-2 text-sm font-medium text-brand hover:text-brand/80 transition-colors",children:s.action.label})]}),(0,r.jsxs)("button",{onClick:()=>t(s.id),className:"flex-shrink-0 text-foreground-muted hover:text-foreground transition-colors",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})}},3998:(e,s,t)=>{"use strict";t.d(s,{Button:()=>c});var r=t(95155),n=t(12115),a=t(64269),o=t(35299);let c=(0,n.forwardRef)((e,s)=>{let{className:t,variant:n="primary",size:c="md",loading:i,disabled:l,children:d,...u}=e;return(0,r.jsxs)("button",{ref:s,className:(0,a.cn)("\n      inline-flex items-center justify-center font-medium\n      transition-all duration-150 focus-visible:outline-none focus-visible:ring-1\n      focus-visible:ring-brand focus-visible:ring-offset-1\n      disabled:pointer-events-none disabled:opacity-50\n      rounded-lg\n    ",{primary:"\n        bg-brand text-white hover:bg-brand/90\n        border border-brand-secondary\n        shadow-xs active:shadow-none active:bg-brand-secondary\n      ",secondary:"\n        bg-background-tertiary text-foreground\n        border border-border hover:border-border-hover\n        hover:bg-background-elevated shadow-xs\n        active:shadow-none\n      ",ghost:"\n        text-foreground-secondary hover:text-foreground\n        hover:bg-background-tertiary\n        border border-transparent\n        active:bg-background-secondary\n      ",destructive:"\n        bg-error text-white hover:bg-error/90\n        border border-red-700\n        shadow-xs active:shadow-none active:bg-red-700\n      ",outline:"\n        border border-brand text-brand\n        hover:bg-brand/10\n        active:bg-brand/20\n      "}[n],{sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2",icon:"h-10 w-10"}[c],t),disabled:l||i,...u,children:[i&&(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),d]})});c.displayName="Button"},6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11647:(e,s,t)=>{"use strict";t.d(s,{E:()=>a});var r=t(95155),n=t(64269);function a(e){let{className:s,variant:t="default",...a}=e;return(0,r.jsx)("span",{className:(0,n.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[t],s),...a})}},11865:(e,s,t)=>{"use strict";t.d(s,{SecurityDashboard:()=>w});var r=t(95155),n=t(12115),a=t(86948),o=t(13406),c=t(3998),i=t(11647),l=t(18653),d=t(1275);function u(e){let{results:s}=e;if(!s)return(0,r.jsxs)("div",{className:"text-center py-12 text-foreground-muted",children:[(0,r.jsx)("svg",{className:"h-12 w-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),(0,r.jsx)("p",{className:"text-sm",children:"No audit results yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Run an audit to check for security vulnerabilities"})]});let{issues:t,summary:n}=s;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,r.jsx)(h,{label:"Total Issues",value:n.total,variant:n.total>0?"warning":"success"}),(0,r.jsx)(h,{label:"Critical",value:n.critical,variant:n.critical>0?"error":"success"}),(0,r.jsx)(h,{label:"High",value:n.high,variant:n.high>0?"error":"success"}),(0,r.jsx)(h,{label:"Medium",value:n.medium,variant:n.medium>0?"warning":"success"}),(0,r.jsx)(h,{label:"Low",value:n.low,variant:"secondary"})]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-8 bg-success/5 border border-success/20 rounded-lg",children:[(0,r.jsx)("svg",{className:"h-12 w-12 mx-auto mb-4 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-success font-medium",children:"No security issues found!"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Your RLS configuration looks good"})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-foreground-secondary",children:"Issues Found"}),t.map((e,s)=>(0,r.jsx)(x,{issue:e},s))]})]})}function h(e){let{label:s,value:t,variant:n}=e;return(0,r.jsxs)("div",{className:"rounded-lg border p-3 text-center ".concat({success:"bg-success/10 border-success/20 text-success",warning:"bg-warning/10 border-warning/20 text-warning",error:"bg-error/10 border-error/20 text-error",secondary:"bg-background-tertiary border-border text-foreground-secondary"}[n]),children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:t}),(0,r.jsx)("p",{className:"text-xs opacity-80",children:s})]})}function x(e){let{issue:s}=e;return(0,r.jsx)("div",{className:"rounded-lg border border-border bg-background-secondary p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(i.E,{variant:{critical:"error",high:"error",medium:"warning",low:"secondary"}[s.severity],children:s.severity.toUpperCase()}),(0,r.jsxs)("span",{className:"text-sm text-foreground-muted font-mono",children:[s.schema,".",s.table]})]}),(0,r.jsx)("p",{className:"text-sm font-medium",children:s.issue}),s.recommendation&&(0,r.jsxs)("p",{className:"text-xs text-foreground-muted mt-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Recommendation:"})," ",s.recommendation]})]}),(0,r.jsx)(m,{severity:s.severity})]})})}function m(e){let{severity:s}=e;return(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat({critical:"text-error",high:"text-error",medium:"text-warning",low:"text-foreground-muted"}[s]),children:"critical"===s||"high"===s?(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}function g(e){let{results:s}=e;if(!s)return(0,r.jsxs)("div",{className:"text-center py-12 text-foreground-muted",children:[(0,r.jsx)("svg",{className:"h-12 w-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-sm",children:"No coverage report yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Run a coverage scan to see RLS policy coverage"})]});let{tables:t,summary:n}=s;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(p,{percentage:n.coveragePercent}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-foreground-muted",children:"Tables with RLS"}),(0,r.jsxs)("span",{className:"font-medium",children:[n.tablesWithRLS," / ",n.totalTables]})]}),(0,r.jsx)("div",{className:"h-2 bg-background-tertiary rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full transition-all duration-500 ".concat(n.coveragePercent>=80?"bg-success":n.coveragePercent>=50?"bg-warning":"bg-error"),style:{width:"".concat(n.coveragePercent,"%")}})}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:n.coveragePercent>=80?"Good coverage! Most tables are protected by RLS.":n.coveragePercent>=50?"Moderate coverage. Consider adding RLS to more tables.":"Low coverage. Many tables are unprotected."})]})]}),t.length>0&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-foreground-secondary",children:["Tables (",t.length,")"]}),(0,r.jsx)("div",{className:"border border-border rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-background-tertiary border-b border-border",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left p-3 font-medium",children:"Table"}),(0,r.jsx)("th",{className:"text-center p-3 font-medium",children:"RLS"}),(0,r.jsx)("th",{className:"text-left p-3 font-medium",children:"Policies"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border",children:t.map((e,s)=>(0,r.jsx)(f,{table:e},s))})]})})]})]})}function p(e){let{percentage:s}=e,t=2*Math.PI*45;return(0,r.jsxs)("div",{className:"relative w-24 h-24",children:[(0,r.jsxs)("svg",{className:"w-24 h-24 transform -rotate-90",viewBox:"0 0 100 100",children:[(0,r.jsx)("circle",{className:"stroke-background-tertiary",strokeWidth:"8",fill:"transparent",r:45,cx:"50",cy:"50"}),(0,r.jsx)("circle",{className:"".concat(s>=80?"stroke-success":s>=50?"stroke-warning":"stroke-error"," transition-all duration-500"),strokeWidth:"8",fill:"transparent",r:45,cx:"50",cy:"50",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t-s/100*t})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsxs)("span",{className:"text-xl font-bold",children:[Math.round(s),"%"]}),(0,r.jsx)("span",{className:"text-xs text-foreground-muted",children:"Coverage"})]})]})}function f(e){let{table:s}=e;return(0,r.jsxs)("tr",{className:"hover:bg-background-secondary/50",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("span",{className:"font-mono text-sm",children:[s.schema,".",s.table]})}),(0,r.jsx)("td",{className:"p-3 text-center",children:s.hasRLS?(0,r.jsx)(i.E,{variant:"success",children:"Enabled"}):(0,r.jsx)(i.E,{variant:"error",children:"Disabled"})}),(0,r.jsx)("td",{className:"p-3",children:s.policies.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:s.policies.map((e,s)=>(0,r.jsx)(i.E,{variant:"secondary",className:"text-xs",children:e.command},s))}):(0,r.jsx)("span",{className:"text-foreground-muted text-xs",children:"No policies"})})]})}function j(e){let{results:s}=e;if(!s)return(0,r.jsxs)("div",{className:"text-center py-12 text-foreground-muted",children:[(0,r.jsx)("svg",{className:"h-12 w-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),(0,r.jsx)("p",{className:"text-sm",children:"No storage scan results yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Run a storage scan to test bucket RLS policies"})]});let{buckets:t,summary:n}=s;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-border bg-background-secondary p-4 text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:n.totalBuckets}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Total Buckets"})]}),(0,r.jsxs)("div",{className:"rounded-lg border p-4 text-center ".concat(n.publicBuckets>0?"border-warning/50 bg-warning/5":"border-success/50 bg-success/5"),children:[(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(n.publicBuckets>0?"text-warning":"text-success"),children:n.publicBuckets}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Public Buckets"})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-success/50 bg-success/5 p-4 text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-success",children:n.bucketsWithPolicies}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"With Policies"})]})]}),0===t.length?(0,r.jsx)("div",{className:"text-center py-8 bg-background-secondary rounded-lg border border-border",children:(0,r.jsx)("p",{className:"text-foreground-muted",children:"No storage buckets found"})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-foreground-secondary",children:["Buckets (",t.length,")"]}),t.map((e,s)=>(0,r.jsx)(v,{bucket:e},s))]})]})}function v(e){let{bucket:s}=e,t=s.issues.length>0,n=s.policies.every(e=>e.passed);return(0,r.jsxs)("div",{className:"rounded-lg border p-4 ".concat(t?"border-warning/50 bg-warning/5":"border-border bg-background-secondary"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-4",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:s.name}),(0,r.jsx)(i.E,{variant:s.isPublic?"warning":"secondary",children:s.isPublic?"Public":"Private"})]})}),s.policies.length>0&&(0,r.jsx)(i.E,{variant:n?"success":"error",children:n?"All tests passed":"Tests failed"})]}),s.policies.length>0&&(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsx)("p",{className:"text-xs text-foreground-muted font-medium",children:"Policy Tests"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:s.policies.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 rounded ".concat(e.passed?"bg-success/10 text-success":"bg-error/10 text-error"),children:[e.passed?(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("span",{className:"font-medium",children:e.operation}),e.message&&(0,r.jsxs)("span",{className:"text-xs opacity-75",children:["- ",e.message]})]},s))})]}),t&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-warning font-medium",children:"Issues"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm text-warning",children:s.issues.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]})]})}function b(e){let{projectId:s,isProjectRunning:t}=e,[o,u]=(0,n.useState)([]),[h,x]=(0,n.useState)(!0),[m,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),[j,v]=(0,n.useState)(null),[b,N]=(0,n.useState)(null),{toast:w}=(0,d.d)();async function k(){try{let e=await fetch("/api/v1/projects/".concat(s,"/security/snapshot")),t=await e.json();t.success&&u(t.data)}catch(e){console.error("Failed to fetch snapshots:",e)}finally{x(!1)}}async function L(){if(!t)return void w({type:"error",title:"Project not running",description:"Start the project before taking snapshots"});g(!0);try{let e=await fetch("/api/v1/projects/".concat(s,"/security/snapshot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"Snapshot ".concat(new Date().toLocaleString())})}),t=await e.json();if(t.success)w({type:"success",title:"Snapshot created",description:"Captured ".concat(t.data.snapshot.tablesCount," tables with ").concat(t.data.snapshot.policiesCount," policies")}),k();else throw Error(t.error)}catch(e){w({type:"error",title:"Failed to create snapshot",description:e instanceof Error?e.message:"Unknown error"})}finally{g(!1)}}async function C(e){if(!t)return void w({type:"error",title:"Project not running",description:"Start the project before running diff"});f(e),v(null);try{let t=await fetch("/api/v1/projects/".concat(s,"/security/snapshot"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({snapshotId:e})}),r=await t.json();if(r.success)v(r.data.diff),N(r.data.snapshot),w({type:"success",title:"Diff completed",description:"Found ".concat(r.data.diff.summary.added+r.data.diff.summary.removed+r.data.diff.summary.modified," changes")});else throw Error(r.error)}catch(e){w({type:"error",title:"Failed to run diff",description:e instanceof Error?e.message:"Unknown error"})}finally{f(null)}}async function S(e){try{let t=await fetch("/api/v1/projects/".concat(s,"/security/snapshot?snapshotId=").concat(e),{method:"DELETE"}),r=await t.json();if(r.success)w({type:"success",title:"Snapshot deleted"}),k(),(null==b?void 0:b.id)===e&&(N(null),v(null));else throw Error(r.error)}catch(e){w({type:"error",title:"Failed to delete snapshot",description:e instanceof Error?e.message:"Unknown error"})}}return((0,n.useEffect)(()=>{k()},[s]),h)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(l.y,{className:"h-8 w-8"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{children:"RLS Snapshots"}),(0,r.jsx)(a.BT,{children:"Take snapshots of your RLS policy state and compare changes over time"})]}),(0,r.jsx)(c.Button,{onClick:L,disabled:!t||m,children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.y,{className:"h-4 w-4 mr-2"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Snapshot"]})})]}),(0,r.jsx)(a.Wu,{children:0===o.length?(0,r.jsxs)("div",{className:"text-center py-12 text-foreground-muted",children:[(0,r.jsxs)("svg",{className:"h-12 w-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("p",{className:"text-sm",children:"No snapshots yet"}),(0,r.jsx)("p",{className:"text-xs mt-1",children:"Create a snapshot to capture the current RLS policy state"})]}):(0,r.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,r.jsx)("div",{className:"rounded-lg border p-4 ".concat((null==b?void 0:b.id)===e.id?"border-brand bg-brand/5":"border-border bg-background-secondary"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h4",{className:"font-medium",children:e.name||"Unnamed Snapshot"}),(null==b?void 0:b.id)===e.id&&(0,r.jsx)(i.E,{variant:"info",children:"Selected"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-foreground-muted",children:[(0,r.jsxs)("span",{children:[e.tablesCount," tables"]}),(0,r.jsxs)("span",{children:[e.policiesCount," policies"]}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Button,{variant:"secondary",size:"sm",onClick:()=>C(e.id),disabled:!t||null!==p,children:p===e.id?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.y,{className:"h-3 w-3 mr-1"}),"Comparing..."]}):"Compare"}),(0,r.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>S(e.id),className:"text-error hover:text-error hover:bg-error/10",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})})]}),j&&b&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:"Changes Since Snapshot"}),(0,r.jsxs)(a.BT,{children:['Comparing current state to "',b.name||"Unnamed Snapshot",'" from'," ",new Date(b.createdAt).toLocaleString()]})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)(y,{results:j})})]})]})}function y(e){let{results:s}=e,{changes:t,summary:n}=s;return 0===n.added+n.removed+n.modified?(0,r.jsxs)("div",{className:"text-center py-8 bg-success/5 border border-success/20 rounded-lg",children:[(0,r.jsx)("svg",{className:"h-12 w-12 mx-auto mb-4 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-success font-medium",children:"No changes detected"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Your RLS configuration matches the snapshot"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[n.added>0&&(0,r.jsxs)(i.E,{variant:"success",children:["+",n.added," Added"]}),n.removed>0&&(0,r.jsxs)(i.E,{variant:"error",children:["-",n.removed," Removed"]}),n.modified>0&&(0,r.jsxs)(i.E,{variant:"warning",children:["~",n.modified," Modified"]})]}),(0,r.jsx)("div",{className:"space-y-2",children:t.map((e,s)=>(0,r.jsx)(N,{change:e},s))})]})}function N(e){let{change:s}=e;return(0,r.jsxs)("div",{className:"rounded-lg border p-3 ".concat({added:"border-success/50 bg-success/5 text-success",removed:"border-error/50 bg-error/5 text-error",modified:"border-warning/50 bg-warning/5 text-warning"}[s.type]),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-mono font-bold text-lg",children:{added:"+",removed:"-",modified:"~"}[s.type]}),(0,r.jsxs)("span",{className:"font-mono text-sm",children:[s.schema,".",s.table,s.policy&&".".concat(s.policy)]})]}),s.details&&(0,r.jsx)("p",{className:"text-xs mt-1 opacity-75 font-mono",children:s.details})]})}function w(e){let{projectId:s,projectStatus:t,storageEnabled:i}=e,[h,x]=(0,n.useState)("audit"),[m,p]=(0,n.useState)({}),[f,v]=(0,n.useState)(!0),[y,N]=(0,n.useState)(null),{toast:w}=(0,d.d)(),L="running"===t;async function C(){try{let e=await fetch("/api/v1/projects/".concat(s,"/security/history?latest=true")),t=await e.json();t.success&&p(t.data)}catch(e){console.error("Failed to fetch security history:",e)}finally{v(!1)}}async function S(e){if(!L)return void w({type:"error",title:"Project not running",description:"Start the project before running security scans"});N(e);try{let t=await fetch("/api/v1/projects/".concat(s,"/security/").concat(e),{method:"POST"}),r=await t.json();if(r.success)w({type:"success",title:"Scan completed",description:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," scan completed successfully")}),C();else throw Error(r.error)}catch(e){w({type:"error",title:"Scan failed",description:e instanceof Error?e.message:"Unknown error"})}finally{N(null)}}function M(e){let s=m[e];return s?{status:s.status,completedAt:s.completedAt,duration:s.duration}:null}return((0,n.useEffect)(()=>{C()},[s]),f)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)(l.y,{className:"h-8 w-8"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[!L&&(0,r.jsx)(a.Zp,{className:"border-warning/50 bg-warning/5",children:(0,r.jsx)(a.Wu,{className:"py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("svg",{className:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsx)("p",{className:"text-sm text-warning",children:"Project must be running to perform security scans. Start the project first."})]})})}),(0,r.jsxs)(o.tU,{value:h,onValueChange:x,children:[(0,r.jsxs)(o.j7,{children:[(0,r.jsx)(o.Xi,{value:"audit",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Audit"]})}),(0,r.jsx)(o.Xi,{value:"coverage",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Coverage"]})}),(0,r.jsx)(o.Xi,{value:"storage",disabled:!i,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"Storage"]})}),(0,r.jsx)(o.Xi,{value:"snapshots",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Snapshots"]})})]}),(0,r.jsx)(o.av,{value:"audit",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{children:"Security Audit"}),(0,r.jsx)(a.BT,{children:"Scan for common RLS security vulnerabilities and misconfigurations"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(k,{status:M("audit")}),(0,r.jsx)(c.Button,{onClick:()=>S("audit"),disabled:!L||null!==y,children:"audit"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.y,{className:"h-4 w-4 mr-2"}),"Scanning..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Run Audit"]})})]})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)(u,{results:function(){var e;let s=m.audit;return null==s||null==(e=s.results)?void 0:e.audit}()})})]})}),(0,r.jsx)(o.av,{value:"coverage",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{children:"RLS Coverage"}),(0,r.jsx)(a.BT,{children:"View which tables have Row Level Security enabled and their policy coverage"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(k,{status:M("coverage")}),(0,r.jsx)(c.Button,{onClick:()=>S("coverage"),disabled:!L||null!==y,children:"coverage"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.y,{className:"h-4 w-4 mr-2"}),"Scanning..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"Check Coverage"]})})]})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)(g,{results:function(){var e;let s=m.coverage;return null==s||null==(e=s.results)?void 0:e.coverage}()})})]})}),(0,r.jsx)(o.av,{value:"storage",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{children:"Storage Security"}),(0,r.jsx)(a.BT,{children:"Test RLS policies for Supabase Storage buckets"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(k,{status:M("storage")}),(0,r.jsx)(c.Button,{onClick:()=>S("storage"),disabled:!L||null!==y||!i,children:"storage"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.y,{className:"h-4 w-4 mr-2"}),"Scanning..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"Test Storage"]})})]})]}),(0,r.jsx)(a.Wu,{children:i?(0,r.jsx)(j,{results:function(){var e;let s=m.storage;return null==s||null==(e=s.results)?void 0:e.storage}()}):(0,r.jsx)("p",{className:"text-sm text-foreground-muted text-center py-8",children:"Storage service is not enabled for this project"})})]})}),(0,r.jsx)(o.av,{value:"snapshots",children:(0,r.jsx)(b,{projectId:s,isProjectRunning:L})})]})]})}function k(e){let{status:s}=e;if(!s)return(0,r.jsx)(i.E,{variant:"secondary",children:"No scans"});if("completed"===s.status){let e=s.completedAt?function(e){let s=new Date,t=new Date(e),r=s.getTime()-t.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),o=Math.floor(r/864e5);return n<1?"just now":n<60?"".concat(n,"m ago"):a<24?"".concat(a,"h ago"):o<7?"".concat(o,"d ago"):t.toLocaleDateString()}(s.completedAt):"";return(0,r.jsxs)(i.E,{variant:"success",title:"Completed ".concat(e).concat(s.duration?" in ".concat(s.duration,"ms"):""),children:["Last: ",e]})}return"failed"===s.status?(0,r.jsx)(i.E,{variant:"error",children:"Failed"}):"running"===s.status?(0,r.jsx)(i.E,{variant:"info",children:"Running..."}):(0,r.jsx)(i.E,{variant:"secondary",children:s.status})}},13406:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>l,av:()=>d,j7:()=>i,tU:()=>c});var r=t(95155),n=t(12115),a=t(64269);let o=(0,n.createContext)(void 0);function c(e){let{defaultValue:s,value:t,children:c,className:i,onValueChange:l}=e,[d,u]=(0,n.useState)(s||t||""),h=void 0!==t?t:d;return(0,r.jsx)(o.Provider,{value:{activeTab:h,setActiveTab:e=>{void 0===t&&u(e),null==l||l(e)}},children:(0,r.jsx)("div",{className:(0,a.cn)("w-full",i),children:c})})}function i(e){let{children:s,className:t}=e;return(0,r.jsx)("div",{className:(0,a.cn)("inline-flex items-center gap-1 p-1 rounded-lg bg-background-tertiary border border-border",t),role:"tablist",children:s})}function l(e){let{value:s,children:t,className:c,disabled:i}=e,l=(0,n.useContext)(o);if(!l)throw Error("TabsTrigger must be used within Tabs");let{activeTab:d,setActiveTab:u}=l,h=d===s;return(0,r.jsx)("button",{role:"tab","aria-selected":h,"aria-controls":"panel-".concat(s),disabled:i,onClick:()=>u(s),className:(0,a.cn)("px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-150","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-brand",h?"bg-background-elevated text-foreground shadow-xs":"text-foreground-secondary hover:text-foreground hover:bg-background-secondary",i&&"opacity-50 cursor-not-allowed",c),children:t})}function d(e){let{value:s,children:t,className:c}=e,i=(0,n.useContext)(o);if(!i)throw Error("TabsContent must be used within Tabs");let{activeTab:l}=i;return l!==s?null:(0,r.jsx)("div",{role:"tabpanel",id:"panel-".concat(s),className:(0,a.cn)("mt-4",c),children:t})}},18653:(e,s,t)=>{"use strict";t.d(s,{y:()=>a});var r=t(95155),n=t(64269);function a(e){let{size:s="md",className:t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("animate-spin rounded-full border-2 border-current border-t-transparent text-brand",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[s],t),children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})}},23327:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},27937:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},37494:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},59427:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},62927:(e,s,t)=>{"use strict";t.d(s,{Header:()=>g});var r=t(95155),n=t(12115),a=t(59427),o=t(37494),c=t(79451),i=t(64269);function l(){let[e,s]=(0,n.useState)("system"),[t,i]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i(!0);let e=localStorage.getItem("theme");e&&s(e)},[]),(0,n.useEffect)(()=>{if(!t)return;let s=document.documentElement,r=e=>{s.setAttribute("data-theme",e),s.classList.remove("light","dark"),s.classList.add(e)};if("system"===e){let e=window.matchMedia("(prefers-color-scheme: dark)");r(e.matches?"dark":"light");let s=e=>{r(e.matches?"dark":"light")};return e.addEventListener("change",s),()=>e.removeEventListener("change",s)}r(e)},[e,t]);let l=e=>{s(e),localStorage.setItem("theme",e)};return t?(0,r.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-background-tertiary border border-border",children:[(0,r.jsx)(d,{active:"light"===e,onClick:()=>l("light"),title:"Light mode",children:(0,r.jsx)(a.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{active:"dark"===e,onClick:()=>l("dark"),title:"Dark mode",children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}),(0,r.jsx)(d,{active:"system"===e,onClick:()=>l("system"),title:"System theme",children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-background-tertiary",children:[(0,r.jsx)("div",{className:"h-8 w-8"}),(0,r.jsx)("div",{className:"h-8 w-8"}),(0,r.jsx)("div",{className:"h-8 w-8"})]})}function d(e){let{active:s,onClick:t,title:n,children:a}=e;return(0,r.jsx)("button",{onClick:t,title:n,className:(0,i.cn)("h-8 w-8 flex items-center justify-center rounded-md transition-colors",s?"bg-background-elevated text-brand shadow-sm":"text-foreground-muted hover:text-foreground"),children:a})}var u=t(3998),h=t(6191),x=t(52619),m=t.n(x);function g(e){let{title:s,description:t,showCreateButton:n=!0}=e;return(0,r.jsxs)("header",{className:"sticky top-0 z-30 flex items-center justify-between h-14 lg:h-16 px-4 lg:px-6 bg-background/95 backdrop-blur-sm border-b border-border",children:[(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[s&&(0,r.jsx)("h1",{className:"text-lg lg:text-xl font-semibold text-foreground truncate",children:s}),t&&(0,r.jsx)("p",{className:"text-xs lg:text-sm text-foreground-secondary truncate",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 ml-4",children:[n&&(0,r.jsxs)(m(),{href:"/projects/new",children:[(0,r.jsxs)(u.Button,{size:"sm",className:"hidden sm:flex",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"New Project"]}),(0,r.jsx)(u.Button,{size:"icon",className:"sm:hidden h-8 w-8",children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(l,{})]})]})}},64269:(e,s,t)=>{"use strict";t.d(s,{Ye:()=>d,Yq:()=>l,cn:()=>a,fw:()=>c,mo:()=>i,z3:()=>o});var r=t(2821),n=t(75889);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,r.$)(s))}let o=function(e){if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,s)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][s])};function c(e){let s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<604800?"".concat(Math.floor(r/86400),"d ago"):t.toLocaleDateString()}function i(e){let s,t=new Date,r=new Date(e),n=r.getTime()-t.getTime(),a=Math.abs(Math.floor(n/1e3));if(a<60)s="less than a minute";else if(a<3600){let e=Math.floor(a/60);s="".concat(e," minute").concat(e>1?"s":"")}else if(a<86400){let e=Math.floor(a/3600);s="".concat(e," hour").concat(e>1?"s":"")}else{if(!(a<604800))return r.toLocaleDateString();let e=Math.floor(a/86400);s="".concat(e," day").concat(e>1?"s":"")}return n>0?"in ".concat(s):"".concat(s," ago")}function l(e){return new Date(e).toLocaleString()}function d(e){return e.toLowerCase().replace(/[^a-z0-9_-]/g,"-").replace(/^[^a-z0-9]/,"").replace(/-+/g,"-").slice(0,50)}},65229:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65993:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},79451:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},86948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>o,aR:()=>c});var r=t(95155),n=t(12115),a=t(64269);let o=(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",t),...n})});o.displayName="Card";let c=(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});c.displayName="CardHeader";let i=(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",t),...n})});i.displayName="CardTitle";let l=(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-foreground-secondary",t),...n})});l.displayName="CardDescription";let d=(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",(0,n.forwardRef)((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},89158:(e,s,t)=>{Promise.resolve().then(t.bind(t,89405)),Promise.resolve().then(t.bind(t,62927)),Promise.resolve().then(t.bind(t,11865))},89405:(e,s,t)=>{"use strict";t.d(s,{Breadcrumb:()=>l});var r=t(95155),n=t(52619),a=t.n(n),o=t(65993),c=t(27937),i=t(64269);function l(e){let{items:s,className:t}=e;return(0,r.jsxs)("nav",{"aria-label":"Breadcrumb",className:(0,i.cn)("flex items-center gap-1 text-sm",t),children:[(0,r.jsx)(a(),{href:"/",className:"text-foreground-muted hover:text-foreground transition-colors",children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}),s.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 text-foreground-muted"}),e.href&&t<s.length-1?(0,r.jsx)(a(),{href:e.href,className:"text-foreground-muted hover:text-foreground transition-colors",children:e.label}):(0,r.jsx)("span",{className:"text-foreground font-medium",children:e.label})]},e.label))]})}}},e=>{e.O(0,[2903,2619,8441,1255,7358],()=>e(e.s=89158)),_N_E=e.O()}]);