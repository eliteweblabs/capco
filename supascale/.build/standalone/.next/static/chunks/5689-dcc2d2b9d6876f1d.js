(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5689],{1275:(e,t,s)=>{"use strict";s.d(t,{d:()=>x,t:()=>m});var r=s(95155),a=s(12115),n=s(42529),o=s(6132),i=s(52056),l=s(23327),c=s(65229),d=s(64269);let u=(0,a.createContext)(void 0);function m(e){let{children:t}=e,[s,n]=(0,a.useState)([]),o=(0,a.useCallback)(e=>{var t;let s=Math.random().toString(36).slice(2,11);return n(t=>[...t,{...e,id:s}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==s))},null!=(t=e.duration)?t:e.action?1e4:5e3),s},[]),i=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(u.Provider,{value:{toasts:s,addToast:o,removeToast:i},children:[t,(0,r.jsx)(h,{toasts:s,onRemove:i})]})}function x(){let e=(0,a.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return{toast:e.addToast,success:(t,s)=>e.addToast({type:"success",title:t,description:s}),error:(t,s)=>e.addToast({type:"error",title:t,description:s}),warning:(t,s)=>e.addToast({type:"warning",title:t,description:s}),info:(t,s)=>e.addToast({type:"info",title:t,description:s})}}function h(e){let{toasts:t,onRemove:s}=e;return(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full",children:t.map(e=>(0,r.jsx)(b,{toast:e,onRemove:s},e.id))})}let p={success:n.A,error:o.A,warning:i.A,info:l.A},f={success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"};function b(e){let{toast:t,onRemove:s}=e,a=p[t.type];return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-start gap-3 p-4 rounded-lg shadow-lg border","bg-background-elevated border-border","animate-in slide-in-from-right-full"),role:"alert",children:[(0,r.jsx)(a,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",f[t.type])}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:t.description}),t.action&&(0,r.jsx)("button",{onClick:()=>{var e;null==(e=t.action)||e.onClick(),s(t.id)},className:"mt-2 text-sm font-medium text-brand hover:text-brand/80 transition-colors",children:t.action.label})]}),(0,r.jsxs)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 text-foreground-muted hover:text-foreground transition-colors",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})}},3832:()=>{},3998:(e,t,s)=>{"use strict";s.d(t,{Button:()=>i});var r=s(95155),a=s(12115),n=s(64269),o=s(35299);let i=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="primary",size:i="md",loading:l,disabled:c,children:d,...u}=e;return(0,r.jsxs)("button",{ref:t,className:(0,n.cn)("\n      inline-flex items-center justify-center font-medium\n      transition-all duration-150 focus-visible:outline-none focus-visible:ring-1\n      focus-visible:ring-brand focus-visible:ring-offset-1\n      disabled:pointer-events-none disabled:opacity-50\n      rounded-lg\n    ",{primary:"\n        bg-brand text-white hover:bg-brand/90\n        border border-brand-secondary\n        shadow-xs active:shadow-none active:bg-brand-secondary\n      ",secondary:"\n        bg-background-tertiary text-foreground\n        border border-border hover:border-border-hover\n        hover:bg-background-elevated shadow-xs\n        active:shadow-none\n      ",ghost:"\n        text-foreground-secondary hover:text-foreground\n        hover:bg-background-tertiary\n        border border-transparent\n        active:bg-background-secondary\n      ",destructive:"\n        bg-error text-white hover:bg-error/90\n        border border-red-700\n        shadow-xs active:shadow-none active:bg-red-700\n      ",outline:"\n        border border-brand text-brand\n        hover:bg-brand/10\n        active:bg-brand/20\n      "}[a],{sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2",icon:"h-10 w-10"}[i],s),disabled:c||l,...u,children:[l&&(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),d]})});i.displayName="Button"},11647:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(95155),a=s(64269);function n(e){let{className:t,variant:s="default",...n}=e;return(0,r.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[s],t),...n})}},18653:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var r=s(95155),a=s(64269);function n(e){let{size:t="md",className:s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-current border-t-transparent text-brand",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],s),children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})}},39297:(e,t,s)=>{"use strict";s.d(t,{ContainerSelector:()=>l});var r=s(95155),a=s(12115),n=s(18653),o=s(6132),i=s(16140);function l(e){let{projectId:t,value:s,onChange:l,disabled:c}=e,[d,u]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null);return((0,a.useEffect)(()=>{if(!t){u([]),x(!1);return}(async()=>{x(!0),p(null);try{let e=await fetch("/api/v1/projects/".concat(t,"/containers")),r=await e.json();if(r.success){let e=r.data.map(e=>e.service);u(e),!s&&e.length>0&&l(e[0])}else p(r.error||"Failed to fetch containers"),u([])}catch(e){p("Failed to fetch containers"),u([])}finally{x(!1)}})()},[t]),m)?(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-background-tertiary rounded-lg",children:[(0,r.jsx)(n.y,{size:"sm"}),(0,r.jsx)("span",{className:"text-sm text-foreground-muted",children:"Loading containers..."})]}):h?(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-error/10 border border-error/20 rounded-lg",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 text-error"}),(0,r.jsx)("span",{className:"text-sm text-error",children:h})]}):0===d.length?(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[(0,r.jsx)(o.A,{className:"h-4 w-4 text-warning"}),(0,r.jsx)("span",{className:"text-sm text-warning",children:"No containers found. Make sure the project is running."})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Container"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:d.map(e=>(0,r.jsxs)("button",{type:"button",disabled:c,onClick:()=>l(e),className:"p-3 border rounded-lg text-left transition-colors flex items-center gap-2 ".concat(s===e?"border-brand bg-brand/10":"border-border hover:border-brand/50"," ").concat(c?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)(i.A,{className:"h-4 w-4 flex-shrink-0 ".concat(s===e?"text-brand":"text-foreground-muted")}),(0,r.jsx)("span",{className:"text-sm font-mono truncate",children:e})]},e))})]})}},42914:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,52619,23)),Promise.resolve().then(s.bind(s,39297)),Promise.resolve().then(s.bind(s,69539)),Promise.resolve().then(s.bind(s,97438)),Promise.resolve().then(s.bind(s,89362)),Promise.resolve().then(s.bind(s,57384)),Promise.resolve().then(s.bind(s,50898)),Promise.resolve().then(s.bind(s,3998))},44846:(e,t,s)=>{"use strict";s.d(t,{d:()=>o});var r=s(95155),a=s(12115),n=s(64269);let o=(0,a.forwardRef)((e,t)=>{let{className:s,checked:a,onCheckedChange:o,onChange:i,...l}=e;return(0,r.jsxs)("label",{className:(0,n.cn)("relative inline-flex cursor-pointer items-center",s),children:[(0,r.jsx)("input",{type:"checkbox",role:"switch",className:"peer sr-only",ref:t,checked:a,onChange:e=>{null==i||i(e),null==o||o(e.target.checked)},...l}),(0,r.jsx)("div",{className:(0,n.cn)("h-6 w-11 rounded-full transition-colors","bg-background-tertiary border border-border","peer-checked:bg-brand peer-checked:border-brand","peer-focus-visible:ring-2 peer-focus-visible:ring-brand peer-focus-visible:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50","after:absolute after:left-[2px] after:top-[2px]","after:h-5 after:w-5 after:rounded-full","after:bg-white after:shadow-sm","after:transition-transform","peer-checked:after:translate-x-5")})]})});o.displayName="Switch"},50898:(e,t,s)=>{"use strict";s.d(t,{TaskTypeSelector:()=>c});var r=s(95155),a=s(83457),n=s(89559),o=s(50803),i=s(1375);let l=[{id:"health-check",label:"Health Check",description:"Monitor project health and optionally auto-restart on failure",icon:a.A},{id:"container-update",label:"Container Update",description:"Automatically pull and update container images",icon:n.A},{id:"custom",label:"Custom Command",description:"Run custom commands inside project containers",icon:o.A},{id:"backup",label:"Scheduled Backup",description:"Automatically backup database, storage, functions, or config",icon:i.A}];function c(e){let{value:t,onChange:s,disabled:a}=e;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Task Type"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:l.map(e=>{let n=e.icon,o=t===e.id;return(0,r.jsxs)("button",{type:"button",disabled:a,onClick:()=>s(e.id),className:"p-4 border rounded-lg text-left transition-colors ".concat(o?"border-brand bg-brand/10":"border-border hover:border-brand/50"," ").concat(a?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)(n,{className:"h-5 w-5 mb-2 ".concat(o?"text-brand":"text-foreground-muted")}),(0,r.jsx)("p",{className:"font-medium",children:e.label}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:e.description})]},e.id)})})]})}},57384:(e,t,s)=>{"use strict";s.d(t,{TaskList:()=>i});var r=s(95155),a=s(12115),n=s(97438),o=s(1275);function i(e){let{initialTasks:t,projectMap:s}=e,i=(0,o.d)(),[l,c]=(0,a.useState)(t),d=async(e,t)=>{c(s=>s.map(s=>s.id===e?{...s,enabled:t}:s));try{let s=await fetch("/api/v1/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:t})}),r=await s.json();r.success?i.success("Task updated","Task ".concat(t?"enabled":"disabled")):(c(s=>s.map(s=>s.id===e?{...s,enabled:!t}:s)),i.error("Failed to update task",r.error||"Unknown error"))}catch(s){c(s=>s.map(s=>s.id===e?{...s,enabled:!t}:s)),i.error("Failed to update task","Network error")}},u=async e=>{let t=l.find(t=>t.id===e);if(t){c(t=>t.map(t=>t.id===e?{...t,lastRunStatus:"running"}:t));try{let s=await fetch("/api/v1/tasks/".concat(e,"/run"),{method:"POST",headers:{"Content-Type":"application/json"}}),r=await s.json();r.success?(c(t=>t.map(t=>t.id===e?{...t,lastRunStatus:"success",lastRun:new Date().toISOString(),lastRunError:void 0}:t)),i.success("Task completed","".concat(t.name," executed successfully"))):(c(t=>t.map(t=>t.id===e?{...t,lastRunStatus:"failure",lastRun:new Date().toISOString(),lastRunError:r.error}:t)),i.error("Task failed",r.error||"Unknown error"))}catch(t){c(t=>t.map(t=>t.id===e?{...t,lastRunStatus:"failure",lastRun:new Date().toISOString(),lastRunError:"Network error"}:t)),i.error("Task failed","Network error")}}};return(0,r.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,r.jsx)(n.TaskCard,{task:e,projectName:s[e.projectId]||"Unknown Project",onToggle:d,onRun:u},e.id))})}},64269:(e,t,s)=>{"use strict";s.d(t,{Ye:()=>d,Yq:()=>c,cn:()=>n,fw:()=>i,mo:()=>l,z3:()=>o});var r=s(2821),a=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}let o=function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][t])};function i(e){let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<604800?"".concat(Math.floor(r/86400),"d ago"):s.toLocaleDateString()}function l(e){let t,s=new Date,r=new Date(e),a=r.getTime()-s.getTime(),n=Math.abs(Math.floor(a/1e3));if(n<60)t="less than a minute";else if(n<3600){let e=Math.floor(n/60);t="".concat(e," minute").concat(e>1?"s":"")}else if(n<86400){let e=Math.floor(n/3600);t="".concat(e," hour").concat(e>1?"s":"")}else{if(!(n<604800))return r.toLocaleDateString();let e=Math.floor(n/86400);t="".concat(e," day").concat(e>1?"s":"")}return a>0?"in ".concat(t):"".concat(t," ago")}function c(e){return new Date(e).toLocaleString()}function d(e){return e.toLowerCase().replace(/[^a-z0-9_-]/g,"-").replace(/^[^a-z0-9]/,"").replace(/-+/g,"-").slice(0,50)}},65142:(e,t,s)=>{"use strict";s.d(t,{Input:()=>o});var r=s(95155),a=s(12115),n=s(64269);let o=(0,a.forwardRef)((e,t)=>{let{className:s,type:a="text",error:o,icon:i,...l}=e;return(0,r.jsxs)("div",{className:"relative",children:[i&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",children:i}),(0,r.jsx)("input",{type:a,className:(0,n.cn)("\n            w-full h-10 px-3 py-2\n            bg-background-tertiary text-foreground\n            border border-border rounded-lg shadow-2xs\n            placeholder:text-foreground-muted\n            hover:border-border-hover\n            focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-brand focus-visible:border-transparent\n            disabled:cursor-not-allowed disabled:opacity-50\n            transition-all duration-150\n            ",i&&"pl-10",o&&"border-error focus-visible:ring-error hover:border-error",s),ref:t,...l})]})});o.displayName="Input"},69539:(e,t,s)=>{"use strict";s.d(t,{CronBuilder:()=>x});var r=s(95155),a=s(12115),n=s(65142),o=s(11647),i=s(61362),l=s(78874),c=s(26983),d=s(42582);let u=[{label:"Every hour",value:"0 * * * *",description:"At minute 0 of every hour"},{label:"Every 6 hours",value:"0 */6 * * *",description:"At minute 0, every 6 hours"},{label:"Daily at midnight",value:"0 0 * * *",description:"Every day at 00:00"},{label:"Daily at 3 AM",value:"0 3 * * *",description:"Every day at 03:00"},{label:"Daily at 6 AM",value:"0 6 * * *",description:"Every day at 06:00"},{label:"Weekly on Sunday",value:"0 0 * * 0",description:"Every Sunday at 00:00"},{label:"Weekly on Monday",value:"0 0 * * 1",description:"Every Monday at 00:00"},{label:"Monthly",value:"0 0 1 * *",description:"First day of every month at 00:00"}];function m(e){try{return d.CronExpressionParser.parse(e),{valid:!0}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Invalid cron expression"}}}function x(e){let{value:t,onChange:s,timezone:d="UTC",disabled:x}=e,[h,p]=(0,a.useState)("preset"),[f,b]=(0,a.useState)(t),[g,j]=(0,a.useState)(!0),[v,y]=(0,a.useState)();(0,a.useEffect)(()=>{u.find(e=>e.value===t)?p("preset"):t&&(p("custom"),b(t))},[]),(0,a.useEffect)(()=>{if("custom"===h&&f){let e=m(f);j(e.valid),y(e.error)}else j(!0),y(void 0)},[f,h]);let N=function(e){try{let t=e.split(" ");if(5!==t.length)return e;let[s,r,a,n,o]=t;if("0"===s&&"*"===r&&"*"===a&&"*"===n&&"*"===o)return"Every hour";if("*"!==s&&"*"===r&&"*"===a&&"*"===n&&"*"===o)return"Every hour at minute ".concat(s);if("*"!==s&&"*"!==r&&"*"===a&&"*"===n&&"*"===o)return"Every day at ".concat(r.padStart(2,"0"),":").concat(s.padStart(2,"0"));if("*"!==s&&"*"!==r&&"*"===a&&"*"===n&&"*"!==o){let e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(o)]||o;return"Every ".concat(e," at ").concat(r.padStart(2,"0"),":").concat(s.padStart(2,"0"))}if("*"!==s&&"*"!==r&&"*"!==a&&"*"===n&&"*"===o)return"Monthly on day ".concat(a," at ").concat(r.padStart(2,"0"),":").concat(s.padStart(2,"0"));return e}catch(t){return e}}(t);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Schedule"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",disabled:x,onClick:()=>p("preset"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("preset"===h?"bg-brand text-white":"bg-background-tertiary text-foreground-muted hover:bg-background-secondary"," ").concat(x?"opacity-50 cursor-not-allowed":""),children:"Presets"}),(0,r.jsx)("button",{type:"button",disabled:x,onClick:()=>{p("custom"),f||b(t||"0 0 * * *")},className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("custom"===h?"bg-brand text-white":"bg-background-tertiary text-foreground-muted hover:bg-background-secondary"," ").concat(x?"opacity-50 cursor-not-allowed":""),children:"Custom"})]})]}),"preset"===h?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:u.map(e=>(0,r.jsxs)("button",{type:"button",disabled:x,onClick:()=>{p("preset"),b(e.value),s(e.value)},className:"p-3 border rounded-lg text-left transition-colors ".concat(t===e.value?"border-brand bg-brand/10":"border-border hover:border-brand/50"," ").concat(x?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.label}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted mt-0.5",children:e.description})]},e.value))}):(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.Input,{value:f,onChange:e=>{var t;b(t=e.target.value),m(t).valid&&s(t)},placeholder:"0 0 * * *",className:"font-mono ".concat(g?"":"border-error"),disabled:x}),g?(0,r.jsx)(i.A,{className:"h-5 w-5 text-success flex-shrink-0"}):(0,r.jsx)(l.A,{className:"h-5 w-5 text-error flex-shrink-0"})]}),v&&(0,r.jsx)("p",{className:"text-xs text-error",children:v}),(0,r.jsxs)("div",{className:"p-3 bg-background-tertiary rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs text-foreground-muted mb-2",children:"Cron format: minute hour day month weekday"}),(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-2 text-xs text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono text-foreground",children:f.split(" ")[0]||"*"}),(0,r.jsx)("p",{className:"text-foreground-muted",children:"min"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono text-foreground",children:f.split(" ")[1]||"*"}),(0,r.jsx)("p",{className:"text-foreground-muted",children:"hour"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono text-foreground",children:f.split(" ")[2]||"*"}),(0,r.jsx)("p",{className:"text-foreground-muted",children:"day"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono text-foreground",children:f.split(" ")[3]||"*"}),(0,r.jsx)("p",{className:"text-foreground-muted",children:"month"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-mono text-foreground",children:f.split(" ")[4]||"*"}),(0,r.jsx)("p",{className:"text-foreground-muted",children:"weekday"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-background-secondary rounded-lg",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 text-foreground-muted"}),(0,r.jsx)("span",{className:"text-sm text-foreground",children:N}),(0,r.jsx)(o.E,{variant:"secondary",className:"ml-auto",children:d})]})]})}},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>i});var r=s(95155),a=s(12115),n=s(64269);let o=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",s),...a})});o.displayName="Card";let i=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let l=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",s),...a})});l.displayName="CardTitle";let c=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground-secondary",s),...a})});c.displayName="CardDescription";let d=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},89362:(e,t,s)=>{"use strict";s.d(t,{TaskForm:()=>b});var r=s(95155),a=s(12115),n=s(20063),o=s(86948),i=s(3998),l=s(65142),c=s(44846),d=s(18653),u=s(1275),m=s(50898),x=s(69539),h=s(39297),p=s(71360),f=s(46046);function b(e){var t,s;let{task:b,projects:g,onSuccess:j}=e,v=(0,n.useRouter)(),y=(0,u.d)(),[N,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[S,T]=(0,a.useState)((null==b?void 0:b.name)||""),[A,E]=(0,a.useState)(null==(s=null==b?void 0:b.enabled)||s),[R,B]=(0,a.useState)((null==b?void 0:b.type)||"health-check"),[O,D]=(0,a.useState)((null==b?void 0:b.projectId)||(null==(t=g[0])?void 0:t.id)||""),[P,F]=(0,a.useState)((null==b?void 0:b.cronExpression)||"0 0 * * *"),[M,I]=(0,a.useState)((null==b?void 0:b.timezone)||"UTC"),[U,Z]=(0,a.useState)((null==b?void 0:b.healthCheckConfig)||{notifyOnFailure:!0,autoRestart:!1,checkEndpoint:void 0,timeoutSeconds:30}),[L,W]=(0,a.useState)((null==b?void 0:b.containerUpdateConfig)||{services:[],pullOnly:!1,notifyOnUpdate:!0}),[z,q]=(0,a.useState)((null==b?void 0:b.customConfig)||{container:"",command:"",workDir:void 0,timeoutSeconds:60,captureOutput:!0}),[_,H]=(0,a.useState)((null==b?void 0:b.backupConfig)||{backupType:"full",destination:"local",encrypt:!1,retentionCount:10,notifyOnSuccess:!1,notifyOnFailure:!0}),Y=!!b,J=async e=>{if(e.preventDefault(),!S.trim())return void y.error("Name required","Please enter a task name");if(!O)return void y.error("Project required","Please select a project");if("custom"===R&&!z.container)return void y.error("Container required","Please select a container for custom commands");if("custom"===R&&!z.command.trim())return void y.error("Command required","Please enter a command to run");k(!0);try{let e=Y?"/api/v1/tasks/".concat(b.id):"/api/v1/tasks",t=await fetch(e,{method:Y?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,enabled:A,type:R,projectId:O,cronExpression:P,timezone:M,healthCheckConfig:"health-check"===R?U:void 0,containerUpdateConfig:"container-update"===R?L:void 0,customConfig:"custom"===R?z:void 0,backupConfig:"backup"===R?_:void 0})}),s=await t.json();if(!s.success)throw Error(s.error||"Failed to save task");y.success(Y?"Task updated":"Task created",Y?"Task has been updated successfully":"Task has been created successfully"),null==j||j(),v.push("/tasks"),v.refresh()}catch(t){let e=t instanceof Error?t.message:"Failed to save task";y.error("Error",e)}finally{k(!1)}},G=async()=>{if(b&&confirm("Are you sure you want to delete this task?")){C(!0);try{let e=await fetch("/api/v1/tasks/".concat(b.id),{method:"DELETE"}),t=await e.json();if(!t.success)throw Error(t.error||"Failed to delete task");y.success("Task deleted","Task has been deleted successfully"),v.push("/tasks"),v.refresh()}catch(t){let e=t instanceof Error?t.message:"Failed to delete task";y.error("Error",e)}finally{C(!1)}}};return(0,r.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Basic Information"}),(0,r.jsx)(o.BT,{children:"Configure the task name and target project"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Task Name"}),(0,r.jsx)(l.Input,{value:S,onChange:e=>T(e.target.value),placeholder:"Daily Health Check",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Project"}),(0,r.jsx)("select",{value:O,onChange:e=>D(e.target.value),className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand",required:!0,children:g.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Enabled"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Task will run automatically when enabled"})]}),(0,r.jsx)(c.d,{checked:A,onCheckedChange:E})]})]})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Task Type"}),(0,r.jsx)(o.BT,{children:"Choose what type of task to run"})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsx)(m.TaskTypeSelector,{value:R,onChange:B})})]}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Schedule"}),(0,r.jsx)(o.BT,{children:"Configure when the task should run"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsx)(x.CronBuilder,{value:P,onChange:F,timezone:M}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timezone"}),(0,r.jsxs)("select",{value:M,onChange:e=>I(e.target.value),className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand",children:[(0,r.jsx)("option",{value:"UTC",children:"UTC"}),(0,r.jsx)("option",{value:"America/New_York",children:"America/New_York (EST/EDT)"}),(0,r.jsx)("option",{value:"America/Chicago",children:"America/Chicago (CST/CDT)"}),(0,r.jsx)("option",{value:"America/Denver",children:"America/Denver (MST/MDT)"}),(0,r.jsx)("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (PST/PDT)"}),(0,r.jsx)("option",{value:"Europe/London",children:"Europe/London (GMT/BST)"}),(0,r.jsx)("option",{value:"Europe/Paris",children:"Europe/Paris (CET/CEST)"}),(0,r.jsx)("option",{value:"Asia/Tokyo",children:"Asia/Tokyo (JST)"}),(0,r.jsx)("option",{value:"Asia/Shanghai",children:"Asia/Shanghai (CST)"}),(0,r.jsx)("option",{value:"Australia/Sydney",children:"Australia/Sydney (AEST/AEDT)"})]})]})]})]}),"health-check"===R&&(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Health Check Configuration"}),(0,r.jsx)(o.BT,{children:"Configure health check behavior"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Auto-restart on Failure"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Automatically restart unhealthy containers"})]}),(0,r.jsx)(c.d,{checked:U.autoRestart,onCheckedChange:e=>Z({...U,autoRestart:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Notify on Failure"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Send notification when health check fails"})]}),(0,r.jsx)(c.d,{checked:U.notifyOnFailure,onCheckedChange:e=>Z({...U,notifyOnFailure:e})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"HTTP Endpoint (Optional)"}),(0,r.jsx)(l.Input,{value:U.checkEndpoint||"",onChange:e=>Z({...U,checkEndpoint:e.target.value||void 0}),placeholder:"/health or /api/health"}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Optional HTTP endpoint to check in addition to container status"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)(l.Input,{type:"number",min:1,max:300,value:U.timeoutSeconds||30,onChange:e=>Z({...U,timeoutSeconds:parseInt(e.target.value)||30})})]})]})]}),"container-update"===R&&(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Container Update Configuration"}),(0,r.jsx)(o.BT,{children:"Configure container update behavior"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Pull Only"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Only pull new images, don't restart containers"})]}),(0,r.jsx)(c.d,{checked:L.pullOnly,onCheckedChange:e=>W({...L,pullOnly:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Notify on Update"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Send notification when containers are updated"})]}),(0,r.jsx)(c.d,{checked:L.notifyOnUpdate,onCheckedChange:e=>W({...L,notifyOnUpdate:e})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Services (Optional)"}),(0,r.jsx)(l.Input,{value:L.services.join(", "),onChange:e=>W({...L,services:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"Leave empty for all services, or: db, auth, rest"}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Comma-separated list of services to update. Leave empty to update all."})]})]})]}),"custom"===R&&(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Custom Command Configuration"}),(0,r.jsx)(o.BT,{children:"Configure the command to run inside a container"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsx)(h.ContainerSelector,{projectId:O,value:z.container,onChange:e=>q({...z,container:e})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Command"}),(0,r.jsx)(l.Input,{value:z.command,onChange:e=>q({...z,command:e.target.value}),placeholder:"psql -c 'VACUUM ANALYZE;'",required:"custom"===R}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"The command to execute inside the container"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Working Directory (Optional)"}),(0,r.jsx)(l.Input,{value:z.workDir||"",onChange:e=>q({...z,workDir:e.target.value||void 0}),placeholder:"/app"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)(l.Input,{type:"number",min:1,max:3600,value:z.timeoutSeconds||60,onChange:e=>q({...z,timeoutSeconds:parseInt(e.target.value)||60})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Capture Output"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Store command output in task logs"})]}),(0,r.jsx)(c.d,{checked:z.captureOutput,onCheckedChange:e=>q({...z,captureOutput:e})})]})]})]}),"backup"===R&&(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Backup Configuration"}),(0,r.jsx)(o.BT,{children:"Configure automatic backup settings"})]}),(0,r.jsxs)(o.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Backup Type"}),(0,r.jsxs)("select",{value:_.backupType,onChange:e=>H({..._,backupType:e.target.value}),className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand",children:[(0,r.jsx)("option",{value:"full",children:"Full Backup (All components)"}),(0,r.jsx)("option",{value:"database",children:"Database Only"}),(0,r.jsx)("option",{value:"storage",children:"Storage Only"}),(0,r.jsx)("option",{value:"functions",children:"Functions Only"}),(0,r.jsx)("option",{value:"config",children:"Config Only"})]}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Choose what to include in each scheduled backup"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Destination"}),(0,r.jsx)("select",{value:_.destination,onChange:e=>H({..._,destination:e.target.value}),className:"w-full h-10 px-3 border border-border rounded-lg bg-background text-sm focus:outline-none focus:ring-2 focus:ring-brand",children:(0,r.jsx)("option",{value:"local",children:"Local Filesystem"})}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Where to store the backup files"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Retention Count"}),(0,r.jsx)(l.Input,{type:"number",min:1,max:100,value:_.retentionCount||10,onChange:e=>H({..._,retentionCount:parseInt(e.target.value)||10})}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Number of backups to keep. Older backups will be automatically deleted."})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Encrypt Backup"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Encrypt backup files for additional security"})]}),(0,r.jsx)(c.d,{checked:_.encrypt,onCheckedChange:e=>H({..._,encrypt:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Notify on Success"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Send notification when backup completes successfully"})]}),(0,r.jsx)(c.d,{checked:_.notifyOnSuccess,onCheckedChange:e=>H({..._,notifyOnSuccess:e})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Notify on Failure"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Send notification when backup fails"})]}),(0,r.jsx)(c.d,{checked:_.notifyOnFailure,onCheckedChange:e=>H({..._,notifyOnFailure:e})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[Y?(0,r.jsx)(i.Button,{type:"button",variant:"destructive",onClick:G,disabled:w||N,children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-2"}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Delete Task"]})}):(0,r.jsx)("div",{}),(0,r.jsx)(i.Button,{type:"submit",disabled:N||w,children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),Y?"Update Task":"Create Task"]})})]})]})}},93139:()=>{},97438:(e,t,s)=>{"use strict";s.d(t,{TaskCard:()=>C});var r=s(95155),a=s(52619),n=s.n(a),o=s(86948),i=s(11647),l=s(3998),c=s(44846),d=s(18653),u=s(83457),m=s(89559),x=s(50803),h=s(1375),p=s(76907),f=s(61362),b=s(78874),g=s(26983),j=s(53511),v=s(6132),y=s(85921),N=s(12115),k=s(64269);let w={"health-check":{label:"Health Check",icon:u.A,color:"text-success"},"container-update":{label:"Container Update",icon:m.A,color:"text-brand"},custom:{label:"Custom",icon:x.A,color:"text-warning"},backup:{label:"Backup",icon:h.A,color:"text-info"},"security-scan":{label:"Security Scan",icon:p.A,color:"text-error"}};function C(e){let{task:t,projectName:s,onToggle:a,onRun:u}=e,[m,x]=(0,N.useState)(!1),[h,p]=(0,N.useState)(!1),C=w[t.type],S=C.icon,T=async()=>{if(a){x(!0);try{await a(t.id,!t.enabled)}finally{x(!1)}}},A=async e=>{if(e.preventDefault(),e.stopPropagation(),u){p(!0);try{await u(t.id)}finally{p(!1)}}};return(0,r.jsx)(n(),{href:"/tasks/".concat(t.id),children:(0,r.jsx)(o.Zp,{className:"hover:border-brand/50 transition-colors cursor-pointer",children:(0,r.jsxs)(o.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background-tertiary flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(S,{className:"h-5 w-5 ".concat(C.color)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-medium text-foreground truncate",children:t.name}),!t.enabled&&(0,r.jsxs)(i.E,{variant:"secondary",className:"flex-shrink-0",children:[(0,r.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Paused"]})]}),(0,r.jsxs)("p",{className:"text-sm text-foreground-muted mt-0.5",children:[s," â€¢ ",C.label]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-foreground-muted",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.A,{className:"h-3 w-3"}),t.lastRun?(0,r.jsxs)("span",{children:["Last: ",(0,k.mo)(t.lastRun)]}):(0,r.jsx)("span",{children:"Never run"})]}),t.nextRun&&t.enabled&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(v.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Next: ",(0,k.mo)(t.nextRun)]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:["running"===t.lastRunStatus?(0,r.jsxs)(i.E,{variant:"info",children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-1"}),"Running"]}):"success"===t.lastRunStatus?(0,r.jsxs)(i.E,{variant:"success",children:[(0,r.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Success"]}):"failure"===t.lastRunStatus?(0,r.jsxs)(i.E,{variant:"error",children:[(0,r.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Failed"]}):(0,r.jsxs)(i.E,{variant:"secondary",children:[(0,r.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Never run"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.preventDefault(),children:[(0,r.jsx)(c.d,{checked:t.enabled,onCheckedChange:T,disabled:m}),(0,r.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:A,disabled:h||"running"===t.lastRunStatus,title:"Run now",children:h?(0,r.jsx)(d.y,{size:"sm"}):(0,r.jsx)(y.A,{className:"h-4 w-4"})})]})]})]}),"failure"===t.lastRunStatus&&t.lastRunError&&(0,r.jsx)("div",{className:"mt-3 p-2 bg-error/10 border border-error/20 rounded text-xs text-error",children:t.lastRunError})]})})})}}}]);