"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4529],{1275:(e,t,s)=>{s.d(t,{d:()=>h,t:()=>x});var r=s(95155),a=s(12115),n=s(42529),l=s(6132),o=s(52056),c=s(23327),i=s(65229),d=s(64269);let u=(0,a.createContext)(void 0);function x(e){let{children:t}=e,[s,n]=(0,a.useState)([]),l=(0,a.useCallback)(e=>{var t;let s=Math.random().toString(36).slice(2,11);return n(t=>[...t,{...e,id:s}]),setTimeout(()=>{n(e=>e.filter(e=>e.id!==s))},null!=(t=e.duration)?t:e.action?1e4:5e3),s},[]),o=(0,a.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return(0,r.jsxs)(u.Provider,{value:{toasts:s,addToast:l,removeToast:o},children:[t,(0,r.jsx)(m,{toasts:s,onRemove:o})]})}function h(){let e=(0,a.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return{toast:e.addToast,success:(t,s)=>e.addToast({type:"success",title:t,description:s}),error:(t,s)=>e.addToast({type:"error",title:t,description:s}),warning:(t,s)=>e.addToast({type:"warning",title:t,description:s}),info:(t,s)=>e.addToast({type:"info",title:t,description:s})}}function m(e){let{toasts:t,onRemove:s}=e;return(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full",children:t.map(e=>(0,r.jsx)(p,{toast:e,onRemove:s},e.id))})}let g={success:n.A,error:l.A,warning:o.A,info:c.A},f={success:"text-success",error:"text-error",warning:"text-warning",info:"text-info"};function p(e){let{toast:t,onRemove:s}=e,a=g[t.type];return(0,r.jsxs)("div",{className:(0,d.cn)("flex items-start gap-3 p-4 rounded-lg shadow-lg border","bg-background-elevated border-border","animate-in slide-in-from-right-full"),role:"alert",children:[(0,r.jsx)(a,{className:(0,d.cn)("h-5 w-5 flex-shrink-0 mt-0.5",f[t.type])}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:t.description}),t.action&&(0,r.jsx)("button",{onClick:()=>{var e;null==(e=t.action)||e.onClick(),s(t.id)},className:"mt-2 text-sm font-medium text-brand hover:text-brand/80 transition-colors",children:t.action.label})]}),(0,r.jsxs)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 text-foreground-muted hover:text-foreground transition-colors",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"})]})]})}},3998:(e,t,s)=>{s.d(t,{Button:()=>o});var r=s(95155),a=s(12115),n=s(64269),l=s(35299);let o=(0,a.forwardRef)((e,t)=>{let{className:s,variant:a="primary",size:o="md",loading:c,disabled:i,children:d,...u}=e;return(0,r.jsxs)("button",{ref:t,className:(0,n.cn)("\n      inline-flex items-center justify-center font-medium\n      transition-all duration-150 focus-visible:outline-none focus-visible:ring-1\n      focus-visible:ring-brand focus-visible:ring-offset-1\n      disabled:pointer-events-none disabled:opacity-50\n      rounded-lg\n    ",{primary:"\n        bg-brand text-white hover:bg-brand/90\n        border border-brand-secondary\n        shadow-xs active:shadow-none active:bg-brand-secondary\n      ",secondary:"\n        bg-background-tertiary text-foreground\n        border border-border hover:border-border-hover\n        hover:bg-background-elevated shadow-xs\n        active:shadow-none\n      ",ghost:"\n        text-foreground-secondary hover:text-foreground\n        hover:bg-background-tertiary\n        border border-transparent\n        active:bg-background-secondary\n      ",destructive:"\n        bg-error text-white hover:bg-error/90\n        border border-red-700\n        shadow-xs active:shadow-none active:bg-red-700\n      ",outline:"\n        border border-brand text-brand\n        hover:bg-brand/10\n        active:bg-brand/20\n      "}[a],{sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2",icon:"h-10 w-10"}[o],s),disabled:i||c,...u,children:[c&&(0,r.jsx)(l.A,{className:"h-4 w-4 animate-spin"}),d]})});o.displayName="Button"},6132:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},11647:(e,t,s)=>{s.d(t,{E:()=>n});var r=s(95155),a=s(64269);function n(e){let{className:t,variant:s="default",...n}=e;return(0,r.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[s],t),...n})}},18653:(e,t,s)=>{s.d(t,{y:()=>n});var r=s(95155),a=s(64269);function n(e){let{size:t="md",className:s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-current border-t-transparent text-brand",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],s),children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})}},20063:(e,t,s)=>{var r=s(47260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},20485:(e,t,s)=>{s.d(t,{ProviderTypeSelector:()=>i});var r=s(95155),a=s(32320),n=s(85710),l=s(34172),o=s(20523);let c=[{id:"s3",label:"Amazon S3",description:"AWS S3 or S3-compatible storage (MinIO, R2, etc.)",icon:a.A},{id:"gcs",label:"Google Cloud Storage",description:"Google Cloud Platform object storage",icon:n.A},{id:"azure",label:"Azure Blob Storage",description:"Microsoft Azure Blob Storage containers",icon:l.A},{id:"local",label:"Local Filesystem",description:"Local directory or network-attached storage (NAS)",icon:o.A}];function i(e){let{value:t,onChange:s,disabled:a}=e;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Storage Provider Type"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map(e=>{let n=e.icon,l=t===e.id;return(0,r.jsxs)("button",{type:"button",disabled:a,onClick:()=>s(e.id),className:"p-4 border rounded-lg text-left transition-colors ".concat(l?"border-brand bg-brand/10":"border-border hover:border-brand/50"," ").concat(a?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsx)(n,{className:"h-5 w-5 mb-2 ".concat(l?"text-brand":"text-foreground-muted")}),(0,r.jsx)("p",{className:"font-medium",children:e.label}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:e.description})]},e.id)})})]})}},20523:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},23327:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},26983:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},32320:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]])},34172:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},42529:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},44846:(e,t,s)=>{s.d(t,{d:()=>l});var r=s(95155),a=s(12115),n=s(64269);let l=(0,a.forwardRef)((e,t)=>{let{className:s,checked:a,onCheckedChange:l,onChange:o,...c}=e;return(0,r.jsxs)("label",{className:(0,n.cn)("relative inline-flex cursor-pointer items-center",s),children:[(0,r.jsx)("input",{type:"checkbox",role:"switch",className:"peer sr-only",ref:t,checked:a,onChange:e=>{null==o||o(e),null==l||l(e.target.checked)},...c}),(0,r.jsx)("div",{className:(0,n.cn)("h-6 w-11 rounded-full transition-colors","bg-background-tertiary border border-border","peer-checked:bg-brand peer-checked:border-brand","peer-focus-visible:ring-2 peer-focus-visible:ring-brand peer-focus-visible:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50","after:absolute after:left-[2px] after:top-[2px]","after:h-5 after:w-5 after:rounded-full","after:bg-white after:shadow-sm","after:transition-transform","peer-checked:after:translate-x-5")})]})});l.displayName="Switch"},46046:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},52056:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},58782:(e,t,s)=>{s.d(t,{ConnectionTestResult:()=>o});var r=s(95155),a=s(61362),n=s(26983),l=s(78874);function o(e){let{success:t,error:s,latencyMs:o}=e;return t?(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-success/10 border border-success/20 rounded-lg",children:[(0,r.jsx)(a.A,{className:"h-5 w-5 text-success flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-success",children:"Connection successful"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Storage provider is accessible and ready to use."}),void 0!==o&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-foreground-muted mt-2",children:[(0,r.jsx)(n.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Response time: ",o,"ms"]})]})]})]}):(0,r.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-error/10 border border-error/20 rounded-lg",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 text-error flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-error",children:"Connection failed"}),s&&(0,r.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:s}),void 0!==o&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-foreground-muted mt-2",children:[(0,r.jsx)(n.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Response time: ",o,"ms"]})]})]})]})}},61362:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},64269:(e,t,s)=>{s.d(t,{Ye:()=>d,Yq:()=>i,cn:()=>n,fw:()=>o,mo:()=>c,z3:()=>l});var r=s(2821),a=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}let l=function(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][t])};function o(e){let t=new Date,s=new Date(e),r=Math.floor((t.getTime()-s.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<604800?"".concat(Math.floor(r/86400),"d ago"):s.toLocaleDateString()}function c(e){let t,s=new Date,r=new Date(e),a=r.getTime()-s.getTime(),n=Math.abs(Math.floor(a/1e3));if(n<60)t="less than a minute";else if(n<3600){let e=Math.floor(n/60);t="".concat(e," minute").concat(e>1?"s":"")}else if(n<86400){let e=Math.floor(n/3600);t="".concat(e," hour").concat(e>1?"s":"")}else{if(!(n<604800))return r.toLocaleDateString();let e=Math.floor(n/86400);t="".concat(e," day").concat(e>1?"s":"")}return a>0?"in ".concat(t):"".concat(t," ago")}function i(e){return new Date(e).toLocaleString()}function d(e){return e.toLowerCase().replace(/[^a-z0-9_-]/g,"-").replace(/^[^a-z0-9]/,"").replace(/-+/g,"-").slice(0,50)}},64479:(e,t,s)=>{s.d(t,{ProviderCard:()=>k});var r=s(95155),a=s(52619),n=s.n(a),l=s(12115),o=s(86948),c=s(11647),i=s(3998),d=s(18653),u=s(1275),x=s(32320),h=s(85710),m=s(34172),g=s(20523),f=s(6132),p=s(61362),y=s(78874);let b=(0,s(71847).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var v=s(85921),j=s(64269);let N={s3:{label:"Amazon S3",icon:x.A},gcs:{label:"Google Cloud",icon:h.A},azure:{label:"Azure Blob",icon:m.A},local:{label:"Local",icon:g.A},r2:{label:"Cloudflare R2",icon:x.A},minio:{label:"MinIO",icon:m.A},backblaze:{label:"Backblaze B2",icon:x.A}};function k(e){let{provider:t,onTest:s,onSetDefault:a}=e,h=(0,u.d)(),[m,g]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),w=N[t.type]||{label:t.type,icon:x.A},A=w.icon,S=async e=>{if(e.preventDefault(),e.stopPropagation(),s){g(!0);try{await s(t.id)?h.success("Connection successful","Storage provider is accessible"):h.error("Connection failed","Could not connect to storage provider")}catch(e){h.error("Test failed",e instanceof Error?e.message:"Unknown error")}finally{g(!1)}}},z=async e=>{if(e.preventDefault(),e.stopPropagation(),a&&!t.isDefault){C(!0);try{await a(t.id),h.success("Default updated","".concat(t.name," is now the default provider"))}catch(e){h.error("Failed to set default",e instanceof Error?e.message:"Unknown error")}finally{C(!1)}}};return(0,r.jsx)(n(),{href:"/cloud-storage/".concat(t.id),children:(0,r.jsx)(o.Zp,{className:"hover:border-brand/50 transition-colors cursor-pointer",children:(0,r.jsx)(o.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background-tertiary flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(A,{className:"h-5 w-5 text-brand"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"font-medium text-foreground truncate",children:t.name}),t.isDefault&&(0,r.jsxs)(c.E,{variant:"info",className:"flex-shrink-0",children:[(0,r.jsx)(b,{className:"h-3 w-3 mr-1"}),"Default"]})]}),(0,r.jsxs)("p",{className:"text-sm text-foreground-muted mt-0.5",children:[w.label," • ",function(e){switch(e.type){case"s3":case"r2":case"minio":case"backblaze":return e.s3Config?"".concat(e.s3Config.bucket).concat(e.s3Config.pathPrefix||""):"Not configured";case"gcs":return e.gcsConfig?"".concat(e.gcsConfig.bucket).concat(e.gcsConfig.pathPrefix||""):"Not configured";case"azure":return e.azureConfig?"".concat(e.azureConfig.containerName).concat(e.azureConfig.pathPrefix||""):"Not configured";case"local":var t;return(null==(t=e.localConfig)?void 0:t.basePath)||"Not configured";default:return"Unknown provider"}}(t)]}),t.lastTestedAt&&(0,r.jsxs)("p",{className:"text-xs text-foreground-muted mt-1",children:["Last tested: ",(0,j.mo)(t.lastTestedAt)]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[t.lastTestedAt?"success"===t.lastTestResult?(0,r.jsxs)(c.E,{variant:"success",children:[(0,r.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Connected"]}):(0,r.jsxs)(c.E,{variant:"error",children:[(0,r.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Failed"]}):(0,r.jsxs)(c.E,{variant:"secondary",children:[(0,r.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Not tested"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.preventDefault(),children:[!t.isDefault&&a&&(0,r.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:z,disabled:k,title:"Set as default",children:k?(0,r.jsx)(d.y,{size:"sm"}):(0,r.jsx)(b,{className:"h-4 w-4"})}),s&&(0,r.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:S,disabled:m,title:"Test connection",children:m?(0,r.jsx)(d.y,{size:"sm"}):(0,r.jsx)(v.A,{className:"h-4 w-4"})})]})]})]})})})})}},65142:(e,t,s)=>{s.d(t,{Input:()=>l});var r=s(95155),a=s(12115),n=s(64269);let l=(0,a.forwardRef)((e,t)=>{let{className:s,type:a="text",error:l,icon:o,...c}=e;return(0,r.jsxs)("div",{className:"relative",children:[o&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",children:o}),(0,r.jsx)("input",{type:a,className:(0,n.cn)("\n            w-full h-10 px-3 py-2\n            bg-background-tertiary text-foreground\n            border border-border rounded-lg shadow-2xs\n            placeholder:text-foreground-muted\n            hover:border-border-hover\n            focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-brand focus-visible:border-transparent\n            disabled:cursor-not-allowed disabled:opacity-50\n            transition-all duration-150\n            ",o&&"pl-10",l&&"border-error focus-visible:ring-error hover:border-error",s),ref:t,...c})]})});l.displayName="Input"},65229:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},70532:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},71360:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},78874:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},85710:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},85921:(e,t,s)=>{s.d(t,{A:()=>r});let r=(0,s(71847).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},86948:(e,t,s)=>{s.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>c,Zp:()=>l,aR:()=>o});var r=s(95155),a=s(12115),n=s(64269);let l=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",s),...a})});l.displayName="Card";let o=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let c=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",s),...a})});c.displayName="CardTitle";let i=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground-secondary",s),...a})});i.displayName="CardDescription";let d=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},87451:(e,t,s)=>{s.d(t,{ProviderForm:()=>y});var r=s(95155),a=s(12115),n=s(20063),l=s(86948),o=s(3998),c=s(65142),i=s(44846),d=s(18653),u=s(1275),x=s(20485),h=s(58782),m=s(70532),g=s(57828),f=s(71360),p=s(46046);function y(e){var t,s,y,b,v,j,N,k,C,w,A,S,z,P,M,K,I,B,T,R,E,F,U,D,q,L;let{provider:Z,onSuccess:O}=e,W=(0,n.useRouter)(),G=(0,u.d)(),[H,V]=(0,a.useState)(!1),[_,J]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(!1),[Q,$]=(0,a.useState)(null),[ee,et]=(0,a.useState)(!1),[es,er]=(0,a.useState)({s3AccessKeyId:(null==Z||null==(t=Z.s3Config)?void 0:t.accessKeyId)==="********",s3SecretAccessKey:(null==Z||null==(s=Z.s3Config)?void 0:s.secretAccessKey)==="********",gcsKeyFile:(null==Z||null==(y=Z.gcsConfig)?void 0:y.keyFile)==="********",azureAccountKey:(null==Z||null==(b=Z.azureConfig)?void 0:b.accountKey)==="********",azureConnectionString:(null==Z||null==(v=Z.azureConfig)?void 0:v.connectionString)==="********",azureSasUrl:(null==Z||null==(j=Z.azureConfig)?void 0:j.sasUrl)==="********"}),ea=e=>"********"===e?"":e||"",[en,el]=(0,a.useState)((null==Z?void 0:Z.name)||""),[eo,ec]=(0,a.useState)((null==Z?void 0:Z.type)||"s3"),[ei,ed]=(0,a.useState)(null!=(q=null==Z?void 0:Z.isDefault)&&q),[eu,ex]=(0,a.useState)({bucket:(null==Z||null==(N=Z.s3Config)?void 0:N.bucket)||"",region:(null==Z||null==(k=Z.s3Config)?void 0:k.region)||"us-east-1",endpoint:(null==Z||null==(C=Z.s3Config)?void 0:C.endpoint)||"",accessKeyId:ea(null==Z||null==(w=Z.s3Config)?void 0:w.accessKeyId),secretAccessKey:ea(null==Z||null==(A=Z.s3Config)?void 0:A.secretAccessKey),pathPrefix:(null==Z||null==(S=Z.s3Config)?void 0:S.pathPrefix)||"",forcePathStyle:(null==Z||null==(z=Z.s3Config)?void 0:z.forcePathStyle)||!1}),[eh,em]=(0,a.useState)({bucket:(null==Z||null==(P=Z.gcsConfig)?void 0:P.bucket)||"",projectId:(null==Z||null==(M=Z.gcsConfig)?void 0:M.projectId)||"",keyFile:ea(null==Z||null==(K=Z.gcsConfig)?void 0:K.keyFile),pathPrefix:(null==Z||null==(I=Z.gcsConfig)?void 0:I.pathPrefix)||""}),[eg,ef]=(0,a.useState)({containerName:(null==Z||null==(B=Z.azureConfig)?void 0:B.containerName)||"",accountName:(null==Z||null==(T=Z.azureConfig)?void 0:T.accountName)||"",accountKey:ea(null==Z||null==(R=Z.azureConfig)?void 0:R.accountKey),connectionString:ea(null==Z||null==(E=Z.azureConfig)?void 0:E.connectionString),sasUrl:ea(null==Z||null==(F=Z.azureConfig)?void 0:F.sasUrl),authMethod:(null==Z||null==(U=Z.azureConfig)?void 0:U.authMethod)||"sasUrl",pathPrefix:(null==Z||null==(D=Z.azureConfig)?void 0:D.pathPrefix)||""}),[ep,ey]=(0,a.useState)((null==Z?void 0:Z.localConfig)||{basePath:"",createIfMissing:!0}),eb=!!Z,ev=async e=>{if(e.preventDefault(),!en.trim())return void G.error("Name required","Please enter a provider name");V(!0);try{let e={name:en,type:eo,isDefault:ei},t=(e,t)=>eb&&""===e&&t?"********":e;["s3","r2","minio","backblaze"].includes(eo)?e.s3Config={...eu,accessKeyId:t(eu.accessKeyId,es.s3AccessKeyId),secretAccessKey:t(eu.secretAccessKey,es.s3SecretAccessKey)}:"gcs"===eo?e.gcsConfig={...eh,keyFile:t(eh.keyFile,es.gcsKeyFile)}:"azure"===eo?e.azureConfig={...eg,accountKey:t(eg.accountKey||"",es.azureAccountKey),connectionString:t(eg.connectionString||"",es.azureConnectionString),sasUrl:t(eg.sasUrl||"",es.azureSasUrl)}:"local"===eo&&(e.localConfig=ep);let s=eb?"/api/v1/cloud-storage/".concat(Z.id):"/api/v1/cloud-storage",r=await fetch(s,{method:eb?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await r.json();if(!a.success)throw Error(a.error||"Failed to save provider");G.success(eb?"Provider updated":"Provider created",eb?"Storage provider has been updated":"Storage provider has been created"),null==O||O(),W.push("/cloud-storage"),W.refresh()}catch(t){let e=t instanceof Error?t.message:"Failed to save provider";G.error("Error",e)}finally{V(!1)}},ej=async()=>{if(Z&&confirm("Are you sure you want to delete this storage provider?")){J(!0);try{let e=await fetch("/api/v1/cloud-storage/".concat(Z.id),{method:"DELETE"}),t=await e.json();if(!t.success)throw Error(t.error||"Failed to delete provider");G.success("Provider deleted","Storage provider has been deleted"),W.push("/cloud-storage"),W.refresh()}catch(t){let e=t instanceof Error?t.message:"Failed to delete provider";G.error("Error",e)}finally{J(!1)}}},eN=async()=>{Y(!0),$(null);try{var e,t,s,r;let a={type:eo};eb&&Z&&(a.providerId=Z.id),["s3","r2","minio","backblaze"].includes(eo)?a.s3Config=eu:"gcs"===eo?a.gcsConfig=eh:"azure"===eo?a.azureConfig=eg:"local"===eo&&(a.localConfig=ep);let n=await fetch("/api/v1/cloud-storage/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await n.json();$({success:null!=(r=null==(e=l.data)?void 0:e.connected)&&r,error:(null==(t=l.data)?void 0:t.error)||l.error,latencyMs:null==(s=l.data)?void 0:s.latencyMs})}catch(e){$({success:!1,error:e instanceof Error?e.message:"Test failed"})}finally{Y(!1)}},ek=["s3","r2","minio","backblaze"];return(0,r.jsxs)("form",{onSubmit:ev,className:"space-y-6",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Basic Information"}),(0,r.jsx)(l.BT,{children:"Give your storage provider a name"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Provider Name"}),(0,r.jsx)(c.Input,{value:en,onChange:e=>el(e.target.value),placeholder:"Production Backups",required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Set as Default"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Use this provider for backups by default"})]}),(0,r.jsx)(i.d,{checked:ei,onCheckedChange:ed})]})]})]}),!eb&&(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Provider Type"}),(0,r.jsx)(l.BT,{children:"Select your storage provider"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)(x.ProviderTypeSelector,{value:eo,onChange:ec})})]}),ek.includes(eo)&&(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"S3 Configuration"}),(0,r.jsxs)(l.BT,{children:["Configure your ","s3"===eo?"Amazon S3":"r2"===eo?"Cloudflare R2":"minio"===eo?"MinIO":"Backblaze B2"," settings"]})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Bucket Name"}),(0,r.jsx)(c.Input,{value:eu.bucket,onChange:e=>ex({...eu,bucket:e.target.value}),placeholder:"my-backup-bucket",required:ek.includes(eo)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Region"}),(0,r.jsx)(c.Input,{value:eu.region,onChange:e=>ex({...eu,region:e.target.value}),placeholder:"us-east-1",required:ek.includes(eo)})]})]}),"s3"!==eo&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Endpoint URL"}),(0,r.jsx)(c.Input,{value:eu.endpoint||"",onChange:e=>ex({...eu,endpoint:e.target.value}),placeholder:"r2"===eo?"https://[account-id].r2.cloudflarestorage.com":"minio"===eo?"http://localhost:9000":"https://s3.us-west-000.backblazeb2.com"}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Required for non-AWS S3-compatible services"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Credentials"}),(0,r.jsx)(o.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>et(!ee),children:ee?(0,r.jsx)(m.A,{className:"h-4 w-4"}):(0,r.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.Input,{type:ee?"text":"password",value:eu.accessKeyId,onChange:e=>ex({...eu,accessKeyId:e.target.value}),placeholder:es.s3AccessKeyId?"Enter new key to change":"Access Key ID",required:ek.includes(eo)&&!es.s3AccessKeyId}),es.s3AccessKeyId&&!eu.accessKeyId&&(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.Input,{type:ee?"text":"password",value:eu.secretAccessKey,onChange:e=>ex({...eu,secretAccessKey:e.target.value}),placeholder:es.s3SecretAccessKey?"Enter new key to change":"Secret Access Key",required:ek.includes(eo)&&!es.s3SecretAccessKey}),es.s3SecretAccessKey&&!eu.secretAccessKey&&(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,r.jsx)(c.Input,{value:eu.pathPrefix||"",onChange:e=>ex({...eu,pathPrefix:e.target.value}),placeholder:"/backups"}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Optional prefix for all objects stored in this bucket"})]}),("minio"===eo||"r2"===eo)&&(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Force Path Style"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Use path-style URLs instead of virtual-hosted-style"})]}),(0,r.jsx)(i.d,{checked:null!=(L=eu.forcePathStyle)&&L,onCheckedChange:e=>ex({...eu,forcePathStyle:e})})]})]})]}),"gcs"===eo&&(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Google Cloud Storage Configuration"}),(0,r.jsx)(l.BT,{children:"Configure your GCS settings"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Bucket Name"}),(0,r.jsx)(c.Input,{value:eh.bucket,onChange:e=>em({...eh,bucket:e.target.value}),placeholder:"my-backup-bucket",required:"gcs"===eo})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Project ID"}),(0,r.jsx)(c.Input,{value:eh.projectId,onChange:e=>em({...eh,projectId:e.target.value}),placeholder:"my-gcp-project",required:"gcs"===eo})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Service Account Key File Path"}),(0,r.jsx)(c.Input,{value:eh.keyFile,onChange:e=>em({...eh,keyFile:e.target.value}),placeholder:es.gcsKeyFile?"Enter new path to change":"/path/to/service-account.json",required:"gcs"===eo&&!es.gcsKeyFile}),es.gcsKeyFile&&!eh.keyFile?(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing path will be kept"}):(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Path to the JSON key file for your service account"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,r.jsx)(c.Input,{value:eh.pathPrefix||"",onChange:e=>em({...eh,pathPrefix:e.target.value}),placeholder:"/backups"})]})]})]}),"azure"===eo&&(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Azure Blob Storage Configuration"}),(0,r.jsx)(l.BT,{children:"Configure your Azure settings"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Authentication Method"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("button",{type:"button",className:"p-3 rounded-lg border text-center transition-colors ".concat("sasUrl"===eg.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"),onClick:()=>ef({...eg,authMethod:"sasUrl"}),children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:"SAS URL"}),(0,r.jsx)("div",{className:"text-xs text-foreground-muted",children:"Easiest"})]}),(0,r.jsxs)("button",{type:"button",className:"p-3 rounded-lg border text-center transition-colors ".concat("accountKey"===eg.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"),onClick:()=>ef({...eg,authMethod:"accountKey"}),children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:"Account Key"}),(0,r.jsx)("div",{className:"text-xs text-foreground-muted",children:"Full access"})]}),(0,r.jsxs)("button",{type:"button",className:"p-3 rounded-lg border text-center transition-colors ".concat("connectionString"===eg.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"),onClick:()=>ef({...eg,authMethod:"connectionString"}),children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:"Conn. String"}),(0,r.jsx)("div",{className:"text-xs text-foreground-muted",children:"Azure Portal"})]})]})]}),"sasUrl"===eg.authMethod&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,r.jsx)(c.Input,{value:eg.containerName,onChange:e=>ef({...eg,containerName:e.target.value}),placeholder:"backups",required:"azure"===eo})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"SAS URL"}),(0,r.jsx)(o.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>et(!ee),children:ee?(0,r.jsx)(m.A,{className:"h-4 w-4"}):(0,r.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(c.Input,{type:ee?"text":"password",value:eg.sasUrl||"",onChange:e=>ef({...eg,sasUrl:e.target.value}),placeholder:es.azureSasUrl?"Enter new URL to change":"https://account.blob.core.windows.net/container?sv=2022-11-02&ss=b&srt=co&sp=rwdlac&se=...",required:"sasUrl"===eg.authMethod&&!es.azureSasUrl}),es.azureSasUrl&&!eg.sasUrl?(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing SAS URL will be kept"}):(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Full SAS URL with token. In Azure Portal: Storage Account → Shared access signature → Generate SAS"})]})]}),"accountKey"===eg.authMethod&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,r.jsx)(c.Input,{value:eg.containerName,onChange:e=>ef({...eg,containerName:e.target.value}),placeholder:"backups",required:"azure"===eo})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Storage Account Name"}),(0,r.jsx)(c.Input,{value:eg.accountName,onChange:e=>ef({...eg,accountName:e.target.value}),placeholder:"mystorageaccount",required:"accountKey"===eg.authMethod})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Account Key"}),(0,r.jsx)(o.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>et(!ee),children:ee?(0,r.jsx)(m.A,{className:"h-4 w-4"}):(0,r.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(c.Input,{type:ee?"text":"password",value:eg.accountKey||"",onChange:e=>ef({...eg,accountKey:e.target.value}),placeholder:es.azureAccountKey?"Enter new key to change":"Account Key",required:"accountKey"===eg.authMethod&&!es.azureAccountKey}),es.azureAccountKey&&!eg.accountKey?(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"}):(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"In Azure Portal: Storage Account → Access keys → key1 or key2"})]})]}),"connectionString"===eg.authMethod&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,r.jsx)(c.Input,{value:eg.containerName,onChange:e=>ef({...eg,containerName:e.target.value}),placeholder:"backups",required:"azure"===eo})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Connection String"}),(0,r.jsx)(o.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>et(!ee),children:ee?(0,r.jsx)(m.A,{className:"h-4 w-4"}):(0,r.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(c.Input,{type:ee?"text":"password",value:eg.connectionString||"",onChange:e=>ef({...eg,connectionString:e.target.value}),placeholder:es.azureConnectionString?"Enter new string to change":"DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...;EndpointSuffix=core.windows.net",required:"connectionString"===eg.authMethod&&!es.azureConnectionString}),es.azureConnectionString&&!eg.connectionString?(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing connection string will be kept"}):(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"In Azure Portal: Storage Account → Access keys → Connection string"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,r.jsx)(c.Input,{value:eg.pathPrefix||"",onChange:e=>ef({...eg,pathPrefix:e.target.value}),placeholder:"/backups"})]})]})]}),"local"===eo&&(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Local Storage Configuration"}),(0,r.jsx)(l.BT,{children:"Configure local filesystem storage"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Base Path"}),(0,r.jsx)(c.Input,{value:ep.basePath,onChange:e=>ey({...ep,basePath:e.target.value}),placeholder:"/mnt/backups",required:"local"===eo}),(0,r.jsx)("p",{className:"text-xs text-foreground-muted",children:"Absolute path to the directory where backups will be stored"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Create If Missing"}),(0,r.jsx)("p",{className:"text-sm text-foreground-muted",children:"Create the directory if it doesn't exist"})]}),(0,r.jsx)(i.d,{checked:ep.createIfMissing,onCheckedChange:e=>ey({...ep,createIfMissing:e})})]})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Test Connection"}),(0,r.jsx)(l.BT,{children:"Verify your settings are correct before saving"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsx)(o.Button,{type:"button",variant:"outline",onClick:eN,disabled:X,children:X?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-2"}),"Testing..."]}):"Test Connection"}),Q&&(0,r.jsx)(h.ConnectionTestResult,{success:Q.success,error:Q.error,latencyMs:Q.latencyMs})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[eb?(0,r.jsx)(o.Button,{type:"button",variant:"destructive",onClick:ej,disabled:_||H,children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-2"}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Delete Provider"]})}):(0,r.jsx)("div",{}),(0,r.jsx)(o.Button,{type:"submit",disabled:H||_,children:H?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.y,{size:"sm",className:"mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),eb?"Update Provider":"Create Provider"]})})]})]})}}}]);