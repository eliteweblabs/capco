"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1118],{3998:(e,r,t)=>{t.d(r,{Button:()=>c});var s=t(95155),n=t(12115),a=t(64269),o=t(35299);let c=(0,n.forwardRef)((e,r)=>{let{className:t,variant:n="primary",size:c="md",loading:i,disabled:l,children:d,...u}=e;return(0,s.jsxs)("button",{ref:r,className:(0,a.cn)("\n      inline-flex items-center justify-center font-medium\n      transition-all duration-150 focus-visible:outline-none focus-visible:ring-1\n      focus-visible:ring-brand focus-visible:ring-offset-1\n      disabled:pointer-events-none disabled:opacity-50\n      rounded-lg\n    ",{primary:"\n        bg-brand text-white hover:bg-brand/90\n        border border-brand-secondary\n        shadow-xs active:shadow-none active:bg-brand-secondary\n      ",secondary:"\n        bg-background-tertiary text-foreground\n        border border-border hover:border-border-hover\n        hover:bg-background-elevated shadow-xs\n        active:shadow-none\n      ",ghost:"\n        text-foreground-secondary hover:text-foreground\n        hover:bg-background-tertiary\n        border border-transparent\n        active:bg-background-secondary\n      ",destructive:"\n        bg-error text-white hover:bg-error/90\n        border border-red-700\n        shadow-xs active:shadow-none active:bg-red-700\n      ",outline:"\n        border border-brand text-brand\n        hover:bg-brand/10\n        active:bg-brand/20\n      "}[n],{sm:"h-8 px-3 text-sm gap-1.5",md:"h-10 px-4 text-sm gap-2",lg:"h-12 px-6 text-base gap-2",icon:"h-10 w-10"}[c],t),disabled:l||i,...u,children:[i&&(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),d]})});c.displayName="Button"},11647:(e,r,t)=>{t.d(r,{E:()=>a});var s=t(95155),n=t(64269);function a(e){let{className:r,variant:t="default",...a}=e;return(0,s.jsx)("span",{className:(0,n.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[t],r),...a})}},18653:(e,r,t)=>{t.d(r,{y:()=>a});var s=t(95155),n=t(64269);function a(e){let{size:r="md",className:t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-spin rounded-full border-2 border-current border-t-transparent text-brand",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[r],t),children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}},20811:(e,r,t)=>{t.d(r,{ProjectActions:()=>v});var s=t(95155),n=t(12115),a=t(20063),o=t(3998),c=t(51834),i=t(18653),l=t(67405),d=t(59e3),u=t(85921),m=t(61362),h=t(93499),f=t(78874),x=t(52056),g=t(50803),p=t(12108),b=t(24033);let j={memory:["Not enough memory available for all containers","Try stopping other running projects","Increase container memory limit (Docker Desktop or system settings)","Consider reducing the number of services"],port:["Port is already in use by another process","Check if another Supabase instance is running","Use `lsof -i :PORT` or `ss -tlnp | grep PORT` to find what's using the port","Stop the conflicting process or change the project ports"],docker:["Container runtime (Docker/Podman) might not be running","For Docker: `sudo systemctl start docker`","For Podman: Podman is daemonless - check if podman works: `podman info`","Check status: `docker info` or `podman info`"],podman:["Podman container issue detected","Check Podman is working: `podman info`","Ensure podman-compose is installed: `podman-compose --version`","On RHEL/CentOS: `sudo dnf install podman podman-compose`"],shortname:['Podman "short-name resolution" error - common on RHEL/CentOS/Fedora',"This happens when Podman requires full image names (docker.io/library/postgres) but uses short names (postgres)","Quick Fix: Run the Podman fix script from your install directory:","  sudo bash /opt/supascale-web/.build/standalone/scripts/fix-podman.sh","Manual Fix: Add this line to /etc/containers/registries.conf:",'  unqualified-search-registries = ["docker.io"]',"Then try starting the project again"],network:["Container network creation failed","For Docker: `docker network prune` to clean up unused networks","For Podman: `podman network prune`","Try restarting your container runtime"],default:["Check the logs above for more details","Ensure your container runtime (Docker or Podman) is running","On Ubuntu/Debian: Docker is typically used","On RHEL/CentOS/Fedora: Podman is recommended (install with: sudo dnf install podman podman-compose)","Check system resources (memory, disk space)"]};function v(e){let{projectId:r,apiPort:t,serverHost:v}=e,w=(0,a.useRouter)(),{isRunning:y,refresh:N}=(0,l.$)(r),[k,C]=(0,n.useState)(!1),[S,P]=(0,n.useState)(null),[A,T]=(0,n.useState)("idle"),[E,D]=(0,n.useState)([]),[B,F]=(0,n.useState)(null),[R,L]=(0,n.useState)(!1),M=(0,n.useRef)(null),O=(0,n.useRef)(null);(0,n.useEffect)(()=>{R&&M.current&&M.current.scrollIntoView({behavior:"smooth"})},[E,R]),(0,n.useEffect)(()=>()=>{O.current&&O.current.close()},[]);let z=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";D(t=>[...t,{timestamp:new Date().toLocaleTimeString(),message:e,type:r}])},I=async e=>{P(e),T("running"),D([]),F(null),C(!0),L(!0),z("".concat("start"===e?"Starting":"Stopping"," project..."));let t=new AbortController,s=setTimeout(()=>t.abort(),6e5);try{let a=await fetch("/api/v1/projects/".concat(r,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},signal:t.signal}),o=a.headers.get("content-type");if(null==o?void 0:o.includes("text/event-stream")){var n;let r=null==(n=a.body)?void 0:n.getReader(),t=new TextDecoder;if(r)for(;;){let{done:s,value:n}=await r.read();if(s)break;for(let r of t.decode(n).split("\n"))if(!r.startsWith(":")&&r.startsWith("data: "))try{let t=JSON.parse(r.slice(6));if("log"===t.type){let e="info";"error"===t.level?e="error":"success"===t.level&&(e="success"),z(t.message,e)}else"progress"===t.type?z("".concat(t.service,": ").concat(t.status),"info"):"complete"===t.type?(z("Project ".concat("start"===e?"started":"stopped"," successfully"),"success"),T("success")):"error"===t.type&&(z(t.error,"error"),F(t.error),T("error"),L(!0))}catch(e){}}clearTimeout(s)}else{clearTimeout(s);let r=await a.json();r.success?(z("Project ".concat("start"===e?"started":"stopped"," successfully"),"success"),T("success")):(z(r.error||"Operation failed","error"),F(r.error||"Operation failed"),T("error"),L(!0))}}catch(r){clearTimeout(s);let e="An unexpected error occurred";r instanceof Error&&(e="AbortError"===r.name?"Operation timed out after 10 minutes. The containers may still be starting in the background.":r.message),z(e,"error"),F(e),T("error"),L(!0)}},_=()=>{C(!1),("success"===A||"error"===A)&&(N(),w.refresh())};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:y?(0,s.jsxs)(o.Button,{variant:"secondary",size:"sm",onClick:()=>I("stop"),children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-1.5"}),"Stop"]}):(0,s.jsxs)(o.Button,{size:"sm",onClick:()=>I("start"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-1.5"}),"Start"]})}),(0,s.jsx)(c.lG,{open:k,onClose:_,className:"max-w-4xl",title:"start"===S?"running"===A?"Starting Project...":"success"===A?"Project Started":"Start Failed":"running"===A?"Stopping Project...":"success"===A?"Project Stopped":"Stop Failed",children:(0,s.jsxs)("div",{className:"flex flex-col min-h-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center py-4",children:["running"===A&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.y,{size:"lg",className:"mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-foreground-secondary",children:"start"===S?"Starting containers...":"Stopping containers..."}),(0,s.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:"Watch the logs below for real-time progress"})]}),"success"===A&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(m.A,{className:"h-8 w-8 text-success"})}),(0,s.jsx)("p",{className:"text-foreground font-medium",children:"start"===S?"Project is now running!":"Project has been stopped"}),"start"===S&&(0,s.jsxs)("a",{href:"http://".concat(v,":").concat(t),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 text-brand hover:underline",children:[(0,s.jsx)(h.A,{className:"h-4 w-4"}),"Open Studio Dashboard"]})]}),"error"===A&&(0,s.jsxs)("div",{className:"text-center w-full",children:[(0,s.jsx)("div",{className:"h-16 w-16 rounded-full bg-error/10 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(f.A,{className:"h-8 w-8 text-error"})}),(0,s.jsx)("p",{className:"text-foreground font-medium mb-2",children:"start"===S?"Failed to start project":"Failed to stop project"}),B&&(0,s.jsx)("div",{className:"max-h-24 overflow-y-auto mb-4 px-2",children:(0,s.jsx)("p",{className:"text-sm text-error break-words",children:B})}),B&&(0,s.jsx)("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-4 text-left",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground mb-2",children:"Troubleshooting tips:"}),(0,s.jsx)("ul",{className:"text-sm text-foreground-secondary space-y-1",children:(function(e){let r=e.toLowerCase();return r.includes("memory")||r.includes("oom")||r.includes("killed")?j.memory:r.includes("port")||r.includes("address already in use")||r.includes("bind")?j.port:r.includes("short-name")||r.includes("cannot prompt without a tty")?j.shortname:r.includes("podman")?j.podman:r.includes("docker")||r.includes("daemon")||r.includes("cannot connect")?j.docker:r.includes("network")?j.network:j.default})(B).map((e,r)=>(0,s.jsxs)("li",{children:["â€¢ ",e]},r))})]})]})})]})]}),E.length>0&&(0,s.jsxs)("div",{className:"border-t border-border pt-4 mt-4",children:[(0,s.jsxs)("button",{onClick:()=>L(!R),className:"flex items-center gap-2 text-sm text-foreground-muted hover:text-foreground transition-colors w-full",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["View Logs (",E.length,")"]}),R?(0,s.jsx)(p.A,{className:"h-4 w-4 ml-auto"}):(0,s.jsx)(b.A,{className:"h-4 w-4 ml-auto"})]}),R&&(0,s.jsxs)("div",{className:"mt-3 bg-background-tertiary rounded-lg p-3 max-h-64 overflow-y-auto font-mono text-xs scroll-smooth",children:[E.map((e,r)=>(0,s.jsxs)("div",{className:"py-0.5 break-words ".concat("error"===e.type?"text-error":"success"===e.type?"text-success":"text-foreground-secondary"),children:[(0,s.jsxs)("span",{className:"text-foreground-muted",children:["[",e.timestamp,"]"]})," ",e.message]},r)),(0,s.jsx)("div",{ref:M})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 mt-4 border-t border-border flex-shrink-0",children:["error"===A&&(0,s.jsx)(o.Button,{variant:"outline",onClick:()=>I(S),children:"Try Again"}),(0,s.jsx)(o.Button,{onClick:_,children:"running"===A?"Close (continues in background)":"Close"})]})]})})]})}},51834:(e,r,t)=>{t.d(r,{Es:()=>l,lG:()=>i});var s=t(95155),n=t(12115),a=t(65229),o=t(64269),c=t(3998);function i(e){let{open:r,onClose:t,children:i,className:l,title:d}=e;return r?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:t,"aria-hidden":"true"}),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:(0,o.cn)("relative w-full max-w-lg max-h-[90vh] flex flex-col bg-background-secondary rounded-xl shadow-lg border border-border","animate-in fade-in-0 zoom-in-95 duration-200",l),role:"dialog","aria-modal":"true",onClick:e=>e.stopPropagation(),children:[d&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 pb-0 flex-shrink-0",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:d}),(0,s.jsxs)(c.Button,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 text-foreground-muted hover:text-foreground",children:[(0,s.jsx)(a.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:i})]})})]}):null}function l(e){let{children:r,className:t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex items-center justify-end gap-3 p-6 pt-0",t),children:r})}},62927:(e,r,t)=>{t.d(r,{Header:()=>x});var s=t(95155),n=t(12115),a=t(59427),o=t(37494),c=t(79451),i=t(64269);function l(){let[e,r]=(0,n.useState)("system"),[t,i]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i(!0);let e=localStorage.getItem("theme");e&&r(e)},[]),(0,n.useEffect)(()=>{if(!t)return;let r=document.documentElement,s=e=>{r.setAttribute("data-theme",e),r.classList.remove("light","dark"),r.classList.add(e)};if("system"===e){let e=window.matchMedia("(prefers-color-scheme: dark)");s(e.matches?"dark":"light");let r=e=>{s(e.matches?"dark":"light")};return e.addEventListener("change",r),()=>e.removeEventListener("change",r)}s(e)},[e,t]);let l=e=>{r(e),localStorage.setItem("theme",e)};return t?(0,s.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-background-tertiary border border-border",children:[(0,s.jsx)(d,{active:"light"===e,onClick:()=>l("light"),title:"Light mode",children:(0,s.jsx)(a.A,{className:"h-4 w-4"})}),(0,s.jsx)(d,{active:"dark"===e,onClick:()=>l("dark"),title:"Dark mode",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsx)(d,{active:"system"===e,onClick:()=>l("system"),title:"System theme",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-lg bg-background-tertiary",children:[(0,s.jsx)("div",{className:"h-8 w-8"}),(0,s.jsx)("div",{className:"h-8 w-8"}),(0,s.jsx)("div",{className:"h-8 w-8"})]})}function d(e){let{active:r,onClick:t,title:n,children:a}=e;return(0,s.jsx)("button",{onClick:t,title:n,className:(0,i.cn)("h-8 w-8 flex items-center justify-center rounded-md transition-colors",r?"bg-background-elevated text-brand shadow-sm":"text-foreground-muted hover:text-foreground"),children:a})}var u=t(3998),m=t(6191),h=t(52619),f=t.n(h);function x(e){let{title:r,description:t,showCreateButton:n=!0}=e;return(0,s.jsxs)("header",{className:"sticky top-0 z-30 flex items-center justify-between h-14 lg:h-16 px-4 lg:px-6 bg-background/95 backdrop-blur-sm border-b border-border",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[r&&(0,s.jsx)("h1",{className:"text-lg lg:text-xl font-semibold text-foreground truncate",children:r}),t&&(0,s.jsx)("p",{className:"text-xs lg:text-sm text-foreground-secondary truncate",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 ml-4",children:[n&&(0,s.jsxs)(f(),{href:"/projects/new",children:[(0,s.jsxs)(u.Button,{size:"sm",className:"hidden sm:flex",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"New Project"]}),(0,s.jsx)(u.Button,{size:"icon",className:"sm:hidden h-8 w-8",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(l,{})]})]})}},64269:(e,r,t)=>{t.d(r,{Ye:()=>d,Yq:()=>l,cn:()=>a,fw:()=>c,mo:()=>i,z3:()=>o});var s=t(2821),n=t(75889);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,s.$)(r))}let o=function(e){if(0===e)return"0 B";let r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][r])};function c(e){let r=new Date,t=new Date(e),s=Math.floor((r.getTime()-t.getTime())/1e3);return s<60?"just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):t.toLocaleDateString()}function i(e){let r,t=new Date,s=new Date(e),n=s.getTime()-t.getTime(),a=Math.abs(Math.floor(n/1e3));if(a<60)r="less than a minute";else if(a<3600){let e=Math.floor(a/60);r="".concat(e," minute").concat(e>1?"s":"")}else if(a<86400){let e=Math.floor(a/3600);r="".concat(e," hour").concat(e>1?"s":"")}else{if(!(a<604800))return s.toLocaleDateString();let e=Math.floor(a/86400);r="".concat(e," day").concat(e>1?"s":"")}return n>0?"in ".concat(r):"".concat(r," ago")}function l(e){return new Date(e).toLocaleString()}function d(e){return e.toLowerCase().replace(/[^a-z0-9_-]/g,"-").replace(/^[^a-z0-9]/,"").replace(/-+/g,"-").slice(0,50)}},67405:(e,r,t)=>{t.d(r,{$:()=>n});var s=t(12115);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pollInterval:t=5e3,enabled:n=!0}=r,[a,o]=(0,s.useState)("unknown"),[c,i]=(0,s.useState)(!0),[l,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),x=(0,s.useCallback)(async()=>{if(e)try{let r=await fetch("/api/v1/projects/".concat(e,"/status")),t=await r.json();t.success?(o(t.data.status),m(t.data.lastStatusCheck),d(null),f(!0)):d(t.error||"Failed to fetch status")}catch(e){d(e instanceof Error?e.message:"Failed to fetch status")}finally{i(!1)}},[e]);return(0,s.useEffect)(()=>{n&&x()},[n,x]),(0,s.useEffect)(()=>{if(!n||t<=0)return;let e=setInterval(x,t);return()=>clearInterval(e)},[n,t,x]),{status:a,isLoading:c&&!h,error:l,lastChecked:u,isRunning:"running"===a||"degraded"===a,isTransitioning:"starting"===a||"stopping"===a,refresh:x}}},86948:(e,r,t)=>{t.d(r,{BT:()=>l,Wu:()=>d,ZB:()=>i,Zp:()=>o,aR:()=>c});var s=t(95155),n=t(12115),a=t(64269);let o=(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",t),...n})});o.displayName="Card";let c=(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});c.displayName="CardHeader";let i=(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",t),...n})});i.displayName="CardTitle";let l=(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-foreground-secondary",t),...n})});l.displayName="CardDescription";let d=(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",(0,n.forwardRef)((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},89405:(e,r,t)=>{t.d(r,{Breadcrumb:()=>l});var s=t(95155),n=t(52619),a=t.n(n),o=t(65993),c=t(27937),i=t(64269);function l(e){let{items:r,className:t}=e;return(0,s.jsxs)("nav",{"aria-label":"Breadcrumb",className:(0,i.cn)("flex items-center gap-1 text-sm",t),children:[(0,s.jsx)(a(),{href:"/",className:"text-foreground-muted hover:text-foreground transition-colors",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),r.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 text-foreground-muted"}),e.href&&t<r.length-1?(0,s.jsx)(a(),{href:e.href,className:"text-foreground-muted hover:text-foreground transition-colors",children:e.label}):(0,s.jsx)("span",{className:"text-foreground font-medium",children:e.label})]},e.label))]})}}}]);