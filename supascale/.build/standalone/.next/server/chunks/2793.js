"use strict";exports.id=2793,exports.ids=[2793],exports.modules={1420:(a,b,c)=>{c.d(b,{d:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=(0,e.forwardRef)(({className:a,checked:b,onCheckedChange:c,onChange:e,...g},h)=>(0,d.jsxs)("label",{className:(0,f.cn)("relative inline-flex cursor-pointer items-center",a),children:[(0,d.jsx)("input",{type:"checkbox",role:"switch",className:"peer sr-only",ref:h,checked:b,onChange:a=>{e?.(a),c?.(a.target.checked)},...g}),(0,d.jsx)("div",{className:(0,f.cn)("h-6 w-11 rounded-full transition-colors","bg-background-tertiary border border-border","peer-checked:bg-brand peer-checked:border-brand","peer-focus-visible:ring-2 peer-focus-visible:ring-brand peer-focus-visible:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50","after:absolute after:left-[2px] after:top-[2px]","after:h-5 after:w-5 after:rounded-full","after:bg-white after:shadow-sm","after:transition-transform","peer-checked:after:translate-x-5")})]}));g.displayName="Switch"},29822:(a,b,c)=>{c.d(b,{ConnectionTestResult:()=>h});var d=c(21124),e=c(59268),f=c(15303),g=c(91292);function h({success:a,error:b,latencyMs:c}){return a?(0,d.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-success/10 border border-success/20 rounded-lg",children:[(0,d.jsx)(e.A,{className:"h-5 w-5 text-success flex-shrink-0 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-success",children:"Connection successful"}),(0,d.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:"Storage provider is accessible and ready to use."}),void 0!==c&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-xs text-foreground-muted mt-2",children:[(0,d.jsx)(f.A,{className:"h-3 w-3"}),(0,d.jsxs)("span",{children:["Response time: ",c,"ms"]})]})]})]}):(0,d.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-error/10 border border-error/20 rounded-lg",children:[(0,d.jsx)(g.A,{className:"h-5 w-5 text-error flex-shrink-0 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-error",children:"Connection failed"}),b&&(0,d.jsx)("p",{className:"text-sm text-foreground-muted mt-1",children:b}),void 0!==c&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-xs text-foreground-muted mt-2",children:[(0,d.jsx)(f.A,{className:"h-3 w-3"}),(0,d.jsxs)("span",{children:["Response time: ",c,"ms"]})]})]})]})}},62186:(a,b,c)=>{c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h});var d=c(21124),e=c(38301),f=c(44943);let g=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-xl border border-border bg-background-secondary shadow-xs",a),...b}));g.displayName="Card";let h=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight text-foreground",a),...b}));i.displayName="CardTitle";let j=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-foreground-secondary",a),...b}));j.displayName="CardDescription";let k=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent",(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter"},63993:(a,b,c)=>{c.d(b,{ProviderTypeSelector:()=>j});var d=c(21124),e=c(84220),f=c(65828),g=c(11082),h=c(66041);let i=[{id:"s3",label:"Amazon S3",description:"AWS S3 or S3-compatible storage (MinIO, R2, etc.)",icon:e.A},{id:"gcs",label:"Google Cloud Storage",description:"Google Cloud Platform object storage",icon:f.A},{id:"azure",label:"Azure Blob Storage",description:"Microsoft Azure Blob Storage containers",icon:g.A},{id:"local",label:"Local Filesystem",description:"Local directory or network-attached storage (NAS)",icon:h.A}];function j({value:a,onChange:b,disabled:c}){return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Storage Provider Type"}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.map(e=>{let f=e.icon,g=a===e.id;return(0,d.jsxs)("button",{type:"button",disabled:c,onClick:()=>b(e.id),className:`p-4 border rounded-lg text-left transition-colors ${g?"border-brand bg-brand/10":"border-border hover:border-brand/50"} ${c?"opacity-50 cursor-not-allowed":""}`,children:[(0,d.jsx)(f,{className:`h-5 w-5 mb-2 ${g?"text-brand":"text-foreground-muted"}`}),(0,d.jsx)("p",{className:"font-medium",children:e.label}),(0,d.jsx)("p",{className:"text-xs text-foreground-muted mt-1",children:e.description})]},e.id)})})]})}},76705:(a,b,c)=>{c.d(b,{ProviderCard:()=>x});var d=c(21124),e=c(3991),f=c.n(e),g=c(38301),h=c(62186),i=c(99187),j=c(35284),k=c(62145),l=c(39163),m=c(84220),n=c(65828),o=c(11082),p=c(66041),q=c(18310),r=c(59268),s=c(91292),t=c(30733),u=c(30887),v=c(44943);let w={s3:{label:"Amazon S3",icon:m.A},gcs:{label:"Google Cloud",icon:n.A},azure:{label:"Azure Blob",icon:o.A},local:{label:"Local",icon:p.A},r2:{label:"Cloudflare R2",icon:m.A},minio:{label:"MinIO",icon:o.A},backblaze:{label:"Backblaze B2",icon:m.A}};function x({provider:a,onTest:b,onSetDefault:c}){let e=(0,l.d)(),[n,o]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),y=w[a.type]||{label:a.type,icon:m.A},z=y.icon,A=async c=>{if(c.preventDefault(),c.stopPropagation(),b){o(!0);try{await b(a.id)?e.success("Connection successful","Storage provider is accessible"):e.error("Connection failed","Could not connect to storage provider")}catch(a){e.error("Test failed",a instanceof Error?a.message:"Unknown error")}finally{o(!1)}}},B=async b=>{if(b.preventDefault(),b.stopPropagation(),c&&!a.isDefault){x(!0);try{await c(a.id),e.success("Default updated",`${a.name} is now the default provider`)}catch(a){e.error("Failed to set default",a instanceof Error?a.message:"Unknown error")}finally{x(!1)}}};return(0,d.jsx)(f(),{href:`/cloud-storage/${a.id}`,children:(0,d.jsx)(h.Zp,{className:"hover:border-brand/50 transition-colors cursor-pointer",children:(0,d.jsx)(h.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"h-10 w-10 rounded-lg bg-background-tertiary flex items-center justify-center flex-shrink-0",children:(0,d.jsx)(z,{className:"h-5 w-5 text-brand"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("h3",{className:"font-medium text-foreground truncate",children:a.name}),a.isDefault&&(0,d.jsxs)(i.E,{variant:"info",className:"flex-shrink-0",children:[(0,d.jsx)(t.A,{className:"h-3 w-3 mr-1"}),"Default"]})]}),(0,d.jsxs)("p",{className:"text-sm text-foreground-muted mt-0.5",children:[y.label," • ",function(a){switch(a.type){case"s3":case"r2":case"minio":case"backblaze":return a.s3Config?`${a.s3Config.bucket}${a.s3Config.pathPrefix||""}`:"Not configured";case"gcs":return a.gcsConfig?`${a.gcsConfig.bucket}${a.gcsConfig.pathPrefix||""}`:"Not configured";case"azure":return a.azureConfig?`${a.azureConfig.containerName}${a.azureConfig.pathPrefix||""}`:"Not configured";case"local":return a.localConfig?.basePath||"Not configured";default:return"Unknown provider"}}(a)]}),a.lastTestedAt&&(0,d.jsxs)("p",{className:"text-xs text-foreground-muted mt-1",children:["Last tested: ",(0,v.mo)(a.lastTestedAt)]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[a.lastTestedAt?"success"===a.lastTestResult?(0,d.jsxs)(i.E,{variant:"success",children:[(0,d.jsx)(r.A,{className:"h-3 w-3 mr-1"}),"Connected"]}):(0,d.jsxs)(i.E,{variant:"error",children:[(0,d.jsx)(s.A,{className:"h-3 w-3 mr-1"}),"Failed"]}):(0,d.jsxs)(i.E,{variant:"secondary",children:[(0,d.jsx)(q.A,{className:"h-3 w-3 mr-1"}),"Not tested"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",onClick:a=>a.preventDefault(),children:[!a.isDefault&&c&&(0,d.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:B,disabled:p,title:"Set as default",children:p?(0,d.jsx)(k.y,{size:"sm"}):(0,d.jsx)(t.A,{className:"h-4 w-4"})}),b&&(0,d.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:A,disabled:n,title:"Test connection",children:n?(0,d.jsx)(k.y,{size:"sm"}):(0,d.jsx)(u.A,{className:"h-4 w-4"})})]})]})]})})})})}},79529:(a,b,c)=>{c.d(b,{ProviderForm:()=>s});var d=c(21124),e=c(38301),f=c(42378),g=c(62186),h=c(35284),i=c(93758),j=c(1420),k=c(62145),l=c(39163),m=c(63993),n=c(29822),o=c(72380),p=c(3368),q=c(40284),r=c(81100);function s({provider:a,onSuccess:b}){let c=(0,f.useRouter)(),s=(0,l.d)(),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)({s3AccessKeyId:a?.s3Config?.accessKeyId==="********",s3SecretAccessKey:a?.s3Config?.secretAccessKey==="********",gcsKeyFile:a?.gcsConfig?.keyFile==="********",azureAccountKey:a?.azureConfig?.accountKey==="********",azureConnectionString:a?.azureConfig?.connectionString==="********",azureSasUrl:a?.azureConfig?.sasUrl==="********"}),F=a=>"********"===a?"":a||"",[G,H]=(0,e.useState)(a?.name||""),[I,J]=(0,e.useState)(a?.type||"s3"),[K,L]=(0,e.useState)(a?.isDefault??!1),[M,N]=(0,e.useState)({bucket:a?.s3Config?.bucket||"",region:a?.s3Config?.region||"us-east-1",endpoint:a?.s3Config?.endpoint||"",accessKeyId:F(a?.s3Config?.accessKeyId),secretAccessKey:F(a?.s3Config?.secretAccessKey),pathPrefix:a?.s3Config?.pathPrefix||"",forcePathStyle:a?.s3Config?.forcePathStyle||!1}),[O,P]=(0,e.useState)({bucket:a?.gcsConfig?.bucket||"",projectId:a?.gcsConfig?.projectId||"",keyFile:F(a?.gcsConfig?.keyFile),pathPrefix:a?.gcsConfig?.pathPrefix||""}),[Q,R]=(0,e.useState)({containerName:a?.azureConfig?.containerName||"",accountName:a?.azureConfig?.accountName||"",accountKey:F(a?.azureConfig?.accountKey),connectionString:F(a?.azureConfig?.connectionString),sasUrl:F(a?.azureConfig?.sasUrl),authMethod:a?.azureConfig?.authMethod||"sasUrl",pathPrefix:a?.azureConfig?.pathPrefix||""}),[S,T]=(0,e.useState)(a?.localConfig||{basePath:"",createIfMissing:!0}),U=!!a,V=async d=>{if(d.preventDefault(),!G.trim())return void s.error("Name required","Please enter a provider name");u(!0);try{let d={name:G,type:I,isDefault:K},e=(a,b)=>U&&""===a&&b?"********":a;["s3","r2","minio","backblaze"].includes(I)?d.s3Config={...M,accessKeyId:e(M.accessKeyId,D.s3AccessKeyId),secretAccessKey:e(M.secretAccessKey,D.s3SecretAccessKey)}:"gcs"===I?d.gcsConfig={...O,keyFile:e(O.keyFile,D.gcsKeyFile)}:"azure"===I?d.azureConfig={...Q,accountKey:e(Q.accountKey||"",D.azureAccountKey),connectionString:e(Q.connectionString||"",D.azureConnectionString),sasUrl:e(Q.sasUrl||"",D.azureSasUrl)}:"local"===I&&(d.localConfig=S);let f=U?`/api/v1/cloud-storage/${a.id}`:"/api/v1/cloud-storage",g=await fetch(f,{method:U?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),h=await g.json();if(!h.success)throw Error(h.error||"Failed to save provider");s.success(U?"Provider updated":"Provider created",U?"Storage provider has been updated":"Storage provider has been created"),b?.(),c.push("/cloud-storage"),c.refresh()}catch(b){let a=b instanceof Error?b.message:"Failed to save provider";s.error("Error",a)}finally{u(!1)}},W=async()=>{if(a&&confirm("Are you sure you want to delete this storage provider?")){w(!0);try{let b=await fetch(`/api/v1/cloud-storage/${a.id}`,{method:"DELETE"}),d=await b.json();if(!d.success)throw Error(d.error||"Failed to delete provider");s.success("Provider deleted","Storage provider has been deleted"),c.push("/cloud-storage"),c.refresh()}catch(b){let a=b instanceof Error?b.message:"Failed to delete provider";s.error("Error",a)}finally{w(!1)}}},X=async()=>{y(!0),A(null);try{let b={type:I};U&&a&&(b.providerId=a.id),["s3","r2","minio","backblaze"].includes(I)?b.s3Config=M:"gcs"===I?b.gcsConfig=O:"azure"===I?b.azureConfig=Q:"local"===I&&(b.localConfig=S);let c=await fetch("/api/v1/cloud-storage/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();A({success:d.data?.connected??!1,error:d.data?.error||d.error,latencyMs:d.data?.latencyMs})}catch(a){A({success:!1,error:a instanceof Error?a.message:"Test failed"})}finally{y(!1)}},Y=["s3","r2","minio","backblaze"];return(0,d.jsxs)("form",{onSubmit:V,className:"space-y-6",children:[(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Basic Information"}),(0,d.jsx)(g.BT,{children:"Give your storage provider a name"})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Provider Name"}),(0,d.jsx)(i.Input,{value:G,onChange:a=>H(a.target.value),placeholder:"Production Backups",required:!0})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Set as Default"}),(0,d.jsx)("p",{className:"text-sm text-foreground-muted",children:"Use this provider for backups by default"})]}),(0,d.jsx)(j.d,{checked:K,onCheckedChange:L})]})]})]}),!U&&(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Provider Type"}),(0,d.jsx)(g.BT,{children:"Select your storage provider"})]}),(0,d.jsx)(g.Wu,{children:(0,d.jsx)(m.ProviderTypeSelector,{value:I,onChange:J})})]}),Y.includes(I)&&(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"S3 Configuration"}),(0,d.jsxs)(g.BT,{children:["Configure your ","s3"===I?"Amazon S3":"r2"===I?"Cloudflare R2":"minio"===I?"MinIO":"Backblaze B2"," settings"]})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Bucket Name"}),(0,d.jsx)(i.Input,{value:M.bucket,onChange:a=>N({...M,bucket:a.target.value}),placeholder:"my-backup-bucket",required:Y.includes(I)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Region"}),(0,d.jsx)(i.Input,{value:M.region,onChange:a=>N({...M,region:a.target.value}),placeholder:"us-east-1",required:Y.includes(I)})]})]}),"s3"!==I&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Endpoint URL"}),(0,d.jsx)(i.Input,{value:M.endpoint||"",onChange:a=>N({...M,endpoint:a.target.value}),placeholder:"r2"===I?"https://[account-id].r2.cloudflarestorage.com":"minio"===I?"http://localhost:9000":"https://s3.us-west-000.backblazeb2.com"}),(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Required for non-AWS S3-compatible services"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Credentials"}),(0,d.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(!B),children:B?(0,d.jsx)(o.A,{className:"h-4 w-4"}):(0,d.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.Input,{type:B?"text":"password",value:M.accessKeyId,onChange:a=>N({...M,accessKeyId:a.target.value}),placeholder:D.s3AccessKeyId?"Enter new key to change":"Access Key ID",required:Y.includes(I)&&!D.s3AccessKeyId}),D.s3AccessKeyId&&!M.accessKeyId&&(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)(i.Input,{type:B?"text":"password",value:M.secretAccessKey,onChange:a=>N({...M,secretAccessKey:a.target.value}),placeholder:D.s3SecretAccessKey?"Enter new key to change":"Secret Access Key",required:Y.includes(I)&&!D.s3SecretAccessKey}),D.s3SecretAccessKey&&!M.secretAccessKey&&(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,d.jsx)(i.Input,{value:M.pathPrefix||"",onChange:a=>N({...M,pathPrefix:a.target.value}),placeholder:"/backups"}),(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Optional prefix for all objects stored in this bucket"})]}),("minio"===I||"r2"===I)&&(0,d.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Force Path Style"}),(0,d.jsx)("p",{className:"text-sm text-foreground-muted",children:"Use path-style URLs instead of virtual-hosted-style"})]}),(0,d.jsx)(j.d,{checked:M.forcePathStyle??!1,onCheckedChange:a=>N({...M,forcePathStyle:a})})]})]})]}),"gcs"===I&&(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Google Cloud Storage Configuration"}),(0,d.jsx)(g.BT,{children:"Configure your GCS settings"})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Bucket Name"}),(0,d.jsx)(i.Input,{value:O.bucket,onChange:a=>P({...O,bucket:a.target.value}),placeholder:"my-backup-bucket",required:"gcs"===I})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Project ID"}),(0,d.jsx)(i.Input,{value:O.projectId,onChange:a=>P({...O,projectId:a.target.value}),placeholder:"my-gcp-project",required:"gcs"===I})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Service Account Key File Path"}),(0,d.jsx)(i.Input,{value:O.keyFile,onChange:a=>P({...O,keyFile:a.target.value}),placeholder:D.gcsKeyFile?"Enter new path to change":"/path/to/service-account.json",required:"gcs"===I&&!D.gcsKeyFile}),D.gcsKeyFile&&!O.keyFile?(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing path will be kept"}):(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Path to the JSON key file for your service account"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,d.jsx)(i.Input,{value:O.pathPrefix||"",onChange:a=>P({...O,pathPrefix:a.target.value}),placeholder:"/backups"})]})]})]}),"azure"===I&&(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Azure Blob Storage Configuration"}),(0,d.jsx)(g.BT,{children:"Configure your Azure settings"})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Authentication Method"}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,d.jsxs)("button",{type:"button",className:`p-3 rounded-lg border text-center transition-colors ${"sasUrl"===Q.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"}`,onClick:()=>R({...Q,authMethod:"sasUrl"}),children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:"SAS URL"}),(0,d.jsx)("div",{className:"text-xs text-foreground-muted",children:"Easiest"})]}),(0,d.jsxs)("button",{type:"button",className:`p-3 rounded-lg border text-center transition-colors ${"accountKey"===Q.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"}`,onClick:()=>R({...Q,authMethod:"accountKey"}),children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:"Account Key"}),(0,d.jsx)("div",{className:"text-xs text-foreground-muted",children:"Full access"})]}),(0,d.jsxs)("button",{type:"button",className:`p-3 rounded-lg border text-center transition-colors ${"connectionString"===Q.authMethod?"border-brand bg-brand/10 text-brand":"border-border hover:border-foreground-muted"}`,onClick:()=>R({...Q,authMethod:"connectionString"}),children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:"Conn. String"}),(0,d.jsx)("div",{className:"text-xs text-foreground-muted",children:"Azure Portal"})]})]})]}),"sasUrl"===Q.authMethod&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,d.jsx)(i.Input,{value:Q.containerName,onChange:a=>R({...Q,containerName:a.target.value}),placeholder:"backups",required:"azure"===I})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"SAS URL"}),(0,d.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(!B),children:B?(0,d.jsx)(o.A,{className:"h-4 w-4"}):(0,d.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,d.jsx)(i.Input,{type:B?"text":"password",value:Q.sasUrl||"",onChange:a=>R({...Q,sasUrl:a.target.value}),placeholder:D.azureSasUrl?"Enter new URL to change":"https://account.blob.core.windows.net/container?sv=2022-11-02&ss=b&srt=co&sp=rwdlac&se=...",required:"sasUrl"===Q.authMethod&&!D.azureSasUrl}),D.azureSasUrl&&!Q.sasUrl?(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing SAS URL will be kept"}):(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Full SAS URL with token. In Azure Portal: Storage Account → Shared access signature → Generate SAS"})]})]}),"accountKey"===Q.authMethod&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,d.jsx)(i.Input,{value:Q.containerName,onChange:a=>R({...Q,containerName:a.target.value}),placeholder:"backups",required:"azure"===I})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Storage Account Name"}),(0,d.jsx)(i.Input,{value:Q.accountName,onChange:a=>R({...Q,accountName:a.target.value}),placeholder:"mystorageaccount",required:"accountKey"===Q.authMethod})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Account Key"}),(0,d.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(!B),children:B?(0,d.jsx)(o.A,{className:"h-4 w-4"}):(0,d.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,d.jsx)(i.Input,{type:B?"text":"password",value:Q.accountKey||"",onChange:a=>R({...Q,accountKey:a.target.value}),placeholder:D.azureAccountKey?"Enter new key to change":"Account Key",required:"accountKey"===Q.authMethod&&!D.azureAccountKey}),D.azureAccountKey&&!Q.accountKey?(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing key will be kept"}):(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"In Azure Portal: Storage Account → Access keys → key1 or key2"})]})]}),"connectionString"===Q.authMethod&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Container Name"}),(0,d.jsx)(i.Input,{value:Q.containerName,onChange:a=>R({...Q,containerName:a.target.value}),placeholder:"backups",required:"azure"===I})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Connection String"}),(0,d.jsx)(h.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(!B),children:B?(0,d.jsx)(o.A,{className:"h-4 w-4"}):(0,d.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,d.jsx)(i.Input,{type:B?"text":"password",value:Q.connectionString||"",onChange:a=>R({...Q,connectionString:a.target.value}),placeholder:D.azureConnectionString?"Enter new string to change":"DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...;EndpointSuffix=core.windows.net",required:"connectionString"===Q.authMethod&&!D.azureConnectionString}),D.azureConnectionString&&!Q.connectionString?(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Existing connection string will be kept"}):(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"In Azure Portal: Storage Account → Access keys → Connection string"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Path Prefix (Optional)"}),(0,d.jsx)(i.Input,{value:Q.pathPrefix||"",onChange:a=>R({...Q,pathPrefix:a.target.value}),placeholder:"/backups"})]})]})]}),"local"===I&&(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Local Storage Configuration"}),(0,d.jsx)(g.BT,{children:"Configure local filesystem storage"})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Base Path"}),(0,d.jsx)(i.Input,{value:S.basePath,onChange:a=>T({...S,basePath:a.target.value}),placeholder:"/mnt/backups",required:"local"===I}),(0,d.jsx)("p",{className:"text-xs text-foreground-muted",children:"Absolute path to the directory where backups will be stored"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-medium",children:"Create If Missing"}),(0,d.jsx)("p",{className:"text-sm text-foreground-muted",children:"Create the directory if it doesn't exist"})]}),(0,d.jsx)(j.d,{checked:S.createIfMissing,onCheckedChange:a=>T({...S,createIfMissing:a})})]})]})]}),(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsx)(g.ZB,{children:"Test Connection"}),(0,d.jsx)(g.BT,{children:"Verify your settings are correct before saving"})]}),(0,d.jsxs)(g.Wu,{className:"space-y-4",children:[(0,d.jsx)(h.Button,{type:"button",variant:"outline",onClick:X,disabled:x,children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.y,{size:"sm",className:"mr-2"}),"Testing..."]}):"Test Connection"}),z&&(0,d.jsx)(n.ConnectionTestResult,{success:z.success,error:z.error,latencyMs:z.latencyMs})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[U?(0,d.jsx)(h.Button,{type:"button",variant:"destructive",onClick:W,disabled:v||t,children:v?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.y,{size:"sm",className:"mr-2"}),"Deleting..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Delete Provider"]})}):(0,d.jsx)("div",{}),(0,d.jsx)(h.Button,{type:"submit",disabled:t||v,children:t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.y,{size:"sm",className:"mr-2"}),"Saving..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.A,{className:"h-4 w-4 mr-2"}),U?"Update Provider":"Create Provider"]})})]})]})}},93758:(a,b,c)=>{c.d(b,{Input:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=(0,e.forwardRef)(({className:a,type:b="text",error:c,icon:e,...g},h)=>(0,d.jsxs)("div",{className:"relative",children:[e&&(0,d.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-foreground-muted",children:e}),(0,d.jsx)("input",{type:b,className:(0,f.cn)(`
            w-full h-10 px-3 py-2
            bg-background-tertiary text-foreground
            border border-border rounded-lg shadow-2xs
            placeholder:text-foreground-muted
            hover:border-border-hover
            focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-brand focus-visible:border-transparent
            disabled:cursor-not-allowed disabled:opacity-50
            transition-all duration-150
            `,e&&"pl-10",c&&"border-error focus-visible:ring-error hover:border-error",a),ref:h,...g})]}));g.displayName="Input"},99187:(a,b,c)=>{c.d(b,{E:()=>f});var d=c(21124),e=c(44943);function f({className:a,variant:b="default",...c}){return(0,d.jsx)("span",{className:(0,e.cn)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-semibold transition-colors",{default:"bg-brand/10 text-brand border-brand/20",success:"bg-success/10 text-success border-success/20",warning:"bg-warning/10 text-warning border-warning/20",error:"bg-error/10 text-error border-error/20",info:"bg-info/10 text-info border-info/20",secondary:"bg-background-tertiary text-foreground-secondary border-border"}[b],a),...c})}}};