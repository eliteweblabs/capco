---
description: Prefer accordions and tooltips over modals; use Modal only when overlay is required
globs: **/*.astro
alwaysApply: false
---

# Modals vs Accordions & Tooltips

**Prefer accordions and tooltips over modals.** Use the `Modal.astro` component only when you truly need a full-page overlay (e.g. drawer backdrop). Avoid modal dialogs for forms, preferences, and panels.

## Preferred patterns

- **Forms / edit UI** → Inline **accordion** or collapsible section on the same page (e.g. CMS page editor, cookie preferences in banner).
- **Short hints / actions** → **Tooltips** or small **dropdown panels** (e.g. notifications panel as a floating card, no overlay).
- **Confirmations** → Use existing toast/notice system or inline confirmation (e.g. `DeleteConfirmButton`).

## When to use Modal.astro

Use only when you need a **backdrop overlay** (e.g. punchlist drawer). Do not use for dialog-style content that can be replaced by an accordion or dropdown panel.

```astro
import Modal from "../components/ui/Modal.astro";

<Modal id="my-backdrop" zIndex={40} opacity="50" blurAmount="sm" />
```

## Accordion pattern (instead of modal)

```astro
<div data-accordion="collapse">
  <h2>
    <button
      type="button"
      data-accordion-target="#section-body"
      aria-expanded="false"
      aria-controls="section-body"
    >
      Section title
    </button>
  </h2>
  <div id="section-body" class="hidden" aria-labelledby="...">
    <!-- Content that would have been in a modal -->
  </div>
</div>
```

Toggle via script: remove/add `hidden` on the body, set `aria-expanded` on the trigger, and use `scrollIntoView({ behavior: "smooth" })` when opening.

## Modal.astro props (when used)

- `id`: Unique identifier (content wrapper gets `{id}-content`)
- `zIndex`, `blurAmount`, `opacity`: Backdrop styling
- `useGlobalOverlay`: Use `global-modal-overlay` from App.astro (for rare cases)
- `backdropClasses`, `contentClasses`: Optional overrides

## Benefits of reducing modals

- No z-index or overlay stacking issues
- No `body.modal-open` or `.hide-for-modal` coupling
- Content stays in page flow (better for accessibility and small screens)
- Simpler mental model: expand/collapse and tooltips instead of layers
