(()=>{var Rt=Object.defineProperty;var ot=e=>{throw TypeError(e)};var qt=(e,t,n)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>qt(e,typeof t!="symbol"?t+"":t,n),at=(e,t,n)=>t.has(e)||ot("Cannot "+n);var m=(e,t,n)=>(at(e,t,"read from private field"),n?n.call(e):t.get(e)),V=(e,t,n)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var l=(e,t,n)=>(at(e,t,"access private method"),n);(function(){if(typeof window>"u")return;window.__jsOrder=0,window.__jsOrderLog=function(c){window.__jsOrder=(window.__jsOrder||0)+1,console.log("[JS-ORDER]",window.__jsOrder,c)},window.__traceNum=0,window.__traceLog=function(c){window.__traceNum=(window.__traceNum||0)+1,console.log("[TRACE "+window.__traceNum+"] "+c)},window.addEventListener("error",c=>{window.__traceLog&&window.__traceLog("ERROR: "+(c.message||String(c)))}),window.addEventListener("unhandledrejection",c=>{let d=c.reason&&(c.reason.message||String(c.reason))||"unknown";window.__traceLog&&window.__traceLog("UNHANDLED REJECTION: "+d)}),window.__jsOrderLog("App theme");let e=localStorage.getItem("color-theme")!==null;function t(c){document.cookie="theme="+c+"; path=/; max-age=31536000; SameSite=Lax"}function n(c){c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme",c),t(c)}n(e?localStorage.getItem("color-theme")||"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),window.isDarkMode=function(){if(document.documentElement.classList.contains("dark"))return!0;let c=localStorage.getItem("color-theme");return c!==null?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches},window.currentTheme=window.isDarkMode()?"dark":"light";let s=localStorage.getItem("page-size")||"normal";document.documentElement.setAttribute("data-page-size",s);let r=navigator.userAgent,o=/iPad|iPhone|iPod/.test(r),a=r.match(/Version\/(\d+)/),u=a?parseInt(a[1],10):0;o&&u>0&&u<14&&(window.__legacySafari=!0)})();async function I(){try{console.log("\u{1F514} [NOTIFICATION-COUNT] Loading notification count...");let e=await fetch("/api/notifications/get?limit=1",{credentials:"include"});if(!e.ok)return console.warn("\u{1F514} [NOTIFICATION-COUNT] Failed to fetch notifications:",e.status),0;let t=await e.json();return t.success?(console.log("\u{1F514} [NOTIFICATION-COUNT] Loaded count:",t.unreadCount),t.unreadCount||0):(console.warn("\u{1F514} [NOTIFICATION-COUNT] API returned error:",t.error),0)}catch(e){return console.error("\u{1F514} [NOTIFICATION-COUNT] Error loading notification count:",e),0}}function S(e){console.log("\u{1F514} [NOTIFICATION-COUNT] Updating bell count:",e);let t=document.getElementById("notification-bell");if(!t){console.warn("\u{1F514} [NOTIFICATION-COUNT] Notification bell not found");return}if(window.updateCountBubble&&window.COUNT_BUBBLE_PRESETS)window.updateCountBubble(t,e,window.COUNT_BUBBLE_PRESETS.notification);else{let n=t.querySelector(".count-bubble");e>0?(n||(n=document.createElement("span"),n.className="count-bubble absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary-500 text-xs font-bold text-white dark:bg-primary-600 animate-pulse",t.appendChild(n)),n.textContent=e>99?"99+":e.toString(),n.style.display="flex",t.setAttribute("data-count",e.toString())):n&&(n.style.display="none",t.removeAttribute("data-count"))}}async function W(){if(console.log("\u{1F514} [NOTIFICATION-COUNT] Initializing notification count..."),document.readyState==="loading")document.addEventListener("DOMContentLoaded",async()=>{let e=await I();S(e)});else{let e=await I();S(e)}}async function J(){console.log("\u{1F514} [NOTIFICATION-COUNT] Refreshing notification count...");let e=await I();S(e)}typeof window<"u"&&(window.loadNotificationCount=I,window.updateNotificationBellCount=S,window.initializeNotificationCount=W,window.refreshNotificationCount=J);var ht=e=>Array.isArray(e),pt=e=>ht(e)?e:[e],Dt=function(e){let t=function(f){return pt(f).forEach(g=>p.set(Symbol(g.char?.innerText),r({...g}))),this},n=()=>c().filter(f=>f.typeable),s=function(f,g){let Ht=[...p.keys()];p.set(Ht[f],r(g))},r=f=>(f.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},f),o=function(){p.forEach(f=>delete f.done)},a=function(){p=new Map,t(e)},u=()=>p,c=()=>Array.from(p.values()),d=f=>p.delete(f),h=()=>{let f=[];for(let[,g]of u())g.done||f.push(g);return f},y=(f=!1)=>f?c():c().filter(g=>!g.done),b=(f,g=!1)=>g?p.delete(f):p.get(f).done=!0,p=new Map;return t(e),{add:t,set:s,wipe:a,done:b,reset:o,destroy:d,getItems:y,getQueue:u,getTypeable:n,getPendingQueueItems:h}},mt="data-typeit-id",C="ti-cursor",Bt="END",Ft={started:!1,completed:!1,frozen:!1,destroyed:!1},v={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(e=>({opacity:e})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},Ut=`[${mt}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,R=e=>document.createElement(e),et=e=>document.createTextNode(e),yt=(e,t="")=>{let n=R("style");n.id=t,n.appendChild(et(e)),document.head.appendChild(n)},lt=e=>(ht(e)||(e=[e/2,e/2]),e),ut=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t)),ct=e=>e/2;function $t(e){let{speed:t,deleteSpeed:n,lifeLike:s}=e;return n=n!==null?n:t/3,s?[ut(t,ct(t)),ut(n,ct(n))]:[t,n]}var gt=e=>Array.from(e),nt=e=>([...e.childNodes].forEach(t=>{if(t.nodeValue){[...t.nodeValue].forEach(n=>{t.parentNode.insertBefore(et(n),t)}),t.remove();return}nt(t)}),e),wt=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,nt(t.body)};function bt(e,t=!1,n=!1){let s=e.querySelector(`.${C}`),r=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:u=>{if(s&&n){if(u.classList?.contains(C))return NodeFilter.FILTER_ACCEPT;if(s.contains(u))return NodeFilter.FILTER_REJECT}return u.classList?.contains(C)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),o,a=[];for(;o=r.nextNode();)o.originalParent||(o.originalParent=o.parentNode),a.push(o);return t?a.reverse():a}function zt(e){return bt(wt(e))}function jt(e,t=!0){return t?zt(e):gt(e).map(et)}var Qt=({index:e,newIndex:t,queueItems:n,cleanUp:s})=>{for(let r=e+1;r<t+1;r++)s(n[r][0])},Tt=e=>Number.isInteger(e),dt=({queueItems:e,selector:t,cursorPosition:n,to:s})=>{if(Tt(t))return t*-1;let r=new RegExp(Bt,"i").test(s),o=t?[...e].reverse().findIndex(({char:u})=>{let c=u.parentElement,d=c.matches(t);return r&&d?!0:d&&c.firstChild.isSameNode(u)}):-1;o<0&&(o=r?0:e.length-1);let a=r?0:1;return o-n+a},Vt=e=>(e.forEach(clearTimeout),[]),H=(e,t)=>new Array(t).fill(e),F=e=>new Promise(t=>{requestAnimationFrame(async()=>{t(await e())})}),Et=e=>e?.getAnimations().find(t=>t.id===e.dataset.tiAnimationId),Nt=({cursor:e,frames:t,options:n})=>{let s=e.animate(t,n);return s.pause(),s.id=e.dataset.tiAnimationId,F(()=>{F(()=>{s.play()})}),s},Wt=({cursor:e,options:t,cursorOptions:n})=>{if(!e||!n)return;let s=Et(e),r;s&&(t.delay=s.effect.getComputedTiming().delay,r=s.currentTime,s.cancel());let o=Nt({cursor:e,frames:n.animation.frames,options:t});return r&&(o.currentTime=r),o},ft=e=>e.func?.call(null),Jt=async({index:e,queueItems:t,wait:n,cursor:s,cursorOptions:r})=>{let o=t[e][1],a=[],u=e,c=o,d=()=>c&&!c.delay,h=o.shouldPauseCursor()&&r.autoPause;for(;d();)a.push(c),d()&&u++,c=t[u]?t[u][1]:null;if(a.length)return await F(async()=>{for(let p of a)await ft(p)}),u-1;let y=Et(s),b;return y&&(b={...y.effect.getComputedTiming(),delay:h?r.autoPauseDelay:0}),await n(async()=>{y&&h&&y.cancel(),await F(()=>{ft(o)})},o.delay),await Wt({cursor:s,options:b,cursorOptions:r}),e},Xt=(e,t)=>{new IntersectionObserver((s,r)=>{s.forEach(o=>{o.isIntersecting&&(t(),r.unobserve(e))})},{threshold:1}).observe(e)},Yt=()=>Math.random().toString().substring(2,9),U=e=>"value"in e,Kt=e=>U(e)?gt(e.value):bt(e,!0).filter(t=>!(t.childNodes.length>0)),L=e=>typeof e=="function"?e():e,st=(e,t=document,n=!1)=>t[`querySelector${n?"All":""}`](e),Gt=e=>/body/i.test(e?.tagName),Zt=(e,t)=>{if(U(e)){e.value=`${e.value}${t.textContent}`;return}t.innerHTML="";let n=Gt(t.originalParent)?e:t.originalParent||e,s=st("."+C,n)||null;s&&s.parentElement!==n&&(n=s.parentElement),n.insertBefore(t,s)},te=e=>/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML),A=(e,t)=>Object.assign({},e,t),ee=e=>{if(typeof e=="object"){let t={},{frames:n,options:s}=v.cursor.animation;return t.animation=e.animation||{},t.animation.frames=e.animation?.frames||n,t.animation.options=A(s,e.animation?.options||{}),t.autoPause=e.autoPause??v.cursor.autoPause,t.autoPauseDelay=e.autoPauseDelay||v.cursor.autoPauseDelay,t}return e===!0?v.cursor:e},ne=(e,t)=>{if(!e)return;let n=e.parentNode;(n.childNodes.length>1||n.isSameNode(t)?e:n).remove()},se=(e,t,n)=>{let s=t[n-1],r=st(`.${C}`,e);e=s?.parentNode||e,e.insertBefore(r,s||null)};function ie(e){return typeof e=="string"?st(e):e}var re={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},oe=(e,t)=>{let s=`${`[${mt}='${e}']`} .${C}`,r=getComputedStyle(t),o=Object.entries(re).reduce((a,[u,c])=>`${a} ${u}: var(--ti-cursor-${u}, ${c||r[u]});`,"");yt(`${s} { display: inline-block; width: 0; ${o} }`,e)};function ae(e){return e.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}var le=(e,t,n)=>Math.min(Math.max(t+e,0),n.length),ue=(e,t,n)=>new Promise(s=>{let r=async()=>{await e(),s()};n.push(setTimeout(r,t||0))}),i,Ct,P,X,It,Y,K,G,q,T,St,x,M,Lt,z,vt,At,Z,D,_,B,N,O,k,tt,E,$=class{constructor(t,n={}){V(this,i);w(this,"element");w(this,"timeouts");w(this,"cursorPosition");w(this,"predictedCursorPosition");w(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1});w(this,"opts");w(this,"id");w(this,"queue");w(this,"cursor");w(this,"flushCallback",null);w(this,"unfreeze",()=>{});w(this,"is",function(t){return this.statuses[t]});V(this,z,t=>{this.opts.cursor=ee(t.cursor??v.cursor),this.opts.strings=l(this,i,vt).call(this,pt(this.opts.strings)),this.opts=A(this.opts,{html:!m(this,i,k)&&this.opts.html,nextStringDelay:lt(this.opts.nextStringDelay),loopDelay:lt(this.opts.loopDelay)})});this.opts=A(v,n),this.element=ie(t),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=A({},Ft),this.id=Yt(),this.queue=Dt([{delay:this.opts.startDelay}]),m(this,z).call(this,n),this.cursor=l(this,i,At).call(this),this.element.dataset.typeitId=this.id,yt(Ut),this.opts.strings.length&&l(this,i,Lt).call(this)}go(){return this.statuses.started?this:(l(this,i,G).call(this),this.opts.waitUntilVisible?(Xt(this.element,l(this,i,P).bind(this)),this):(l(this,i,P).call(this),this))}destroy(t=!0){this.timeouts=Vt(this.timeouts),L(t)&&this.cursor&&l(this,i,B).call(this,this.cursor),this.statuses.destroyed=!0}reset(t){!this.is("destroyed")&&this.destroy(),t?(this.queue.wipe(),t(this)):this.queue.reset(),this.cursorPosition=0;for(let n in this.statuses)this.statuses[n]=!1;return this.element[l(this,i,q).call(this)?"value":"innerHTML"]="",this}type(t,n={}){t=L(t);let{instant:s}=n,r=l(this,i,x).call(this,n),a=jt(t,this.opts.html).map(c=>({func:()=>l(this,i,D).call(this,c),char:c,delay:s||te(c)?0:l(this,i,N).call(this),typeable:c.nodeType===Node.TEXT_NODE})),u=[r[0],{func:async()=>await this.opts.beforeString(t,this)},...a,{func:async()=>await this.opts.afterString(t,this)},r[1]];return l(this,i,T).call(this,u,n)}break(t={}){return l(this,i,T).call(this,{func:()=>l(this,i,D).call(this,R("BR")),typeable:!0},t)}move(t,n={}){t=L(t);let s=l(this,i,x).call(this,n),{instant:r,to:o}=n,a=dt({queueItems:this.queue.getTypeable(),selector:t===null?"":t,to:o,cursorPosition:m(this,i,O)}),u=a<0?-1:1;return this.predictedCursorPosition=m(this,i,O)+a,l(this,i,T).call(this,[s[0],...H({func:()=>l(this,i,X).call(this,u),delay:r?0:l(this,i,N).call(this),cursorable:!0},Math.abs(a)),s[1]],n)}exec(t,n={}){let s=l(this,i,x).call(this,n);return l(this,i,T).call(this,[s[0],{func:()=>t(this)},s[1]],n)}options(t,n={}){return t=L(t),l(this,i,M).call(this,t),l(this,i,T).call(this,{},n)}pause(t,n={}){return l(this,i,T).call(this,{delay:L(t)},n)}delete(t=null,n={}){t=L(t);let s=l(this,i,x).call(this,n),r=t,{instant:o,to:a}=n,u=this.queue.getTypeable(),c=r===null?u.length:Tt(r)?r:dt({queueItems:u,selector:r,cursorPosition:m(this,i,O),to:a});return l(this,i,T).call(this,[s[0],...H({func:l(this,i,_).bind(this),delay:o?0:l(this,i,N).call(this,1),deletable:!0},c),s[1]],n)}freeze(){this.statuses.frozen=!0}flush(t=null){return this.flushCallback=t||this.flushCallback,this.statuses.firing?this:(l(this,i,G).call(this),l(this,i,P).call(this,!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(t){return l(this,i,M).call(this,t)}getElement(){return this.element}empty(t={}){return l(this,i,T).call(this,{func:l(this,i,Ct).bind(this)},t)}};i=new WeakSet,Ct=async function(){if(l(this,i,q).call(this)){this.element.value="";return}m(this,i,E).forEach(l(this,i,B).bind(this))},P=async function(t=!0){this.statuses.started=!0,this.statuses.firing=!0;let n=s=>{this.queue.done(s,!t)};try{let s=[...this.queue.getQueue()];for(let o=0;o<s.length;o++){let[a,u]=s[o];if(!u.done){if(!u.deletable||u.deletable&&m(this,i,E).length){let c=await l(this,i,Y).call(this,o,s);Qt({index:o,newIndex:c,queueItems:s,cleanUp:n}),o=c}n(a)}}if(!t)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let r=this.opts.loopDelay;l(this,i,K).call(this,async()=>{await l(this,i,It).call(this,r[0]),l(this,i,P).call(this)},r[1])}catch{}return this.statuses.firing=!1,this},X=async function(t){this.cursorPosition=le(t,this.cursorPosition,m(this,i,E)),se(this.element,m(this,i,E),this.cursorPosition)},It=async function(t){let n=m(this,i,O);n&&await l(this,i,X).call(this,{value:n});let s=m(this,i,E).map(r=>[Symbol(),{func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let r=0;r<s.length;r++)await l(this,i,Y).call(this,r,s);this.queue.reset(),this.queue.set(0,{delay:t})},Y=function(t,n){return Jt({index:t,queueItems:n,wait:l(this,i,K).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},K=async function(t,n,s=!1){this.statuses.frozen&&await new Promise(r=>{this.unfreeze=()=>{this.statuses.frozen=!1,r()}}),s||await this.opts.beforeStep(this),await ue(t,n,this.timeouts),s||await this.opts.afterStep(this)},G=async function(){if(!l(this,i,q).call(this)&&this.cursor&&this.element.appendChild(this.cursor),m(this,i,tt)){oe(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:t}=this.opts.cursor,{frames:n,options:s}=t;Nt({frames:n,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...s}})}},q=function(){return U(this.element)},T=function(t,n){return this.queue.add(t),l(this,i,St).call(this,n),this},St=function(t={}){let n=t.delay;n&&this.queue.add({delay:n})},x=function(t={}){return[{func:()=>l(this,i,M).call(this,t)},{func:()=>l(this,i,M).call(this,this.opts)}]},M=async function(t){this.opts=A(this.opts,t)},Lt=function(){let t=this.opts.strings.filter(n=>!!n);t.forEach((n,s)=>{if(this.type(n),s+1===t.length)return;let r=this.opts.breakLines?[{func:()=>l(this,i,D).call(this,R("BR")),typeable:!0}]:H({func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1)},this.queue.getTypeable().length);l(this,i,Z).call(this,r)})},z=new WeakMap,vt=function(t){let n=this.element.innerHTML;return n?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=n,nt(this.element),l(this,i,Z).call(this,H({func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1),deletable:!0},m(this,i,E).length)),t):ae(n).concat(t)):t},At=function(){if(m(this,i,k))return null;let t=R("span");return t.className=C,m(this,i,tt)?(t.innerHTML=wt(this.opts.cursorChar).innerHTML,t):(t.style.visibility="hidden",t)},Z=function(t){let n=this.opts.nextStringDelay;this.queue.add([{delay:n[0]},...t,{delay:n[1]}])},D=function(t){Zt(this.element,t)},_=function(){m(this,i,E).length&&(m(this,i,k)?this.element.value=this.element.value.slice(0,-1):l(this,i,B).call(this,m(this,i,E)[this.cursorPosition]))},B=function(t){ne(t,this.element)},N=function(t=0){return $t(this.opts)[t]},O=function(){return this.predictedCursorPosition??this.cursorPosition},k=function(){return U(this.element)},tt=function(){return!!this.opts.cursor&&!m(this,i,k)},E=function(){return Kt(this.element)};function j(){document.querySelectorAll(".typewriter-text").forEach(t=>{if(t.getAttribute("data-typewriter-ready"))return;let n=t.getAttribute("data-text");if(!n){console.warn("[TYPEWRITER] No data-text attribute found for element:",t);return}if(n.includes("data-form-session-meta")){t.setAttribute("data-typewriter-deferred","true");return}it(t,n)})}function xt(e){return e.replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#39;/g,"'")}function it(e,t){t=xt(t),t=_t(t,e),e.innerHTML="",e.setAttribute("data-typewriter-ready","true"),e.removeAttribute("data-typewriter-deferred");let n=Ot(t),r=!e.closest(".hidden, [hidden], [aria-hidden='true']"),o=new $(e,{speed:5,cursor:!0,waitUntilVisible:r,html:!0,lifeLike:!0,afterStep:()=>{let a=e.closest(".title-scroll-wrapper"),u=e.closest(".title-scroll-container");if(a&&a.scrollHeight>a.clientHeight){a.classList.add("has-overflow");let d=e.querySelector(".ti-cursor");if(d){let h=d.getBoundingClientRect(),y=a.getBoundingClientRect(),b=y.height*.75,f=h.top-y.top-b;f>5&&(a.scrollTop+=f)}else a.scrollTop=a.scrollHeight;u&&a.scrollTop>10&&u.classList.add("is-scrolled")}},afterComplete:()=>{e.dispatchEvent(new CustomEvent("typewriter-complete",{bubbles:!0})),setTimeout(()=>{let a=e.querySelector(".ti-cursor");a&&(a.remove(),console.log("[TYPEWRITER] Cursor removed"))},2e3)}});n.forEach((a,u)=>{if(a.type==="text"){let d=a.content.split(/(<br>|[.,!?;:])/gi);d.forEach((h,y)=>{h&&(/^<[^>]+>$/i.test(h)?o.type(h):h.split(/(\s+)/).forEach(p=>{if(p)if(/^\s+$/.test(p))for(let f=0;f<p.length;f++)o.type("&nbsp;");else{let f='<span class="typewriter-word">'+[...p].map(g=>`<span class="typewriter-char">${Mt(g)}</span>`).join("")+"</span>";o.type(f)}}),h.match(/[.,!?;:]/)?o.pause(+Math.random()*150):h==="<br>"?o.pause(Math.random()*200):y<d.length-1&&d[y+1]!=="<br>"&&Math.random()>.5&&o.pause(25+Math.random()*50))})}else a.type==="pause"&&o.pause(a.duration)}),e.__typeItInstance=o}var Mt=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function ce(e,t){e=xt(e),e=_t(e,t);let n=Ot(e),s="";return n.forEach(r=>{r.type==="text"&&r.content.split(/(<br>|[.,!?;:])/gi).forEach(u=>{u&&(/^<[^>]+>$/i.test(u)?s+=u:u.split(/(\s+)/).forEach(d=>{if(d)if(/^\s+$/.test(d))for(let h=0;h<d.length;h++)s+="&nbsp;";else{s+='<span class="typewriter-word">';for(let h of d)s+=`<span class="typewriter-char">${Mt(h)}</span>`;s+="</span>"}}))})}),s}function rt(){let e=document.querySelector(".step-content.active");if(!e)return!1;let t=e.querySelectorAll(".typewriter-text[data-typewriter-ready='true']"),n=!1;return t.forEach(s=>{let r=s.__typeItInstance;if(!r||typeof r.is=="function"&&r.is("complete"))return;let o=s.getAttribute("data-text");if(!o)return;s.innerHTML=ce(o,s);try{r.destroy(!0)}catch{}s.__typeItInstance=null,s.setAttribute("data-typewriter-triggered","true");let a=s.querySelector(".ti-cursor");a&&a.remove(),s.dispatchEvent(new CustomEvent("typewriter-complete",{bubbles:!0})),n=!0}),n}function de(e){let t=(e||"").trim();if(!t)return{firstName:"",lastName:""};let n=t.split(/\s+/);return n.length===1?{firstName:n[0],lastName:""}:{firstName:n[0],lastName:n.slice(1).join(" ").trim()}}function _t(e,t){let n=/<span[^>]*data-form-session-meta=['"]([^'"]+)['"][^>]*data-default=['"]([^'"]+)['"][^>]*>([^<]*)<\/span>/gi,s=e,r,o=t?.closest("form")??document.querySelector("form");for(;(r=n.exec(e))!==null;){let a=r[0],u=r[1],c=r[2];if(o){let d=c;if(u==="firstName"||u==="lastName"){let h=o.querySelector('[name="fullName"]'),y=o.querySelector('[name="firstName"]'),b=o.querySelector('[name="lastName"]');if(h?.value?.trim()){let{firstName:p,lastName:f}=de(h.value);d=u==="firstName"?p:f}else y?.value?.trim()&&u==="firstName"?d=y.value.trim():b?.value?.trim()&&u==="lastName"&&(d=b.value.trim());d||(d=c)}else d=o.querySelector(`[name="${u}"]`)?.value?.trim()||c;s=s.replace(a,d),console.log(`[SESSION-META] Replaced ${u} with: "${d}" (form: ${o.id||"unknown"})`)}}return s}function Ot(e){let t=[],n=/<span[^>]*data-typewriter-pause=["'](\d+)["'][^>]*>(.*?)<\/span>/gi,s=0,r;for(;(r=n.exec(e))!==null;){if(r.index>s){let u=e.substring(s,r.index);u&&t.push({type:"text",content:u})}let o=parseInt(r[1],10);t.push({type:"pause",duration:o});let a=r[2];a&&t.push({type:"text",content:a}),s=n.lastIndex}if(s<e.length){let o=e.substring(s);o&&t.push({type:"text",content:o})}return t.length===0&&t.push({type:"text",content:e}),t}function fe(e){let t=e.closest("form");if(!t)return!1;let n=t;for(;n&&n!==document.body;){if(n.classList.contains("hidden")||n.hasAttribute("hidden")||n.getAttribute("aria-hidden")==="true")return!0;n=n.parentElement}return!1}function Q(e){let t=e||document,n=null;if(!n){let o=t.querySelectorAll(".step-content.active");for(let a of o)if(!(!e&&fe(a))){n=a;break}}if(!n)return;let s=n.querySelectorAll(".typewriter-text[data-typewriter-deferred='true']");s.length>0&&s.forEach(o=>{let a=o.getAttribute("data-text");a&&it(o,a)}),n.querySelectorAll(".typewriter-text[data-typewriter-ready='true']").forEach(o=>{if(o.getAttribute("data-typewriter-triggered")==="true")return;let a=o.__typeItInstance;a?(a.go(),o.setAttribute("data-typewriter-triggered","true")):console.warn("[TYPEWRITER] No TypeIt instance for element:",o)})}j();function Pt(e){let t=e.getAttribute("data-text");if(!(!t||e.getAttribute("data-typewriter-ready"))){if(t.includes("data-form-session-meta")){e.setAttribute("data-typewriter-deferred","true");return}it(e,t)}}function kt(){if(!document.body){document.addEventListener("DOMContentLoaded",kt,{once:!0});return}new MutationObserver(t=>{t.forEach(n=>{n.addedNodes.forEach(s=>{s instanceof HTMLElement&&(s.classList.contains("typewriter-text")&&Pt(s),s.querySelectorAll(".typewriter-text").forEach(Pt))})})}).observe(document.body,{childList:!0,subtree:!0})}kt();document.addEventListener("multistep-step-change",()=>{Q()});document.addEventListener("DOMContentLoaded",()=>{j(),Q();let e=t=>{if(t.key!=="Enter")return;let n=document.activeElement;n&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.tagName==="SELECT"||n.isContentEditable)||rt()&&(t.preventDefault(),t.stopPropagation())};document.addEventListener("keydown",e,!0),document.addEventListener("keypress",e,!0)});window.initializeNotificationCount=W;window.updateNotificationBellCount=S;window.loadNotificationCount=I;window.refreshNotificationCount=J;window.initTypewriterTexts=j;window.triggerActiveStepTypewriter=Q;window.skipActiveTypewriterToEnd=rt;})();
