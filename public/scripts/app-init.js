(()=>{var Ht=Object.defineProperty;var ot=e=>{throw TypeError(e)};var Rt=(e,t,s)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var w=(e,t,s)=>Rt(e,typeof t!="symbol"?t+"":t,s),at=(e,t,s)=>t.has(e)||ot("Cannot "+s);var m=(e,t,s)=>(at(e,t,"read from private field"),s?s.call(e):t.get(e)),V=(e,t,s)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);var l=(e,t,s)=>(at(e,t,"access private method"),s);(function(){if(typeof window>"u")return;window.__jsOrder=0,window.__jsOrderLog=function(c){window.__jsOrder=(window.__jsOrder||0)+1,console.log("[JS-ORDER]",window.__jsOrder,c)},window.__traceNum=0,window.__traceLog=function(c){window.__traceNum=(window.__traceNum||0)+1,console.log("[TRACE "+window.__traceNum+"] "+c)},window.addEventListener("error",c=>{window.__traceLog&&window.__traceLog("ERROR: "+(c.message||String(c)))}),window.addEventListener("unhandledrejection",c=>{let d=c.reason&&(c.reason.message||String(c.reason))||"unknown";window.__traceLog&&window.__traceLog("UNHANDLED REJECTION: "+d)}),window.__jsOrderLog("App theme");let e=localStorage.getItem("color-theme")!==null;function t(c){document.cookie="theme="+c+"; path=/; max-age=31536000; SameSite=Lax"}function s(c){c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme",c),t(c)}s(e?localStorage.getItem("color-theme")||"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),window.isDarkMode=function(){if(document.documentElement.classList.contains("dark"))return!0;let c=localStorage.getItem("color-theme");return c!==null?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches},window.currentTheme=window.isDarkMode()?"dark":"light";let n=localStorage.getItem("page-size")||"normal";document.documentElement.setAttribute("data-page-size",n);let r=navigator.userAgent,o=/iPad|iPhone|iPod/.test(r),a=r.match(/Version\/(\d+)/),u=a?parseInt(a[1],10):0;o&&u>0&&u<14&&(window.__legacySafari=!0)})();async function I(){try{console.log("\u{1F514} [NOTIFICATION-COUNT] Loading notification count...");let e=await fetch("/api/notifications/get?limit=1",{credentials:"include"});if(!e.ok)return console.warn("\u{1F514} [NOTIFICATION-COUNT] Failed to fetch notifications:",e.status),0;let t=await e.json();return t.success?(console.log("\u{1F514} [NOTIFICATION-COUNT] Loaded count:",t.unreadCount),t.unreadCount||0):(console.warn("\u{1F514} [NOTIFICATION-COUNT] API returned error:",t.error),0)}catch(e){return console.error("\u{1F514} [NOTIFICATION-COUNT] Error loading notification count:",e),0}}function S(e){console.log("\u{1F514} [NOTIFICATION-COUNT] Updating bell count:",e);let t=document.getElementById("notification-bell");if(!t){console.warn("\u{1F514} [NOTIFICATION-COUNT] Notification bell not found");return}if(window.updateCountBubble&&window.COUNT_BUBBLE_PRESETS)window.updateCountBubble(t,e,window.COUNT_BUBBLE_PRESETS.notification);else{let s=t.querySelector(".count-bubble");e>0?(s||(s=document.createElement("span"),s.className="count-bubble absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full bg-primary-500 text-xs font-bold text-white dark:bg-primary-600 animate-pulse",t.appendChild(s)),s.textContent=e>99?"99+":e.toString(),s.style.display="flex",t.setAttribute("data-count",e.toString())):s&&(s.style.display="none",t.removeAttribute("data-count"))}}async function W(){if(console.log("\u{1F514} [NOTIFICATION-COUNT] Initializing notification count..."),document.readyState==="loading")document.addEventListener("DOMContentLoaded",async()=>{let e=await I();S(e)});else{let e=await I();S(e)}}async function J(){console.log("\u{1F514} [NOTIFICATION-COUNT] Refreshing notification count...");let e=await I();S(e)}typeof window<"u"&&(window.loadNotificationCount=I,window.updateNotificationBellCount=S,window.initializeNotificationCount=W,window.refreshNotificationCount=J);var ht=e=>Array.isArray(e),pt=e=>ht(e)?e:[e],qt=function(e){let t=function(f){return pt(f).forEach(g=>p.set(Symbol(g.char?.innerText),r({...g}))),this},s=()=>c().filter(f=>f.typeable),n=function(f,g){let kt=[...p.keys()];p.set(kt[f],r(g))},r=f=>(f.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},f),o=function(){p.forEach(f=>delete f.done)},a=function(){p=new Map,t(e)},u=()=>p,c=()=>Array.from(p.values()),d=f=>p.delete(f),h=()=>{let f=[];for(let[,g]of u())g.done||f.push(g);return f},y=(f=!1)=>f?c():c().filter(g=>!g.done),b=(f,g=!1)=>g?p.delete(f):p.get(f).done=!0,p=new Map;return t(e),{add:t,set:n,wipe:a,done:b,reset:o,destroy:d,getItems:y,getQueue:u,getTypeable:s,getPendingQueueItems:h}},mt="data-typeit-id",C="ti-cursor",Dt="END",Bt={started:!1,completed:!1,frozen:!1,destroyed:!1},v={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(e=>({opacity:e})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},Ft=`[${mt}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,R=e=>document.createElement(e),et=e=>document.createTextNode(e),yt=(e,t="")=>{let s=R("style");s.id=t,s.appendChild(et(e)),document.head.appendChild(s)},lt=e=>(ht(e)||(e=[e/2,e/2]),e),ut=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t)),ct=e=>e/2;function Ut(e){let{speed:t,deleteSpeed:s,lifeLike:n}=e;return s=s!==null?s:t/3,n?[ut(t,ct(t)),ut(s,ct(s))]:[t,s]}var gt=e=>Array.from(e),st=e=>([...e.childNodes].forEach(t=>{if(t.nodeValue){[...t.nodeValue].forEach(s=>{t.parentNode.insertBefore(et(s),t)}),t.remove();return}st(t)}),e),wt=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,st(t.body)};function bt(e,t=!1,s=!1){let n=e.querySelector(`.${C}`),r=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:u=>{if(n&&s){if(u.classList?.contains(C))return NodeFilter.FILTER_ACCEPT;if(n.contains(u))return NodeFilter.FILTER_REJECT}return u.classList?.contains(C)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),o,a=[];for(;o=r.nextNode();)o.originalParent||(o.originalParent=o.parentNode),a.push(o);return t?a.reverse():a}function $t(e){return bt(wt(e))}function zt(e,t=!0){return t?$t(e):gt(e).map(et)}var jt=({index:e,newIndex:t,queueItems:s,cleanUp:n})=>{for(let r=e+1;r<t+1;r++)n(s[r][0])},Tt=e=>Number.isInteger(e),dt=({queueItems:e,selector:t,cursorPosition:s,to:n})=>{if(Tt(t))return t*-1;let r=new RegExp(Dt,"i").test(n),o=t?[...e].reverse().findIndex(({char:u})=>{let c=u.parentElement,d=c.matches(t);return r&&d?!0:d&&c.firstChild.isSameNode(u)}):-1;o<0&&(o=r?0:e.length-1);let a=r?0:1;return o-s+a},Qt=e=>(e.forEach(clearTimeout),[]),H=(e,t)=>new Array(t).fill(e),F=e=>new Promise(t=>{requestAnimationFrame(async()=>{t(await e())})}),Et=e=>e?.getAnimations().find(t=>t.id===e.dataset.tiAnimationId),Nt=({cursor:e,frames:t,options:s})=>{let n=e.animate(t,s);return n.pause(),n.id=e.dataset.tiAnimationId,F(()=>{F(()=>{n.play()})}),n},Vt=({cursor:e,options:t,cursorOptions:s})=>{if(!e||!s)return;let n=Et(e),r;n&&(t.delay=n.effect.getComputedTiming().delay,r=n.currentTime,n.cancel());let o=Nt({cursor:e,frames:s.animation.frames,options:t});return r&&(o.currentTime=r),o},ft=e=>e.func?.call(null),Wt=async({index:e,queueItems:t,wait:s,cursor:n,cursorOptions:r})=>{let o=t[e][1],a=[],u=e,c=o,d=()=>c&&!c.delay,h=o.shouldPauseCursor()&&r.autoPause;for(;d();)a.push(c),d()&&u++,c=t[u]?t[u][1]:null;if(a.length)return await F(async()=>{for(let p of a)await ft(p)}),u-1;let y=Et(n),b;return y&&(b={...y.effect.getComputedTiming(),delay:h?r.autoPauseDelay:0}),await s(async()=>{y&&h&&y.cancel(),await F(()=>{ft(o)})},o.delay),await Vt({cursor:n,options:b,cursorOptions:r}),e},Jt=(e,t)=>{new IntersectionObserver((n,r)=>{n.forEach(o=>{o.isIntersecting&&(t(),r.unobserve(e))})},{threshold:1}).observe(e)},Xt=()=>Math.random().toString().substring(2,9),U=e=>"value"in e,Yt=e=>U(e)?gt(e.value):bt(e,!0).filter(t=>!(t.childNodes.length>0)),L=e=>typeof e=="function"?e():e,nt=(e,t=document,s=!1)=>t[`querySelector${s?"All":""}`](e),Kt=e=>/body/i.test(e?.tagName),Gt=(e,t)=>{if(U(e)){e.value=`${e.value}${t.textContent}`;return}t.innerHTML="";let s=Kt(t.originalParent)?e:t.originalParent||e,n=nt("."+C,s)||null;n&&n.parentElement!==s&&(s=n.parentElement),s.insertBefore(t,n)},Zt=e=>/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML),A=(e,t)=>Object.assign({},e,t),te=e=>{if(typeof e=="object"){let t={},{frames:s,options:n}=v.cursor.animation;return t.animation=e.animation||{},t.animation.frames=e.animation?.frames||s,t.animation.options=A(n,e.animation?.options||{}),t.autoPause=e.autoPause??v.cursor.autoPause,t.autoPauseDelay=e.autoPauseDelay||v.cursor.autoPauseDelay,t}return e===!0?v.cursor:e},ee=(e,t)=>{if(!e)return;let s=e.parentNode;(s.childNodes.length>1||s.isSameNode(t)?e:s).remove()},se=(e,t,s)=>{let n=t[s-1],r=nt(`.${C}`,e);e=n?.parentNode||e,e.insertBefore(r,n||null)};function ne(e){return typeof e=="string"?nt(e):e}var ie={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},re=(e,t)=>{let n=`${`[${mt}='${e}']`} .${C}`,r=getComputedStyle(t),o=Object.entries(ie).reduce((a,[u,c])=>`${a} ${u}: var(--ti-cursor-${u}, ${c||r[u]});`,"");yt(`${n} { display: inline-block; width: 0; ${o} }`,e)};function oe(e){return e.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}var ae=(e,t,s)=>Math.min(Math.max(t+e,0),s.length),le=(e,t,s)=>new Promise(n=>{let r=async()=>{await e(),n()};s.push(setTimeout(r,t||0))}),i,Ct,P,X,It,Y,K,G,q,T,St,x,M,Lt,z,vt,At,Z,D,_,B,N,O,k,tt,E,$=class{constructor(t,s={}){V(this,i);w(this,"element");w(this,"timeouts");w(this,"cursorPosition");w(this,"predictedCursorPosition");w(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1});w(this,"opts");w(this,"id");w(this,"queue");w(this,"cursor");w(this,"flushCallback",null);w(this,"unfreeze",()=>{});w(this,"is",function(t){return this.statuses[t]});V(this,z,t=>{this.opts.cursor=te(t.cursor??v.cursor),this.opts.strings=l(this,i,vt).call(this,pt(this.opts.strings)),this.opts=A(this.opts,{html:!m(this,i,k)&&this.opts.html,nextStringDelay:lt(this.opts.nextStringDelay),loopDelay:lt(this.opts.loopDelay)})});this.opts=A(v,s),this.element=ne(t),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=A({},Bt),this.id=Xt(),this.queue=qt([{delay:this.opts.startDelay}]),m(this,z).call(this,s),this.cursor=l(this,i,At).call(this),this.element.dataset.typeitId=this.id,yt(Ft),this.opts.strings.length&&l(this,i,Lt).call(this)}go(){return this.statuses.started?this:(l(this,i,G).call(this),this.opts.waitUntilVisible?(Jt(this.element,l(this,i,P).bind(this)),this):(l(this,i,P).call(this),this))}destroy(t=!0){this.timeouts=Qt(this.timeouts),L(t)&&this.cursor&&l(this,i,B).call(this,this.cursor),this.statuses.destroyed=!0}reset(t){!this.is("destroyed")&&this.destroy(),t?(this.queue.wipe(),t(this)):this.queue.reset(),this.cursorPosition=0;for(let s in this.statuses)this.statuses[s]=!1;return this.element[l(this,i,q).call(this)?"value":"innerHTML"]="",this}type(t,s={}){t=L(t);let{instant:n}=s,r=l(this,i,x).call(this,s),a=zt(t,this.opts.html).map(c=>({func:()=>l(this,i,D).call(this,c),char:c,delay:n||Zt(c)?0:l(this,i,N).call(this),typeable:c.nodeType===Node.TEXT_NODE})),u=[r[0],{func:async()=>await this.opts.beforeString(t,this)},...a,{func:async()=>await this.opts.afterString(t,this)},r[1]];return l(this,i,T).call(this,u,s)}break(t={}){return l(this,i,T).call(this,{func:()=>l(this,i,D).call(this,R("BR")),typeable:!0},t)}move(t,s={}){t=L(t);let n=l(this,i,x).call(this,s),{instant:r,to:o}=s,a=dt({queueItems:this.queue.getTypeable(),selector:t===null?"":t,to:o,cursorPosition:m(this,i,O)}),u=a<0?-1:1;return this.predictedCursorPosition=m(this,i,O)+a,l(this,i,T).call(this,[n[0],...H({func:()=>l(this,i,X).call(this,u),delay:r?0:l(this,i,N).call(this),cursorable:!0},Math.abs(a)),n[1]],s)}exec(t,s={}){let n=l(this,i,x).call(this,s);return l(this,i,T).call(this,[n[0],{func:()=>t(this)},n[1]],s)}options(t,s={}){return t=L(t),l(this,i,M).call(this,t),l(this,i,T).call(this,{},s)}pause(t,s={}){return l(this,i,T).call(this,{delay:L(t)},s)}delete(t=null,s={}){t=L(t);let n=l(this,i,x).call(this,s),r=t,{instant:o,to:a}=s,u=this.queue.getTypeable(),c=r===null?u.length:Tt(r)?r:dt({queueItems:u,selector:r,cursorPosition:m(this,i,O),to:a});return l(this,i,T).call(this,[n[0],...H({func:l(this,i,_).bind(this),delay:o?0:l(this,i,N).call(this,1),deletable:!0},c),n[1]],s)}freeze(){this.statuses.frozen=!0}flush(t=null){return this.flushCallback=t||this.flushCallback,this.statuses.firing?this:(l(this,i,G).call(this),l(this,i,P).call(this,!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(t){return l(this,i,M).call(this,t)}getElement(){return this.element}empty(t={}){return l(this,i,T).call(this,{func:l(this,i,Ct).bind(this)},t)}};i=new WeakSet,Ct=async function(){if(l(this,i,q).call(this)){this.element.value="";return}m(this,i,E).forEach(l(this,i,B).bind(this))},P=async function(t=!0){this.statuses.started=!0,this.statuses.firing=!0;let s=n=>{this.queue.done(n,!t)};try{let n=[...this.queue.getQueue()];for(let o=0;o<n.length;o++){let[a,u]=n[o];if(!u.done){if(!u.deletable||u.deletable&&m(this,i,E).length){let c=await l(this,i,Y).call(this,o,n);jt({index:o,newIndex:c,queueItems:n,cleanUp:s}),o=c}s(a)}}if(!t)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let r=this.opts.loopDelay;l(this,i,K).call(this,async()=>{await l(this,i,It).call(this,r[0]),l(this,i,P).call(this)},r[1])}catch{}return this.statuses.firing=!1,this},X=async function(t){this.cursorPosition=ae(t,this.cursorPosition,m(this,i,E)),se(this.element,m(this,i,E),this.cursorPosition)},It=async function(t){let s=m(this,i,O);s&&await l(this,i,X).call(this,{value:s});let n=m(this,i,E).map(r=>[Symbol(),{func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let r=0;r<n.length;r++)await l(this,i,Y).call(this,r,n);this.queue.reset(),this.queue.set(0,{delay:t})},Y=function(t,s){return Wt({index:t,queueItems:s,wait:l(this,i,K).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},K=async function(t,s,n=!1){this.statuses.frozen&&await new Promise(r=>{this.unfreeze=()=>{this.statuses.frozen=!1,r()}}),n||await this.opts.beforeStep(this),await le(t,s,this.timeouts),n||await this.opts.afterStep(this)},G=async function(){if(!l(this,i,q).call(this)&&this.cursor&&this.element.appendChild(this.cursor),m(this,i,tt)){re(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:t}=this.opts.cursor,{frames:s,options:n}=t;Nt({frames:s,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...n}})}},q=function(){return U(this.element)},T=function(t,s){return this.queue.add(t),l(this,i,St).call(this,s),this},St=function(t={}){let s=t.delay;s&&this.queue.add({delay:s})},x=function(t={}){return[{func:()=>l(this,i,M).call(this,t)},{func:()=>l(this,i,M).call(this,this.opts)}]},M=async function(t){this.opts=A(this.opts,t)},Lt=function(){let t=this.opts.strings.filter(s=>!!s);t.forEach((s,n)=>{if(this.type(s),n+1===t.length)return;let r=this.opts.breakLines?[{func:()=>l(this,i,D).call(this,R("BR")),typeable:!0}]:H({func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1)},this.queue.getTypeable().length);l(this,i,Z).call(this,r)})},z=new WeakMap,vt=function(t){let s=this.element.innerHTML;return s?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=s,st(this.element),l(this,i,Z).call(this,H({func:l(this,i,_).bind(this),delay:l(this,i,N).call(this,1),deletable:!0},m(this,i,E).length)),t):oe(s).concat(t)):t},At=function(){if(m(this,i,k))return null;let t=R("span");return t.className=C,m(this,i,tt)?(t.innerHTML=wt(this.opts.cursorChar).innerHTML,t):(t.style.visibility="hidden",t)},Z=function(t){let s=this.opts.nextStringDelay;this.queue.add([{delay:s[0]},...t,{delay:s[1]}])},D=function(t){Gt(this.element,t)},_=function(){m(this,i,E).length&&(m(this,i,k)?this.element.value=this.element.value.slice(0,-1):l(this,i,B).call(this,m(this,i,E)[this.cursorPosition]))},B=function(t){ee(t,this.element)},N=function(t=0){return Ut(this.opts)[t]},O=function(){return this.predictedCursorPosition??this.cursorPosition},k=function(){return U(this.element)},tt=function(){return!!this.opts.cursor&&!m(this,i,k)},E=function(){return Yt(this.element)};function j(){document.querySelectorAll(".typewriter-text").forEach(t=>{if(t.getAttribute("data-typewriter-ready"))return;let s=t.getAttribute("data-text");if(!s){console.warn("[TYPEWRITER] No data-text attribute found for element:",t);return}if(s.includes("data-form-session-meta")){t.setAttribute("data-typewriter-deferred","true");return}it(t,s)})}function xt(e){return e.replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#39;/g,"'")}function it(e,t){t=xt(t),t=_t(t,e),e.innerHTML="",e.setAttribute("data-typewriter-ready","true"),e.removeAttribute("data-typewriter-deferred");let s=Ot(t),r=!e.closest(".hidden, [hidden], [aria-hidden='true']"),o=new $(e,{speed:10,cursor:!0,waitUntilVisible:r,html:!0,lifeLike:!0,afterStep:()=>{let a=e.closest(".title-scroll-wrapper"),u=e.closest(".title-scroll-container");if(a&&a.scrollHeight>a.clientHeight){a.classList.add("has-overflow");let d=e.querySelector(".ti-cursor");if(d){let h=d.getBoundingClientRect(),y=a.getBoundingClientRect(),b=y.height*.75,f=h.top-y.top-b;f>5&&(a.scrollTop+=f)}else a.scrollTop=a.scrollHeight;u&&a.scrollTop>10&&u.classList.add("is-scrolled")}},afterComplete:()=>{e.dispatchEvent(new CustomEvent("typewriter-complete",{bubbles:!0})),setTimeout(()=>{let a=e.querySelector(".ti-cursor");a&&(a.remove(),console.log("[TYPEWRITER] Cursor removed"))},2e3)}});s.forEach((a,u)=>{if(a.type==="text"){let d=a.content.split(/(<br>|[.,!?;:])/gi);d.forEach((h,y)=>{h&&(/^<[^>]+>$/i.test(h)?o.type(h):h.split(/(\s+)/).forEach(p=>{if(p)if(/^\s+$/.test(p))for(let f=0;f<p.length;f++)o.type("&nbsp;");else{let f='<span class="typewriter-word">'+[...p].map(g=>`<span class="typewriter-char">${Mt(g)}</span>`).join("")+"</span>";o.type(f)}}),h.match(/[.,!?;:]/)?o.pause(+Math.random()*300):h==="<br>"?o.pause(Math.random()*400):y<d.length-1&&d[y+1]!=="<br>"&&Math.random()>.5&&o.pause(50+Math.random()*100))})}else a.type==="pause"&&o.pause(a.duration)}),e.__typeItInstance=o}var Mt=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");function ue(e,t){e=xt(e),e=_t(e,t);let s=Ot(e),n="";return s.forEach(r=>{r.type==="text"&&r.content.split(/(<br>|[.,!?;:])/gi).forEach(u=>{u&&(/^<[^>]+>$/i.test(u)?n+=u:u.split(/(\s+)/).forEach(d=>{if(d)if(/^\s+$/.test(d))for(let h=0;h<d.length;h++)n+="&nbsp;";else{n+='<span class="typewriter-word">';for(let h of d)n+=`<span class="typewriter-char">${Mt(h)}</span>`;n+="</span>"}}))})}),n}function rt(){let e=document.querySelector(".step-content.active");if(!e)return!1;let t=e.querySelectorAll(".typewriter-text[data-typewriter-ready='true']"),s=!1;return t.forEach(n=>{let r=n.__typeItInstance;if(!r||typeof r.is=="function"&&r.is("complete"))return;let o=n.getAttribute("data-text");if(!o)return;n.innerHTML=ue(o,n);try{r.destroy(!0)}catch{}n.__typeItInstance=null,n.setAttribute("data-typewriter-triggered","true");let a=n.querySelector(".ti-cursor");a&&a.remove(),n.dispatchEvent(new CustomEvent("typewriter-complete",{bubbles:!0})),s=!0}),s}function ce(e){let t=(e||"").trim();if(!t)return{firstName:"",lastName:""};let s=t.split(/\s+/);return s.length===1?{firstName:s[0],lastName:""}:{firstName:s[0],lastName:s.slice(1).join(" ").trim()}}function _t(e,t){let s=/<span[^>]*data-form-session-meta=['"]([^'"]+)['"][^>]*data-default=['"]([^'"]+)['"][^>]*>([^<]*)<\/span>/gi,n=e,r,o=t?.closest("form")??document.querySelector("form");for(;(r=s.exec(e))!==null;){let a=r[0],u=r[1],c=r[2];if(o){let d=c;if(u==="firstName"||u==="lastName"){let h=o.querySelector('[name="fullName"]'),y=o.querySelector('[name="firstName"]'),b=o.querySelector('[name="lastName"]');if(h?.value?.trim()){let{firstName:p,lastName:f}=ce(h.value);d=u==="firstName"?p:f}else y?.value?.trim()&&u==="firstName"?d=y.value.trim():b?.value?.trim()&&u==="lastName"&&(d=b.value.trim());d||(d=c)}else d=o.querySelector(`[name="${u}"]`)?.value?.trim()||c;n=n.replace(a,d),console.log(`[SESSION-META] Replaced ${u} with: "${d}" (form: ${o.id||"unknown"})`)}}return n}function Ot(e){let t=[],s=/<span[^>]*data-typewriter-pause=["'](\d+)["'][^>]*>(.*?)<\/span>/gi,n=0,r;for(;(r=s.exec(e))!==null;){if(r.index>n){let u=e.substring(n,r.index);u&&t.push({type:"text",content:u})}let o=parseInt(r[1],10);t.push({type:"pause",duration:o});let a=r[2];a&&t.push({type:"text",content:a}),n=s.lastIndex}if(n<e.length){let o=e.substring(n);o&&t.push({type:"text",content:o})}return t.length===0&&t.push({type:"text",content:e}),t}function de(e){let t=e.closest("form");if(!t)return!1;let s=t;for(;s&&s!==document.body;){if(s.classList.contains("hidden")||s.hasAttribute("hidden")||s.getAttribute("aria-hidden")==="true")return!0;s=s.parentElement}return!1}function Q(e){let t=e||document,s=null;if(!s){let o=t.querySelectorAll(".step-content.active");for(let a of o)if(!(!e&&de(a))){s=a;break}}if(!s)return;let n=s.querySelectorAll(".typewriter-text[data-typewriter-deferred='true']");n.length>0&&n.forEach(o=>{let a=o.getAttribute("data-text");a&&it(o,a)}),s.querySelectorAll(".typewriter-text[data-typewriter-ready='true']").forEach(o=>{if(o.getAttribute("data-typewriter-triggered")==="true")return;let a=o.__typeItInstance;a?(a.go(),o.setAttribute("data-typewriter-triggered","true")):console.warn("[TYPEWRITER] No TypeIt instance for element:",o)})}j();function Pt(e){let t=e.getAttribute("data-text");if(!(!t||e.getAttribute("data-typewriter-ready"))){if(t.includes("data-form-session-meta")){e.setAttribute("data-typewriter-deferred","true");return}it(e,t)}}var fe=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(s=>{s instanceof HTMLElement&&(s.classList.contains("typewriter-text")&&Pt(s),s.querySelectorAll(".typewriter-text").forEach(Pt))})})});fe.observe(document.body,{childList:!0,subtree:!0});document.addEventListener("multistep-step-change",()=>{Q()});document.addEventListener("DOMContentLoaded",()=>{j(),Q();let e=t=>{if(t.key!=="Enter")return;let s=document.activeElement;s&&(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="SELECT"||s.isContentEditable)||rt()&&(t.preventDefault(),t.stopPropagation())};document.addEventListener("keydown",e,!0),document.addEventListener("keypress",e,!0)});window.initializeNotificationCount=W;window.updateNotificationBellCount=S;window.loadNotificationCount=I;window.refreshNotificationCount=J;window.initTypewriterTexts=j;window.triggerActiveStepTypewriter=Q;window.skipActiveTypewriterToEnd=rt;})();
