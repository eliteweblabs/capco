(()=>{function y(r){return`accordion-table-column-widths-${r}`}function q(r){try{let o=localStorage.getItem(y(r));if(o)return{...JSON.parse(o)}}catch{}return{}}function D(r){let o=r.style.width||"",a=parseFloat(o);return Number.isFinite(a)?a:0}function O(r,o){try{localStorage.setItem(y(r),JSON.stringify(o))}catch{}}function b(){document.querySelectorAll("table[data-accordion-resizable]").forEach(o=>{let a=o.getAttribute("data-table-id")||o.id||"";if(!a)return;let u=o.querySelector("thead tr");if(!u)return;u.querySelectorAll(".project-col-resize-handle").forEach(t=>t.remove());let l=Array.from(u.querySelectorAll("th[data-col-id]"));if(l.length===0)return;let s=q(a);function M(t){let e=t.getAttribute("data-col-default-width");return e?parseFloat(e):16}function T(t,e){let n=s[t];if(n!=null)return n;let c=D(e);return c>0?c:M(e)}function m(t,e){let n=Math.max(5,Math.min(60,e));return t.style.width=`${n}%`,t.style.minWidth=`${n}%`,t.style.maxWidth=`${n}%`,n}let C=()=>o.getBoundingClientRect().width||1;l.forEach(t=>{let e=t.getAttribute("data-col-id");if(e){let n=s[e]??M(t);s[e]=m(t,n)}});let x=10,L=Array.from(u.querySelectorAll("th")),S=l.reduce((t,e)=>t+(parseFloat(e.style.width||"0")||0),0),W=Math.max(x,100-S);L.forEach(t=>{if(!t.getAttribute("data-col-id")){let e=Math.min(60,W);t.style.width=`${e}%`,t.style.minWidth=`${e}%`,t.style.maxWidth=`${e}%`}}),l.forEach((t,e)=>{let n=t.getAttribute("data-col-id");if(!n)return;let c=l[e+1],h=c?.getAttribute("data-col-id"),d=document.createElement("div");d.className="project-col-resize-handle absolute -right-1 top-0 z-10 h-full w-2 cursor-col-resize touch-none bg-transparent transition-colors hover:bg-primary-400/40 active:bg-primary-500/60",d.setAttribute("aria-label",`Resize ${n} column`),d.title="Drag to resize column",t.style.position="relative",t.appendChild(d),d.addEventListener("mousedown",v=>{v.preventDefault();let P=v.clientX,f=T(n,t),g=c&&h?T(h,c):0,p=I=>{let N=I.clientX-P,_=C(),w=N/_*100;if(c&&h){let i=w,H=60-f,z=f-5,X=g-5,$=60-g;i=i>=0?Math.min(i,H,X):Math.max(i,-z,-$);let F=f+i,R=g-i;s[n]=m(t,F),s[h]=m(c,R)}else{let i=Math.max(5,Math.min(60,f+w));s[n]=m(t,i)}O(a,{...s})},E=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",E),document.body.style.cursor="",document.body.style.userSelect=""};document.body.style.cursor="col-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",p),document.addEventListener("mouseup",E)})})})}function A(r){try{localStorage.removeItem(y(r))}catch{}b()}typeof window<"u"&&(window.clearAccordionTableColumnWidths=A);function k(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",b):b()}k();document.addEventListener("astro:after-swap",b);document.addEventListener("click",r=>{let o=r.target.closest?.("button.clear-accordion-column-widths");if(!o)return;let a=o.getAttribute("data-table-id");a&&A(a)});})();
