---
// This component demonstrates how to use the shared userStore
---

<div id="user-info" class="hidden">
  <div class="rounded bg-gray-100 p-4">
    <h3 class="font-semibold">User Information</h3>
    <p><strong>Email:</strong> <span id="user-email"></span></p>
    <p><strong>Role:</strong> <span id="user-role"></span></p>
    <p><strong>Status:</strong> <span id="user-status"></span></p>
  </div>
</div>

<!-- <script type="module" is:inline>
  import { userStore } from "../../lib/userStore.js";

  const userInfo = document.getElementById("user-info");
  const userEmail = document.getElementById("user-email");
  const userRole = document.getElementById("user-role");
  const userStatus = document.getElementById("user-status");

  async function updateUserInfo() {
    const userData = await userStore.getUser();

    if (userData.isAuthenticated && userData.user) {
      userEmail.textContent = userData.user.email;
      userRole.textContent = userData.role || "No role";
      userStatus.textContent = "Authenticated";
      userInfo.style.display = "block";
    } else {
      userStatus.textContent = "Not authenticated";
      userInfo.style.display = "none";
    }
  }

  // Subscribe to user changes
  const unsubscribe = userStore.subscribe((userData) => {
    updateUserInfo();
  });

  // Initial update
  updateUserInfo();

  // Cleanup
  window.addEventListener("beforeunload", () => {
    unsubscribe();
  });
</script> -->
