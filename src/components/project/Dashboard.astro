---
import HeroDashboard from "../common/HeroDashboard.astro";
import ProjectForm from "./ProjectForm.astro";
import ProjectList from "./ProjectList.astro";
import type { Project } from "../../lib/api/_projects";

interface Props {
  projects: Project[];
  statusData: any[];
  currentUser: any;
  globalInputClasses: string;
  secondaryTextClasses: string;
  primaryTextClasses: string;
}

const {
  projects,
  statusData,
  currentUser,
  globalInputClasses,
  secondaryTextClasses,
  primaryTextClasses,
} = Astro.props;
---

<!-- Dashboard Container -->
<div data-condition="projectCount===0:show" class={projects.length > 0 ? "hidden" : ""}>
  <HeroDashboard
    title="Project Dashboard"
    description={currentUser?.profile?.role === "Client"
      ? "Manage and track your fire protection projects"
      : "Manage and track all fire protection projects"}
    projectLength={projects.length}
  />
</div>
<div data-condition="projectCount>0:show" class={projects.length === 0 ? "hidden" : ""}>
  <HeroDashboard
    title="Start A New Project"
    description={currentUser?.profile?.role === "Client"
      ? "Welcome to the CAPCO Design Group Project Management System. All aspects of your project can be managed here."
      : "Welcome to the CAPCO Design Group Project Management System. All aspects of your project can be managed here."}
    projectLength={projects.length}
  />
</div>

<!-- Project List - shown when projectCount > 0 -->
<div
  data-condition="projectCount>0:show"
  class={projects.length === 0
    ? "hidden"
    : "snap-x snap-mandatory overflow-x-auto scrollbar-hide pt-16"}
>
  <ProjectList {projects} {statusData} {currentUser} {globalInputClasses} />
</div>

<!-- New Project Form - shown when projectCount === 0 -->
<div data-condition="projectCount===0:show" class={projects.length > 0 ? "hidden" : ""}>
  <ProjectForm
    project={null}
    {currentUser}
    isNewProject={true}
    {globalInputClasses}
    {secondaryTextClasses}
    {primaryTextClasses}
  />
</div>
<div class="w-full">
  <!-- Table Footer -->
  <div class="pointer-events-none relative hidden cursor-not-allowed overflow-hidden">
    <nav class="flex justify-between p-4 md:items-center" aria-label="Table navigation">
      <span class="text-sm"
        >Showing <span class="text-gray-900 dark:text-white">1-15</span> of
        <span class="text-gray-900 dark:text-white">146</span></span
      >
      <ul class="inline-flex">
        <li>
          <a
            href="#"
            class="h-100 color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            <span class="sr-only">Previous</span>
            <svg
              class="rxe6apEJoEk8r75xaVNG ADSeKHR1DvUUA48Chci_"
              aria-hidden="true"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
          </a>
        </li>
        <li>
          <a
            href="#"
            class="color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 py-2 text-sm hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            1
          </a>
        </li>
        <li>
          <a
            href="#"
            class="color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 py-2 text-sm hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            2
          </a>
        </li>
        <li>
          <a
            href="#"
            aria-current="page"
            class="QhmQ_v3mmDFIP9VaVOfb XQGFRdlxLbhbEMzeaRuO OHD_pMp_ehzJj42EmDyF OXyBmUnmaFHYN14c7Giu _6MyV8SXoSWq_PQ6KWI6 M7HoUYpjoEdw_y87xeWn YXx9oZ15oLXSCG32YPBT flex items-center justify-center border px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white"
          >
            3
          </a>
        </li>
        <li>
          <a
            href="#"
            class="color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 py-2 text-sm hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            ...
          </a>
        </li>
        <li>
          <a
            href="#"
            class="color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 py-2 text-sm hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            10
          </a>
        </li>
        <li>
          <a
            href="#"
            class="h-100 color-background flex items-center justify-center border border-gray-300 bg-gray-100 px-3 hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-700"
          >
            <span class="sr-only">Next</span>
            <svg
              class="rxe6apEJoEk8r75xaVNG ADSeKHR1DvUUA48Chci_"
              aria-hidden="true"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                clip-rule="evenodd"></path>
            </svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>
