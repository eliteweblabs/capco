---
import { checkAuth } from "../../lib/auth";
const { isAuth, session, user, role } = await checkAuth(Astro.cookies);

import { getI18N } from "@/i18n";
import SectionContainer from "../common/SectionContainer.astro";
import NoDataCard from "./NoDataCard.astro";
import ProjectListItem from "./ProjectListItem.astro";
// get projects from supabase

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

const { projects } = Astro.props;
if (!projects || projects.length === 0) return;
---

<!-- Project List-->
<SectionContainer id="project-list"
  >{
    projects.length > 0 ? (
      projects.map((project: any) => <ProjectListItem project={project} />)
    ) : (
      <NoDataCard
        message={i18n.DELIVERY.empty.message}
        subtitle={i18n.DELIVERY.empty.message2}
        imageSrc=""
      />
    )
  }
</SectionContainer>
