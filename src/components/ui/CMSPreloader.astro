---
/**
 * CMS Preloader Component
 * Animated zoom-in preloader using the library/CMS icon
 * Can be used as a page loader or for loading states
 */

interface Props {
  id?: string;
  showByDefault?: boolean; // Whether to show on page load
  zIndex?: string; // z-index class (e.g., "z-50")
}

const { id = "cms-preloader", showByDefault = false, zIndex = "z-50" } = Astro.props;
---

<div
  {id}
  class={`fixed inset-0 ${zIndex} flex items-center justify-center bg-white dark:bg-gray-900 transition-opacity duration-500 ${showByDefault ? "opacity-100" : "opacity-0 pointer-events-none"}`}
  aria-hidden="true"
>
  <!-- Icon Mask with Zoom Animation -->
  <div class="relative flex h-32 w-32 items-center justify-center">
    <!-- Animated Library/CMS Icon -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="512"
      height="512"
      version="1.1"
      viewBox="0 0 512 512"
    >
      <defs>
        <style>
          .svg-icon-stroke {
            fill: none;
            stroke: #000;
            stroke-width: 40;
            stroke-miterlimit: 10;
            stroke-dasharray: 1;
            stroke-dashoffset: 1;
            animation: draw 1s ease-out infinite alternate;
          }

          @keyframes draw {
            to {
              stroke-dashoffset: 0;
            }
          }
        </style>
      </defs>

      <g>
        <path
          class="svg-icon-stroke"
          pathLength="1"
          d="M174,197.7h129s40,.3,40,37.3-35,35-35,35h-134v62.2l-.3-61.9h122.8l82,113.5,49-29.3v-200.8L254.9,53.6l-172.7,100,1,201.1,171.7,100.5,78-44.6"
        ></path>
      </g>
    </svg>
  </div>
</div>
{/* Preloader logic is in App.astro head (inline) so it runs early â€” see window.cmsPreloader */}
