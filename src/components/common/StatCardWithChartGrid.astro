---
// Grid of StatCardWithChart components
// Based on: https://codepen.io/ScottWindon/pen/GRZjbaG

import StatCardWithChart from "./StatCardWithChart.astro";

interface StatCardItem {
  title: string;
  value: string | number;
  change?: {
    value: string;
    type: "increase" | "decrease";
  };
  chartData?: number[];
  chartColor?: "blue" | "pink" | "orange" | "green" | "purple";
}

interface Props {
  cards: StatCardItem[];
  /** Responsive columns: 1, 2, or 3 */
  columns?: 1 | 2 | 3;
  className?: string;
}

const { cards = [], columns = 3, className = "" } = Astro.props;

const gridClasses = {
  1: "grid-cols-1",
  2: "grid-cols-1 md:grid-cols-2",
  3: "grid-cols-1 md:grid-cols-2 lg:grid-cols-3",
}[columns];
---

<div class={`grid gap-4 ${gridClasses} ${className}`.trim()}>
  {
    cards.map((card, i) => (
      <StatCardWithChart
        title={card.title}
        value={card.value}
        change={card.change}
        chartData={card.chartData}
        chartColor={card.chartColor}
        id={`stat-chart-${i}-${Math.random().toString(36).slice(2, 9)}`}
      />
    ))
  }
</div>
