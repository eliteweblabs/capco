---
// Simple preloader component
import LoadingSpinner from "./LoadingSpinner.astro";
---

<div
  id="preloader"
  class="fixed inset-0 z-50 flex items-center justify-center bg-white dark:bg-gray-900"
>
  <LoadingSpinner />
</div>

<script>
  // Hide preloader when page is loaded
  function hidePreloader() {
    const preloader = document.getElementById("preloader");
    if (preloader) {
      preloader.style.opacity = "0";
      setTimeout(() => {
        preloader.style.display = "none";
      }, 300);
    } else {
      console.log("❌ [PRELOADER] Preloader element not found");
    }
  }

  // Try multiple events to ensure preloader hides
  window.addEventListener("load", hidePreloader);
  document.addEventListener("DOMContentLoaded", function () {
    // Add a small delay to ensure everything is ready
    setTimeout(hidePreloader, 100);
  });

  // Fallback: hide after 2 seconds regardless
  setTimeout(() => {
    hidePreloader();
  }, 2000);
</script>

<style>
  #preloader {
    transition: opacity 0.3s ease-out;
  }
</style>
