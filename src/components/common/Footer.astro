---
const {
  globalInputClasses,
  secondaryTextClasses,
  primaryTextClasses,
  year,
  globalCompanyName,
  isBackendPage,
  primaryColor,
} = Astro.props;

import { checkAuth } from "@/lib/auth";
const { currentUser } = await checkAuth(Astro.cookies);

import Tooltip from "@/components/common/Tooltip.astro";
---

<footer class="flex max-w-screen-xl mx-auto w-full gap-2 mt-4 p-4 items-center justify-between">
  <div class="align-center flex justify-center space-x-3">
    <!-- <p class="text-center text-sm text-gray-500 dark:text-gray-400 pb-12"> -->
    <Tooltip
      position="right"
      text={`${new Date().getFullYear().toString()} ${globalCompanyName}. 
        All rights reserved.`}
      >Â©
    </Tooltip>
    {
      !isBackendPage && (
        <ul class="align-center flex justify-center text-gray-500 dark:text-gray-400">
          <li>
            <a href="/privacy" class="me-6 no-underline hover:underline">
              privacy
            </a>
          </li>
          <li>
            <a href="/terms" class="me-6 no-underline hover:underline">
              terms
            </a>
          </li>
          <li>
            <a href="/cookies" class="no-underline hover:underline">
              cookie
            </a>
          </li>
        </ul>
      )
    }
    <!-- </p> -->

    <!-- Legal Links -->
  </div>

  <div class="hidden align-center flex justify-center space-x-3">
    <ul
      class="align-center flex justify-center text-gray-500 underline hover:no-underline dark:text-gray-400"
    >
      <li>
        <a href="/privacy" class="me-6">privacy</a>
      </li>
      <li>
        <a href="/terms" class="me-6">terms</a>
      </li>
      <li>
        <a href="/cookies">cookie</a>
      </li>
    </ul>
    <div class="hidden flex flex-wrap items-center justify-center gap-4 md:justify-end">
      <!-- Certificate images temporarily disabled to fix console errors -->
      <img
        src="/img/cert-afsa.png"
        alt="AFSA Certification"
        class="h-auto w-16 max-w-[40px] object-contain grayscale md:w-20"
      />
      <img
        src="/img/cert-hfsc.jpg"
        alt="HFSC Certification"
        class="h-auto w-16 max-w-[90px] object-contain grayscale md:w-20"
      />
      <img
        src="/img/NFPA_logo.svg"
        alt="NFPA Certification"
        class="h-auto w-16 max-w-[40px] object-contain grayscale hover:grayscale-0 md:w-20"
      />
      <img
        src="/img/cert-nfsa.png"
        alt="NFSA Certification"
        class="h-auto w-16 max-w-[40px] object-contain grayscale md:w-20"
      />
      <img
        src="/img/cert-nicet.png"
        alt="NICET Certification"
        class="h-auto w-16 max-w-[40px] object-contain grayscale md:w-20"
      />
      <img
        src="/img/cert-sfpe.png"
        alt="SFPE Certification"
        class="h-auto w-16 max-w-[40px] object-contain grayscale md:w-20"
      />
    </div>
  </div>
  <div class="align-center flex justify-center space-x-3 w-8">
    {
      !currentUser && !isBackendPage && (
        <>
          <vapi-widget
            public-key="77cb0a47-2427-44ac-996d-e6ed2ca03bbf"
            assistant-id="3ae002d5-fe9c-4870-8034-4c66a9b43b51"
            mode="chat"
            theme="dark"
            accent-color="white"
            cta-button-color={primaryColor}
            cta-button-text-color="white"
            border-radius="large"
            size="tiny"
            title="help"
            start-button-text="Start"
            end-button-text="End Call"
            chat-first-message="Hey, How can I help you today?"
            chat-placeholder="Type your message..."
            voice-show-transcript="true"
            consent-required="true"
            consent-title="Terms and conditions"
            consent-content="By clicking Agree, and each time I interact with this AI agent, I consent to the recording, storage, and sharing of my communications with third-party service providers, and as otherwise described in our Terms of Service."
            consent-storage-key="vapi_widget_consent"
          />

          <script
            src="https://unpkg.com/@vapi-ai/client-sdk-react/dist/embed/widget.umd.js"
            async
            type="text/javascript"
          />
        </>
      )
    }
  </div>
</footer>
