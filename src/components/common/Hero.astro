---
import ProjectStatusDropdown from "../project/ProjectStatusDropdown.astro";
import SectionContainer from "./SectionContainer.astro";

interface Props {
  title: string;
  description: string;
  statusLabel?: string;
  statusColor?: string;
  projectId?: number;
  currentStatus?: number;
  userRole?: string;
  projectTitle?: string;
  clientEmail?: string;
}

const {
  title,
  description,
  statusLabel,
  statusColor = "blue",
  projectId,
  currentStatus,
  userRole,
  projectTitle,
  clientEmail,
} = Astro.props;
---

<SectionContainer>
  <div class="relative mx-auto flex">
    <div class="flex-1">
      <h1
        class="text-2xl font-medium text-hub-title dark:text-hub-title-dark"
        id="page-title"
        data-refresh
      >
        {title}
      </h1>
      <p id="page-subtitle" class="text-base text-hub-subtitle dark:text-hub-subtitle-dark">
        {description}
      </p>
    </div>
    {
      statusLabel && projectId ? (
        <ProjectStatusDropdown
          projectId={projectId}
          currentStatus={currentStatus ?? 0}
          statusLabel={statusLabel}
          statusColor={statusColor}
          userRole={userRole}
          projectTitle={projectTitle}
          clientEmail={clientEmail}
          data-refresh
        />
      ) : statusLabel ? (
        <div class="ml-4 flex-shrink-0">
          <span
            class={`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium bg-${statusColor}-100 text-${statusColor}-800 dark:bg-${statusColor}-900/30 dark:text-${statusColor}-400`}
          >
            {statusLabel}
          </span>
        </div>
      ) : null
    }
  </div>
</SectionContainer>
