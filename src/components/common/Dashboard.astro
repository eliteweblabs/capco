---
// import { supabase } from "../lib/supabaseClient";
import ProjectForm from "../project/ProjectForm.astro";
import ProjectList from "../project/ProjectList.astro";
import ProjectSearch from "../project/ProjectSearch.astro";

const { role, projects } = Astro.props;


// Debug logging
console.log("Dashboard role:", projects);
---

<!-- Projects List - 2/3 width on md+ screens -->
{projects && projects.length > 0 ? (
  <>
    <div class="w-full md:w-2/3 md:pr-6">
      <ProjectSearch projects={projects} />
      <ProjectList projects={projects} />
    </div>
    <!-- PDF Viewer - 1/3 width on md+ screens, sticky on md+ -->
    <div id="new-project" class="h-full w-full overflow-auto md:top-20 md:w-1/3 md:self-start">
      <ProjectForm userRole={role} isNewProject={true} projectId="" />
    </div>
  </>
) : (
    <div id="new-project" class="h-full w-full overflow-auto md:top-20 md:self-start">
      <ProjectForm userRole={role} isNewProject={true} projectId="" />
    </div>
)}