---
import ProjectForm from "../project/ProjectForm.astro";
import ProjectList from "../project/ProjectList.astro";
import ProjectSearch from "../project/ProjectSearch.astro";
import SectionContainer from "./SectionContainer.astro";

const { currentRole, projects, project_statuses_object } = Astro.props;

// Debug logging
// console.log("Dashboard role:", projects);
---

<!-- Dashboard Container -->
<SectionContainer class="lg:pt-1" fullWidth={true}>
  <div class="flex w-full flex-col gap-6 lg:flex-row">
    {
      projects && projects.length > 0 ? (
        <>
          {/* <!-- Projects List - 2/3 width on lg+ screens --> */}
          <div class="w-full lg:w-2/3">
            <ProjectSearch projects={projects} />
            <ProjectList
              projects={projects}
              statusesObject={project_statuses_object}
              currentRole={currentRole}
            />
          </div>
          {/* <!-- Project Form - 1/3 width on lg+ screens --> */}
          <div id="new-project" class="no-scrollbar w-full overflow-y-scroll lg:top-20 lg:w-1/3">
            <div class="pb-6">
              {/* <h2 class="text-2xl font-bold text-center uppercase text-gray-900 dark:text-white mb-8">Create a new project</h2> */}

              <ProjectForm
                currentRole={currentRole}
                isNewProject={true}
                projectId=""
                projectStatus={0}
              />
            </div>
          </div>
        </>
      ) : (
        // <!-- No projects - show only form -->
        <div id="new-project" class="w-full">
          <div class="mx-auto max-w-2xl pb-6">
            <ProjectForm
              currentRole={currentRole}
              isNewProject={true}
              projectId=""
              projectStatus={0}
            />
          </div>
        </div>
      )
    }
  </div>
</SectionContainer>
