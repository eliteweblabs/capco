---
import ProjectForm from "../project/ProjectForm.astro";
import ProjectList from "../project/ProjectList.astro";
import ProjectSearch from "../project/ProjectSearch.astro";
import SectionContainer from "./SectionContainer.astro";

const { currentRole, projects, statuses, currentUser, project_statuses_object } = Astro.props;

// Debug logging
// console.log("Dashboard role:", projects);
---

<!-- Dashboard Container -->
<SectionContainer>
  <div class="flex flex-col lg:flex-row gap-6 w-full">
    {
      projects && projects.length > 0 ? (
        <>
          {/* <!-- Projects List - 2/3 width on lg+ screens --> */}
          <div class="w-full lg:w-2/3">
            <ProjectSearch projects={projects} />
            <ProjectList
              projects={projects}
              statusesObject={project_statuses_object}
              currentUser={currentUser}
              currentRole={currentRole}
            />
          </div>
          {/* <!-- Project Form - 1/3 width on lg+ screens --> */}
          <div id="new-project" class="w-full lg:w-1/3 lg:top-20 overflow-y-scroll no-scrollbar">
            <div class="pb-6">
              {/* <h2 class="text-2xl font-bold text-center uppercase text-gray-900 dark:text-white mb-8">Create a new project</h2> */}

              <ProjectForm
                currentRole={currentRole}
                isNewProject={true}
                projectId=""
                projectStatus={0}
              />
            </div>
          </div>
        </>
      ) : (
        // <!-- No projects - show only form -->
        <div id="new-project" class="w-full">
          <div class="pb-6 max-w-2xl mx-auto">
            <ProjectForm
              currentRole={currentRole}
              isNewProject={true}
              projectId=""
              projectStatus={0}
            />
          </div>
        </div>
      )
    }
  </div>
</SectionContainer>
