---
// import { supabase } from "../lib/supabaseClient";
import ProjectForm from "../project/ProjectForm.astro";
import ProjectList from "../project/ProjectList.astro";
import ProjectSearch from "../project/ProjectSearch.astro";

const { role, projects } = Astro.props;

// Debug logging
console.log("Dashboard role:", projects);
---

<!-- Dashboard Container -->
<div class="flex flex-col lg:flex-row gap-6 w-full">
  {projects && projects.length > 0 ? (
    <>
      <!-- Projects List - 2/3 width on lg+ screens -->
      <div class="w-full lg:w-2/3">
        <ProjectSearch projects={projects} />
        <ProjectList projects={projects} />
      </div>
      <!-- Project Form - 1/3 width on lg+ screens -->
      <div id="new-project" class="w-full lg:w-1/3 lg:sticky lg:top-20 lg:self-start">
        <ProjectForm userRole={role} isNewProject={true} projectId="" />
      </div>
    </>
  ) : (
    <!-- No projects - show only form -->
    <div id="new-project" class="w-full">
      <ProjectForm userRole={role} isNewProject={true} projectId="" />
    </div>
  )}
</div>
