---
import AuthIcon from "./AuthIcon.astro";
import Button from "./Button.astro";
import HamburgerIcon from "./Hamburger.astro";
import Logo from "./Logo.astro";
import ThemeToggle from "./ThemeToggle.astro";

const { isAuth, currentUser, currentRole, session, desktopNavigationHTML } = Astro.props;
---

<header
  class="sticky top-0 z-50 border-b border-border-light bg-background-light backdrop-blur-sm dark:border-border-dark dark:bg-background-dark"
>
  <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      {/* Logo */}

      <div class="absolute left-0 top-4 flex items-center space-x-2">
        <Button
          href="/dashboard"
          variant="anchor"
          size="md"
          icon="chevron-left"
          class="disabled block text-black dark:text-white md:hidden"
        />
      </div>
      <div class="flex-shrink-0">
        <Logo link="/" file="svg" />
      </div>

      {/* Unified Navigation - Desktop */}
      <div class="hidden items-center space-x-8 md:flex" set:html={desktopNavigationHTML} />

      {/* Mobile Controls */}
      <div class="flex items-center space-x-4">
        <ThemeToggle />
        <AuthIcon
          isAuth={isAuth}
          currentUser={currentUser}
          currentRole={currentRole}
          session={session}
          class=""
        />

        <!-- put hamburger icon here -->
        <HamburgerIcon class="block md:hidden" />
      </div>
    </div>
  </nav>
</header>
