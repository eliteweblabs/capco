---
import { checkAuth } from "../../lib/auth";
const { isAuth, session, user, role } = await checkAuth(Astro.cookies);

import Base from "../../layout/Base.astro";
import SectionContainer from "../SectionContainer.astro";
import SocialMedia from "./SocialMedia.astro";
// Para cambiar idioma de textos
import { getI18N } from "@/i18n";
import Hero from "./Hero.astro";
import AuthForm from "../form/AuthForm.astro";
const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

console.log("üèóÔ∏è [APP] App component loading...");
---

<Base title={i18n.SEO_TITLE} description={i18n.SEO_DESCRIPTION}>
  {
    isAuth ? (
      <>
        <SectionContainer id="hero" class="mx-6 my-6">
          <Hero title={"" + user.user_metadata.name} description={"" + role} />
        </SectionContainer>
        <slot />

        <SectionContainer class="fixed bottom-0 right-6 flex flex-col gap-y-6">
          <SocialMedia />
        </SectionContainer>
      </>
    ) : (
      <SectionContainer id="auth" class="mx-6 flex flex-col gap-y-6">
        <AuthForm />
      </SectionContainer>
    )
  }
</Base>
