---
// Reusable Alert component
export const partial = true;

import SimpleIcon from "../common/SimpleIcon.astro";

interface Props {
  type?: "info" | "success" | "warning" | "error";
  title?: string | null;
  description?: string;
  class?: string;
  variant?: "default" | "banner";
}

const {
  type = "info",
  title = null,
  description = "",
  class: className = "",
  variant = "default",
} = Astro.props;

// Type configurations (default: light/dark adaptive)
const typeConfig = {
  info: {
    icon: "info-circle",
    iconClass: "text-primary-600 dark:text-primary-400",
    bgClass: "bg-primary-300 dark:bg-primary-700",
    borderClass: "border border-primary-100 dark:border-primary-900",
    textClass: "text-black dark:text-white",
  },
  success: {
    icon: "check-circle",
    iconClass: "text-green-600 dark:text-green-400",
    bgClass: "bg-green-50 dark:bg-green-900/20",
    borderClass: "border border-green-200 dark:border-green-800",
    textClass: "text-green-800 dark:text-green-400",
  },
  warning: {
    icon: "error",
    iconClass: "text-orange-600 dark:text-orange-400",
    bgClass: "bg-orange-50 dark:bg-orange-900/20",
    borderClass: "border border-orange-200 dark:border-orange-800",
    textClass: "text-orange-800 dark:text-orange-400",
  },
  error: {
    icon: "x-circle",
    iconClass: "text-red-600 dark:text-red-400",
    bgClass: "bg-red-50 dark:bg-red-900/20",
    borderClass: "border border-red-200 dark:border-red-800",
    textClass: "text-red-800 dark:text-red-400",
  },
};

// Banner variant: rich solid backgrounds, white text/icons always
const bannerConfig = {
  info: {
    icon: "info-circle",
    iconClass: "text-white",
    bgClass: "bg-primary-700",
    borderClass: "border-0",
    textClass: "text-white",
  },
  success: {
    icon: "check-circle",
    iconClass: "text-white",
    bgClass: "bg-green-600",
    borderClass: "border-0",
    textClass: "text-white",
  },
  warning: {
    icon: "error",
    iconClass: "text-white",
    bgClass: "bg-orange-600",
    borderClass: "border-0",
    textClass: "text-white",
  },
  error: {
    icon: "x-circle",
    iconClass: "text-white",
    bgClass: "bg-red-600",
    borderClass: "border-0",
    textClass: "text-white",
  },
};

const config =
  variant === "banner"
    ? bannerConfig[type] || bannerConfig.info
    : typeConfig[type] || typeConfig.info;
---

<div class={`w-full p-2 ${config.bgClass} ${config.borderClass} ${className}`}>
  <div class="flex items-start">
    <SimpleIcon name={config.icon} class={`mr-2 mt-0.5 text-lg ${config.iconClass}`} />
    <div class="mr-8 flex-1">
      {title && <div class={`text-base ${config.textClass}`} set:html={title} />}
      {
        description && (
          <div
            class={`${title ? "mt-1" : ""} text-sm ${config.textClass}`}
            set:html={description}
          />
        )
      }
    </div>
  </div>
</div>
