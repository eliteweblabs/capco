---
// Reusable Accordion component following Flowbite design
export const partial = true;

// Detect if this is being used as a partial
const isPartial = Astro.request.headers.has("x-accordion-id");

let id, title, description, content, open, className, headerClass, contentClass;

if (isPartial) {
  // Extract props from headers when used as partial
  id = Astro.request.headers.get("x-accordion-id") || "";
  title = Astro.request.headers.get("x-accordion-title") || "";
  description = Astro.request.headers.get("x-accordion-description") || "";
  content = Astro.request.headers.get("x-accordion-content") || "";
  open = Astro.request.headers.get("x-accordion-open") === "true";
  className = Astro.request.headers.get("x-accordion-class") || "";
  headerClass = Astro.request.headers.get("x-accordion-header-class") || "";
  contentClass = Astro.request.headers.get("x-accordion-content-class") || "";
} else {
  // Use regular props when used as a component
  const props = Astro.props;
  id = props.id;
  title = props.title;
  description = props.description;
  content = props.content;
  open = props.open || false;
  className = props.class || "";
  headerClass = props.headerClass || "";
  contentClass = props.contentClass || "";
}
---

<div
  class="mb-4 flex items-center rounded-lg bg-blue-50 p-4 text-sm text-blue-800 dark:bg-gray-800 dark:text-blue-400"
  role="alert"
>
  <svg
    class="me-3 inline h-4 w-4 shrink-0"
    aria-hidden="true"
    xmlns="http://www.w3.org/2000/svg"
    fill="currentColor"
    viewBox="0 0 20 20"
  >
    <path
      d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
    ></path>
  </svg>
  <span class="sr-only">Info</span>
  <div>
    <span class="font-medium">{title}</span>
    {description}
  </div>
</div>
