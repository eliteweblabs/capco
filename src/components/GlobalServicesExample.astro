---
import PushNotificationDemo from "./common/PushNotificationDemo.astro";
---

<div id="services-test" class="rounded-lg bg-white p-6 shadow dark:bg-gray-800">
  <h3 class="mb-4 text-lg font-semibold">Global Services Demo</h3>

  <div class="space-y-4">
    <!-- Configuration Status -->
    <div
      id="config-status"
      class="mb-4 rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-800 dark:bg-yellow-900/20"
    >
      <h4 class="mb-2 font-medium text-yellow-800 dark:text-yellow-200">
        üîç Checking Email Configuration...
      </h4>
      <p class="mb-2 text-sm text-yellow-700 dark:text-yellow-300">
        Verifying email service setup...
      </p>
    </div>

    <!-- Email Actions -->
    <div class="border-b pb-4">
      <h4 class="mb-2 font-medium">Email Functions</h4>
      <div class="mb-3 flex flex-wrap gap-2">
        <button
          id="send-welcome-email"
          class="rounded bg-blue-500 px-3 py-2 text-white hover:bg-blue-600"
        >
          Send Welcome Email
        </button>
        <button
          id="send-notification-email"
          class="rounded bg-green-500 px-3 py-2 text-white hover:bg-green-600"
        >
          Send Notification
        </button>
        <button
          id="send-custom-email"
          class="rounded bg-purple-500 px-3 py-2 text-white hover:bg-purple-600"
        >
          Send Custom Email
        </button>
      </div>
      <div class="flex flex-wrap gap-2">
        <button
          id="send-react-welcome"
          class="rounded bg-pink-500 px-3 py-2 text-xs text-white hover:bg-pink-600"
        >
          üé® React Welcome
        </button>
        <button
          id="send-react-notification"
          class="rounded bg-indigo-500 px-3 py-2 text-xs text-white hover:bg-indigo-600"
        >
          üé® React Project Alert
        </button>
        <button
          id="send-react-test"
          class="rounded bg-cyan-500 px-3 py-2 text-xs text-white hover:bg-cyan-600"
        >
          üé® React Test
        </button>
      </div>
    </div>

    <!-- Project Management -->
    <div class="border-b pb-4">
      <h4 class="mb-2 font-medium">Project Management</h4>
      <div class="mb-2 flex flex-wrap gap-2">
        <button
          id="get-user-projects-btn"
          class="rounded bg-indigo-500 px-3 py-2 text-white hover:bg-indigo-600"
        >
          Get My Projects
        </button>
      </div>
    </div>

    <!-- Project Status Actions -->
    <div class="border-b pb-4">
      <h4 class="mb-2 font-medium">Project Status Functions</h4>
      <div class="mb-3 rounded bg-gray-50 p-3 dark:bg-gray-900">
        <p class="mb-2 text-sm text-gray-600 dark:text-gray-400">
          <span class="font-medium">Current Project ID:</span>
          <span id="current-project-id" class="font-mono text-blue-600 dark:text-blue-400"
            >None</span
          >
        </p>
        <button
          id="create-test-project"
          class="rounded bg-blue-500 px-3 py-2 text-sm text-white hover:bg-blue-600"
        >
          Create Test Project
        </button>
      </div>
      <div class="flex flex-wrap gap-2">
        <button
          class="status-btn rounded bg-yellow-500 px-3 py-2 text-white hover:bg-yellow-600 disabled:cursor-not-allowed disabled:opacity-50"
          data-new-status="20"
          data-label="Generate Proposal"
          data-action="proposal_generation"
          disabled
        >
          Generate Proposal
        </button>
        <button
          class="status-btn rounded bg-blue-500 px-3 py-2 text-white hover:bg-blue-600 disabled:cursor-not-allowed disabled:opacity-50"
          data-new-status="30"
          data-label="Ship Proposal"
          data-action="proposal_shipped"
          disabled
        >
          Ship Proposal
        </button>
        <button
          class="status-btn rounded bg-purple-500 px-3 py-2 text-white hover:bg-purple-600 disabled:cursor-not-allowed disabled:opacity-50"
          data-new-status="50"
          data-label="Proposal Approved"
          data-action="proposal_approved"
          disabled
        >
          Proposal Approved
        </button>
        <button
          class="status-btn rounded bg-orange-500 px-3 py-2 text-white hover:bg-orange-600 disabled:cursor-not-allowed disabled:opacity-50"
          data-new-status="60"
          data-label="Generate Deposit Invoice"
          data-action="deposit_invoice_generation"
          disabled
        >
          Generate Deposit Invoice
        </button>
        <button
          class="status-btn rounded bg-green-500 px-3 py-2 text-white hover:bg-green-600 disabled:cursor-not-allowed disabled:opacity-50"
          data-new-status="220"
          data-label="Mark Complete"
          data-action="project_complete"
          disabled
        >
          Mark Complete
        </button>
      </div>
    </div>

    <!-- Notification Actions -->
    <div class="border-b pb-4">
      <h4 class="mb-2 font-medium">Notification Functions</h4>
      <div class="flex flex-wrap gap-2">
        <button
          id="show-success"
          class="rounded bg-green-500 px-3 py-2 text-white hover:bg-green-600"
        >
          Success Notification
        </button>
        <button id="show-error" class="rounded bg-red-500 px-3 py-2 text-white hover:bg-red-600">
          Error Notification
        </button>
        <button
          id="show-warning"
          class="rounded bg-yellow-500 px-3 py-2 text-white hover:bg-yellow-600"
        >
          Warning Notification
        </button>
        <button id="show-info" class="rounded bg-blue-500 px-3 py-2 text-white hover:bg-blue-600">
          Info Notification
        </button>
      </div>
    </div>

    <!-- File Upload -->
    <div>
      <h4 class="mb-2 font-medium">File Upload Functions</h4>
      <input
        type="file"
        id="file-upload"
        multiple
        accept=".pdf"
        class="block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"
      />
      <button
        id="upload-files"
        class="mt-2 rounded bg-blue-500 px-3 py-2 text-white hover:bg-blue-600"
      >
        Upload Files
      </button>
    </div>

    <!-- Event Log -->
    <div class="mt-6 rounded bg-gray-50 p-4 dark:bg-gray-900">
      <h4 class="mb-2 font-medium">Event Log</h4>
      <div id="event-log" class="max-h-40 overflow-y-auto text-sm text-gray-600 dark:text-gray-400">
        <p>Events will appear here...</p>
      </div>
      <button
        id="clear-log"
        class="mt-2 rounded bg-gray-500 px-2 py-1 text-xs text-white hover:bg-gray-600"
      >
        Clear Log
      </button>
    </div>
  </div>
</div>

<!-- ProjectList removed to prevent confusion - now only on index page -->

<!-- PDF Generator Container -->
<div class="mt-6">
  <!-- PDF generation will be handled by buttons in project cards -->
</div>

<!-- Push Notification Demo -->
<PushNotificationDemo />

<script>
  // Email service removed - using Supabase for emails
  console.log("Email service removed - using Supabase for all email functionality");
</script>
