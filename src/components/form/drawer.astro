---
/**
 * Flowbite Drawer - Reusable off-canvas panel.
 * Uses data-drawer-target, data-drawer-show, data-drawer-hide - Flowbite handles open/close.
 * Trigger: data-drawer-target="{id}" data-drawer-show="{id}" data-drawer-placement="{placement}"
 * Drawer must be a direct child of body (outside overflow-hidden) - e.g. in App.astro.
 */
interface Props {
  id: string;
  title?: string;
  /** Flowbite placement: left | right | top | bottom */
  placement?: "left" | "right" | "top" | "bottom";
  /** Width: sm (w-80) | md (w-96) | lg (w-[28rem]) */
  size?: "sm" | "md" | "lg";
}

const { id, title = "", placement = "left", size = "md" } = Astro.props;

const sizeClasses: Record<string, string> = {
  sm: "w-80",
  md: "w-96",
  lg: "w-[28rem]",
};

const placementClasses: Record<string, string> = {
  left: "left-0 top-0 -translate-x-full",
  right: "right-0 top-0 translate-x-full",
  top: "left-0 right-0 top-0 -translate-y-full",
  bottom: "left-0 right-0 bottom-0 translate-y-full",
};

const zIndex = 1500;
import CloseButton from "../ui/CloseButton.astro";
---

<div
  id={id}
  class={`color-background absolute  overflow-y-auto p-4 transition-transform ${sizeClasses[size]} ${placementClasses[placement]}`}
  tabindex="-1"
  aria-labelledby={`${id}-label`}
  style={`z-index: ${zIndex};`}
  data-dynamic-height="minHeight"
>
  <div class="border-default relative mb-5 flex items-center border-b pb-4">
    <h5 id={`${id}-label`} class="inline-flex items-center truncate text-body text-lg font-medium">
      {title}
    </h5>
    <CloseButton
      data-drawer-hide={id}
      class="absolute right-0 top-0"
      tooltipText="Close drawer"
      tooltip={false}
    />
  </div>
  <slot />
</div>
