---
/**
 * ConfigForm - Routes MultiStepFormConfig to the appropriate form renderer.
 * layout and formAction are NOT in config â€” layout is derived from steps
 * (1 step = standard, multiple = multi-step); formAction is injected by form-config-from-site.
 *
 * Example: <ConfigForm config={loginFormConfig} initialData={{ redirect: "/dashboard" }} />
 */
import type { MultiStepFormConfig, FormLayout } from "../../../lib/multi-step-form-config";
import StandardForm from "./StandardForm.astro";
import MultiStepForm from "./MultiStepForm.astro";

interface Props {
  config: MultiStepFormConfig;
  initialData?: Record<string, any>;
  containerClass?: string;
  wrapInForm?: boolean;
  fieldIdPrefix?: string;
  layout?: "standard" | "multi-step";
}

const {
  config,
  initialData = {},
  containerClass,
  wrapInForm = false,
  fieldIdPrefix = "",
  layout,
} = Astro.props;
---

{
  layout === "standard" ? (
    <StandardForm
      config={config}
      initialData={initialData}
      containerClass={containerClass}
      wrapInForm={wrapInForm}
      fieldIdPrefix={fieldIdPrefix}
    />
  ) : (
    <MultiStepForm config={config} initialData={initialData} containerClass={containerClass} />
  )
}
