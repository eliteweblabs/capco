---
// Redirect logic moved to login.astro (page level) to avoid ResponseSentError.
// The page runs redirects before LayoutTwoColumn/App render; this component runs
// in a slot after App has started sending the response.
interface Props {
  redirectUrl?: string;
  id?: string;
  layout?: "standard" | "multi-step";
}

const { redirectUrl = "/project/dashboard", id, layout = "multi-step" } = Astro.props;

import ConfigForm from "./ConfigForm.astro";
import { getLoginFormConfig } from "../../../lib/forms/form-config-from-site";

const loginFormConfig = await getLoginFormConfig();
---

<ConfigForm config={loginFormConfig} initialData={{ redirect: redirectUrl }} layout={layout} />

<!-- Google OAuth: lib/auth-google.ts (loaded by App.astro and auth/login.astro). AuthProviders .provider-btn[data-provider="google"] uses it. -->
