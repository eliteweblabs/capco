---
import App from "../components/common/App.astro";
import Features from "../components/common/Features.astro";
import Hero from "../components/common/Hero.astro";
import Testimonials from "../components/common/Testimonials.astro";

// Get auth data for conditional rendering
import { checkAuth } from "../lib/auth";
const { isAuth, currentUser, currentRole, session } = await checkAuth(Astro.cookies);
---

<App
  title="CAPCo Fire Protection Systems - Build, manage, and track fire protection systems effortlessly"
  description="CAPCo powers the world's most reliable fire protection systems. We make compliance easy."
  isAuth={isAuth}
  currentUser={currentUser}
  session={session || undefined}
  currentRole={currentRole || "Client"}
  session={session || undefined}
  project={undefined}
  projectId={undefined}
  supabaseUrl={undefined}
  supabaseAdmin={null}
>
  <!-- Hero Section -->
  <Hero
    title="CAPCo Fire Protection Systems - Build, manage, and track fire protection systems effortlessly"
    description="CAPCo powers the world's most reliable fire protection systems. We make compliance easy."
  />

  <!-- Features Section -->
  <Features />

  <!-- Testimonials Section -->
  <Testimonials />
</App>
