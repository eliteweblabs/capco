---
import App from "../components/common/App.astro";
---

<App
  title="Cookie Preferences - CAPCo Fire Protection"
  description="Manage your cookie preferences and learn about how CAPCo uses cookies to enhance your experience."
>
  <div class="container mx-auto max-w-4xl px-4 py-8">
    <div class="prose prose-lg dark:prose-invert max-w-none">
      <h1 class="dark:text-light mb-8 text-3xl font-bold text-black">Cookie Preferences</h1>

      <div
        class="mb-8 rounded-lg border border-primary-200 bg-primary-50 p-6 dark:border-primary-800 dark:bg-primary-900/20"
      >
        <p class="mb-0 text-primary-800 dark:text-primary-200">
          <strong>Last Updated:</strong>
          {new Date().toLocaleDateString()}
        </p>
      </div>

      <p class="text-secondary dark:text-secondary-dark mb-8">
        We use cookies and similar technologies to enhance your browsing experience, provide
        personalized content, and analyze our traffic. You can manage your cookie preferences below
        or learn more about our cookie usage in our <a
          href="/privacy-policy"
          class="text-primary-600 hover:underline dark:text-primary-400">Privacy Policy</a
        >.
      </p>

      <!-- Cookie Categories -->
      <div class="mb-8 space-y-6">
        <!-- Essential Cookies -->
        <div
          class="rounded-lg border border-border-light bg-background-card p-6 dark:border-border-dark dark:bg-background-card-dark"
        >
          <div class="mb-4 flex items-center justify-between">
            <div>
              <h3 class="dark:text-light mb-2 text-lg font-semibold text-black">
                Essential Cookies
              </h3>
              <p class="text-secondary dark:text-secondary-dark text-sm">
                These cookies are necessary for the website to function and cannot be switched off.
              </p>
            </div>
            <div class="flex items-center">
              <span
                class="rounded-full bg-success-100 px-3 py-1 text-sm font-medium text-success-800 dark:bg-success-900/30 dark:text-success-200"
              >
                Always Active
              </span>
            </div>
          </div>
          <div class="text-muted dark:text-muted text-sm">
            <p class="mb-2">These cookies enable basic functions like:</p>
            <ul class="list-inside list-disc space-y-1">
              <li>User authentication and session management</li>
              <li>Security features and fraud prevention</li>
              <li>Remembering your login status</li>
              <li>Basic website functionality</li>
            </ul>
          </div>
        </div>

        <!-- Analytics Cookies -->
        <div
          class="rounded-lg border border-border-light bg-background-card p-6 dark:border-border-dark dark:bg-background-card-dark"
        >
          <div class="mb-4 flex items-center justify-between">
            <div>
              <h3 class="dark:text-light mb-2 text-lg font-semibold text-black">
                Analytics Cookies
              </h3>
              <p class="text-secondary dark:text-secondary-dark text-sm">
                These cookies help us understand how visitors interact with our website.
              </p>
            </div>
            <div class="flex items-center">
              <label class="relative inline-flex cursor-pointer items-center">
                <input type="checkbox" class="peer sr-only" id="analytics-toggle" checked />
                <div
                  class="peer h-6 w-11 rounded-full bg-neutral-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-neutral-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:border-neutral-600 dark:bg-neutral-700 dark:peer-focus:ring-primary-800"
                >
                </div>
              </label>
            </div>
          </div>
          <div class="text-muted dark:text-muted text-sm">
            <p class="mb-2">These cookies collect anonymous information about:</p>
            <ul class="list-inside list-disc space-y-1">
              <li>Page views and user interactions</li>
              <li>Website performance and loading times</li>
              <li>Popular content and features</li>
              <li>Error tracking and debugging</li>
            </ul>
          </div>
        </div>

        <!-- Functional Cookies -->
        <div
          class="rounded-lg border border-border-light bg-background-card p-6 dark:border-border-dark dark:bg-background-card-dark"
        >
          <div class="mb-4 flex items-center justify-between">
            <div>
              <h3 class="dark:text-light mb-2 text-lg font-semibold text-black">
                Functional Cookies
              </h3>
              <p class="text-secondary dark:text-secondary-dark text-sm">
                These cookies enable enhanced functionality and personalization.
              </p>
            </div>
            <div class="flex items-center">
              <label class="relative inline-flex cursor-pointer items-center">
                <input type="checkbox" class="peer sr-only" id="functional-toggle" checked />
                <div
                  class="peer h-6 w-11 rounded-full bg-neutral-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-neutral-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:border-neutral-600 dark:bg-neutral-700 dark:peer-focus:ring-primary-800"
                >
                </div>
              </label>
            </div>
          </div>
          <div class="text-muted dark:text-muted text-sm">
            <p class="mb-2">These cookies remember your preferences for:</p>
            <ul class="list-inside list-disc space-y-1">
              <li>Language and region settings</li>
              <li>Theme preferences (light/dark mode)</li>
              <li>Customized dashboard layouts</li>
              <li>Form auto-completion</li>
            </ul>
          </div>
        </div>

        <!-- Marketing Cookies -->
        <div
          class="rounded-lg border border-border-light bg-background-card p-6 dark:border-border-dark dark:bg-background-card-dark"
        >
          <div class="mb-4 flex items-center justify-between">
            <div>
              <h3 class="dark:text-light mb-2 text-lg font-semibold text-black">
                Marketing Cookies
              </h3>
              <p class="text-secondary dark:text-secondary-dark text-sm">
                These cookies are used to deliver relevant advertisements and track marketing
                campaigns.
              </p>
            </div>
            <div class="flex items-center">
              <label class="relative inline-flex cursor-pointer items-center">
                <input type="checkbox" class="peer sr-only" id="marketing-toggle" />
                <div
                  class="peer h-6 w-11 rounded-full bg-neutral-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-neutral-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:border-neutral-600 dark:bg-neutral-700 dark:peer-focus:ring-primary-800"
                >
                </div>
              </label>
            </div>
          </div>
          <div class="text-muted dark:text-muted text-sm">
            <p class="mb-2">These cookies may be used to:</p>
            <ul class="list-inside list-disc space-y-1">
              <li>Show relevant advertisements</li>
              <li>Track campaign effectiveness</li>
              <li>Limit ad frequency</li>
              <li>Measure ad performance</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="mb-8 flex flex-col gap-4 sm:flex-row">
        <button
          id="save-preferences"
          class="rounded-lg bg-primary-600 px-6 py-3 font-medium text-white transition-colors hover:bg-primary-700"
        >
          Save Preferences
        </button>
        <button
          id="accept-all"
          class="rounded-lg bg-success-600 px-6 py-3 font-medium text-white transition-colors hover:bg-success-700"
        >
          Accept All Cookies
        </button>
        <button
          id="reject-all"
          class="rounded-lg bg-neutral-600 px-6 py-3 font-medium text-white transition-colors hover:bg-neutral-700"
        >
          Reject All Optional
        </button>
      </div>

      <!-- Additional Information -->
      <div class="rounded-lg bg-neutral-50 p-6 dark:bg-neutral-900">
        <h3 class="dark:text-light mb-4 text-lg font-semibold text-black">
          Additional Information
        </h3>
        <div class="text-secondary dark:text-secondary-dark space-y-4 text-sm">
          <p>
            <strong>Browser Settings:</strong> You can also manage cookies through your browser settings.
            Most browsers allow you to refuse cookies or delete them. However, disabling cookies may
            affect the functionality of our website.
          </p>
          <p>
            <strong>Third-Party Cookies:</strong> Some cookies on our website are set by third-party
            services that appear on our pages. We do not control these cookies, and you should check
            the third-party websites for more information about their cookies and how to manage them.
          </p>
          <p>
            <strong>Updates:</strong> We may update this Cookie Preferences page from time to time. Any
            changes will be posted on this page with an updated revision date.
          </p>
        </div>
      </div>

      <div class="mt-8 border-t border-border-light pt-6 dark:border-border-dark">
        <p class="text-muted dark:text-muted text-sm">
          For more detailed information about our data practices, please review our
          <a href="/privacy-policy" class="text-primary-600 hover:underline dark:text-primary-400"
            >Privacy Policy</a
          >.
        </p>
      </div>
    </div>
  </div>

  <script>
    // Cookie preference management
    document.addEventListener("DOMContentLoaded", function () {
      const analyticsToggle = document.getElementById("analytics-toggle") as HTMLInputElement;
      const functionalToggle = document.getElementById("functional-toggle") as HTMLInputElement;
      const marketingToggle = document.getElementById("marketing-toggle") as HTMLInputElement;
      const saveBtn = document.getElementById("save-preferences") as HTMLButtonElement;
      const acceptAllBtn = document.getElementById("accept-all") as HTMLButtonElement;
      const rejectAllBtn = document.getElementById("reject-all") as HTMLButtonElement;

      // Load current preferences
      function loadPreferences() {
        const prefs = JSON.parse(localStorage.getItem("cookiePreferences") || "{}");
        analyticsToggle.checked = prefs.analytics !== false;
        functionalToggle.checked = prefs.functional !== false;
        marketingToggle.checked = prefs.marketing === true;
      }

      // Save preferences
      function savePreferences() {
        const preferences = {
          analytics: analyticsToggle.checked,
          functional: functionalToggle.checked,
          marketing: marketingToggle.checked,
          timestamp: new Date().toISOString(),
        };
        localStorage.setItem("cookiePreferences", JSON.stringify(preferences));

        // Show confirmation
        alert("Your cookie preferences have been saved!");
      }

      // Accept all
      function acceptAll() {
        analyticsToggle.checked = true;
        functionalToggle.checked = true;
        marketingToggle.checked = true;
        savePreferences();
      }

      // Reject all optional
      function rejectAll() {
        analyticsToggle.checked = false;
        functionalToggle.checked = false;
        marketingToggle.checked = false;
        savePreferences();
      }

      // Event listeners
      saveBtn.addEventListener("click", savePreferences);
      acceptAllBtn.addEventListener("click", acceptAll);
      rejectAllBtn.addEventListener("click", rejectAll);

      // Load preferences on page load
      loadPreferences();
    });
  </script>
</App>
