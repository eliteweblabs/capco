---
/**
 * Test Page for Custom VAPI Chat Interface
 */

import App from "../../components/ui/App.astro";
import VapiChatInterface from "../../components/chat/VapiChatInterface.astro";
import { checkAuth } from "../../lib/auth";

const { currentUser } = await checkAuth(Astro.cookies);
---

<App title="VAPI Chat Test" {currentUser} mask="top-left">
  <div class="container mx-auto px-4 py-8">
    <div class="mx-auto max-w-4xl space-y-8">
      <!-- Header -->
      <div class="text-center">
        <h1 class="mb-4 text-4xl font-bold text-gray-900 dark:text-white">
          Custom VAPI Chat Interface
        </h1>
        <p class="text-lg text-gray-600 dark:text-gray-400">
          A beautiful conversational interface with typewriter effects and voice support
        </p>
      </div>

      <!-- Info Banner -->
      <div
        class="rounded-lg border border-blue-200 bg-blue-50 p-6 dark:border-blue-800 dark:bg-blue-900/20"
      >
        <h2 class="mb-3 font-semibold text-blue-900 dark:text-blue-200">Features:</h2>
        <ul class="space-y-2 text-sm text-blue-800 dark:text-blue-300">
          <li class="flex items-start gap-2">
            <svg
              class="mt-0.5 h-5 w-5 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            <span
              ><strong>Typewriter Text:</strong> Beautiful animated text matching your form design</span
            >
          </li>
          <li class="flex items-start gap-2">
            <svg
              class="mt-0.5 h-5 w-5 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            <span><strong>Text or Voice:</strong> Toggle between typing and speaking freely</span>
          </li>
          <li class="flex items-start gap-2">
            <svg
              class="mt-0.5 h-5 w-5 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            <span
              ><strong>Free-form conversation:</strong> No rigid form fields, just natural dialogue</span
            >
          </li>
          <li class="flex items-start gap-2">
            <svg
              class="mt-0.5 h-5 w-5 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            <span
              ><strong>Ask in-depth questions:</strong> Get detailed answers before submitting</span
            >
          </li>
          <li class="flex items-start gap-2">
            <svg
              class="mt-0.5 h-5 w-5 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"></path>
            </svg>
            <span><strong>Beautiful design:</strong> Matches your site's aesthetic perfectly</span>
          </li>
        </ul>
      </div>

      <!-- Chat Interface -->
      <VapiChatInterface
        title="Let's discuss your project..."
        introMessage="Hi! I'm Leah... your project assistant. I can help you with fire protection systems, answer questions about our services, or create a new project. What would you like to know?"
        placeholder="Type your message or ask a question..."
      />

      <!-- Example Prompts -->
      <div
        class="rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-900"
      >
        <h3 class="mb-3 font-semibold text-gray-900 dark:text-gray-100">Try asking things like:</h3>
        <div class="grid grid-cols-1 gap-3 md:grid-cols-2">
          <button
            class="group rounded-lg border border-gray-200 bg-white px-4 py-3 text-left transition-colors hover:border-primary-500 dark:border-gray-700 dark:bg-gray-900 dark:hover:border-primary-500"
            onclick="document.getElementById('vapi-input').value = this.querySelector('.prompt-text').textContent; document.getElementById('vapi-input').focus();"
          >
            <p
              class="prompt-text text-sm text-gray-700 group-hover:text-primary-600 dark:text-gray-300 dark:group-hover:text-primary-400"
            >
              What services do you offer?
            </p>
          </button>
          <button
            class="group rounded-lg border border-gray-200 bg-white px-4 py-3 text-left transition-colors hover:border-primary-500 dark:border-gray-700 dark:bg-gray-900 dark:hover:border-primary-500"
            onclick="document.getElementById('vapi-input').value = this.querySelector('.prompt-text').textContent; document.getElementById('vapi-input').focus();"
          >
            <p
              class="prompt-text text-sm text-gray-700 group-hover:text-primary-600 dark:text-gray-300 dark:group-hover:text-primary-400"
            >
              I need a fire alarm system for my building
            </p>
          </button>
          <button
            class="group rounded-lg border border-gray-200 bg-white px-4 py-3 text-left transition-colors hover:border-primary-500 dark:border-gray-700 dark:bg-gray-900 dark:hover:border-primary-500"
            onclick="document.getElementById('vapi-input').value = this.querySelector('.prompt-text').textContent; document.getElementById('vapi-input').focus();"
          >
            <p
              class="prompt-text text-sm text-gray-700 group-hover:text-primary-600 dark:text-gray-300 dark:group-hover:text-primary-400"
            >
              How long does a typical project take?
            </p>
          </button>
          <button
            class="group rounded-lg border border-gray-200 bg-white px-4 py-3 text-left transition-colors hover:border-primary-500 dark:border-gray-700 dark:bg-gray-900 dark:hover:border-primary-500"
            onclick="document.getElementById('vapi-input').value = this.querySelector('.prompt-text').textContent; document.getElementById('vapi-input').focus();"
          >
            <p
              class="prompt-text text-sm text-gray-700 group-hover:text-primary-600 dark:text-gray-300 dark:group-hover:text-primary-400"
            >
              Create a new project for 123 Main Street
            </p>
          </button>
        </div>
      </div>

      <!-- Comparison -->
      <div class="grid gap-6 md:grid-cols-2">
        <div
          class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-700 dark:bg-gray-900"
        >
          <h3 class="mb-3 font-semibold text-gray-900 dark:text-white">Multi-Step Form Approach</h3>
          <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Structured data collection</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Visual confirmation</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-red-600 dark:text-red-400">✗</span>
              <span>Rigid flow</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-red-600 dark:text-red-400">✗</span>
              <span>Can't ask questions</span>
            </li>
          </ul>
        </div>

        <div
          class="dark:bg-primary-900/20 rounded-lg border border-primary-200 bg-primary-50 p-6 dark:border-primary-800"
        >
          <h3 class="mb-3 font-semibold text-primary-900 dark:text-primary-200">
            Chat Interface Approach
          </h3>
          <ul class="space-y-2 text-sm text-primary-800 dark:text-primary-300">
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Natural conversation</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Ask unlimited questions</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Voice or text</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-green-600 dark:text-green-400">✓</span>
              <span>Flexible flow</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</App>

<style>
  /* Import typewriter styles if needed */
  .typewriter-text {
    /* Your existing typewriter styles will apply automatically */
  }
</style>
