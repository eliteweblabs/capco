---
// Example Flowbite Dashboard Page
// Demonstrates all Flowbite components working together

import App from "../components/common/App.astro";
import FlowbiteChart from "../components/common/FlowbiteChart.astro";
import FlowbiteDashboardLayout from "../components/common/FlowbiteDashboardLayout.astro";
import FlowbiteDrawer from "../components/common/FlowbiteDrawer.astro";
import FlowbiteStatsGrid from "../components/common/FlowbiteStatsGrid.astro";
import FlowbiteTable from "../components/common/FlowbiteTable.astro";

// Mock data for demonstration
const stats = [
  {
    title: "Total Projects",
    value: 24,
    change: { value: "12%", type: "increase" as const },
    icon: "folder",
    color: "blue" as const,
  },
  {
    title: "Active Users",
    value: 1234,
    change: { value: "8%", type: "increase" as const },
    icon: "user",
    color: "green" as const,
  },
  {
    title: "Revenue",
    value: "$47,867",
    change: { value: "3%", type: "decrease" as const },
    icon: "dollar",
    color: "yellow" as const,
  },
  {
    title: "Completion Rate",
    value: "94%",
    change: { value: "2%", type: "increase" as const },
    icon: "check-circle",
    color: "purple" as const,
  },
];

const tableHeaders = ["Project", "Status", "Progress", "Due Date", "Team"];
const tableData = [
  {
    Project: "Fire Safety System",
    Status: "In Progress",
    Progress: "75%",
    "Due Date": "2024-02-15",
    Team: "5 members",
  },
  {
    Project: "Emergency Response Plan",
    Status: "Review",
    Progress: "90%",
    "Due Date": "2024-02-20",
    Team: "3 members",
  },
  {
    Project: "Safety Training",
    Status: "Completed",
    Progress: "100%",
    "Due Date": "2024-01-30",
    Team: "8 members",
  },
];

// Mock authentication data
const isAuth = true;
const currentUser = { name: "John Doe", email: "john@example.com" };
const currentRole = "Admin";
const session = {};
const desktopNavigationHTML = `
  <ul class="flex flex-col space-y-2 md:flex-row md:space-y-0 md:space-x-8">
    <li><a href="/dashboard" class="text-blue-700 dark:text-blue-400">Dashboard</a></li>
    <li><a href="/projects" class="text-gray-600 dark:text-gray-400 hover:text-blue-700 dark:hover:text-blue-400">Projects</a></li>
    <li><a href="/users" class="text-gray-600 dark:text-gray-400 hover:text-blue-700 dark:hover:text-blue-400">Users</a></li>
    <li><a href="/contact" class="text-gray-600 dark:text-gray-400 hover:text-blue-700 dark:hover:text-blue-400">Contact</a></li>
  </ul>
`;
---

<App>
  <FlowbiteDashboardLayout
    isAuth={isAuth}
    currentUser={currentUser}
    currentRole={currentRole}
    session={session}
    desktopNavigationHTML={desktopNavigationHTML}
    pageTitle="Flowbite Dashboard"
  >
    <!-- Stats Grid -->
    <div class="mb-8">
      <h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Overview</h2>
      <FlowbiteStatsGrid stats={stats} columns={4} />
    </div>

    <!-- Charts and Tables Row -->
    <div class="mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2">
      <!-- Chart -->
      <FlowbiteChart title="Project Progress" type="line" height="300px" />

      <!-- Table -->
      <FlowbiteTable
        title="Recent Projects"
        headers={tableHeaders}
        data={tableData}
        showActions={true}
        showPagination={false}
      />
    </div>

    <!-- Additional Chart -->
    <div class="mb-8">
      <FlowbiteChart title="Monthly Revenue" type="bar" height="400px" showLegend={true} />
    </div>

    <!-- Full Width Table -->
    <div class="mb-8">
      <FlowbiteTable
        title="All Projects"
        headers={[...tableHeaders, "Priority", "Client"]}
        data={[
          ...tableData,
          {
            Project: "Fire Alarm Installation",
            Status: "Planning",
            Progress: "25%",
            "Due Date": "2024-03-01",
            Team: "4 members",
            Priority: "High",
            Client: "ABC Corp",
          },
          {
            Project: "Safety Inspection",
            Status: "Scheduled",
            Progress: "0%",
            "Due Date": "2024-02-25",
            Team: "2 members",
            Priority: "Medium",
            Client: "XYZ Ltd",
          },
        ]}
        showActions={true}
        showPagination={true}
        itemsPerPage={5}
      />
    </div>
  </FlowbiteDashboardLayout>

  <!-- Drawer for mobile actions -->
  <FlowbiteDrawer id="mobile-actions" title="Quick Actions" position="right" size="md">
    <div class="space-y-4">
      <div>
        <h6 class="mb-2 text-sm font-medium text-gray-900 dark:text-white">Quick Actions</h6>
        <ul class="space-y-2 text-sm text-gray-500 dark:text-gray-400">
          <li>
            <a
              href="/projects/new"
              class="flex items-center hover:text-gray-900 dark:hover:text-white"
            >
              <i class="bx bx-plus mr-2"></i>
              New Project
            </a>
          </li>
          <li>
            <a
              href="/users/new"
              class="flex items-center hover:text-gray-900 dark:hover:text-white"
            >
              <i class="bx bx-user-plus mr-2"></i>
              Add User
            </a>
          </li>
          <li>
            <a href="/reports" class="flex items-center hover:text-gray-900 dark:hover:text-white">
              <i class="bx bx-chart mr-2"></i>
              Generate Report
            </a>
          </li>
          <li>
            <a href="/contact" class="flex items-center hover:text-gray-900 dark:hover:text-white">
              <i class="bx bx-envelope mr-2"></i>
              Contact Support
            </a>
          </li>
        </ul>
      </div>
    </div>
  </FlowbiteDrawer>
</App>
