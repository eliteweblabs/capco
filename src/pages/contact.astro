---
// Define requireAuthRedirect
const requireAuthRedirect = undefined;
// Make sure to check above value before redirecting
import { checkAuth } from "../lib/auth";
// Handle OAuth callback if code is present
const { currentUser, session, supabase } = await checkAuth(Astro.cookies);
// Handle auth redirect first
if (requireAuthRedirect && (!session || !currentUser)) {
  return Astro.redirect(requireAuthRedirect);
}

import { globalCompanyData } from "../pages/api/global-company-data";
const {
  globalCompanyName,
  globalCompanySlogan,
  globalCompanyAddress,
  globalCompanyPhone,
  globalCompanyEmail,
  globalCompanyWebsite,
  globalCompanyLogo,
  globalCompanyLogoDark,
  globalCompanyLogoLight,
} = globalCompanyData();

import { globalClasses } from "../pages/api/global-classes";
const { globalInputClasses, globalPrimaryTextClasses, globalSecondaryTextClasses } =
  globalClasses();

import App from "../components/common/App.astro";
import BoxIcon from "../components/common/BoxIcon.astro";
import ContactFormWithUpload from "../components/common/ContactFormWithUpload.astro";
import SectionContainer from "../components/common/SectionContainer.astro";
---

<App
  title={`Contact Us - ${globalCompanyName}`}
  description={`Get in touch with ${globalCompanyName} for all your fire protection needs.`}
>
  <!-- Header Section -->
  <div
    class="bg-gradient-to-r from-red-50 to-orange-50 px-6 py-16 dark:from-red-900/20 dark:to-orange-900/20"
  >
    <div class="mx-auto max-w-4xl text-center">
      <h1 class="mb-6 text-4xl font-bold text-gray-900 dark:text-white md:text-5xl">
        Contact <span class="text-red-600 dark:text-red-400">CAPCo</span>
      </h1>
      <p class="mx-auto mb-8 max-w-3xl text-xl text-gray-600 dark:text-gray-300">
        Ready to protect your business with professional fire protection systems? Submit your
        project details and documents to get a free consultation.
      </p>
    </div>
  </div>

  <!-- Contact Form Section -->
  <SectionContainer class="px-6 py-16">
    <div class="mx-auto max-w-4xl">
      <ContactFormWithUpload />
    </div>
  </SectionContainer>

  <!-- Contact Information -->
  <SectionContainer class="bg-gray-50 px-6 py-16 dark:bg-gray-900">
    <div class="mx-auto max-w-6xl">
      <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
        <!-- Phone -->
        <div class="text-center">
          <div
            class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30"
          >
            <BoxIcon name="phone" class="h-8 w-8 text-red-600 dark:text-red-400" />
          </div>
          <h3 class="mb-2 text-lg font-semibold text-gray-900 dark:text-white">Phone</h3>
          <p class="text-gray-600 dark:text-gray-400">{globalCompanyPhone}</p>
        </div>

        <!-- Email -->
        <div class="text-center">
          <div
            class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30"
          >
            <BoxIcon name="envelope" class="h-8 w-8 text-red-600 dark:text-red-400" />
          </div>
          <h3 class="mb-2 text-lg font-semibold text-gray-900 dark:text-white">Email</h3>
          <p class="text-gray-600 dark:text-gray-400">{globalCompanyEmail}</p>
        </div>

        <!-- Address -->
        <div class="text-center">
          <div
            class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30"
          >
            <BoxIcon name="map" class="h-8 w-8 text-red-600 dark:text-red-400" />
          </div>
          <h3 class="mb-2 text-lg font-semibold text-gray-900 dark:text-white">Address</h3>
          <p class="text-gray-600 dark:text-gray-400">
            {globalCompanyAddress}
          </p>
        </div>
      </div>
    </div>
  </SectionContainer>
</App>
