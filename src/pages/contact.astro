---
import { checkAuth } from "../lib/auth";
const { currentUser, session, supabase, refreshToken, accessToken } = await checkAuth(
  Astro.cookies
);

import { globalCompanyData } from "./api/global/global-company-data";
const { globalCompanyName } = globalCompanyData();

import { globalClasses } from "./api/global/global-classes";
const { globalInputClasses, primaryTextClasses, secondaryTextClasses } = globalClasses();

import App from "../components/common/App.astro";
import ContactFormWithUpload from "../components/common/ContactFormWithUpload.astro";
import Hero from "../components/common/Hero.astro";
---

<App
  title={`Global Dashboard - ${import.meta.env.VITE_COMPANY_NAME}`}
  description="View all projects."
  {currentUser}
  {session}
  {supabase}
  {globalCompanyName}
  {primaryTextClasses}
  {secondaryTextClasses}
  {globalInputClasses}
>
  <!-- Dashboard Container -->

  <Hero
    title={`Contact Us`}
    description={`Get in touch with ${globalCompanyName} for all your fire protection needs.`}
    {primaryTextClasses}
    {secondaryTextClasses}
    {globalInputClasses}
  />

  <iframe
    src="https://api.leadconnectorhq.com/widget/form/xelI3lUlBsyo4cp4hRsm"
    style="width:100%;height:100%;border:none;border-radius:3px"
    id="inline-xelI3lUlBsyo4cp4hRsm"
    data-layout="{'id':'INLINE'}"
    data-trigger-type="alwaysShow"
    data-trigger-value=""
    data-activation-type="alwaysActivated"
    data-activation-value=""
    data-deactivation-type="neverDeactivate"
    data-deactivation-value=""
    data-form-name="Contact Us"
    data-height="740"
    data-layout-iframe-id="inline-xelI3lUlBsyo4cp4hRsm"
    data-form-id="xelI3lUlBsyo4cp4hRsm"
    title="Contact Us"
  >
  </iframe>
  <script src="https://link.msgsndr.com/js/form_embed.js"></script>

  <!-- <ContactFormWithUpload {globalInputClasses} /> -->
</App>
