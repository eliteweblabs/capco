---
import App from "../../components/common/App.astro";
import PDFSystem from "../../components/project/PDFSystem.astro";
import { supabase } from "../../lib/supabase";
import { checkAuth } from "../../lib/auth";

const { currentUser = undefined } = await checkAuth(Astro.cookies);
if (!currentUser) {
  return Astro.redirect("/auth/login");
}
const { globalInputClasses, secondaryTextClasses, primaryTextClasses } = Astro.props;
const currentRole = currentUser?.profile?.role || "Client";
---

<App title="PDF System - CAPCo Fire Protection">
  <div class="min-h-screen bg-gray-50 dark:bg-gray-900">
    <div class="mx-auto px-1 py-8">
      <PDFSystem {currentUser} {globalInputClasses} {secondaryTextClasses} {primaryTextClasses} />
    </div>
  </div>
</App>
