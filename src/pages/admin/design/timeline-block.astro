---
import { checkAuth } from "../../../lib/auth";
import LayoutDefault from "../../../components/layouts/LayoutDefault.astro";
import TimelineBlock from "../../../components/blocks/TimelineBlock.astro";
import { globalClasses } from "../../api/global/global-classes";

const { currentUser, session } = await checkAuth(Astro.cookies);
if (!currentUser || !session || currentUser?.profile?.role !== "Admin") {
  return Astro.redirect("/auth/login");
}
const { primaryTextClasses, mutedTextClasses, globalCardStyle } = globalClasses();
const steps = [
  { title: "Consultation", description: "Initial meeting and requirements", icon: "phone" },
  { title: "Design", description: "System design and planning", icon: "edit" },
  { title: "Installation", description: "Professional installation", icon: "wrench" },
  { title: "Inspection", description: "Testing and certification", icon: "check" },
];
---

<LayoutDefault title="Timeline Block" description="Process and timeline steps.">
  <div class="px-4 py-8">
    <h1 class={`mb-2 text-3xl font-bold ${primaryTextClasses}`}>Timeline Block</h1>
    <p class={`mb-6 ${mutedTextClasses}`}>Process and timeline steps.</p>

    <div class={`${globalCardStyle} p-6`}>
      <TimelineBlock title="Our Process" description="From start to finish" steps={steps} />
    </div>
  </div>
</LayoutDefault>
