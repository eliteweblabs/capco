---
/**
 * Admin Dashboard Index
 * Redirects to the main admin dashboard (Global Activity)
 */
import { checkAuth } from "../../lib/auth";

const { currentUser, session } = await checkAuth(Astro.cookies);
const currentRole = currentUser?.profile?.role;

// Redirect to login if not authenticated
if (!currentUser || !session) {
  return Astro.redirect("/auth/login");
}

// Check if user is admin or SuperAdmin
if (currentRole !== "Admin" && currentRole !== "SuperAdmin") {
  return Astro.redirect("/dashboard");
}

// Redirect to main admin dashboard
return Astro.redirect("/admin/global-activity");
---
