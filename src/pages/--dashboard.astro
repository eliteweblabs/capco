---
interface Props {
  title: string;
  description: string;
}

import Base from "../layout/Base.astro";
import Header from "../components/index/Header.astro";
import Hero from "../components/index/Hero.astro";
// const { email } = Astro.locals;

import AuthForm from "../components/AuthForm.astro";
import ProjectsNav from "../components/index/ProjectsNav.astro";
import AdminProjectsStatusNav from "../components/AdminProjectsStatusNav.astro";

// Para cambiar idioma de textos
import { getI18N } from "@/i18n";
const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

// Check authentication
import { checkAuth } from "../lib/auth";
const { isAuth, session, user, role } = await checkAuth(Astro.cookies);


---






<Base title={i18n.SEO_TITLE} description={i18n.SEO_DESCRIPTION} user={isAuth ? user : undefined}>
  
  {isAuth ? (
    <Hero title={'NO MORE Dashboard - ' + user.email} description={role || 'No role'}/>
    <AdminProjectsStatusNav />
  ) : (
    <AuthForm />
  )}

</Base>
