---
import { checkAuth } from "../lib/auth";
const { currentUser, session, supabase, refreshToken, accessToken } = await checkAuth(
  Astro.cookies
);
const currentRole = currentUser?.profile?.role || "Client";

import App from "../components/common/App.astro";
import CalComBooking from "../components/common/CalComBooking.astro";
import Hero from "../components/common/Hero.astro";
---

<App
  title="Book a Demo"
  description="Schedule a personalized demo of our fire protection system management platform. See how we can streamline your workflow."
>
  <!-- Hero Section -->
  <Hero
    title="Book a Demo"
    description="Schedule a personalized demo of our fire protection system management platform. See how we can streamline your workflow."
  />
  <!-- Cal.com Booking Section -->
  <CalComBooking />

  <!-- Development Links -->
  <div
    class="mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"
  >
    <h4 class="text-sm font-medium text-blue-900 dark:text-blue-100 mb-2">Development & Testing</h4>
    <p class="text-sm text-blue-800 dark:text-blue-200 mb-3">
      For testing voice assistant functionality and system configuration:
    </p>
    <a
      href="/voice-test"
      class="inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors"
    >
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
        ></path>
      </svg>
      Voice Assistant Testing
    </a>
  </div>
</App>
