---
// Define requireAuthRedirect
const requireAuthRedirect = undefined;
// Make sure to check above value before redirecting
import { checkAuth } from "../lib/auth";
// Handle OAuth callback if code is present
const { currentUser, session, supabase } = await checkAuth(Astro.cookies);
// Handle auth redirect first
if (requireAuthRedirect && (!session || !currentUser)) {
  return Astro.redirect(requireAuthRedirect);
}

import { globalCompanyData } from "./api/global/global-company-data";
const {
  globalCompanyName,
  globalCompanySlogan,
  globalCompanyAddress,
  globalCompanyPhone,
  globalCompanyEmail,
  globalCompanyWebsite,
  globalCompanyLogo,
} = await globalCompanyData();
import App from "../components/ui/App.astro";
import CookiePreferences from "../components/common/CookiePreferences.astro";
---

<App
  title=`Cookie Preferences - ${globalCompanyName}`
  description=`Manage your cookie preferences and learn about how ${globalCompanyName} uses cookies to enhance your experience.`
  {globalCompanyName}
  {globalCompanySlogan}
  {globalCompanyAddress}
  {globalCompanyPhone}
  {globalCompanyEmail}
  {globalCompanyWebsite}
  {globalCompanyLogo}
>
  <div class="container mx-auto max-w-4xl px-4 py-8">
    <CookiePreferences showHeader={true} companyName={globalCompanyName} />
  </div>
</App>
