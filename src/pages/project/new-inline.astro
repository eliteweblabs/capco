---
/**
 * New Project Page - Renders CMS content for /project/new
 */
import { checkAuth } from "../../lib/auth";

import Hero from "../../components/common/Hero.astro";
import ProjectForm from "../../components/project/ProjectForm.astro";
import App from "../../components/ui/App.astro";
import MultiStepProjectForm from "../../components/project/MultiStepProjectForm.astro";
// Get auth state
const { currentUser, session, supabase } = await checkAuth(Astro.cookies);

// Load content from CMS (slug: "project/new")
// const pageContent = await getPageContent("project/new");

// If no CMS page exists, return 404
// if (!pageContent) {
//   return Astro.redirect("/404");
// }

import { globalCompanyData } from "../api/global/global-company-data.ts";
import { globalClasses } from "../api/global/global-classes.ts";
const { globalInputClasses, primaryTextClasses, secondaryTextClasses } = globalClasses();
const {
  globalCompanyName,
  globalCompanySlogan,
  globalCompanyAddress,
  globalCompanyPhone,
  globalCompanyEmail,
  globalCompanyWebsite,
  globalCompanyLogo,
} = await globalCompanyData();
---

<!-- <MarkdownPage slug="project/new" {currentUser} {session} {supabase} /> -->
<App
  title="Global Dashboard"
  description="View all projects."
  {currentUser}
  {session}
  {supabase}
  {globalCompanyName}
  {globalCompanySlogan}
  {primaryTextClasses}
  {secondaryTextClasses}
  {globalInputClasses}
  {globalCompanyAddress}
  {globalCompanyPhone}
  {globalCompanyEmail}
  {globalCompanyWebsite}
  {globalCompanyLogo}
  mainClasses="overflow-x-scroll"
  centerContent={true}
>
  <>
    <!-- <Hero
      title="Start a New Project"
      description={`Welcome to the ${globalCompanyName} Project Management System.<br>All aspects of your project can be managed here.`}
      {primaryTextClasses}
      {secondaryTextClasses}
      {globalInputClasses}
    /> -->

    <!-- <ProjectForm
      {currentUser}
      isNewProject={true}
      project={undefined}
      projectStatus={0}
      {globalInputClasses}
      {secondaryTextClasses}
      {primaryTextClasses}
    /> -->

    <MultiStepProjectForm
      {currentUser}
      isNewProject={true}
      {globalInputClasses}
      {secondaryTextClasses}
      {primaryTextClasses}
    />
  </>
</App>
