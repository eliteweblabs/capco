import{W as Gr,r as ye}from"./vendor-BvG50M3B.js";const hc=Object.prototype.toString;function vi(t){switch(hc.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return We(t,Error)}}function un(t,e){return hc.call(t)===`[object ${e}]`}function Ti(t){return un(t,"ErrorEvent")}function Co(t){return un(t,"DOMError")}function df(t){return un(t,"DOMException")}function Ne(t){return un(t,"String")}function Ii(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function wi(t){return t===null||Ii(t)||typeof t!="object"&&typeof t!="function"}function Kt(t){return un(t,"Object")}function qr(t){return typeof Event<"u"&&We(t,Event)}function ff(t){return typeof Element<"u"&&We(t,Element)}function pf(t){return un(t,"RegExp")}function Bn(t){return!!(t&&t.then&&typeof t.then=="function")}function hf(t){return Kt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function mc(t){return typeof t=="number"&&t!==t}function We(t,e){try{return t instanceof e}catch{return!1}}function gc(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function zt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function xo(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{gc(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function mf(t,e,n=!1){return Ne(t)?pf(e)?e.test(t):Ne(e)?n?t===e:t.includes(e):!1:!1}function ln(t,e=[],n=!1){return e.some(r=>mf(t,r,n))}function _c(t,e,n=250,r,s,i,o){if(!i.exception||!i.exception.values||!o||!We(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=gf(Ls(t,e,s,o.originalException,r,i.exception.values,a,0),n))}function Ls(t,e,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(We(r[s],Error)){Ao(o,a);const u=t(e,r[s]),l=c.length;Mo(u,s,l,a),c=Ls(t,e,n,r[s],s,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(We(u,Error)){Ao(o,a);const d=t(e,u),f=c.length;Mo(d,`errors[${l}]`,f,a),c=Ls(t,e,n,u,s,[d,...c],d,f)}}),c}function Ao(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Mo(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function gf(t,e){return t.map(n=>(n.value&&(n.value=zt(n.value,e)),n))}function sr(t){return t&&t.Math==Math?t:void 0}const M=typeof globalThis=="object"&&sr(globalThis)||typeof window=="object"&&sr(window)||typeof self=="object"&&sr(self)||typeof globalThis=="object"&&sr(globalThis)||function(){return this}()||{};function ki(){return M}function yc(t,e,n){const r=n||M,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const Gt=ki(),_f=80;function tt(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||_f;for(;n&&i++<r&&(u=yf(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function yf(t,e){const n=t,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";if(Gt.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=e&&e.length?e.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Ne(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function Sc(){try{return Gt.document.location.href}catch{return""}}function bc(t){return Gt.document&&Gt.document.querySelector?Gt.document.querySelector(t):null}function Ec(t){if(!Gt.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const dn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Sf="Sentry Logger ",Ps=["debug","info","warn","error","log","assert","trace"],Rr={};function Et(t){if(!("console"in M))return t();const e=M.console,n={},r=Object.keys(Rr);r.forEach(s=>{const i=Rr[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function bf(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return dn?Ps.forEach(n=>{e[n]=(...r)=>{t&&Et(()=>{M.console[n](`${Sf}[${n}]:`,...r)})}}):Ps.forEach(n=>{e[n]=()=>{}}),e}const h=bf(),Ef=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function vf(t){return t==="http"||t==="https"}function wt(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function vc(t){const e=Ef.exec(t);if(!e){Et(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i,o="",a]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return Tc({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function Tc(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Tf(t){if(!dn)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(h.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?vf(r)?e&&isNaN(parseInt(e,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Ic(t){const e=typeof t=="string"?vc(t):Tc(t);if(!(!e||!Tf(e)))return e}class Me extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function ae(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);typeof s=="function"&&wc(s,r),t[e]=s}function nt(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{dn&&h.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function wc(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,nt(t,"__sentry_original__",e)}catch{}}function Ri(t){return t.__sentry_original__}function If(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function kc(t){if(vi(t))return{message:t.message,name:t.name,stack:t.stack,...No(t)};if(qr(t)){const e={type:t.type,target:Oo(t.target),currentTarget:Oo(t.currentTarget),...No(t)};return typeof CustomEvent<"u"&&We(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Oo(t){try{return ff(t)?tt(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function No(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function wf(t,e=40){const n=Object.keys(kc(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return zt(n[0],e);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>e))return r===n.length?s:zt(s,e)}return""}function ce(t){return $s(t,new Map)}function $s(t,e){if(kf(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const s of Object.keys(t))typeof t[s]<"u"&&(r[s]=$s(t[s],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(s=>{r.push($s(s,e))}),r}return t}function kf(t){if(!Kt(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const Rc=50,Do=/\(error: (.*)\)/,Lo=/captureMessage|captureException/;function Cc(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const a=i[o];if(a.length>1024)continue;const c=Do.test(a)?a.replace(Do,"$1"):a;if(!c.match(/\S*Error: /)){for(const u of e){const l=u(c);if(l){s.push(l);break}}if(s.length>=Rc)break}}return Cf(s)}}function Rf(t){return Array.isArray(t)?Cc(...t):t}function Cf(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),Lo.test(e[e.length-1].function||"")&&(e.pop(),Lo.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,Rc).map(n=>({...n,filename:n.filename||e[e.length-1].filename,function:n.function||"?"}))}const _s="<anonymous>";function ze(t){try{return!t||typeof t!="function"?_s:t.name||_s}catch{return _s}}const Sr={},Po={};function kt(t,e){Sr[t]=Sr[t]||[],Sr[t].push(e)}function Rt(t,e){Po[t]||(e(),Po[t]=!0)}function Ie(t,e){const n=t&&Sr[t];if(n)for(const r of n)try{r(e)}catch(s){dn&&h.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ze(r)}
Error:`,s)}}function xf(t){const e="console";kt(e,t),Rt(e,Af)}function Af(){"console"in M&&Ps.forEach(function(t){t in M.console&&ae(M.console,t,function(e){return Rr[t]=e,function(...n){Ie("console",{args:n,level:t});const s=Rr[t];s&&s.apply(M.console,n)}})})}function j(){const t=M,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function xc(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Je(t){const{message:e,event_id:n}=t;if(e)return e;const r=xc(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Fs(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type=n||"Error")}function Xt(t,e){const n=xc(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s&&s.data,...e.data};n.mechanism.data=i}}function $o(t){if(t&&t.__sentry_captured__)return!0;try{nt(t,"__sentry_captured__",!0)}catch{}return!1}function Ac(t){return Array.isArray(t)?t:[t]}const Lt=M,Mf=1e3;let Fo,Bs,Hs;function Mc(t){const e="dom";kt(e,t),Rt(e,Of)}function Of(){if(!Lt.document)return;const t=Ie.bind(null,"dom"),e=Bo(t,!0);Lt.document.addEventListener("click",e,!1),Lt.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=Lt[n]&&Lt[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ae(r,"addEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},l=u[i]=u[i]||{refCount:0};if(!l.handler){const d=Bo(t);l.handler=d,s.call(this,i,d,a)}l.refCount++}catch{}return s.call(this,i,o,a)}}),ae(r,"removeEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},l=u[i];l&&(l.refCount--,l.refCount<=0&&(s.call(this,i,l.handler,a),l.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,a)}}))})}function Nf(t){if(t.type!==Bs)return!1;try{if(!t.target||t.target._sentryId!==Hs)return!1}catch{}return!0}function Df(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function Bo(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Lf(n);if(Df(n.type,r))return;nt(n,"_sentryCaptured",!0),r&&!r._sentryId&&nt(r,"_sentryId",j());const s=n.type==="keypress"?"input":n.type;Nf(n)||(t({event:n,name:s,global:e}),Bs=n.type,Hs=r?r._sentryId:void 0),clearTimeout(Fo),Fo=Lt.setTimeout(()=>{Hs=void 0,Bs=void 0},Mf)}}function Lf(t){try{return t.target}catch{return null}}const Us=ki();function Oc(){if(!("fetch"in Us))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function js(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Nc(){if(typeof EdgeRuntime=="string")return!0;if(!Oc())return!1;if(js(Us.fetch))return!0;let t=!1;const e=Us.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=js(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){dn&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Yr(t){const e="fetch";kt(e,t),Rt(e,Pf)}function Pf(){Nc()&&ae(M,"fetch",function(t){return function(...e){const{method:n,url:r}=$f(e),s={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Ie("fetch",{...s}),t.apply(M,e).then(i=>{const o={...s,endTimestamp:Date.now(),response:i};return Ie("fetch",o),i},i=>{const o={...s,endTimestamp:Date.now(),error:i};throw Ie("fetch",o),i})}})}function Ws(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Ho(t){return typeof t=="string"?t:t?Ws(t,"url")?t.url:t.toString?t.toString():"":""}function $f(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Ho(n),method:Ws(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:Ho(e),method:Ws(e,"method")?String(e.method).toUpperCase():"GET"}}let ir=null;function Dc(t){const e="error";kt(e,t),Rt(e,Ff)}function Ff(){ir=M.onerror,M.onerror=function(t,e,n,r,s){return Ie("error",{column:r,error:s,line:n,msg:t,url:e}),ir&&!ir.__SENTRY_LOADER__?ir.apply(this,arguments):!1},M.onerror.__SENTRY_INSTRUMENTED__=!0}let or=null;function Lc(t){const e="unhandledrejection";kt(e,t),Rt(e,Bf)}function Bf(){or=M.onunhandledrejection,M.onunhandledrejection=function(t){return Ie("unhandledrejection",t),or&&!or.__SENTRY_LOADER__?or.apply(this,arguments):!0},M.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ar=ki();function Hf(){const t=ar.chrome,e=t&&t.app&&t.app.runtime,n="history"in ar&&!!ar.history.pushState&&!!ar.history.replaceState;return!e&&n}const En=M;let cr;function Hn(t){const e="history";kt(e,t),Rt(e,Uf)}function Uf(){if(!Hf())return;const t=En.onpopstate;En.onpopstate=function(...n){const r=En.location.href,s=cr;if(cr=r,Ie("history",{from:s,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=cr,o=String(s);cr=o,Ie("history",{from:i,to:o})}return n.apply(this,r)}}ae(En.history,"pushState",e),ae(En.history,"replaceState",e)}const jf=M,je="__sentry_xhr_v3__";function Vr(t){const e="xhr";kt(e,t),Rt(e,Wf)}function Wf(){if(!jf.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;ae(t,"open",function(e){return function(...n){const r=Date.now(),s=Ne(n[0])?n[0].toUpperCase():void 0,i=zf(n[1]);if(!s||!i)return e.apply(this,n);this[je]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[je];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Ie("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ae(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),ae(this,"setRequestHeader",function(a){return function(...c){const[u,l]=c,d=this[je];return d&&Ne(u)&&Ne(l)&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,c)}}),e.apply(this,n)}}),ae(t,"send",function(e){return function(...n){const r=this[je];if(!r)return e.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Ie("xhr",s),e.apply(this,n)}})}function zf(t){if(Ne(t))return t;try{return t.toString()}catch{}}function Gf(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function qf(){return"npm"}function Yf(){return!Gf()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function zs(){return typeof window<"u"&&(!Yf()||Vf())}function Vf(){return M.process!==void 0&&M.process.type==="renderer"}function Kf(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(s){if(t)return e.has(s)?!0:(e.add(s),!1);for(let i=0;i<e.length;i++)if(e[i]===s)return!0;return e.push(s),!1}function r(s){if(t)e.delete(s);else for(let i=0;i<e.length;i++)if(e[i]===s){e.splice(i,1);break}}return[n,r]}function xe(t,e=100,n=1/0){try{return Gs("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Pc(t,e=3,n=100*1024){const r=xe(t,e);return Qf(r)>n?Pc(t,e-1,n):r}function Gs(t,e,n=1/0,r=1/0,s=Kf()){const[i,o]=s;if(e==null||["number","boolean","string"].includes(typeof e)&&!mc(e))return e;const a=Xf(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Gs("",p,c-1,r,s)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const f=kc(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const m=f[p];l[p]=Gs(p,m,c-1,r,s),d++}return o(e),l}function Xf(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof globalThis<"u"&&e===globalThis)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(gc(e))return"[VueViewModel]";if(hf(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${ze(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=Jf(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Jf(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function Zf(t){return~-encodeURI(t).split(/%..|./).length}function Qf(t){return Zf(JSON.stringify(t))}var Be;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(Be||(Be={}));function Jt(t){return new fn(e=>{e(t)})}function Ci(t){return new fn((e,n)=>{n(t)})}let fn=class dt{constructor(e){dt.prototype.__init.call(this),dt.prototype.__init2.call(this),dt.prototype.__init3.call(this),dt.prototype.__init4.call(this),this._state=Be.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new dt((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new dt((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=e=>{this._setResult(Be.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Be.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===Be.PENDING){if(Bn(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Be.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Be.RESOLVED&&n[1](this._value),this._state===Be.REJECTED&&n[2](this._value),n[0]=!0)})}}};function ep(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]}function s(o){if(!n())return Ci(new Me("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new fn((a,c)=>{let u=e.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Jt(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:e,add:s,drain:i}}function br(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function Uo(t){return t.split(/\\?\//).filter(e=>e.length>0&&e!==",").length}const tp=["fatal","error","warning","log","info","debug"];function np(t){return t==="warn"?"warning":tp.includes(t)?t:"log"}const $c=1e3;function Un(){return Date.now()/$c}function rp(){const{performance:t}=M;if(!t||!t.now)return Un;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/$c}const Le=rp(),ue=(()=>{const{performance:t}=M;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,o=t.timing&&t.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,u=c<e;return i||u?s<=c?t.timeOrigin:o:r})(),qs="baggage",Fc="sentry-",sp=/^sentry-/,ip=8192;function Bc(t){if(!Ne(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce((r,s)=>{const i=jo(s);for(const o of Object.keys(i))r[o]=i[o];return r},{});else{if(!t)return;e=jo(t)}const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(sp)){const o=s.slice(Fc.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Hc(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${Fc}${r}`]=s),n),{});return op(e)}function jo(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(e[n]=r,e),{})}function op(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${e},${i}`;return o.length>ip?(dn&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const ap=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function xi(t){if(!t)return;const e=t.match(ap);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function cp(t,e){const n=xi(t),r=Bc(e),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||j(),parentSpanId:i||j().substring(16),spanId:j().substring(16),sampled:o,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||j(),spanId:j().substring(16)}}}function Uc(t,e){const n=xi(t),r=Bc(e),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:s||j(),parentSpanId:i||j().substring(16),spanId:j().substring(16),sampled:o,dsc:r||{}}:{traceId:s||j(),spanId:j().substring(16)}}function Ai(t=j(),e=j().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function st(t,e=[]){return[t,e]}function up(t,e){const[n,r]=t;return[n,[...r,e]]}function Zt(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function lp(t,e){return Zt(t,(n,r)=>e.includes(r))}function Ys(t,e){return(e||new TextEncoder).encode(t)}function jc(t,e){const[n,r]=t;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[Ys(s,e),o]:s.push(typeof o=="string"?Ys(o,e):o)}for(const o of r){const[a,c]=o;if(i(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(xe(c))}i(u)}}return typeof s=="string"?s:dp(s)}function dp(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function fp(t,e,n){let r=typeof t=="string"?e.encode(t):t;function s(c){const u=r.subarray(0,c);return r=r.subarray(c+1),u}function i(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(s(c)))}const o=i(),a=[];for(;r.length;){const c=i(),u=typeof c.length=="number"?c.length:void 0;a.push([c,u?s(u):i()])}return[o,a]}function pp(t,e){const n=typeof t.data=="string"?Ys(t.data,e):t.data;return[ce({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const hp={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"statsd"};function Wo(t){return hp[t]}function Mi(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Wc(t,e,n,r){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:wt(r)},...s&&{trace:ce({...s})}}}function mp(t,e,n){const r=[{type:"client_report"},{timestamp:n||Un(),discarded_events:t}];return st(e?{dsn:e}:{},[r])}const gp=60*1e3;function zc(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?gp:r-e}function _p(t,e){return t[e]||t.all||0}function Gc(t,e,n=Date.now()){return _p(t,e)>n}function qc(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u]=a.split(":",2),l=parseInt(c,10),d=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+d;else for(const f of u.split(";"))s[f]=r+d}else o?s.all=r+zc(o,r):e===429&&(s.all=r+60*1e3);return s}function yp(t,e){return t(e.stack||"",1)}function Sp(t,e){const n={type:e.name||e.constructor.name,value:e.message},r=yp(t,e);return r.length&&(n.stacktrace={frames:r}),n}function bp(t,e){return t??e()}function Er(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}const I=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,jn="production";function Oi(){return yc("globalEventProcessors",()=>[])}function Yc(t){Oi().push(t)}function Cr(t,e,n,r=0){return new fn((s,i)=>{const o=t[r];if(e===null||typeof o!="function")s(e);else{const a=o({...e},n);I&&o.id&&a===null&&h.log(`Event processor "${o.id}" dropped event`),Bn(a)?a.then(c=>Cr(t,c,n,r+1).then(s)).then(null,i):Cr(t,a,n,r+1).then(s).then(null,i)}})}function Vc(t){const e=Le(),n={sid:j(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ep(n)};return t&&vt(n,t),n}function vt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Le(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:j()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Kc(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),vt(t,n)}function Ep(t){return ce({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const vp=0,Xc=1;function Ni(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:c}=H(t);return ce({data:r,op:s,parent_span_id:i,span_id:e,status:o,tags:a,trace_id:n,origin:c})}function Kr(t){const{traceId:e,spanId:n}=t.spanContext(),r=Di(t);return Ai(e,n,r)}function Xr(t){return typeof t=="number"?zo(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?zo(t.getTime()):Le()}function zo(t){return t>9999999999?t/1e3:t}function H(t){return Tp(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function Tp(t){return typeof t.getSpanJSON=="function"}function Di(t){const{traceFlags:e}=t.spanContext();return!!(e&Xc)}function Li(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||j(),timestamp:e.timestamp||Un()},u=n.integrations||t.integrations.map(y=>y.name);Ip(c,t),Rp(c,u),e.type===void 0&&wp(c,t.stackParser);const l=xp(r,n.captureContext);n.mechanism&&Xt(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],f=eu().getScopeData();if(i){const y=i.getScopeData();qo(f,y)}if(l){const y=l.getScopeData();qo(f,y)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),Qc(c,f);const m=[...d,...Oi(),...f.eventProcessors];return Cr(m,c,n).then(y=>(y&&kp(y),typeof o=="number"&&o>0?Cp(y,o,a):y))}function Ip(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;"environment"in t||(t.environment="environment"in e?n:jn),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&s!==void 0&&(t.dist=s),t.message&&(t.message=zt(t.message,i));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=zt(o.value,i));const a=t.request;a&&a.url&&(a.url=zt(a.url,i))}const Go=new WeakMap;function wp(t,e){const n=M._sentryDebugIds;if(!n)return;let r;const s=Go.get(e);s?r=s:(r=new Map,Go.set(e,r));const i=Object.keys(n).reduce((o,a)=>{let c;const u=r.get(a);u?c=u:(c=e(a),r.set(a,c));for(let l=c.length-1;l>=0;l--){const d=c[l];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function kp(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:e[r]})})}function Rp(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Cp(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:xe(s.data,e,n)}}))},...t.user&&{user:xe(t.user,e,n)},...t.contexts&&{contexts:xe(t.contexts,e,n)},...t.extra&&{extra:xe(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=xe(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(s=>{const i=H(s).data;return i&&(s.data=xe(i,e,n)),s})),r}function xp(t,e){if(!e)return t;const n=t?t.clone():new tn;return n.update(e),n}function Ap(t){if(t)return Mp(t)?{captureContext:t}:Np(t)?{captureContext:t}:t}function Mp(t){return t instanceof tn||typeof t=="function"}const Op=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Np(t){return Object.keys(t).some(e=>Op.includes(e))}function Wn(t,e){return W().captureException(t,Ap(e))}function Dp(t,e){const n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return W().captureMessage(t,n,r)}function zn(t,e){return W().captureEvent(t,e)}function Lp(t){W().configureScope(t)}function Ge(t,e){W().addBreadcrumb(t,e)}function Jc(t,e){W().setContext(t,e)}function Pp(t){W().setExtras(t)}function $p(t,e){W().setExtra(t,e)}function Fp(t){W().setTags(t)}function Bp(t,e){W().setTag(t,e)}function Hp(t){W().setUser(t)}function Ct(...t){const e=W();if(t.length===2){const[n,r]=t;return n?e.withScope(()=>(e.getStackTop().scope=n,r(n))):e.withScope(r)}return e.withScope(t[0])}function Up(t){return Zr(()=>t($e()))}function Vs(t,e){return Ct(n=>(n.setSpan(t),e(n)))}function jp(t,e){return W().startTransaction({...t},e)}async function Wp(t){const e=R();return e?e.flush(t):(I&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function zp(t){const e=R();return e?e.close(t):(I&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Gp(){return W().lastEventId()}function R(){return W().getClient()}function qp(){return!!R()}function ne(){return W().getScope()}function Ks(t){const e=R(),n=$e(),r=ne(),{release:s,environment:i=jn}=e&&e.getOptions()||{},{userAgent:o}=M.navigator||{},a=Vc({release:s,environment:i,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession();return c&&c.status==="ok"&&vt(c,{status:"exited"}),Pi(),n.setSession(a),r.setSession(a),a}function Pi(){const t=$e(),e=ne(),n=e.getSession()||t.getSession();n&&Kc(n),Zc(),t.setSession(),e.setSession()}function Zc(){const t=$e(),e=ne(),n=R(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Xs(t=!1){if(t){Pi();return}Zc()}function Qt(t){return t.transaction}function Jr(t,e,n){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=ce({environment:r.environment||jn,release:r.release,user_segment:i,public_key:s,trace_id:t});return e.emit&&e.emit("createDsc",o),o}function en(t){const e=R();if(!e)return{};const n=Jr(H(t).trace_id||"",e,ne()),r=Qt(t);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const a=H(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(Di(r)),e.emit&&e.emit("createDsc",n),n}function Qc(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;Yp(t,e),r&&Xp(t,r),Jp(t,n),Vp(t,s),Kp(t,i)}function qo(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:f,transactionName:p,span:m}=e;vn(t,"extra",n),vn(t,"tags",r),vn(t,"user",s),vn(t,"contexts",i),vn(t,"sdkProcessingMetadata",a),o&&(t.level=o),p&&(t.transactionName=p),m&&(t.span=m),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function vn(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function Yp(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e,c=ce(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const u=ce(r);u&&Object.keys(u).length&&(t.tags={...u,...t.tags});const l=ce(s);l&&Object.keys(l).length&&(t.user={...l,...t.user});const d=ce(i);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&(t.transaction=a)}function Vp(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function Kp(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Xp(t,e){t.contexts={trace:Ni(e),...t.contexts};const n=Qt(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:en(e),...t.sdkProcessingMetadata};const r=H(n).description;r&&(t.tags={transaction:r,...t.tags})}}function Jp(t,e){t.fingerprint=t.fingerprint?Ac(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const Zp=100;let ys,tn=class vr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Yo()}static clone(e){return e?e.clone():new vr}clone(){const e=new vr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&vt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e;if(n instanceof vr){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Kt(n)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Yo(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:Zp;if(r<=0)return this;const s={timestamp:Un(),...e},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:o,_level:a,_fingerprint:c,_eventProcessors:u,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:f,_span:p}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:s,extra:i,user:o,level:a,fingerprint:c||[],eventProcessors:u,propagationContext:l,sdkProcessingMetadata:d,transactionName:f,span:p}}applyToEvent(e,n={},r=[]){Qc(e,this.getScopeData());const s=[...r,...Oi(),...this._eventProcessors];return Cr(s,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:j();if(!this._client)return h.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r&&r.event_id?r.event_id:j();if(!this._client)return h.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:j();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}};function eu(){return ys||(ys=new tn),ys}function Yo(){return{traceId:j(),spanId:j().substring(16)}}const xr="7.108.0",tu=parseFloat(xr),Qp=100;let $i=class{constructor(e,n,r,s=tu){this._version=s;let i;n?i=n:(i=new tn,i.setClient(e));let o;r?o=r:(o=new tn,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(s){throw this.popScope(),s}return Bn(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:j(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureMessage(e,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:j(),i=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s}),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:j();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Qp}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:Un(),...e},u=i?Et(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=Js(this);try{e(this)}finally{Js(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return I&&h.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return I&&!r&&(this.getClient()?h.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):h.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&Kc(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=jn}=r&&r.getOptions()||{},{userAgent:o}=M.navigator||{},a=Vc({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&vt(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const s=pn().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);I&&h.warn(`Extension method ${e} couldn't be found, doing nothing.`)}};function pn(){return M.__SENTRY__=M.__SENTRY__||{extensions:{},hub:void 0},M}function Js(t){const e=pn(),n=Ar(e);return nu(e,t),n}function W(){const t=pn();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return eh(t)}function $e(){return W().getIsolationScope()}function eh(t=pn()){return(!th(t)||Ar(t).isOlderThan(tu))&&nu(t,new $i),Ar(t)}function Zr(t,e={}){const n=pn();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(t,e):t()}function th(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Ar(t){return yc("hub",()=>new $i,t)}function nu(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function Pe(t){return(t||W()).getScope().getTransaction()}const nh=xi;let Vo=!1;function rh(){Vo||(Vo=!0,Dc(Zs),Lc(Zs))}function Zs(){const t=Pe();if(t){const e="internal_error";I&&h.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}Zs.tag="sentry_tracingErrorCallback";var Ko;(function(t){const e="ok";t.Ok=e;const n="deadline_exceeded";t.DeadlineExceeded=n;const r="unauthenticated";t.Unauthenticated=r;const s="permission_denied";t.PermissionDenied=s;const i="not_found";t.NotFound=i;const o="resource_exhausted";t.ResourceExhausted=o;const a="invalid_argument";t.InvalidArgument=a;const c="unimplemented";t.Unimplemented=c;const u="unavailable";t.Unavailable=u;const l="internal_error";t.InternalError=l;const d="unknown_error";t.UnknownError=d;const f="cancelled";t.Cancelled=f;const p="already_exists";t.AlreadyExists=p;const m="failed_precondition";t.FailedPrecondition=m;const _="aborted";t.Aborted=_;const y="out_of_range";t.OutOfRange=y;const g="data_loss";t.DataLoss=g})(Ko||(Ko={}));function Fi(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}const sh=Fi;function Qr(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=Fi(e);n!=="unknown_error"&&t.setStatus(n)}function Bi(t,e,n=()=>{}){let r;try{r=t()}catch(s){throw e(s),n(),s}return ih(r,e,n)}function ih(t,e,n){return Bn(t)?t.then(r=>(n(),r),r=>{throw e(r),n(),r}):(n(),t)}function hn(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=R(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function oh(t,e,n=()=>{},r=()=>{}){const s=W(),i=ne(),o=i.getSpan(),a=ts(t),c=es(s,{parentSpan:o,spanContext:a,forceTransaction:!1,scope:i});return i.setSpan(c),Bi(()=>e(c),u=>{c&&c.setStatus("internal_error"),n(u,c)},()=>{c&&c.end(),i.setSpan(o),r()})}function ah(t,e){const n=ts(t);return Zr(()=>Ct(t.scope,r=>{const s=W(),i=r.getSpan(),a=t.onlyIfParent&&!i?void 0:es(s,{parentSpan:i,spanContext:n,forceTransaction:t.forceTransaction,scope:r});return Bi(()=>e(a),()=>{if(a){const{status:c}=H(a);(!c||c==="ok")&&a.setStatus("internal_error")}},()=>a&&a.end())}))}function ch(t,e){const n=ts(t);return Zr(()=>Ct(t.scope,r=>{const s=W(),i=r.getSpan(),a=t.onlyIfParent&&!i?void 0:es(s,{parentSpan:i,spanContext:n,forceTransaction:t.forceTransaction,scope:r});function c(){a&&a.end()}return Bi(()=>e(a,c),()=>{if(a&&a.isRecording()){const{status:u}=H(a);(!u||u==="ok")&&a.setStatus("internal_error")}})}))}function Ze(t){if(!hn())return;const e=ts(t),n=W(),r=t.scope?t.scope.getSpan():xt();if(t.onlyIfParent&&!r)return;const o=(t.scope||ne()).clone();return es(n,{parentSpan:r,spanContext:e,forceTransaction:t.forceTransaction,scope:o})}function xt(){return ne().getSpan()}const uh=({sentryTrace:t,baggage:e},n)=>{const r=ne(),{traceparentData:s,dynamicSamplingContext:i,propagationContext:o}=cp(t,e);r.setPropagationContext(o),I&&s&&h.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:ce({dynamicSamplingContext:i})};return n?Zr(()=>n(a)):a};function es(t,{parentSpan:e,spanContext:n,forceTransaction:r,scope:s}){if(!hn())return;const i=$e();let o;if(e&&!r)o=e.startChild(n);else if(e){const a=en(e),{traceId:c,spanId:u}=e.spanContext(),l=Di(e);o=t.startTransaction({traceId:c,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:a,...n.metadata}})}else{const{traceId:a,dsc:c,parentSpanId:u,sampled:l}={...i.getPropagationContext(),...s.getPropagationContext()};o=t.startTransaction({traceId:a,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return s.setSpan(o),lh(o,s,i),o}function ts(t){if(t.startTime){const e={...t};return e.startTimestamp=Xr(t.startTime),delete e.startTime,e}return t}const ru="_sentryScope",su="_sentryIsolationScope";function lh(t,e,n){t&&(nt(t,su,n),nt(t,ru,e))}function dh(t){return{scope:t[ru],isolationScope:t[su]}}let wn;function iu(t){return wn?wn.get(t):void 0}function ou(t){const e=iu(t);if(!e)return;const n={};for(const[,[r,s]]of e)n[r]||(n[r]=[]),n[r].push(ce(s));return n}function fh(t,e,n,r,s,i){const o=xt();if(o){const a=iu(o)||new Map,c=`${t}:${e}@${r}`,u=a.get(i);if(u){const[,l]=u;a.set(i,[c,{min:Math.min(l.min,n),max:Math.max(l.max,n),count:l.count+=1,sum:l.sum+=n,tags:l.tags}])}else a.set(i,[c,{min:n,max:n,count:1,sum:n,tags:s}]);wn||(wn=new WeakMap),wn.set(o,a)}}const Q="sentry.source",ht="sentry.sample_rate",Se="sentry.op",he="sentry.origin",ph="profile_id";class au{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class ns{constructor(e={}){this._traceId=e.traceId||j(),this._spanId=e.spanId||j().substring(16),this._startTime=e.startTimestamp||Le(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[he]:e.origin||"manual",[Se]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Se]}set op(e){this.setAttribute(Se,e)}get origin(){return this._attributes[he]}set origin(e){this.setAttribute(he,e)}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?Xc:vp}}startChild(e){const n=new ns({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Qt(this);if(n.transaction=r,I&&r){const s=e&&e.op||"< unknown op >",i=H(n).description||"< unknown name >",o=r.spanContext().spanId,a=`[Tracing] Starting '${s}' span on transaction '${i}' (${o}).`;h.log(a),this._logMessage=a}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return Qr(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const n=Qt(this);if(I&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&h.log(r.replace("Starting","Finishing"))}this._endTime=Xr(e)}toTraceparent(){return Kr(this)}toContext(){return ce({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Ni(this)}getSpanJSON(){return ce({data:this._getData(),description:this._name,op:this._attributes[Se],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[he],_metrics_summary:ou(this),profile_id:this._attributes[ph],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:n}=this,r=Object.keys(e).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...e,...n}:r?e:n}}class cu extends ns{constructor(e,n){super(e),this._contexts={},this._hub=n||W(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Q]&&{source:this._attributes[Q]},...this._attributes[ht]&&{sampleRate:this._attributes[ht]}}}set metadata(e){this._metadata=e}setName(e,n="custom"){this._name=e,this.setAttribute(Q,n)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new au(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,r=""){this._measurements[e]={value:n,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const n=Xr(e),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return ce({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return en(this)}setHub(e){this._hub=e}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(I&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){I&&h.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(l=>l!==this&&H(l).timestamp):[];if(this._trimEnd&&r.length>0){const l=r.map(d=>H(d).timestamp).filter(Boolean);this._endTime=l.reduce((d,f)=>d>f?d:f)}const{scope:s,isolationScope:i}=dh(this),{metadata:o}=this,{source:a}=o,c={contexts:{...this._contexts,trace:Ni(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:s,capturedSpanIsolationScope:i,...ce({dynamicSamplingContext:en(this)})},_metrics_summary:ou(this),...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(I&&h.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),I&&h.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const kn={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},hh="finishReason",Ot=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class mh extends au{constructor(e,n,r,s){super(s),this._pushActivity=e,this._popActivity=n,this.transactionSpanId=r}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const n=e.end;e.end=(...r)=>(this._popActivity(e.spanContext().spanId),n.apply(e,r)),H(e).timestamp===void 0&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class gh extends cu{constructor(e,n,r=kn.idleTimeout,s=kn.finalTimeout,i=kn.heartbeatInterval,o=!1,a=!1){super(e,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Ot[4],this._autoFinishAllowed=!a,o&&(I&&h.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Ot[3],this.end())},this._finalTimeout)}end(e){const n=Xr(e);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(hh,this._finishReason),this.spanRecorder){I&&h.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;H(r).timestamp||(r.setStatus("cancelled"),r.end(n),I&&h.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:s,timestamp:i}=H(r),o=s&&s<n,a=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&s&&i-s<a;if(I){const u=JSON.stringify(r,void 0,2);o?c||h.log("[Tracing] discarding Span since it finished after Transaction final timeout",u):h.log("[Tracing] discarding Span since it happened after Transaction was finished",u)}return o&&c}),I&&h.log("[Tracing] flushing IdleTransaction")}else I&&h.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new mh(n,r,this.spanContext().spanId,e),I&&h.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Ot[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(I&&h.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Ot[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),I&&h.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,I&&h.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(I&&h.log(`[Tracing] popActivity ${e}`),delete this.activities[e],I&&h.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=Le();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Ot[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(I&&h.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Ot[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){I&&h.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function uu(t,e,n){if(!hn(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setAttribute(ht,Number(t.sampled)),t;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(n),t.setAttribute(ht,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,t.setAttribute(ht,Number(r))):(r=1,t.setAttribute(ht,r)),lu(r)?r?(t.sampled=Math.random()<r,t.sampled?(I&&h.log(`[Tracing] starting ${t.op} transaction - ${H(t).description}`),t):(I&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(I&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):(I&&h.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function lu(t){return mc(t)||!(typeof t=="number"||typeof t=="boolean")?(I&&h.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?(I&&h.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function _h(){const e=this.getScope().getSpan();return e?{"sentry-trace":Kr(e)}:{}}function yh(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=t.instrumenter||"sentry";s!==i&&(I&&h.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let o=new cu(t,this);return o=uu(o,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function Mr(t,e,n,r,s,i,o,a=!1){const c=t.getClient(),u=c&&c.getOptions()||{};let l=new gh(e,t,n,r,o,s,a);return l=uu(l,u,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...i}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function Hi(){const t=pn();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=yh),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=_h),rh())}function du(t,e,n){const r=Pe();r&&r.setMeasurement(t,e,n)}function Sh(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function bh(t,e,n,r){const s=Mi(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:wt(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return st(i,[o])}function fu(t,e,n,r){const s=Mi(n),i=t.type&&t.type!=="replay_event"?t.type:"event";Sh(t,n&&n.sdk);const o=Wc(t,s,r,e);return delete t.sdkProcessingMetadata,st(o,[[{type:i},t]])}const Eh="7";function pu(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function vh(t){return`${pu(t)}${t.projectId}/envelope/`}function Th(t,e){return If({sentry_key:t.publicKey,sentry_version:Eh,...e&&{sentry_client:`${e.name}/${e.version}`}})}function hu(t,e={}){const n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${vh(t)}?${Th(t,r)}`}function Ih(t,e){const n=Ic(t);if(!n)return"";const r=`${pu(n)}embed/error-page/`;let s=`dsn=${wt(n)}`;for(const i in e)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=e.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`;return`${r}?${s}`}const Xo=[];function wh(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.keys(e).map(n=>e[n])}function kh(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=Ac(n(e)):r=e;const s=wh(r),i=xh(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function Rh(t,e){const n={};return e.forEach(r=>{r&&mu(t,r,n)}),n}function Jo(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function mu(t,e,n){if(n[e.name]){I&&h.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,Xo.indexOf(e.name)===-1&&(e.setupOnce(Yc,W),Xo.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),t.on&&typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(t.addEventProcessor&&typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,o)=>r(i,o,t),{id:e.name});t.addEventProcessor(s)}I&&h.log(`Integration installed: ${e.name}`)}function Ch(t){const e=R();if(!e||!e.addIntegration){I&&h.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`);return}e.addIntegration(t)}function xh(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function me(t,e){return Object.assign(function(...r){return e(...r)},{id:t})}const gu="c",_u="g",Ui="s",yu="d",Su=/[^a-zA-Z0-9_/.-]+/g,Ah=/[^\w\d\s_:/@.{}[\]$-]+/g,Mh=5e3;function Oh(t,e,n,r){const s=Object.entries(ce(r)).sort((i,o)=>i[0].localeCompare(o[0]));return`${t}${e}${n}${s}`}function Nh(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return e>>>0}function Dh(t){let e="";for(const n of t){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([i,o])=>`${i}:${o}`).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return e}function Lh(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=n.replace(Su,"_");e[r]=String(t[n]).replace(Ah,"")}return e}function Ph(t,e,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(s.dsn=wt(e));const i=$h(t);return st(s,[i])}function $h(t){const e=Dh(t);return[{type:"statsd",length:e.length},e]}const Zo="Not capturing exception because it's already been captured.";class Fh{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ic(e.dsn):I&&h.warn("No DSN provided, client will not send events."),this._dsn){const n=hu(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if($o(e)){I&&h.log(Zo);return}let s=n&&n.event_id;return this._process(this.eventFromException(e,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(e,n,r,s){let i=r&&r.event_id;const o=Ii(e)?e:String(e),a=wi(e)?this.eventFromMessage(o,n,r):this.eventFromException(e,r);return this._process(a.then(c=>this._captureEvent(c,r,s)).then(c=>{i=c})),i}captureEvent(e,n,r){if(n&&n.originalException&&$o(n.originalException)){I&&h.log(Zo);return}let s=n&&n.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,n,o||r).then(a=>{s=a})),s}captureSession(e){typeof e.release!="string"?I&&h.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),vt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s))):Jt(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return I&&h.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const n=this._integrations[e.name];mu(this,e,this._integrations),n||Jo(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=fu(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=up(r,pp(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const n=bh(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const s=`${e}:${n}`;I&&h.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}captureAggregateMetrics(e){I&&h.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const n=Ph(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Rh(this,e),Jo(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(vt(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new fn(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,e&&r>=e&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s=$e()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),Li(i,e,n,r,this,s).then(a=>{if(a===null)return a;const c={...s.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:l,spanId:d,parentSpanId:f,dsc:p}=c;a.contexts={trace:{trace_id:l,span_id:d,parent_span_id:f},...a.contexts};const m=p||Jr(l,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(s=>s.event_id,s=>{if(I){const i=s;i.logLevel==="log"?h.log(i.message):h.warn(i)}})}_processEvent(e,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=Eu(e),a=bu(e),c=e.type||"error",u=`before send for type \`${c}\``;if(a&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),Ci(new Me(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l=c==="replay_event"?"replay":c,f=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,f).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",l,e),new Me("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const _=Hh(s,p,n);return Bh(_,u)}).then(p=>{if(p===null)throw this.recordDroppedEvent("before_send",l,e),new Me(`${u} returned \`null\`, will not send event.`,"log");const m=r&&r.getSession();!o&&m&&this._updateSessionFromEvent(m,p);const _=p.transaction_info;if(o&&_&&p.transaction!==e.transaction){const y="custom";p.transaction_info={..._,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof Me?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new Me(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,n=>{I&&h.error("Error while sending event:",n)});I&&h.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:e[n]}})}}function Bh(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Bn(t))return t.then(r=>{if(!Kt(r)&&r!==null)throw new Me(n);return r},r=>{throw new Me(`${e} rejected with ${r}`)});if(!Kt(t)&&t!==null)throw new Me(n);return t}function Hh(t,e,n){const{beforeSend:r,beforeSendTransaction:s}=t;return bu(e)&&r?r(e,n):Eu(e)&&s?s(e,n):e}function bu(t){return t.type===void 0}function Eu(t){return t.type==="transaction"}function vu(t){const e=R();!e||!e.addEventProcessor||e.addEventProcessor(t)}class Uh{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}}class jh{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class Wh{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}}class zh{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map(e=>typeof e=="string"?Nh(e):e).join(":")}}const Gh={[gu]:Uh,[_u]:jh,[yu]:Wh,[Ui]:zh};function qh(t,e){e.debug===!0&&(I?h.enable():Et(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ne().update(e.initialScope);const r=new t(e);Tu(r),Yh(r)}function Tu(t){const n=W().getStackTop();n.client=t,n.scope.setClient(t)}function Yh(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}const Vh=30;function ji(t,e,n=ep(t.bufferSize||Vh)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(Zt(o,(d,f)=>{const p=Wo(f);if(Gc(r,p)){const m=Qo(d,f);t.recordDroppedEvent("ratelimit_backoff",p,m)}else a.push(d)}),a.length===0)return Jt();const c=st(o[0],a),u=d=>{Zt(c,(f,p)=>{const m=Qo(f,p);t.recordDroppedEvent(d,Wo(p),m)})},l=()=>e({body:jc(c,t.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&I&&h.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=qc(r,d),d),d=>{throw u("network_error"),d});return n.add(l).then(d=>d,d=>{if(d instanceof Me)return I&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Jt();throw d})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function Qo(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}const Kh=100,ea=5e3,Xh=36e5;function Ss(t,e){I&&h.info(`[Offline]: ${t}`,e)}function Jh(t){return e=>{const n=t(e),r=e.createStore?e.createStore(e):void 0;let s=ea,i;function o(l,d,f){return lp(l,["replay_event","replay_recording","client_report"])?!1:e.shouldStore?e.shouldStore(l,d,f):!0}function a(l){r&&(i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const d=await r.pop();d&&(Ss("Attempting to send previously queued event"),u(d).catch(f=>{Ss("Failed to retry sending",f)}))},l),typeof i!="number"&&i.unref&&i.unref())}function c(){i||(a(s),s=Math.min(s*2,Xh))}async function u(l){try{const d=await n.send(l);let f=Kh;if(d){if(d.headers&&d.headers["retry-after"])f=zc(d.headers["retry-after"]);else if((d.statusCode||0)>=400)return d}return a(f),s=ea,d}catch(d){if(r&&await o(l,d,s))return await r.insert(l),c(),Ss("Error sending. Event queued",d),{};throw d}}return e.flushAtStartup&&c(),{send:u,flush:l=>n.flush(l)}}}function Iu(t,e){let n;return Zt(t,(r,s)=>(e.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Zh(t,e){return n=>{const r=t(n);return{send:async s=>{const i=Iu(s,["event","transaction","profile","replay_event"]);return i&&(i.release=e),r.send(s)},flush:s=>r.flush(s)}}}function Qh(t,e){return n=>{const r=t(n),s={};function i(c,u){const l=u?`${c}:${u}`:c;if(!s[l]){const d=vc(c);if(!d)return;const f=hu(d);s[l]=u?Zh(t,u)({...n,url:f}):t({...n,url:f})}return s[l]}async function o(c){function u(f){const p=f&&f.length?f:["event"];return Iu(c,p)}const l=e({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f);return l.length===0&&l.push(r),(await Promise.all(l.map(f=>f.send(c))))[0]}async function a(c){const u=[...Object.keys(s).map(d=>s[d]),r];return(await Promise.all(u.map(d=>d.flush(c)))).every(d=>d)}return{send:o,flush:a}}}function em(t,e){const n={sent_at:new Date().toISOString()};e&&(n.dsn=wt(e));const r=t.map(tm);return st(n,r)}function tm(t){return[{type:"span"},t]}function wu(t,e){const n=e&&sm(e)?e.getClient():e,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return rm(t,r)||nm(t,s)}function nm(t,e){return e?ta(t)===ta(e):!1}function rm(t,e){return e?t.includes(e.host):!1}function ta(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function sm(t){return t.getClient!==void 0}function im(t,...e){const n=new String(String.raw(t,...e));return n.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=e,n}function ku(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:xr})),version:xr}),t._metadata=s}const Ru=new Map,na=new Set;function om(t){if(M._sentryModuleMetadata)for(const e of Object.keys(M._sentryModuleMetadata)){const n=M._sentryModuleMetadata[e];if(na.has(e))continue;na.add(e);const r=t(e);for(const s of r.reverse())if(s.filename){Ru.set(s.filename,n);break}}}function am(t,e){return om(t),Ru.get(e)}function cm(t,e){try{e.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename)continue;const s=am(t,r.filename);s&&(r.module_metadata=s)}})}catch{}}function um(t){try{t.exception.values.forEach(e=>{if(e.stacktrace)for(const n of e.stacktrace.frames||[])delete n.module_metadata})}catch{}}const Cu="ModuleMetadata",lm=()=>({name:Cu,setupOnce(){},setup(t){typeof t.on=="function"&&t.on("beforeEnvelope",e=>{Zt(e,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(um(s),n[1]=s)}})})},processEvent(t,e,n){const r=n.getOptions().stackParser;return cm(r,t),t}}),xu=lm,dm=me(Cu,xu),fm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],pm=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Au="InboundFilters",hm=(t={})=>({name:Au,setupOnce(){},processEvent(e,n,r){const s=r.getOptions(),i=mm(t,s);return gm(e,i)?null:e}}),Wi=hm,Mu=me(Au,Wi);function mm(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:fm],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:pm],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function gm(t,e){return e.ignoreInternal&&vm(t)?(I&&h.warn(`Event dropped due to being internal Sentry Error.
Event: ${Je(t)}`),!0):_m(t,e.ignoreErrors)?(I&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Je(t)}`),!0):ym(t,e.ignoreTransactions)?(I&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Je(t)}`),!0):Sm(t,e.denyUrls)?(I&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Je(t)}.
Url: ${Or(t)}`),!0):bm(t,e.allowUrls)?!1:(I&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Je(t)}.
Url: ${Or(t)}`),!0)}function _m(t,e){return t.type||!e||!e.length?!1:Em(t).some(n=>ln(n,e))}function ym(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?ln(n,e):!1}function Sm(t,e){if(!e||!e.length)return!1;const n=Or(t);return n?ln(n,e):!1}function bm(t,e){if(!e||!e.length)return!0;const n=Or(t);return n?ln(n,e):!0}function Em(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),I&&e.length===0&&h.error(`Could not extract message for event ${Je(t)}`),e}function vm(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Tm(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Or(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Tm(e):null}catch{return I&&h.error(`Cannot extract url for event ${Je(t)}`),null}}let ra;const Ou="FunctionToString",sa=new WeakMap,Im=()=>({name:Ou,setupOnce(){ra=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Ri(this),n=sa.has(R())&&e!==void 0?e:this;return ra.apply(n,t)}}catch{}},setup(t){sa.set(t,!0)}}),zi=Im,Nu=me(Ou,zi),wm="cause",km=5,Du="LinkedErrors",Rm=(t={})=>{const e=t.limit||km,n=t.key||wm;return{name:Du,setupOnce(){},preprocessEvent(r,s,i){const o=i.getOptions();_c(Sp,o.stackParser,o.maxValueLength,n,e,r,s)}}},Cm=Rm,xm=me(Du,Cm),Am=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:Nu,InboundFilters:Mu,LinkedErrors:xm},Symbol.toStringTag,{value:"Module"}));class Mm{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),Mh)}add(e,n,r,s="none",i={},o=Le()){const a=Math.floor(o),c=n.replace(Su,"_"),u=Lh(i),l=Oh(e,c,s,u);let d=this._buckets.get(l);const f=d&&e===Ui?d.metric.weight:0;d?(d.metric.add(r),d.timestamp<a&&(d.timestamp=a)):(d={metric:new Gh[e](r),timestamp:a,metricType:e,name:c,unit:s,tags:u},this._buckets.set(l,d));const p=typeof r=="string"?d.metric.weight-f:r;fh(e,c,p,s,i,l)}flush(){if(this._buckets.size!==0){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map(([,n])=>n);this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Lu="MetricsAggregator",Om=()=>({name:Lu,setupOnce(){},setup(t){t.metricsAggregator=new Mm(t)}}),Pu=Om,Nm=me(Lu,Pu);function rs(t,e,n,r={}){const s=R(),i=ne();if(s){if(!s.metricsAggregator){I&&h.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs");return}const{unit:o,tags:a,timestamp:c}=r,{release:u,environment:l}=s.getOptions(),d=i.getTransaction(),f={};u&&(f.release=u),l&&(f.environment=l),d&&(f.transaction=H(d).description||""),I&&h.log(`Adding value of ${n} to ${t} metric ${e}`),s.metricsAggregator.add(t,e,n,o,{...f,...a},c)}}function Dm(t,e=1,n){rs(gu,t,e,n)}function Lm(t,e,n){rs(yu,t,e,n)}function Pm(t,e,n){rs(Ui,t,e,n)}function $m(t,e,n){rs(_u,t,e,n)}const Fm={increment:Dm,distribution:Lm,set:Pm,gauge:$m,MetricsAggregator:Nm,metricsAggregatorIntegration:Pu},Bm=Am,Nr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$u="HttpClient",Hm=(t={})=>{const e={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...t};return{name:$u,setupOnce(){},setup(n){Km(n,e),Xm(n,e)}}},Um=Hm;me($u,Um);function jm(t,e,n,r){if(Bu(t,n.status,n.url)){const s=Jm(e,r);let i,o,a,c;Uu()&&([{headers:i,cookies:a},{headers:o,cookies:c}]=[{cookieHeader:"Cookie",obj:s},{cookieHeader:"Set-Cookie",obj:n}].map(({cookieHeader:l,obj:d})=>{const f=Gm(d.headers);let p;try{const m=f[l]||f[l.toLowerCase()]||void 0;m&&(p=Fu(m))}catch{Nr&&h.log(`Could not extract cookies from header ${l}`)}return{headers:f,cookies:p}}));const u=Hu({url:s.url,method:s.method,status:n.status,requestHeaders:i,responseHeaders:o,requestCookies:a,responseCookies:c});zn(u)}}function Wm(t,e,n,r){if(Bu(t,e.status,e.responseURL)){let s,i,o;if(Uu()){try{const c=e.getResponseHeader("Set-Cookie")||e.getResponseHeader("set-cookie")||void 0;c&&(i=Fu(c))}catch{Nr&&h.log("Could not extract cookies from response headers")}try{o=qm(e)}catch{Nr&&h.log("Could not extract headers from response")}s=r}const a=Hu({url:e.responseURL,method:n,status:e.status,requestHeaders:s,responseHeaders:o,responseCookies:i});zn(a)}}function zm(t){if(t){const e=t["Content-Length"]||t["content-length"];if(e)return parseInt(e,10)}}function Fu(t){return t.split("; ").reduce((e,n)=>{const[r,s]=n.split("=");return e[r]=s,e},{})}function Gm(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qm(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s]=i,n},{}):{}}function Ym(t,e){return t.some(n=>typeof n=="string"?e.includes(n):n.test(e))}function Vm(t,e){return t.some(n=>typeof n=="number"?n===e:e>=n[0]&&e<=n[1])}function Km(t,e){Nc()&&Yr(n=>{if(R()!==t)return;const{response:r,args:s}=n,[i,o]=s;r&&jm(e,i,r,o)})}function Xm(t,e){"XMLHttpRequest"in M&&Vr(n=>{if(R()!==t)return;const r=n.xhr,s=r[je];if(!s)return;const{method:i,request_headers:o}=s;try{Wm(e,r,i,o)}catch(a){Nr&&h.warn("Error while extracting response event form XHR response",a)}})}function Bu(t,e,n){return Vm(t.failedRequestStatusCodes,e)&&Ym(t.failedRequestTargets,n)&&!wu(n,R())}function Hu(t){const e=`HTTP Client Error with status code: ${t.status}`,n={message:e,exception:{values:[{type:"Error",value:e}]},request:{url:t.url,method:t.method,headers:t.requestHeaders,cookies:t.requestCookies},contexts:{response:{status_code:t.status,headers:t.responseHeaders,cookies:t.responseCookies,body_size:zm(t.responseHeaders)}}};return Xt(n,{type:"http.client",handled:!1}),n}function Jm(t,e){return!e&&t instanceof Request||t instanceof Request&&t.bodyUsed?t:new Request(t,e)}function Uu(){const t=R();return t?!!t.getOptions().sendDefaultPii:!1}const P=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,C=M;function ju(){C&&C.document?C.document.addEventListener("visibilitychange",()=>{const t=Pe();if(C.document.hidden&&t){const e="cancelled",{op:n,status:r}=H(t);P&&h.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}}):P&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Gn=(t,e,n)=>{let r,s;return i=>{e.value>=0&&(i||n)&&(s=e.value-(r||0),(s||r===void 0)&&(r=e.value,e.delta=s,t(e)))}},Zm=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Qm=()=>{const t=C.performance.timing,e=C.performance.navigation.type,n={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const r in t)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(t[r]-t.navigationStart,0));return n},ss=()=>C.__WEB_VITALS_POLYFILL__?C.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Qm()):C.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Gi=()=>{const t=ss();return t&&t.activationStart||0},qn=(t,e)=>{const n=ss();let r="navigate";return n&&(C.document.prerendering||Gi()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:Zm(),navigationType:r}},mn=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(s=>{e(s.getEntries())});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},Yn=(t,e)=>{const n=r=>{(r.type==="pagehide"||C.document.visibilityState==="hidden")&&(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},eg=t=>{const e=qn("CLS",0);let n,r=0,s=[];const i=a=>{a.forEach(c=>{if(!c.hadRecentInput){const u=s[0],l=s[s.length-1];r&&s.length!==0&&c.startTime-l.startTime<1e3&&c.startTime-u.startTime<5e3?(r+=c.value,s.push(c)):(r=c.value,s=[c]),r>e.value&&(e.value=r,e.entries=s,n&&n())}})},o=mn("layout-shift",i);if(o){n=Gn(t,e);const a=()=>{i(o.takeRecords()),n(!0)};return Yn(a),a}};let Tr=-1;const tg=()=>C.document.visibilityState==="hidden"&&!C.document.prerendering?0:1/0,ng=()=>{Yn(({timeStamp:t})=>{Tr=t},!0)},qi=()=>(Tr<0&&(Tr=tg(),ng()),{get firstHiddenTime(){return Tr}}),rg=t=>{const e=qi(),n=qn("FID");let r;const s=a=>{a.startTime<e.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},i=a=>{a.forEach(s)},o=mn("first-input",i);r=Gn(t,n),o&&Yn(()=>{i(o.takeRecords()),o.disconnect()},!0)};let Wu=0,bs=1/0,ur=0;const sg=t=>{t.forEach(e=>{e.interactionId&&(bs=Math.min(bs,e.interactionId),ur=Math.max(ur,e.interactionId),Wu=ur?(ur-bs)/7+1:0)})};let Qs;const ig=()=>Qs?Wu:performance.interactionCount||0,og=()=>{"interactionCount"in performance||Qs||(Qs=mn("event",sg,{type:"event",buffered:!0,durationThreshold:0}))},zu=()=>ig(),ia=10,Ue=[],Es={},oa=t=>{const e=Ue[Ue.length-1],n=Es[t.interactionId];if(n||Ue.length<ia||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{const r={id:t.interactionId,latency:t.duration,entries:[t]};Es[r.id]=r,Ue.push(r)}Ue.sort((r,s)=>s.latency-r.latency),Ue.splice(ia).forEach(r=>{delete Es[r.id]})}},ag=()=>{const t=Math.min(Ue.length-1,Math.floor(zu()/50));return Ue[t]},cg=(t,e)=>{e=e||{},og();const n=qn("INP");let r;const s=o=>{o.forEach(c=>{c.interactionId&&oa(c),c.entryType==="first-input"&&!Ue.some(l=>l.entries.some(d=>c.duration===d.duration&&c.startTime===d.startTime))&&oa(c)});const a=ag();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=mn("event",s,{durationThreshold:e.durationThreshold||40});r=Gn(t,n,e.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),Yn(()=>{s(i.takeRecords()),n.value<0&&zu()>0&&(n.value=0,n.entries=[]),r(!0)}))},aa={},ug=t=>{const e=qi(),n=qn("LCP");let r;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-Gi(),0);c<e.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},i=mn("largest-contentful-paint",s);if(i){r=Gn(t,n);const o=()=>{aa[n.id]||(s(i.takeRecords()),i.disconnect(),aa[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),Yn(o,!0),o}},ei=t=>{C.document&&(C.document.prerendering?addEventListener("prerenderingchange",()=>ei(t),!0):C.document.readyState!=="complete"?addEventListener("load",()=>ei(t),!0):setTimeout(t,0))},lg=(t,e)=>{e=e||{};const n=qn("TTFB"),r=Gn(t,n,e.reportAllChanges);ei(()=>{const s=ss();if(s){if(n.value=Math.max(s.responseStart-Gi(),0),n.value<0||n.value>performance.now())return;n.entries=[s],r(!0)}})},Rn={},Dr={};let Gu,qu,Yu,Vu,Ku;function dg(t,e=!1){return Vn("cls",t,mg,Gu,e)}function Xu(t,e=!1){return Vn("lcp",t,_g,Yu,e)}function fg(t){return Vn("ttfb",t,yg,Vu)}function pg(t){return Vn("fid",t,gg,qu)}function hg(t){return Vn("inp",t,Sg,Ku)}function rt(t,e){return Ju(t,e),Dr[t]||(bg(t),Dr[t]=!0),Zu(t,e)}function gn(t,e){const n=Rn[t];if(!(!n||!n.length))for(const r of n)try{r(e)}catch(s){P&&h.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ze(r)}
Error:`,s)}}function mg(){return eg(t=>{gn("cls",{metric:t}),Gu=t})}function gg(){return rg(t=>{gn("fid",{metric:t}),qu=t})}function _g(){return ug(t=>{gn("lcp",{metric:t}),Yu=t})}function yg(){return lg(t=>{gn("ttfb",{metric:t}),Vu=t})}function Sg(){return cg(t=>{gn("inp",{metric:t}),Ku=t})}function Vn(t,e,n,r,s=!1){Ju(t,e);let i;return Dr[t]||(i=n(),Dr[t]=!0),r&&e({metric:r}),Zu(t,e,s?i:void 0)}function bg(t){const e={};t==="event"&&(e.durationThreshold=0),mn(t,n=>{gn(t,{entries:n})},e)}function Ju(t,e){Rn[t]=Rn[t]||[],Rn[t].push(e)}function Zu(t,e,n){return()=>{n&&n();const r=Rn[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function vs(t){return typeof t=="number"&&isFinite(t)}function nn(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const Eg=2147483647;function oe(t){return t/1e3}function Yi(){return C&&C.addEventListener&&C.performance}let ca=0,Z={},Ce,Cn;function Qu(){const t=Yi();if(t&&ue){t.mark&&C.performance.mark("sentry-tracing-init");const e=Ig(),n=vg(),r=Tg(),s=wg();return()=>{e(),n(),r(),s()}}return()=>{}}function el(){rt("longtask",({entries:t})=>{for(const e of t){const n=Pe();if(!n)return;const r=oe(ue+e.startTime),s=oe(e.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function tl(){rt("event",({entries:t})=>{for(const e of t){const n=Pe();if(!n)return;if(e.name==="click"){const r=oe(ue+e.startTime),s=oe(e.duration),i={description:tt(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},o=Ec(e.target);o&&(i.attributes={"ui.component_name":o}),n.startChild(i)}}})}function nl(t){if(Yi()&&ue){const n=kg(t);return()=>{n()}}return()=>{}}function vg(){return dg(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(P&&h.log("[Measurements] Adding CLS"),Z.cls={value:t.value,unit:""},Cn=e)},!0)}function Tg(){return Xu(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(P&&h.log("[Measurements] Adding LCP"),Z.lcp={value:t.value,unit:"millisecond"},Ce=e)},!0)}function Ig(){return pg(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=oe(ue),r=oe(e.startTime);P&&h.log("[Measurements] Adding FID"),Z.fid={value:t.value,unit:"millisecond"},Z["mark.fid"]={value:n+r,unit:"second"}})}function wg(){return fg(({metric:t})=>{t.entries[t.entries.length-1]&&(P&&h.log("[Measurements] Adding TTFB"),Z.ttfb={value:t.value,unit:"millisecond"})})}const ua={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function kg(t){return hg(({metric:e})=>{if(e.value===void 0)return;const n=e.entries.find(S=>S.duration===e.value&&ua[S.name]!==void 0),r=R();if(!n||!r)return;const s=ua[n.name],i=r.getOptions(),o=oe(ue+n.startTime),a=oe(e.value),c=n.interactionId!==void 0?t[n.interactionId]:void 0;if(c===void 0)return;const{routeName:u,parentContext:l,activeTransaction:d,user:f,replayId:p}=c,m=f!==void 0?f.email||f.id||f.ip_address:void 0,_=d!==void 0?d.getProfileId():void 0,y=new ns({startTimestamp:o,endTimestamp:o+a,op:`ui.interaction.${s}`,name:tt(n.target),attributes:{release:i.release,environment:i.environment,transaction:u,...m!==void 0&&m!==""?{user:m}:{},..._!==void 0?{profile_id:_}:{},...p!==void 0?{replay_id:p}:{}},exclusiveTime:e.value,measurements:{inp:{value:e.value,unit:"millisecond"}}}),g=Dg(l,i);if(g&&Math.random()<g){const S=y?em([y],r.getDsn()):void 0,b=r&&r.getTransport();b&&S&&b.send(S).then(null,k=>{P&&h.error("Error while sending interaction:",k)});return}})}function rl(t){const e=Yi();if(!e||!C.performance.getEntries||!ue)return;P&&h.log("[Tracing] Adding & adjusting spans using Performance API");const n=oe(ue),r=e.getEntries(),{op:s,start_timestamp:i}=H(t);if(r.slice(ca).forEach(o=>{const a=oe(o.startTime),c=oe(o.duration);if(!(t.op==="navigation"&&i&&n+a<i))switch(o.entryType){case"navigation":{Cg(t,o,n);break}case"mark":case"paint":case"measure":{Rg(t,o,a,c,n);const u=qi(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&(P&&h.log("[Measurements] Adding FP"),Z.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&(P&&h.log("[Measurements] Adding FCP"),Z.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{Ag(t,o,o.name,a,c,n);break}}}),ca=Math.max(r.length-1,0),Mg(t),s==="pageload"){Ng(Z),["fcp","fp","lcp"].forEach(a=>{if(!Z[a]||!i||n>=i)return;const c=Z[a].value,u=n+oe(c),l=Math.abs((u-i)*1e3),d=l-c;P&&h.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),Z[a].value=l});const o=Z["mark.fid"];o&&Z.fid&&(nn(t,{description:"first input delay",endTimestamp:o.value+oe(Z.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete Z["mark.fid"]),"fcp"in Z||delete Z.cls,Object.keys(Z).forEach(a=>{du(a,Z[a].value,Z[a].unit)}),Og(t)}Ce=void 0,Cn=void 0,Z={}}function Rg(t,e,n,r,s){const i=s+n,o=i+r;return nn(t,{description:e.name,endTimestamp:o,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function Cg(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{lr(t,e,r,n)}),lr(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),lr(t,e,"fetch",n,"cache","domainLookupStart"),lr(t,e,"domainLookup",n,"DNS"),xg(t,e,n)}function lr(t,e,n,r,s,i){const o=i?e[i]:e[`${n}End`],a=e[`${n}Start`];!a||!o||nn(t,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+oe(a),endTimestamp:r+oe(o)})}function xg(t,e,n){e.responseEnd&&(nn(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+oe(e.requestStart),endTimestamp:n+oe(e.responseEnd)}),nn(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+oe(e.responseStart),endTimestamp:n+oe(e.responseEnd)}))}function Ag(t,e,n,r,s,i){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=br(n),a={};Ts(a,e,"transferSize","http.response_transfer_size"),Ts(a,e,"encodedBodySize","http.response_content_length"),Ts(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(C.location.origin);const c=i+r,u=c+s;nn(t,{description:n.replace(C.location.origin,""),endTimestamp:u,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}function Mg(t){const e=C.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),vs(n.rtt)&&(Z["connection.rtt"]={value:n.rtt,unit:"millisecond"})),vs(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),vs(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Og(t){Ce&&(P&&h.log("[Measurements] Adding LCP Data"),Ce.element&&t.setTag("lcp.element",tt(Ce.element)),Ce.id&&t.setTag("lcp.id",Ce.id),Ce.url&&t.setTag("lcp.url",Ce.url.trim().slice(0,200)),t.setTag("lcp.size",Ce.size)),Cn&&Cn.sources&&(P&&h.log("[Measurements] Adding CLS Data"),Cn.sources.forEach((e,n)=>t.setTag(`cls.source.${n+1}`,tt(e.node))))}function Ts(t,e,n,r){const s=e[n];s!=null&&s<Eg&&(t[r]=s)}function Ng(t){const e=ss(),{responseStart:n,requestStart:r}=e;r<=n&&(P&&h.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Dg(t,e){if(!hn(e))return!1;let n;return t!==void 0&&typeof e.tracesSampler=="function"?n=e.tracesSampler({transactionContext:t,name:t.name,parentSampled:t.parentSampled,attributes:{...t.data,...t.attributes},location:C.location}):t!==void 0&&t.sampled!==void 0?n=t.sampled:typeof e.tracesSampleRate<"u"?n=e.tracesSampleRate:n=1,lu(n)?n:(P&&h.warn("[Tracing] Discarding transaction because of invalid sample rate."),!1)}function Lg(t,e,n,r,s="auto.http.browser"){if(!hn()||!t.fetchData)return;const i=e(t.fetchData.url);if(t.endTimestamp&&i){const d=t.fetchData.__span;if(!d)return;const f=r[d];if(f){if(t.response){Qr(f,t.response.status);const p=t.response&&t.response.headers&&t.response.headers.get("content-length");if(p){const m=parseInt(p);m>0&&f.setAttribute("http.response_content_length",m)}}else t.error&&f.setStatus("internal_error");f.end(),delete r[d]}return}const o=ne(),a=R(),{method:c,url:u}=t.fetchData,l=i?Ze({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,[he]:s},op:"http.client"}):void 0;if(l&&(t.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l),n(t.fetchData.url)&&a){const d=t.args[0];t.args[1]=t.args[1]||{};const f=t.args[1];f.headers=Pg(d,a,o,f,l)}return l}function Pg(t,e,n,r,s){const i=s||n.getSpan(),o=$e(),{traceId:a,spanId:c,sampled:u,dsc:l}={...o.getPropagationContext(),...n.getPropagationContext()},d=i?Kr(i):Ai(a,c,u),f=Hc(l||(i?en(i):Jr(a,e,n))),p=r.headers||(typeof Request<"u"&&We(t,Request)?t.headers:void 0);if(p)if(typeof Headers<"u"&&We(p,Headers)){const m=new Headers(p);return m.append("sentry-trace",d),f&&m.append(qs,f),m}else if(Array.isArray(p)){const m=[...p,["sentry-trace",d]];return f&&m.push([qs,f]),m}else{const m="baggage"in p?p.baggage:void 0,_=[];return Array.isArray(m)?_.push(...m):m&&_.push(m),f&&_.push(f),{...p,"sentry-trace":d,baggage:_.length>0?_.join(","):void 0}}else return{"sentry-trace":d,baggage:f}}const ti=["localhost",/^\/(?!\/)/],Nn={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:ti,tracePropagationTargets:ti};function Vi(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:Nn.traceFetch,traceXHR:Nn.traceXHR,...t},a=typeof i=="function"?i:l=>!0,c=l=>Hg(l,r||s),u={};e&&Yr(l=>{const d=Lg(l,a,c,u);o&&d&&la(d)}),n&&Vr(l=>{const d=Ug(l,a,c,u);o&&d&&la(d)})}function $g(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function la(t){const{url:e}=H(t).data||{};if(!e||typeof e!="string")return;const n=rt("resource",({entries:r})=>{r.forEach(s=>{$g(s)&&s.name.endsWith(e)&&(Bg(s).forEach(o=>t.setAttribute(...o)),setTimeout(n))})})}function Fg(t){let e="unknown",n="unknown",r="";for(const s of t){if(s==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=s}return r===t&&(e=r),{name:e,version:n}}function Re(t=0){return((ue||performance.timeOrigin)+t)/1e3}function Bg(t){const{name:e,version:n}=Fg(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),ue?[...r,["http.request.redirect_start",Re(t.redirectStart)],["http.request.fetch_start",Re(t.fetchStart)],["http.request.domain_lookup_start",Re(t.domainLookupStart)],["http.request.domain_lookup_end",Re(t.domainLookupEnd)],["http.request.connect_start",Re(t.connectStart)],["http.request.secure_connection_start",Re(t.secureConnectionStart)],["http.request.connection_end",Re(t.connectEnd)],["http.request.request_start",Re(t.requestStart)],["http.request.response_start",Re(t.responseStart)],["http.request.response_end",Re(t.responseEnd)]]:r}function Hg(t,e){return ln(t,e||ti)}function Ug(t,e,n,r){const s=t.xhr,i=s&&s[je];if(!hn()||!s||s.__sentry_own_request__||!i)return;const o=e(i.url);if(t.endTimestamp&&o){const d=s.__sentry_xhr_span_id__;if(!d)return;const f=r[d];f&&i.status_code!==void 0&&(Qr(f,i.status_code),f.end(),delete r[d]);return}const a=ne(),c=$e(),u=o?Ze({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,url:i.url,[he]:"auto.http.browser"},op:"http.client"}):void 0;u&&(s.__sentry_xhr_span_id__=u.spanContext().spanId,r[s.__sentry_xhr_span_id__]=u);const l=R();if(s.setRequestHeader&&n(i.url)&&l){const{traceId:d,spanId:f,sampled:p,dsc:m}={...c.getPropagationContext(),...a.getPropagationContext()},_=u?Kr(u):Ai(d,f,p),y=Hc(m||(u?en(u):Jr(d,l,a)));jg(s,_,y)}return u}function jg(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(qs,n)}catch{}}function Wg(t,e=!0,n=!0){if(!C||!C.location){P&&h.warn("Could not initialize routing instrumentation due to invalid location");return}let r=C.location.href,s;e&&(s=t({name:C.location.pathname,startTimestamp:ue?ue/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Hn(({to:i,from:o})=>{if(o===void 0&&r&&r.indexOf(i)!==-1){r=void 0;return}o!==i&&(r=void 0,s&&(P&&h.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=t({name:C.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const zg="BrowserTracing",Gg={...kn,markBackgroundTransactions:!0,routingInstrumentation:Wg,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...Nn},da=10;class qg{constructor(e){this.name=zg,this._hasSetTracePropagationTargets=!1,Hi(),P&&(this._hasSetTracePropagationTargets=!!(e&&(e.tracePropagationTargets||e.tracingOrigins))),this.options={...Gg,...e},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Qu(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&nl(this._interactionIdToRouteNameMapping),this.options.enableLongTask&&el(),this.options._experiments.enableInteractions&&tl(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,n){this._getCurrentHub=n;const s=n().getClient(),i=s&&s.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:p,_experiments:m}=this.options,_=i&&i.tracePropagationTargets,y=_||this.options.tracePropagationTargets;P&&this._hasSetTracePropagationTargets&&_&&h.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(g=>{const S=this._createRouteTransaction(g);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(S,g,n),S},c,a),u&&ju(),m.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Vi({traceFetch:l,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:p})}_createRouteTransaction(e){if(!this._getCurrentHub){P&&h.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=this.options,a=e.op==="pageload";let c;if(a){const p=a?fa("sentry-trace"):"",m=a?fa("baggage"):void 0,{traceId:_,dsc:y,parentSpanId:g,sampled:S}=Uc(p,m);c={traceId:_,parentSpanId:g,parentSampled:S,...e,metadata:{...e.metadata,dynamicSamplingContext:y},trimEnd:!0}}else c={trimEnd:!0,...e};const u=typeof r=="function"?r(c):c,l=u===void 0?{...c,sampled:!1}:u;l.metadata=l.name!==c.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,l.sampled===!1&&P&&h.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),P&&h.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:d}=C,f=Mr(n,l,s,i,!0,{location:d},o,a);return a&&(C.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(C.document.readyState)&&f.sendAutoFinishSignal()}),["interactive","complete"].includes(C.document.readyState)&&f.sendAutoFinishSignal()),f.registerBeforeFinishCallback(p=>{this._collectWebVitals(),rl(p)}),f}_registerInteractionListener(){let e;const n=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,o="ui.action.click",a=Pe();if(a&&a.op&&["navigation","pageload"].includes(a.op)){P&&h.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub){P&&h.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRoute.name){P&&h.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=C,l={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[Q]:this._latestRoute.context?Yg(this._latestRoute.context):"url"}};e=Mr(c,l,r,s,!0,{location:u},i)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}_registerInpInteractionListener(){const e=({entries:n})=>{const r=R(),s=r!==void 0&&r.getIntegrationByName!==void 0?r.getIntegrationByName("Replay"):void 0,i=s!==void 0?s.getReplayId():void 0,o=Pe(),a=ne(),c=a!==void 0?a.getUser():void 0;n.forEach(u=>{if(Vg(u)){const l=u.interactionId;if(l===void 0)return;const d=this._interactionIdToRouteNameMapping[l],f=u.duration,p=u.startTime,m=Object.keys(this._interactionIdToRouteNameMapping),_=m.length>0?m.reduce((y,g)=>this._interactionIdToRouteNameMapping[y].duration<this._interactionIdToRouteNameMapping[g].duration?y:g):void 0;if(u.entryType==="first-input"&&m.map(g=>this._interactionIdToRouteNameMapping[g]).some(g=>g.duration===f&&g.startTime===p)||!l)return;if(d)d.duration=Math.max(d.duration,f);else if(m.length<da||_===void 0||f>this._interactionIdToRouteNameMapping[_].duration){const y=this._latestRoute.name,g=this._latestRoute.context;y&&g&&(_&&Object.keys(this._interactionIdToRouteNameMapping).length>=da&&delete this._interactionIdToRouteNameMapping[_],this._interactionIdToRouteNameMapping[l]={routeName:y,duration:f,parentContext:g,user:c,activeTransaction:o,replayId:i,startTime:p})}}})};rt("event",e),rt("first-input",e)}}function fa(t){const e=bc(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function Yg(t){const e=t.attributes&&t.attributes[Q],n=t.data&&t.data[Q],r=t.metadata&&t.metadata.source;return e||n||r}function Vg(t){return"duration"in t}const Kg="BrowserTracing",Xg={...kn,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...Nn},Kn=(t={})=>{const e=P?!!(t.tracePropagationTargets||t.tracingOrigins):!1;Hi(),!t.tracePropagationTargets&&t.tracingOrigins&&(t.tracePropagationTargets=t.tracingOrigins);const n={...Xg,...t},r=Qu(),s={};n.enableInp&&nl(s),n.enableLongTask&&el(),n._experiments.enableInteractions&&tl();const i={name:void 0,context:void 0};function o(a){const c=W(),{beforeStartSpan:u,idleTimeout:l,finalTimeout:d,heartbeatInterval:f}=n,p=a.op==="pageload";let m;if(p){const S=p?pa("sentry-trace"):"",b=p?pa("baggage"):void 0,{traceId:k,dsc:D,parentSpanId:w,sampled:v}=Uc(S,b);m={traceId:k,parentSpanId:w,parentSampled:v,...a,metadata:{...a.metadata,dynamicSamplingContext:D},trimEnd:!0}}else m={trimEnd:!0,...a};const _=u?u(m):m;_.metadata=_.name!==m.name?{..._.metadata,source:"custom"}:_.metadata,i.name=_.name,i.context=_,_.sampled===!1&&P&&h.log(`[Tracing] Will not send ${_.op} transaction because of beforeNavigate.`),P&&h.log(`[Tracing] Starting ${_.op} transaction on scope`);const{location:y}=C,g=Mr(c,_,l,d,!0,{location:y},f,p);return p&&C.document&&(C.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(C.document.readyState)&&g.sendAutoFinishSignal()}),["interactive","complete"].includes(C.document.readyState)&&g.sendAutoFinishSignal()),g.registerBeforeFinishCallback(S=>{r(),rl(S)}),g}return{name:Kg,setupOnce:()=>{},afterAllSetup(a){const c=a.getOptions(),{markBackgroundSpan:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:p,_experiments:m}=n,_=c&&c.tracePropagationTargets,y=_||n.tracePropagationTargets;P&&e&&_&&h.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let g,S=C.location&&C.location.href;if(a.on&&(a.on("startNavigationSpan",b=>{g&&(P&&h.log(`[Tracing] Finishing current transaction with op: ${H(g).op}`),g.end()),g=o({op:"navigation",...b})}),a.on("startPageLoadSpan",b=>{g&&(P&&h.log(`[Tracing] Finishing current transaction with op: ${H(g).op}`),g.end()),g=o({op:"pageload",...b})})),n.instrumentPageLoad&&a.emit&&C.location){const b={name:C.location.pathname,startTimestamp:ue?ue/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Q]:"url"}};_n(a,b)}n.instrumentNavigation&&a.emit&&C.location&&Hn(({to:b,from:k})=>{if(k===void 0&&S&&S.indexOf(b)!==-1){S=void 0;return}if(k!==b){S=void 0;const D={name:C.location.pathname,origin:"auto.navigation.browser",attributes:{[Q]:"url"}};yn(a,D)}}),u&&ju(),m.enableInteractions&&Jg(n,i),n.enableInp&&Qg(s,i),Vi({traceFetch:l,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:p})},options:n}};function _n(t,e){if(!t.emit)return;t.emit("startPageLoadSpan",e);const n=xt();return(n&&H(n).op)==="pageload"?n:void 0}function yn(t,e){if(!t.emit)return;t.emit("startNavigationSpan",e);const n=xt();return(n&&H(n).op)==="navigation"?n:void 0}function pa(t){const e=bc(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function Jg(t,e){let n;const r=()=>{const{idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=t,a="ui.action.click",c=Pe();if(c&&c.op&&["navigation","pageload"].includes(c.op)){P&&h.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`);return}if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!e.name){P&&h.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}const{location:u}=C,l={name:e.name,op:a,trimEnd:!0,data:{[Q]:e.context?e_(e.context):"url"}};n=Mr(W(),l,s,i,!0,{location:u},o)};["click"].forEach(s=>{addEventListener(s,r,{once:!1,capture:!0})})}function Zg(t){return"duration"in t}const ha=10;function Qg(t,e){const n=({entries:r})=>{const s=R(),i=s!==void 0&&s.getIntegrationByName!==void 0?s.getIntegrationByName("Replay"):void 0,o=i!==void 0?i.getReplayId():void 0,a=Pe(),c=ne(),u=c!==void 0?c.getUser():void 0;r.forEach(l=>{if(Zg(l)){const d=l.interactionId;if(d===void 0)return;const f=t[d],p=l.duration,m=l.startTime,_=Object.keys(t),y=_.length>0?_.reduce((g,S)=>t[g].duration<t[S].duration?g:S):void 0;if(l.entryType==="first-input"&&_.map(S=>t[S]).some(S=>S.duration===p&&S.startTime===m)||!d)return;if(f)f.duration=Math.max(f.duration,p);else if(_.length<ha||y===void 0||p>t[y].duration){const g=e.name,S=e.context;g&&S&&(y&&Object.keys(t).length>=ha&&delete t[y],t[d]={routeName:g,duration:p,parentContext:S,user:u,activeTransaction:a,replayId:o,startTime:m})}}})};rt("event",n),rt("first-input",n)}function e_(t){const e=t.attributes&&t.attributes[Q],n=t.data&&t.data[Q],r=t.metadata&&t.metadata.source;return e||n||r}const T=M;let ni=0;function sl(){return ni>0}function t_(){ni++,setTimeout(()=>{ni--})}function Tt(t,e={},n){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(Ri(t))return t}catch{return t}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(o=>Tt(o,e));return t.apply(this,i)}catch(i){throw t_(),Ct(o=>{o.addEventProcessor(a=>(e.mechanism&&(Fs(a,void 0,void 0),Xt(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),Wn(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}wc(r,t),nt(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const F=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Ki(t,e){const n=Xi(t,e),r={type:e&&e.name,value:i_(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function n_(t,e,n,r){const s=R(),i=s&&s.getOptions().normalizeDepth,o={exception:{values:[{type:qr(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:o_(e,{isUnhandledRejection:r})}]},extra:{__serialized__:Pc(e,i)}};if(n){const a=Xi(t,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function Is(t,e){return{exception:{values:[Ki(t,e)]}}}function Xi(t,e){const n=e.stacktrace||e.stack||"",r=s_(e);try{return t(n,r)}catch{}return[]}const r_=/Minified React error #\d+;/i;function s_(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(r_.test(t.message))return 1}return 0}function i_(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function il(t,e,n,r){const s=n&&n.syntheticException||void 0,i=Ji(t,e,s,r);return Xt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Jt(i)}function ol(t,e,n="info",r,s){const i=r&&r.syntheticException||void 0,o=ri(t,e,i,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Jt(o)}function Ji(t,e,n,r,s){let i;if(Ti(e)&&e.error)return Is(t,e.error);if(Co(e)||df(e)){const o=e;if("stack"in e)i=Is(t,e);else{const a=o.name||(Co(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=ri(t,c,n,r),Fs(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return vi(e)?Is(t,e):Kt(e)||qr(e)?(i=n_(t,e,n,s),Xt(i,{synthetic:!0}),i):(i=ri(t,e,n,r),Fs(i,`${e}`,void 0),Xt(i,{synthetic:!0}),i)}function ri(t,e,n,r){const s={};if(r&&n){const i=Xi(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]})}if(Ii(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function o_(t,{isUnhandledRejection:e}){const n=wf(t),r=e?"promise rejection":"exception";return Ti(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:qr(t)?`Event \`${a_(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function a_(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function al(t,{metadata:e,tunnel:n,dsn:r}){const s={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:wt(r)}},i=c_(t);return st(s,[i])}function c_(t){return[{type:"user_report"},t]}class cl extends Fh{constructor(e){const n=T.SENTRY_SDK_SOURCE||qf();ku(e,"browser",["browser"],n),super(e),e.sendClientReports&&T.document&&T.document.addEventListener("visibilitychange",()=>{T.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return il(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return ol(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){F&&h.warn("SDK not enabled, will not capture user feedback.");return}const n=al(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){F&&h.log("No outcomes to send");return}if(!this._dsn){F&&h.log("No dsn provided, will not send outcomes");return}F&&h.log("Sending outcomes:",e);const n=mp(e,this._options.tunnel&&wt(this._dsn));this._sendEnvelope(n)}}let In;function u_(){if(In)return In;if(js(T.fetch))return In=T.fetch.bind(T);const t=T.document;let e=T.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){F&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return In=e.bind(T)}function l_(){In=void 0}function ul(t,e=u_()){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return l_(),n-=o,r--,Ci(c)}}return ji(t,s)}const d_=4;function ll(t){function e(n){return new fn((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===d_&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",t.url);for(const o in t.headers)Object.prototype.hasOwnProperty.call(t.headers,o)&&i.setRequestHeader(o,t.headers[o]);i.send(n.body)})}return ji(t,e)}const Sn="?",f_=10,p_=20,h_=30,m_=40,g_=50;function Xn(t,e,n,r){const s={filename:t,function:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const __=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,y_=/\((\S*)(?::(\d+))(?::(\d+))\)/,S_=t=>{const e=__.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const i=y_.exec(e[2]);i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3])}const[r,s]=gl(e[1]||Sn,e[2]);return Xn(s,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},dl=[h_,S_],b_=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,E_=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,v_=t=>{const e=b_.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=E_.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Sn;return[s,r]=gl(s,r),Xn(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},fl=[g_,v_],T_=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,I_=t=>{const e=T_.exec(t);return e?Xn(e[2],e[1]||Sn,+e[3],e[4]?+e[4]:void 0):void 0},pl=[m_,I_],w_=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,k_=t=>{const e=w_.exec(t);return e?Xn(e[2],e[3]||Sn,+e[1]):void 0},R_=[f_,k_],C_=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,x_=t=>{const e=C_.exec(t);return e?Xn(e[5],e[3]||e[4]||Sn,+e[1],+e[2]):void 0},A_=[p_,x_],hl=[dl,fl,pl],ml=Cc(...hl),gl=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Sn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},dr=1024,_l="Breadcrumbs",M_=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:_l,setupOnce(){},setup(n){e.console&&xf(D_(n)),e.dom&&Mc(N_(n,e.dom)),e.xhr&&Vr(L_(n)),e.fetch&&Yr(P_(n)),e.history&&Hn($_(n)),e.sentry&&n.on&&n.on("beforeSendEvent",O_(n))}}},Zi=M_,yl=me(_l,Zi);function O_(t){return function(n){R()===t&&Ge({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Je(n)},{event:n})}}function N_(t,e){return function(r){if(R()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>dr&&(F&&h.warn(`\`dom.maxStringLength\` cannot exceed ${dr}, but a value of ${a} was configured. Sentry will use ${dr} instead.`),a=dr),typeof o=="string"&&(o=[o]);try{const u=r.event,l=F_(u)?u.target:u;s=tt(l,{keyAttrs:o,maxStringLength:a}),i=Ec(l)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),Ge(c,{event:r.event,name:r.name,global:r.global})}}function D_(t){return function(n){if(R()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:np(n.level),message:xo(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${xo(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ge(r,{input:n.args,level:n.level})}}function L_(t){return function(n){if(R()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[je];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,l={method:o,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s};Ge({category:"xhr",data:l,type:"http"},d)}}function P_(t){return function(n){if(R()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};Ge({category:"fetch",data:i,level:"error",type:"http"},o)}else{const i=n.response,o={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:s};Ge({category:"fetch",data:o,type:"http"},a)}}}function $_(t){return function(n){if(R()!==t)return;let r=n.from,s=n.to;const i=br(T.location.href);let o=r?br(r):void 0;const a=br(s);(!o||!o.path)&&(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ge({category:"navigation",data:{from:r,to:s}})}}function F_(t){return!!t&&!!t.target}const Sl="Dedupe",B_=()=>{let t;return{name:Sl,setupOnce(){},processEvent(e){if(e.type)return e;try{if(H_(e,t))return F&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},Qi=B_,bl=me(Sl,Qi);function H_(t,e){return e?!!(U_(t,e)||j_(t,e)):!1}function U_(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!vl(t,e)||!El(t,e))}function j_(t,e){const n=ma(e),r=ma(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!vl(t,e)||!El(t,e))}function El(t,e){let n=ga(t),r=ga(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function vl(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function ma(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ga(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const Tl="GlobalHandlers",W_=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Tl,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(z_(n),_a("onerror")),e.onunhandledrejection&&(G_(n),_a("onunhandledrejection"))}}},eo=W_,Il=me(Tl,eo);function z_(t){Dc(e=>{const{stackParser:n,attachStacktrace:r}=kl();if(R()!==t||sl())return;const{msg:s,url:i,line:o,column:a,error:c}=e,u=c===void 0&&Ne(s)?V_(s,i,o,a):wl(Ji(n,c||s,void 0,r,!1),i,o,a);u.level="error",zn(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function G_(t){Lc(e=>{const{stackParser:n,attachStacktrace:r}=kl();if(R()!==t||sl())return;const s=q_(e),i=wi(s)?Y_(s):Ji(n,s,void 0,r,!0);i.level="error",zn(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function q_(t){if(wi(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return t}function Y_(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function V_(t,e,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Ti(t)?t.message:t,o="Error";const a=i.match(s);return a&&(o=a[1],i=a[2]),wl({exception:{values:[{type:o,value:i}]}},e,n,r)}function wl(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=Ne(e)&&e.length>0?e:Sc();return c.length===0&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),t}function _a(t){F&&h.log(`Global Handler attached: ${t}`)}function kl(){const t=R();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Rl="HttpContext",K_=()=>({name:Rl,setupOnce(){},preprocessEvent(t){if(!T.navigator&&!T.location&&!T.document)return;const e=t.request&&t.request.url||T.location&&T.location.href,{referrer:n}=T.document||{},{userAgent:r}=T.navigator||{},s={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...t.request,...e&&{url:e},headers:s};t.request=i}}),to=K_,Cl=me(Rl,to),X_="cause",J_=5,xl="LinkedErrors",Z_=(t={})=>{const e=t.limit||J_,n=t.key||X_;return{name:xl,setupOnce(){},preprocessEvent(r,s,i){const o=i.getOptions();_c(Ki,o.stackParser,o.maxValueLength,n,e,r,s)}}},no=Z_,Al=me(xl,no),Q_=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ml="TryCatch",ey=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Ml,setupOnce(){e.setTimeout&&ae(T,"setTimeout",ya),e.setInterval&&ae(T,"setInterval",ya),e.requestAnimationFrame&&ae(T,"requestAnimationFrame",ty),e.XMLHttpRequest&&"XMLHttpRequest"in T&&ae(XMLHttpRequest.prototype,"send",ny);const n=e.eventTarget;n&&(Array.isArray(n)?n:Q_).forEach(ry)}}},ro=ey,Ol=me(Ml,ro);function ya(t){return function(...e){const n=e[0];return e[0]=Tt(n,{mechanism:{data:{function:ze(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function ty(t){return function(e){return t.apply(this,[Tt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ze(t)},handled:!1,type:"instrument"}})])}}function ny(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&ae(n,s,function(i){const o={mechanism:{data:{function:s,handler:ze(i)},handled:!1,type:"instrument"}},a=Ri(i);return a&&(o.mechanism.data.handler=ze(a)),Tt(i,o)})}),t.apply(this,e)}}function ry(t){const e=T,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(ae(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=Tt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ze(i),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,Tt(i,{mechanism:{data:{function:"addEventListener",handler:ze(i),target:t},handled:!1,type:"instrument"}}),o])}}),ae(n,"removeEventListener",function(r){return function(s,i,o){const a=i;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,s,c,o)}catch{}return r.call(this,s,a,o)}}))}const Nl=[Wi(),zi(),ro(),Zi(),eo(),no(),Qi(),to()];function Dl(t){return[...Nl]}function sy(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=Dl()),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),T.SENTRY_RELEASE&&T.SENTRY_RELEASE.id&&(t.release=T.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:Rf(t.stackParser||ml),integrations:kh(t),transport:t.transport||(Oc()?ul:ll)};qh(cl,e),t.autoSessionTracking&&cy()}const si=(t={},e=W())=>{if(!T.document){F&&h.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=e.getStackTop(),s=t.dsn||n&&n.getDsn();if(!s){F&&h.error("DSN not configured for showReportDialog call");return}r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const i=T.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=Ih(s,t),t.onLoad&&(i.onload=t.onLoad);const{onClose:o}=t;if(o){const c=u=>{if(u.data==="__sentry_reportdialog_closed__")try{o()}finally{T.removeEventListener("message",c)}};T.addEventListener("message",c)}const a=T.document.head||T.document.body;a?a.appendChild(i):F&&h.error("Not injecting report dialog. No injection point found in HTML")};function iy(){}function oy(t){t()}function ay(t){return Tt(t)()}function cy(){if(typeof T.document>"u"){F&&h.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}Ks({ignoreDuration:!0}),Xs(),Hn(({from:t,to:e})=>{t!==void 0&&t!==e&&(Ks({ignoreDuration:!0}),Xs())})}function uy(t){const e=R();e&&e.captureUserFeedback(t)}const ly=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:yl,Dedupe:bl,GlobalHandlers:Il,HttpContext:Cl,LinkedErrors:Al,TryCatch:Ol},Symbol.toStringTag,{value:"Module"})),K=M,so="sentryReplaySession",dy="replay_event",io="Unable to send Replay",fy=3e5,py=9e5,hy=5e3,my=5500,gy=6e4,_y=5e3,yy=3,Sa=15e4,fr=5e3,Sy=3e3,by=300,oo=2e7,Ey=4999,vy=15e3,ba=36e5;function Ty(t,e){return t??e()}function Lr(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}var ie;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(ie||(ie={}));function Iy(t){return t.nodeType===t.ELEMENT_NODE}function xn(t){const e=Lr([t,"optionalAccess",n=>n.host]);return Lr([e,"optionalAccess",n=>n.shadowRoot])===t}function An(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function wy(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function ky(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function Pr(t){try{const e=t.rules||t.cssRules;return e?wy(Array.from(e,Ll).join("")):null}catch{return null}}function Ll(t){let e;if(Cy(t))try{e=Pr(t.styleSheet)||ky(t)}catch{}else if(xy(t)&&t.selectorText.includes(":"))return Ry(t.cssText);return e||t.cssText}function Ry(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function Cy(t){return"styleSheet"in t}function xy(t){return"selectorText"in t}class Pl{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const n=Lr([this,"access",r=>r.getMeta,"call",r=>r(e),"optionalAccess",r=>r.id]);return Ty(n,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ay(){return new Pl}function is({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function Dn({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function rn(t){return t.toLowerCase()}function ii(t){return t.toUpperCase()}const Ea="__rrweb_original__";function My(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let s=0;s<t.height;s+=n){const i=e.getImageData,o=Ea in i?i[Ea]:i;if(new Uint32Array(o.call(e,r,s,Math.min(n,t.width-r),Math.min(n,t.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function ao(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?rn(e):null}function $r(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}let Oy=1;const Ny=new RegExp("[^a-z0-9-_:]"),Ln=-2;function co(){return Oy++}function Dy(t){if(t instanceof HTMLFormElement)return"form";const e=rn(t.tagName);return Ny.test(e)?"div":e}function Ly(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let Nt,va;const Py=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,$y=/^(?:[a-z+]+:)?\/\//i,Fy=/^www\..*/i,By=/^(data:)([^,]*),(.*)/i;function Fr(t,e){return(t||"").replace(Py,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if($y.test(c)||Fy.test(c))return`url(${u}${c}${u})`;if(By.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Ly(e)+c}${u})`;const l=e.split("/"),d=c.split("/");l.pop();for(const f of d)f!=="."&&(f===".."?l.pop():l.push(f));return`url(${u}${l.join("/")}${u})`})}const Hy=/^[^ \t\n\r\u000c]+/,Uy=/^[, \t\n\r\u000c]+/;function jy(t,e){if(e.trim()==="")return e;let n=0;function r(i){let o;const a=i.exec(e.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(Uy),!(n>=e.length);){let i=r(Hy);if(i.slice(-1)===",")i=Ft(t,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Ft(t,i);let a=!1;for(;;){const c=e.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}function Ft(t,e){if(!e||e.trim()==="")return e;const n=t.createElement("a");return n.href=e,n.href}function Wy(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function uo(){const t=document.createElement("a");return t.href="",t.href}function $l(t,e,n,r,s,i){return r&&(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th")?Ft(t,r):n==="srcset"?jy(t,r):n==="style"?Fr(r,uo()):e==="object"&&n==="data"?Ft(t,r):typeof i=="function"?i(n,r,s):r)}function Fl(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function zy(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let s=t.classList.length;s--;){const i=t.classList[s];if(e.test(i))return!0}if(n)return t.matches(n)}catch{}return!1}function Gy(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function mt(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:mt(t.parentNode,e,n,r+1)}function Bt(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(Gy(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function sn(t,e,n,r,s,i){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=mt(o,Bt(r,s)),c<0)return!0;a=mt(o,Bt(e,n),c>=0?c:1/0)}else{if(a=mt(o,Bt(e,n)),a<0)return!1;c=mt(o,Bt(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function qy(t,e,n){const r=t.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=setTimeout(()=>{s||(e(),s=!0)},n);t.addEventListener("load",()=>{clearTimeout(a),s=!0,e()});return}const o="about:blank";if(r.location.href!==o||t.src===o||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function Yy(t,e,n){let r=!1,s;try{s=t.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{clearTimeout(i),r=!0,e()})}function Vy(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:m={},maskTextFn:_,maskInputFn:y,dataURLOptions:g={},inlineImages:S,recordCanvas:b,keepIframeSrcFn:k,newlyAddedElement:D=!1}=e,w=Ky(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:ie.Document,childNodes:[],compatMode:t.compatMode}:{type:ie.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:ie.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:w};case t.ELEMENT_NODE:return Jy(t,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:m,maskInputFn:y,dataURLOptions:g,inlineImages:S,recordCanvas:b,keepIframeSrcFn:k,newlyAddedElement:D,rootId:w,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f});case t.TEXT_NODE:return Xy(t,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:_,maskInputOptions:m,maskInputFn:y,rootId:w});case t.CDATA_SECTION_NODE:return{type:ie.CDATA,textContent:"",rootId:w};case t.COMMENT_NODE:return{type:ie.Comment,textContent:t.textContent||"",rootId:w};default:return!1}}function Ky(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function Xy(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=e,d=t.parentNode&&t.parentNode.tagName;let f=t.textContent;const p=d==="STYLE"?!0:void 0,m=d==="SCRIPT"?!0:void 0,_=d==="TEXTAREA"?!0:void 0;if(p&&f){try{t.nextSibling||t.previousSibling||Lr([t,"access",g=>g.parentNode,"access",g=>g.sheet,"optionalAccess",g=>g.cssRules])&&(f=Pr(t.parentNode.sheet))}catch(g){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${g}`,t)}f=Fr(f,uo())}m&&(f="SCRIPT_PLACEHOLDER");const y=sn(t,r,i,s,o,n);if(!p&&!m&&!_&&f&&y&&(f=a?a(f):f.replace(/[\S]/g,"*")),_&&f&&(c.textarea||y)&&(f=u?u(f,t.parentNode):f.replace(/[\S]/g,"*")),d==="OPTION"&&f){const g=is({type:null,tagName:d,maskInputOptions:c});f=Dn({isMasked:sn(t,r,i,s,o,g),element:t,value:f,maskInputFn:u})}return{type:ie.Text,textContent:f||"",isStyle:p,rootId:l}}function Jy(t,e){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:_,maskAllText:y,maskTextClass:g,unmaskTextClass:S,maskTextSelector:b,unmaskTextSelector:k}=e,D=zy(t,r,s,i),w=Dy(t);let v={};const L=t.attributes.length;for(let E=0;E<L;E++){const x=t.attributes[E];x.name&&!Fl(w,x.name,x.value)&&(v[x.name]=$l(n,w,rn(x.name),x.value,t,c))}if(w==="link"&&o){const E=Array.from(n.styleSheets).find(Y=>Y.href===t.href);let x=null;E&&(x=Pr(E)),x&&(delete v.rel,delete v.href,v._cssText=Fr(x,E.href))}if(w==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const E=Pr(t.sheet);E&&(v._cssText=Fr(E,uo()))}if(w==="input"||w==="textarea"||w==="select"||w==="option"){const E=t,x=ao(E),Y=$r(E,ii(w),x),re=E.checked;if(x!=="submit"&&x!=="button"&&Y){const ee=sn(E,g,b,S,k,is({type:x,tagName:ii(w),maskInputOptions:a}));v.value=Dn({isMasked:ee,element:E,value:Y,maskInputFn:u})}re&&(v.checked=re)}if(w==="option"&&(t.selected&&!a.select?v.selected=!0:delete v.selected),w==="canvas"&&f){if(t.__context==="2d")My(t)||(v.rr_dataURL=t.toDataURL(l.type,l.quality));else if(!("__context"in t)){const E=t.toDataURL(l.type,l.quality),x=document.createElement("canvas");x.width=t.width,x.height=t.height;const Y=x.toDataURL(l.type,l.quality);E!==Y&&(v.rr_dataURL=E)}}if(w==="img"&&d){Nt||(Nt=n.createElement("canvas"),va=Nt.getContext("2d"));const E=t,x=E.crossOrigin;E.crossOrigin="anonymous";const Y=()=>{E.removeEventListener("load",Y);try{Nt.width=E.naturalWidth,Nt.height=E.naturalHeight,va.drawImage(E,0,0),v.rr_dataURL=Nt.toDataURL(l.type,l.quality)}catch(re){console.warn(`Cannot inline img src=${E.currentSrc}! Error: ${re}`)}x?v.crossOrigin=x:E.removeAttribute("crossorigin")};E.complete&&E.naturalWidth!==0?Y():E.addEventListener("load",Y)}if((w==="audio"||w==="video")&&(v.rr_mediaState=t.paused?"paused":"played",v.rr_mediaCurrentTime=t.currentTime),m||(t.scrollLeft&&(v.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(v.rr_scrollTop=t.scrollTop)),D){const{width:E,height:x}=t.getBoundingClientRect();v={class:v.class,rr_width:`${E}px`,rr_height:`${x}px`}}w==="iframe"&&!p(v.src)&&(t.contentDocument||(v.rr_src=v.src),delete v.src);let z;try{customElements.get(w)&&(z=!0)}catch{}return{type:ie.Element,tagName:w,attributes:v,childNodes:[],isSVG:Wy(t)||void 0,needBlock:D,rootId:_,isCustom:z}}function V(t){return t==null?"":t.toLowerCase()}function Zy(t,e){if(e.comment&&t.type===ie.Comment)return!0;if(t.type===ie.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(V(t.attributes.name).match(/^msapplication-tile(image|color)$/)||V(t.attributes.name)==="application-name"||V(t.attributes.rel)==="icon"||V(t.attributes.rel)==="apple-touch-icon"||V(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&V(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(V(t.attributes.property).match(/^(og|twitter|fb):/)||V(t.attributes.name).match(/^(og|twitter):/)||V(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(V(t.attributes.name)==="robots"||V(t.attributes.name)==="googlebot"||V(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(V(t.attributes.name)==="author"||V(t.attributes.name)==="generator"||V(t.attributes.name)==="framework"||V(t.attributes.name)==="publisher"||V(t.attributes.name)==="progid"||V(t.attributes.property).match(/^article:/)||V(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(V(t.attributes.name)==="google-site-verification"||V(t.attributes.name)==="yandex-verification"||V(t.attributes.name)==="csrf-token"||V(t.attributes.name)==="p:domain_verify"||V(t.attributes.name)==="verify-v1"||V(t.attributes.name)==="verification"||V(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ht(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:m={},maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOMOptions:S,dataURLOptions:b={},inlineImages:k=!1,recordCanvas:D=!1,onSerialize:w,onIframeLoad:v,iframeLoadTimeout:L=5e3,onStylesheetLoad:z,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:x=()=>!1,newlyAddedElement:Y=!1}=e;let{preserveWhiteSpace:re=!0}=e;const ee=Vy(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,dataURLOptions:b,inlineImages:k,recordCanvas:D,keepIframeSrcFn:x,newlyAddedElement:Y});if(!ee)return console.warn(t,"not serialized"),null;let ge;r.hasNode(t)?ge=r.getId(t):Zy(ee,S)||!re&&ee.type===ie.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?ge=Ln:ge=co();const G=Object.assign(ee,{id:ge});if(r.add(t,G),ge===Ln)return null;w&&w(t);let we=!f;if(G.type===ie.Element){we=we&&!G.needBlock,delete G.needBlock;const J=t.shadowRoot;J&&An(J)&&(G.isShadowHost=!0)}if((G.type===ie.Document||G.type===ie.Element)&&we){S.headWhitespace&&G.type===ie.Element&&G.tagName==="head"&&(re=!1);const J={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOMOptions:S,dataURLOptions:b,inlineImages:k,recordCanvas:D,preserveWhiteSpace:re,onSerialize:w,onIframeLoad:v,iframeLoadTimeout:L,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:x};for(const pe of Array.from(t.childNodes)){const ke=Ht(pe,J);ke&&G.childNodes.push(ke)}if(Iy(t)&&t.shadowRoot)for(const pe of Array.from(t.shadowRoot.childNodes)){const ke=Ht(pe,J);ke&&(An(t.shadowRoot)&&(ke.isShadow=!0),G.childNodes.push(ke))}}return t.parentNode&&xn(t.parentNode)&&An(t.parentNode)&&(G.isShadow=!0),G.type===ie.Element&&G.tagName==="iframe"&&qy(t,()=>{const J=t.contentDocument;if(J&&v){const pe=Ht(J,{doc:J,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOMOptions:S,dataURLOptions:b,inlineImages:k,recordCanvas:D,preserveWhiteSpace:re,onSerialize:w,onIframeLoad:v,iframeLoadTimeout:L,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:x});pe&&v(t,pe)}},L),G.type===ie.Element&&G.tagName==="link"&&G.attributes.rel==="stylesheet"&&Yy(t,()=>{if(z){const J=Ht(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOMOptions:S,dataURLOptions:b,inlineImages:k,recordCanvas:D,preserveWhiteSpace:re,onSerialize:w,onIframeLoad:v,iframeLoadTimeout:L,onStylesheetLoad:z,stylesheetLoadTimeout:E,keepIframeSrcFn:x});J&&z(t,J)}},E),G}function Qy(t,e){const{mirror:n=new Pl,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:m=!1,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOM:S=!1,dataURLOptions:b,preserveWhiteSpace:k,onSerialize:D,onIframeLoad:w,iframeLoadTimeout:v,onStylesheetLoad:L,stylesheetLoadTimeout:z,keepIframeSrcFn:E=()=>!1}=e||{};return Ht(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:_,maskTextFn:y,maskInputFn:g,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:b,inlineImages:f,recordCanvas:p,preserveWhiteSpace:k,onSerialize:D,onIframeLoad:w,iframeLoadTimeout:v,onStylesheetLoad:L,stylesheetLoadTimeout:z,keepIframeSrcFn:E,newlyAddedElement:!1})}function qe(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}function fe(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Pt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Ta={map:{},getId(){return console.error(Pt),-1},getNode(){return console.error(Pt),null},removeNodeFromMap(){console.error(Pt)},has(){return console.error(Pt),!1},reset(){console.error(Pt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ta=new Proxy(Ta,{get(t,e,n){return e==="map"&&console.error(Pt),Reflect.get(t,e,n)}}));function Pn(t,e,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=e-(o-s),c=this;a<=0||a>e?(r&&(clearTimeout(r),r=null),s=o,t.apply(c,i)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{s=n.leading===!1?0:Date.now(),r=null,t.apply(c,i)},a))}}function Bl(t,e,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Bl(t,e,i||{},!0)}function lo(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}let Br=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Br=()=>new Date().getTime());function Hl(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:qe([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||qe([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||qe([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:qe([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||qe([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||qe([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function Ul(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function jl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Te(t,e,n,r,s){if(!t)return!1;const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!i)return!1;const o=Bt(e,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=mt(i,o);let c=-1;return a<0?!1:(r&&(c=mt(i,Bt(null,r))),a>-1&&c<0?!0:a<c)}function eS(t,e){return e.getId(t)!==-1}function ws(t,e){return e.getId(t)===Ln}function Wl(t,e){if(xn(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?Wl(t.parentNode,e):!0:!0}function oi(t){return!!t.changedTouches}function tS(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function zl(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function Gl(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function ai(t){return!!qe([t,"optionalAccess",e=>e.shadowRoot])}class nS{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return bp(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ql(t){let e=null;return qe([t,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function rS(t){let e=t,n;for(;n=ql(e);)e=n;return e}function sS(t){const e=t.ownerDocument;if(!e)return!1;const n=rS(t);return e.contains(n)}function Yl(t){const e=t.ownerDocument;return e?e.contains(t)||sS(t):!1}let ks;function iS(){if(ks)return ks;const t=window.document;let e=window.requestAnimationFrame;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(e=r.requestAnimationFrame),t.head.removeChild(n)}catch{}return ks=e.bind(window)}function oS(...t){return iS()(...t)}var O=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(O||{}),N=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(N||{}),le=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(le||{}),Fe=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Fe||{});function aS(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}function Ia(t){return"__ln"in t}class cS{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=aS([n,"optionalAccess",s=>s.next])||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&Ia(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&Ia(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const wa=(t,e)=>`${t}@${e}`;class uS{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new cS,s=c=>{let u=c,l=Ln;for(;l===Ln;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},i=c=>{if(!c.parentNode||!Yl(c))return;const u=xn(c.parentNode)?this.mirror.getId(ql(c)):this.mirror.getId(c.parentNode),l=s(c);if(u===-1||l===-1)return r.addNode(c);const d=Ht(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{zl(f,this.mirror)&&this.iframeManager.addIframe(f),Gl(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ai(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{this.iframeManager.attachIframe(f,p),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});d&&(e.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)ka(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Ra(this.droppedSet,c)&&!ka(this.removes,c,this.mirror)||Ra(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),l=s(o.value);u!==-1&&l!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const l=u;if(u=u.previous,l){const d=this.mirror.getId(l.value.parentNode);if(s(l.value)===-1)continue;if(d!==-1){c=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const m=p.parentNode.host;if(this.mirror.getId(m)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(ws(e.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(e.type){case"characterData":{const r=e.target.textContent;!Te(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:sn(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let s=e.attributeName,i=e.target.getAttribute(s);if(s==="value"){const a=ao(r),c=r.tagName;i=$r(r,c,a);const u=is({maskInputOptions:this.maskInputOptions,tagName:c,type:a}),l=sn(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,u);i=Dn({isMasked:l,element:r,value:i,maskInputFn:this.maskInputFn})}if(Te(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let o=this.attributes.find(a=>a.node===e.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(i))if(!r.contentDocument)s="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),s==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!Fl(r.tagName,s)&&(o.attributes[s]=$l(this.doc,rn(r.tagName),rn(s),i,r,this.maskAttributeFn),s==="style")){const a=n.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue);for(const c of Array.from(r.style)){const u=r.style.getPropertyValue(c),l=r.style.getPropertyPriority(c);u!==a.style.getPropertyValue(c)||l!==a.style.getPropertyPriority(c)?l===""?o.styleDiff[c]=u:o.styleDiff[c]=[u,l]:o._unchangedStyles[c]=[u,l]}for(const c of Array.from(a.style))r.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":{if(Te(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const s=this.mirror.getId(r),i=xn(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Te(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ws(r,this.mirror)||!eS(r,this.mirror)||(this.addedSet.has(r)?(ci(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&s===-1||Wl(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[wa(s,i)]?ci(this.movedSet,r):this.removes.push({parentId:i,id:s,isShadow:xn(e.target)&&An(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(ws(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[wa(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Te(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),ai(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ci(t,e){t.delete(e),e.childNodes.forEach(n=>ci(t,n))}function ka(t,e,n){return t.length===0?!1:Vl(t,e,n)}function Vl(t,e,n){const{parentNode:r}=e;if(!r)return!1;const s=n.getId(r);return t.some(i=>i.id===s)?!0:Vl(t,r,n)}function Ra(t,e){return t.size===0?!1:Kl(t,e)}function Kl(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:Kl(t,n):!1}let Mn;function lS(t){Mn=t}function dS(){Mn=void 0}const $=t=>Mn?(...n)=>{try{return t(...n)}catch(r){if(Mn&&Mn(r)===!0)return()=>{};throw r}}:t;function Ae(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}const Ut=[];function Jn(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function Xl(t,e){const n=new uS;Ut.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const s=Ae([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(r=window[s]);const i=new r($(o=>{t.onMutation&&t.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function fS({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const s=typeof e.mousemove=="number"?e.mousemove:50,i=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const c=Pn($(d=>{const f=Date.now()-a;t(o.map(p=>(p.timeOffset-=f,p)),d),o=[],a=null}),i),u=$(Pn($(d=>{const f=Jn(d),{clientX:p,clientY:m}=oi(d)?d.changedTouches[0]:d;a||(a=Br()),o.push({x:p,y:m,id:r.getId(f),timeOffset:Br()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?N.Drag:d instanceof MouseEvent?N.MouseMove:N.TouchMove)}),s,{trailing:!1})),l=[fe("mousemove",u,n),fe("touchmove",u,n),fe("drag",u,n)];return $(()=>{l.forEach(d=>d())})}function pS({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const l=d=>f=>{const p=Jn(f);if(Te(p,r,s,i,!0))return;let m=null,_=d;if("pointerType"in f){switch(f.pointerType){case"mouse":m=Fe.Mouse;break;case"touch":m=Fe.Touch;break;case"pen":m=Fe.Pen;break}m===Fe.Touch?le[d]===le.MouseDown?_="TouchStart":le[d]===le.MouseUp&&(_="TouchEnd"):Fe.Pen}else oi(f)&&(m=Fe.Touch);m!==null?(u=m,(_.startsWith("Touch")&&m===Fe.Touch||_.startsWith("Mouse")&&m===Fe.Mouse)&&(m=null)):le[d]===le.Click&&(m=u,u=null);const y=oi(f)?f.changedTouches[0]:f;if(!y)return;const g=n.getId(p),{clientX:S,clientY:b}=y;$(t)({type:le[_],id:g,x:S,y:b,...m!==null&&{pointerType:m}})};return Object.keys(le).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=rn(d);const p=l(d);if(window.PointerEvent)switch(le[d]){case le.MouseDown:case le.MouseUp:f=f.replace("mouse","pointer");break;case le.TouchStart:case le.TouchEnd:return}c.push(fe(f,p,e))}),$(()=>{c.forEach(d=>d())})}function Jl({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=$(Pn($(c=>{const u=Jn(c);if(!u||Te(u,r,s,i,!0))return;const l=n.getId(u);if(u===e&&e.defaultView){const d=Hl(e.defaultView);t({id:l,x:d.left,y:d.top})}else t({id:l,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return fe("scroll",a,e)}function hS({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const s=$(Pn($(()=>{const i=Ul(),o=jl();(n!==i||r!==o)&&(t({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return fe("resize",s,e)}const mS=["INPUT","TEXTAREA","SELECT"],Ca=new WeakMap;function gS({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:_}){function y(v){let L=Jn(v);const z=v.isTrusted,E=L&&ii(L.tagName);if(E==="OPTION"&&(L=L.parentElement),!L||!E||mS.indexOf(E)<0||Te(L,r,s,i,!0))return;const x=L;if(x.classList.contains(o)||a&&x.matches(a))return;const Y=ao(L);let re=$r(x,E,Y),ee=!1;const ge=is({maskInputOptions:c,tagName:E,type:Y}),G=sn(L,f,m,p,_,ge);(Y==="radio"||Y==="checkbox")&&(ee=L.checked),re=Dn({isMasked:G,element:L,value:re,maskInputFn:u}),g(L,d?{text:re,isChecked:ee,userTriggered:z}:{text:re,isChecked:ee});const we=L.name;Y==="radio"&&we&&ee&&e.querySelectorAll(`input[type="radio"][name="${we}"]`).forEach(J=>{if(J!==L){const pe=Dn({isMasked:G,element:J,value:$r(J,E,Y),maskInputFn:u});g(J,d?{text:pe,isChecked:!ee,userTriggered:!1}:{text:pe,isChecked:!ee})}})}function g(v,L){const z=Ca.get(v);if(!z||z.text!==L.text||z.isChecked!==L.isChecked){Ca.set(v,L);const E=n.getId(v);$(t)({...L,id:E})}}const b=(l.input==="last"?["change"]:["input","change"]).map(v=>fe(v,$(y),e)),k=e.defaultView;if(!k)return()=>{b.forEach(v=>v())};const D=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),w=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return D&&D.set&&b.push(...w.map(v=>Bl(v[0],v[1],{set(){$(y)({target:this,isTrusted:!1})}},!1,k))),$(()=>{b.forEach(v=>v())})}function Hr(t){const e=[];function n(r,s){if(pr("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||pr("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||pr("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||pr("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(t,e)}function Ye(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function _S({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:$((l,d,f)=>{const[p,m]=f,{id:_,styleId:y}=Ye(d,e,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&t({id:_,styleId:y,adds:[{rule:p,index:m}]}),l.apply(d,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:$((l,d,f)=>{const[p]=f,{id:m,styleId:_}=Ye(d,e,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&t({id:m,styleId:_,removes:[{index:p}]}),l.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:$((l,d,f)=>{const[p]=f,{id:m,styleId:_}=Ye(d,e,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&t({id:m,styleId:_,replace:p}),l.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:$((l,d,f)=>{const[p]=f,{id:m,styleId:_}=Ye(d,e,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&t({id:m,styleId:_,replaceSync:p}),l.apply(d,f)})}));const c={};hr("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(hr("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),hr("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),hr("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:$((f,p,m)=>{const[_,y]=m,{id:g,styleId:S}=Ye(p.parentStyleSheet,e,n.styleMirror);return(g&&g!==-1||S&&S!==-1)&&t({id:g,styleId:S,adds:[{rule:_,index:[...Hr(p),y||0]}]}),f.apply(p,m)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:$((f,p,m)=>{const[_]=m,{id:y,styleId:g}=Ye(p.parentStyleSheet,e,n.styleMirror);return(y&&y!==-1||g&&g!==-1)&&t({id:y,styleId:g,removes:[{index:[...Hr(p),_]}]}),f.apply(p,m)})})}),$(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function Zl({mirror:t,stylesheetManager:e},n){let r=null;n.nodeName==="#document"?r=t.getId(n):r=t.getId(n.host);const s=n.nodeName==="#document"?Ae([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):Ae([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),i=Ae([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Ae([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Ae([i,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=Ae([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,o)]);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),$(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function yS({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:$((a,c,u)=>{const[l,d,f]=u;if(n.has(l))return i.apply(c,[l,d,f]);const{id:p,styleId:m}=Ye(Ae([c,"access",_=>_.parentRule,"optionalAccess",_=>_.parentStyleSheet]),e,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&t({id:p,styleId:m,set:{property:l,value:d,priority:f},index:Hr(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:$((a,c,u)=>{const[l]=u;if(n.has(l))return o.apply(c,[l]);const{id:d,styleId:f}=Ye(Ae([c,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),e,r.styleMirror);return(d&&d!==-1||f&&f!==-1)&&t({id:d,styleId:f,remove:{property:l},index:Hr(c.parentRule)}),a.apply(c,u)})}),$(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function SS({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=$(u=>Pn($(l=>{const d=Jn(l);if(!d||Te(d,e,n,r,!0))return;const{currentTime:f,volume:p,muted:m,playbackRate:_}=d;t({type:u,id:s.getId(d),currentTime:f,volume:p,muted:m,playbackRate:_})}),i.media||500)),c=[fe("play",a(0),o),fe("pause",a(1),o),fe("seeked",a(2),o),fe("volumechange",a(3),o),fe("ratechange",a(4),o)];return $(()=>{c.forEach(u=>u())})}function bS({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,l){const d=new i(c,u,l);return s.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const o=lo(e.fonts,"add",function(a){return function(c){return setTimeout($(()=>{const u=s.get(c);u&&(t(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),$(()=>{r.forEach(a=>a())})}function ES(t){const{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=t;let a=!0;const c=$(()=>{const u=e.getSelection();if(!u||a&&Ae([u,"optionalAccess",f=>f.isCollapsed]))return;a=u.isCollapsed||!1;const l=[],d=u.rangeCount||0;for(let f=0;f<d;f++){const p=u.getRangeAt(f),{startContainer:m,startOffset:_,endContainer:y,endOffset:g}=p;Te(m,r,s,i,!0)||Te(y,r,s,i,!0)||l.push({start:n.getId(m),startOffset:_,end:n.getId(y),endOffset:g})}o({ranges:l})});return c(),fe("selectionchange",c)}function vS({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:lo(n.customElements,"define",function(s){return function(i,o,a){try{e({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function TS(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const r=Xl(t,t.doc),s=fS(t),i=pS(t),o=Jl(t),a=hS(t,{win:n}),c=gS(t),u=SS(t),l=_S(t,{win:n}),d=Zl(t,t.doc),f=yS(t,{win:n}),p=t.collectFonts?bS(t):()=>{},m=ES(t),_=vS(t),y=[];for(const g of t.plugins)y.push(g.observer(g.callback,n,g.options));return $(()=>{Ut.forEach(g=>g.reset()),r.disconnect(),s(),i(),o(),a(),c(),u(),l(),d(),f(),p(),m(),_(),y.forEach(g=>g())})}function pr(t){return typeof window[t]<"u"}function hr(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class ui{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,s){const i=r||this.getIdToRemoteIdMap(e),o=s||this.getRemoteIdToIdMap(e);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(e,n){const r=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return n.map(i=>this.getId(e,i,r,s))}getRemoteId(e,n,r){const s=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(s=>this.getRemoteId(e,s,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}function xa(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}class IS{constructor(){this.crossOriginIframeMirror=new ui(co),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class wS{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ui(co),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ui(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),xa([this,"access",r=>r.loadListener,"optionalCall",r=>r(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(e,n){switch(n.type){case O.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:O.IncrementalSnapshot,data:{source:N.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case O.Meta:case O.Load:case O.DomContentLoaded:return!1;case O.Plugin:return n;case O.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case O.IncrementalSnapshot:switch(n.data.source){case N.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case N.Drag:case N.TouchMove:case N.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case N.ViewportResize:return!1;case N.MediaInteraction:case N.MouseInteraction:case N.Scroll:case N.CanvasMutation:case N.Input:return this.replaceIds(n.data,e,["id"]),n;case N.StyleSheetRule:case N.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case N.Font:return n;case N.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),n;case N.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),xa([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(s=>{this.replaceStyleIds(s,e,["styleId"])})]),n}}return!1}replace(e,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=e.getIds(r,n[i]):n[i]=e.getId(r,n[i]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==ie.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class kS{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class RS{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!An(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=Xl({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Jl({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Zl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(lo(e.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Yl(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Aa{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class CS{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new nS,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of e){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Ll(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class xS{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){oS(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(s=>s!==n)}add(e,n){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function se(t){const e=t;return e.timestamp=Br(),e}let Ur;const ve=Ay();function Qe(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,maskAllInputs:_,maskInputOptions:y,slimDOMOptions:g,maskAttributeFn:S,maskInputFn:b,maskTextFn:k,packFn:D,sampling:w={},dataURLOptions:v={},mousemoveWait:L,recordCanvas:z=!1,recordCrossOriginIframes:E=!1,recordAfter:x=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:Y=!1,collectFonts:re=!1,inlineImages:ee=!1,plugins:ge,keepIframeSrcFn:G=()=>!1,ignoreCSSAttributes:we=new Set([]),errorHandler:J,onMutation:pe,getCanvasManager:ke}=t;lS(J);const bn=E?window.parent===window:!0;let it=!1;if(!bn)try{window.parent.document&&(it=!1)}catch{it=!0}if(bn&&!e)throw new Error("emit function is required");L!==void 0&&w.mousemove===void 0&&(w.mousemove=L),ve.reset();const ot=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},Mt=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};tS();let tr,hs=0;const wo=A=>{for(const be of ge||[])be.eventProcessor&&(A=be.eventProcessor(A));return D&&!it&&(A=D(A)),A},te=(A,be)=>{if(Er([Ut,"access",B=>B[0],"optionalAccess",B=>B.isFrozen,"call",B=>B()])&&A.type!==O.FullSnapshot&&!(A.type===O.IncrementalSnapshot&&A.data.source===N.Mutation)&&Ut.forEach(B=>B.unfreeze()),bn)Er([e,"optionalCall",B=>B(wo(A),be)]);else if(it){const B={type:"rrweb",event:wo(A),origin:window.location.origin,isCheckout:be};window.parent.postMessage(B,"*")}if(A.type===O.FullSnapshot)tr=A,hs=0;else if(A.type===O.IncrementalSnapshot){if(A.data.source===N.Mutation&&A.data.isAttachIframe)return;hs++;const B=r&&hs>=r,Ee=n&&A.timestamp-tr.timestamp>n;(B||Ee)&&gs(!0)}},nr=A=>{te(se({type:O.IncrementalSnapshot,data:{source:N.Mutation,...A}}))},ko=A=>te(se({type:O.IncrementalSnapshot,data:{source:N.Scroll,...A}})),cf=A=>te(se({type:O.IncrementalSnapshot,data:{source:N.CanvasMutation,...A}})),uf=A=>te(se({type:O.IncrementalSnapshot,data:{source:N.AdoptedStyleSheet,...A}})),at=new CS({mutationCb:nr,adoptedStyleSheetCb:uf}),ct=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new IS:new wS({mirror:ve,mutationCb:nr,stylesheetManager:at,recordCrossOriginIframes:E,wrappedEmit:te});for(const A of ge||[])A.getMirror&&A.getMirror({nodeMirror:ve,crossOriginIframeMirror:ct.crossOriginIframeMirror,crossOriginIframeStyleMirror:ct.crossOriginIframeStyleMirror});const ms=new xS,Ro=MS(ke,{mirror:ve,win:window,mutationCb:A=>te(se({type:O.IncrementalSnapshot,data:{source:N.CanvasMutation,...A}})),recordCanvas:z,blockClass:s,blockSelector:i,unblockSelector:o,sampling:w.canvas,dataURLOptions:v,errorHandler:J}),rr=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new kS:new RS({mutationCb:nr,scrollCb:ko,bypassOptions:{onMutation:pe,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:ot,dataURLOptions:v,maskAttributeFn:S,maskTextFn:k,maskInputFn:b,recordCanvas:z,inlineImages:ee,sampling:w,slimDOMOptions:Mt,iframeManager:ct,stylesheetManager:at,canvasManager:Ro,keepIframeSrcFn:G,processedNodeManager:ms},mirror:ve}),gs=(A=!1)=>{te(se({type:O.Meta,data:{href:window.location.href,width:jl(),height:Ul()}}),A),at.reset(),rr.init(),Ut.forEach(B=>B.lock());const be=Qy(document,{mirror:ve,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskAllInputs:ot,maskAttributeFn:S,maskInputFn:b,maskTextFn:k,slimDOM:Mt,dataURLOptions:v,recordCanvas:z,inlineImages:ee,onSerialize:B=>{zl(B,ve)&&ct.addIframe(B),Gl(B,ve)&&at.trackLinkElement(B),ai(B)&&rr.addShadowRoot(B.shadowRoot,document)},onIframeLoad:(B,Ee)=>{ct.attachIframe(B,Ee),rr.observeAttachShadow(B)},onStylesheetLoad:(B,Ee)=>{at.attachLinkElement(B,Ee)},keepIframeSrcFn:G});if(!be)return console.warn("Failed to snapshot the document");te(se({type:O.FullSnapshot,data:{node:be,initialOffset:Hl(window)}})),Ut.forEach(B=>B.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&at.adoptStyleSheets(document.adoptedStyleSheets,ve.getId(document))};Ur=gs;try{const A=[],be=Ee=>$(TS)({onMutation:pe,mutationCb:nr,mousemoveCb:(U,ut)=>te(se({type:O.IncrementalSnapshot,data:{source:ut,positions:U}})),mouseInteractionCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.MouseInteraction,...U}})),scrollCb:ko,viewportResizeCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.ViewportResize,...U}})),inputCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.Input,...U}})),mediaInteractionCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.MediaInteraction,...U}})),styleSheetRuleCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.StyleSheetRule,...U}})),styleDeclarationCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.StyleDeclaration,...U}})),canvasMutationCb:cf,fontCb:U=>te(se({type:O.IncrementalSnapshot,data:{source:N.Font,...U}})),selectionCb:U=>{te(se({type:O.IncrementalSnapshot,data:{source:N.Selection,...U}}))},customElementCb:U=>{te(se({type:O.IncrementalSnapshot,data:{source:N.CustomElement,...U}}))},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:ot,inlineStylesheet:m,sampling:w,recordCanvas:z,inlineImages:ee,userTriggeredOnInput:Y,collectFonts:re,doc:Ee,maskAttributeFn:S,maskInputFn:b,maskTextFn:k,keepIframeSrcFn:G,blockSelector:i,unblockSelector:o,slimDOMOptions:Mt,dataURLOptions:v,mirror:ve,iframeManager:ct,stylesheetManager:at,shadowDomManager:rr,processedNodeManager:ms,canvasManager:Ro,ignoreCSSAttributes:we,plugins:Er([ge,"optionalAccess",U=>U.filter,"call",U=>U(ut=>ut.observer),"optionalAccess",U=>U.map,"call",U=>U(ut=>({observer:ut.observer,options:ut.options,callback:lf=>te(se({type:O.Plugin,data:{plugin:ut.name,payload:lf}}))}))])||[]},{});ct.addLoadListener(Ee=>{try{A.push(be(Ee.contentDocument))}catch(U){console.warn(U)}});const B=()=>{gs(),A.push(be(document))};return document.readyState==="interactive"||document.readyState==="complete"?B():(A.push(fe("DOMContentLoaded",()=>{te(se({type:O.DomContentLoaded,data:{}})),x==="DOMContentLoaded"&&B()})),A.push(fe("load",()=>{te(se({type:O.Load,data:{}})),x==="load"&&B()},window))),()=>{A.forEach(Ee=>Ee()),ms.destroy(),Ur=void 0,dS()}}catch(A){console.warn(A)}}function AS(t){if(!Ur)throw new Error("please take full snapshot after start recording");Ur(t)}Qe.mirror=ve;Qe.takeFullSnapshot=AS;function MS(t,e){try{return t?t(e):new Aa}catch{return console.warn("Unable to initialize CanvasManager"),new Aa}}const OS=3,NS=5;function fo(t){return t>9999999999?t:t*1e3}function Rs(t){return t>9999999999?t/1e3:t}function Zn(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:O.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:xe(e,10,1e3)}}),e.category==="console")))}const DS="button,a";function Ql(t){return t.closest(DS)||t}function ed(t){const e=td(t);return!e||!(e instanceof Element)?e:Ql(e)}function td(t){return LS(t)?t.target:t}function LS(t){return typeof t=="object"&&!!t&&"target"in t}let Ve;function PS(t){return Ve||(Ve=[],$S()),Ve.push(t),()=>{const e=Ve?Ve.indexOf(t):-1;e>-1&&Ve.splice(e,1)}}function $S(){ae(K,"open",function(t){return function(...e){if(Ve)try{Ve.forEach(n=>n())}catch{}return t.apply(K,e)}})}function FS(t,e,n){t.handleClick(e,n)}class BS{constructor(e,n,r=Zn){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=PS(()=>{this._lastMutation=Ma()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(US(n,this._ignoreSelector)||!jS(e))return;const r={timestamp:Rs(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Rs(e)}registerScroll(e=Date.now()){this._lastScroll=Rs(e)}registerClick(e){const n=Ql(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=Ma();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=e;if(i){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:K.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,l);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:K.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const HS=["A","BUTTON","INPUT"];function US(t,e){return!!(!HS.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function jS(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function Ma(){return Date.now()/1e3}function WS(t,e){try{if(!zS(e))return;const{source:n}=e.data;if(n===N.Mutation&&t.registerMutation(e.timestamp),n===N.Scroll&&t.registerScroll(e.timestamp),GS(e)){const{type:r,id:s}=e.data,i=Qe.mirror.getNode(s);i instanceof HTMLElement&&r===le.Click&&t.registerClick(i)}}catch{}}function zS(t){return t.type===OS}function GS(t){return t.data.source===N.MouseInteraction}function Oe(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var jr;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(jr||(jr={}));const qS=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function YS(t){const e={};for(const n in t)if(qS.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const VS=t=>e=>{if(!t.isEnabled())return;const n=KS(e);if(!n)return;const r=e.name==="click",s=r?e.event:void 0;r&&t.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&FS(t.clickDetector,n,ed(e.event)),Zn(t,n)};function nd(t,e){const n=Qe.mirror.getId(t),r=n&&Qe.mirror.getNode(n),s=r&&Qe.mirror.getMeta(r),i=s&&JS(s)?s:null;return{message:e,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===jr.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:YS(i.attributes)}}:{}}}function KS(t){const{target:e,message:n}=XS(t);return Oe({category:`ui.${t.name}`,...nd(e,n)})}function XS(t){const e=t.name==="click";let n,r=null;try{r=e?ed(t.event):td(t.event),n=tt(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function JS(t){return t.type===jr.Element}function ZS(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=QS(e);n&&Zn(t,n)}function QS(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=t;if(!o||eb(o)||!i)return null;const a=e||r||s,c=i.length===1;if(!a&&c)return null;const u=tt(o,{maxStringLength:200})||"<unknown>",l=nd(o,u);return Oe({category:"ui.keyDown",message:u,data:{...l.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function eb(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const Oa={resource:ib,paint:rb,navigation:sb};function tb(t){return t.map(nb).filter(Boolean)}function nb(t){return Oa[t.entryType]?Oa[t.entryType](t):null}function on(t){return((ue||K.performance.timeOrigin)+t)/1e3}function rb(t){const{duration:e,entryType:n,name:r,startTime:s}=t,i=on(s);return{type:n,name:r,start:i,end:i+e,data:void 0}}function sb(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:m,type:_}=t;return s===0?null:{type:`${e}.${_}`,start:on(p),end:on(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:i,redirectCount:f}}}function ib(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:on(i),end:on(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function ob(t){const e=t.entries,n=e[e.length-1],r=n?n.element:void 0,s=t.value,i=on(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?Qe.mirror.getId(r):void 0}}}function ab(t){function e(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function n({entries:s}){s.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(rt(s,n))}),r.push(Xu(({metric:s})=>{t.replayPerformanceEntries.push(ob(s))})),()=>{r.forEach(s=>s())}}const q=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cb='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function ub(){const t=new Blob([cb]);return URL.createObjectURL(t)}function de(t,e){q&&(h.info(t),e&&rd(t))}function qt(t,e){q&&(h.info(t),e&&setTimeout(()=>{rd(t)},0))}function rd(t){Ge({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class po extends Error{constructor(){super(`Event buffer exceeded maximum size of ${oo}.`)}}class sd{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>oo)throw new po;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?fo(e):null}}class lb{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){de("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===e&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){q&&h.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class db{constructor(e){this._worker=new lb(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=fo(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>oo?Promise.reject(new po):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{q&&h.warn('[Replay] Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class fb{constructor(e){this._fallback=new sd,this._compression=new db(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{de("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n}=this._fallback,r=[];for(const s of e)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){q&&h.warn("[Replay] Failed to add events when switching buffers.",s)}}}function pb({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=hb(e);if(n)return n}return de("[Replay] Using simple buffer"),new sd}function hb(t){try{const e=t||mb();if(!e)return;de(`[Replay] Using compression worker${t?` from ${t}`:""}`);const n=new Worker(e);return new fb(n)}catch{de("[Replay] Failed to create compression worker")}}function mb(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?ub():""}function ho(){try{return"sessionStorage"in K&&!!K.sessionStorage}catch{return!1}}function gb(t){_b(),t.session=void 0}function _b(){if(ho())try{K.sessionStorage.removeItem(so)}catch{}}function id(t){return t===void 0?!1:Math.random()<t}function od(t){const e=Date.now(),n=t.id||j(),r=t.started||e,s=t.lastActivity||e,i=t.segmentId||0,o=t.sampled,a=t.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function mo(t){if(ho())try{K.sessionStorage.setItem(so,JSON.stringify(t))}catch{}}function yb(t,e){return id(t)?"session":e?"buffer":!1}function Na({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=yb(t,e),i=od({sampled:s,previousSessionId:r});return n&&mo(i),i}function Sb(t){if(!ho())return null;try{const e=K.sessionStorage.getItem(so);if(!e)return null;const n=JSON.parse(e);return qt("[Replay] Loading existing session",t),od(n)}catch{return null}}function li(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function ad(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return li(t.started,e,r)||li(t.lastActivity,n,r)}function cd(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!ad(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function Cs({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&Sb(t);return i?cd(i,{sessionIdleExpire:e,maxReplayDuration:n})?(qt("[Replay] Session in sessionStorage is expired, creating new one..."),Na(s,{previousSessionId:i.id})):i:(qt("[Replay] Creating new session",t),Na(s,{previousSessionId:r}))}function bb(t){return t.type===O.Custom}function go(t,e,n){return ld(t,e)?(ud(t,e,n),!0):!1}function Eb(t,e,n){return ld(t,e)?ud(t,e,n):Promise.resolve(null)}async function ud(t,e,n){if(!t.eventBuffer)return null;try{n&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=t.getOptions(),s=vb(e,r.beforeAddRecordingEvent);return s?await t.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof po?"addEventSizeExceeded":"addEvent";q&&h.error(r),await t.stop({reason:s});const i=R();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function ld(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=fo(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(de(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1):!0}function vb(t,e){try{if(typeof e=="function"&&bb(t))return e(t)}catch(n){return q&&h.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return t}function _o(t){return!t.type}function di(t){return t.type==="transaction"}function Tb(t){return t.type==="replay_event"}function Da(t){return t.type==="feedback"}function dd(t){const e=kb();return(n,r)=>{if(!t.isEnabled()||!_o(n)&&!di(n))return;const s=r&&r.statusCode;if(!(e&&(!s||s<200||s>=300))){if(di(n)){Ib(t,n);return}wb(t,n)}}}function Ib(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function wb(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();typeof r=="function"&&!r(e)||setTimeout(()=>{t.sendBufferedReplayOrFlush()})}function kb(){const t=R();if(!t)return!1;const e=t.getTransport();return e&&e.send.__sentry__baseTransport__||!1}function Rb(t){return e=>{!t.isEnabled()||!_o(e)||Cb(t,e)}}function Cb(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Oe({category:"replay.hydrate-error"});Zn(t,r)}}function xb(t,e){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}function Ab(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:O.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function Mb(t,e){return t.recordingMode!=="buffer"||e.message===io||!e.exception||e.type?!1:id(t.getOptions().errorSampleRate)}function Ob(t,e=!1){const n=e?dd(t):void 0;return Object.assign((r,s)=>t.isEnabled()?Tb(r)?(delete r.breadcrumbs,r):!_o(r)&&!di(r)&&!Da(r)||!t.checkAndHandleExpiredSession()?r:Da(r)?(t.flush(),r.contexts.feedback.replay_id=t.getSessionId(),Ab(t,r),r):xb(r,s)&&!t.getOptions()._experiments.captureExceptions?(q&&h.log("[Replay] Ignoring error from rrweb internals",r),null):((Mb(t,r)||t.recordingMode==="session")&&(r.tags={...r.tags,replayId:t.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function os(t,e){return e.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=t.throttledAddEvent({type:O.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function Nb(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function Db(t){return e=>{if(!t.isEnabled())return;const n=Nb(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(os(t,[n]),!1)))}}function Lb(t,e){return q&&t.getOptions()._experiments.traceInternals?!1:wu(e,R())}function as(t,e){t.isEnabled()&&e!==null&&(Lb(t,e.name)||t.addUpdate(()=>(os(t,[e]),!0)))}function Pb(t){const{startTimestamp:e,endTimestamp:n,fetchData:r,response:s}=t;if(!n)return null;const{method:i,url:o}=r;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:o,data:{method:i,statusCode:s?s.status:void 0}}}function $b(t){return e=>{if(!t.isEnabled())return;const n=Pb(e);as(t,n)}}function Fb(t){const{startTimestamp:e,endTimestamp:n,xhr:r}=t,s=r[je];if(!e||!n||!s)return null;const{method:i,url:o,status_code:a}=s;return o===void 0?null:{type:"resource.xhr",name:o,start:e/1e3,end:n/1e3,data:{method:i,statusCode:a}}}function Bb(t){return e=>{if(!t.isEnabled())return;const n=Fb(e);as(t,n)}}function cs(t,e){if(t)try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=md(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function fd(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function pd(t){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[md(t)];if(!t)return[void 0]}catch{return q&&h.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return q&&h.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Wr(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function hd(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:ce({method:i,statusCode:o,request:a,response:c})}}function $n(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function et(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:i}=Hb(n);return r.body=s,i&&i.length>0&&(r._meta={warnings:i}),r}function fi(t,e){return Object.keys(t).reduce((n,r)=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=t[r]),n},{})}function md(t){return new URLSearchParams(t).toString()}function Hb(t){if(!t||typeof t!="string")return{body:t};const e=t.length>Sa,n=Ub(t);if(e){const r=t.slice(0,Sa);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function Ub(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function zr(t,e){const n=jb(t);return ln(n,e)}function jb(t,e=K.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(K.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Wb(t,e,n){try{const r=await Gb(t,e,n),s=hd("resource.fetch",r);as(n.replay,s)}catch(r){q&&h.error("[Replay] Failed to capture fetch breadcrumb",r)}}function zb(t,e,n){const{input:r,response:s}=e,i=r?gd(r):void 0,o=cs(i,n.textEncoder),a=s?fd(s.headers.get("content-length")):void 0;o!==void 0&&(t.data.request_body_size=o),a!==void 0&&(t.data.response_body_size=a)}async function Gb(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=e,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=t.data,d=zr(o,n.networkDetailAllowUrls)&&!zr(o,n.networkDetailDenyUrls),f=d?qb(n,e.input,u):$n(u),p=await Yb(d,n,e.response,l);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:p}}function qb({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const s=n?Xb(n,e):{};if(!t)return et(s,r,void 0);const i=gd(n),[o,a]=pd(i),c=et(s,r,o);return a?Wr(c,a):c}async function Yb(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},s,i){if(!t&&i!==void 0)return $n(i);const o=s?_d(s.headers,r):{};if(!s||!e&&i!==void 0)return et(o,i,void 0);const[a,c]=await Kb(s),u=Vb(a,{networkCaptureBodies:e,textEncoder:n,responseBodySize:i,captureDetails:t,headers:o});return c?Wr(u,c):u}function Vb(t,{networkCaptureBodies:e,textEncoder:n,responseBodySize:r,captureDetails:s,headers:i}){try{const o=t&&t.length&&r===void 0?cs(t,n):r;return s?e?et(i,o,t):et(i,o,void 0):$n(o)}catch(o){return q&&h.warn("[Replay] Failed to serialize response body",o),et(i,r,void 0)}}async function Kb(t){const e=Jb(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await Zb(e)]}catch(n){return q&&h.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function gd(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function _d(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function Xb(t,e){return t.length===1&&typeof t[0]!="string"?La(t[0],e):t.length===2?La(t[1],e):{}}function La(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?_d(n,e):Array.isArray(n)?{}:fi(n,e):{}}function Jb(t){try{return t.clone()}catch(e){q&&h.warn("[Replay] Failed to clone response body",e)}}function Zb(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);Qb(t).then(s=>e(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function Qb(t){return await t.text()}async function eE(t,e,n){try{const r=nE(t,e,n),s=hd("resource.xhr",r);as(n.replay,s)}catch(r){q&&h.error("[Replay] Failed to capture xhr breadcrumb",r)}}function tE(t,e,n){const{xhr:r,input:s}=e;if(!r)return;const i=cs(s,n.textEncoder),o=r.getResponseHeader("content-length")?fd(r.getResponseHeader("content-length")):oE(r.response,r.responseType,n.textEncoder);i!==void 0&&(t.data.request_body_size=i),o!==void 0&&(t.data.response_body_size=o)}function nE(t,e,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=e,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:f}=t.data;if(!c)return null;if(!a||!zr(c,n.networkDetailAllowUrls)||zr(c,n.networkDetailDenyUrls)){const w=$n(d),v=$n(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:l,request:w,response:v}}const p=a[je],m=p?fi(p.request_headers,n.networkRequestHeaders):{},_=fi(rE(a),n.networkResponseHeaders),[y,g]=n.networkCaptureBodies?pd(o):[void 0],[S,b]=n.networkCaptureBodies?sE(a):[void 0],k=et(m,d,y),D=et(_,f,S);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:l,request:g?Wr(k,g):k,response:b?Wr(D,b):D}}function rE(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function sE(t){const e=[];try{return[t.responseText]}catch(n){e.push(n)}try{return iE(t.response,t.responseType)}catch(n){e.push(n)}return q&&h.warn("[Replay] Failed to get xhr response body",...e),[void 0]}function iE(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch{return q&&h.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return q&&h.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function oE(t,e,n){try{const r=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return cs(r,n)}catch{return}}function aE(t){const e=R();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};e&&e.on?e.on("beforeAddBreadcrumb",(u,l)=>cE(c,u,l)):(Yr($b(t)),Vr(Bb(t)))}catch{}}function cE(t,e,n){if(e.data)try{uE(e)&&dE(n)&&(tE(e,n,t),eE(e,n,t)),lE(e)&&fE(n)&&(zb(e,n,t),Wb(e,n,t))}catch{q&&h.warn("Error when enriching network breadcrumb")}}function uE(t){return t.category==="xhr"}function lE(t){return t.category==="fetch"}function dE(t){return t&&t.xhr}function fE(t){return t&&t.response}let Pa=null;function pE(t){return!!t.category}const hE=t=>e=>{if(!t.isEnabled())return;const n=mE(e);n&&Zn(t,n)};function mE(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();return Pa===e||!e||(Pa=e,!pE(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))?null:e.category==="console"?gE(e):Oe(e)}function gE(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||e.length===0)return Oe(t);let n=!1;const r=e.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>fr?(n=!0,`${s.slice(0,fr)}`):s;if(typeof s=="object")try{const i=xe(s,7);return JSON.stringify(i).length>fr?(n=!0,`${JSON.stringify(i,null,2).slice(0,fr)}`):i}catch{}return s});return Oe({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function _E(t){const e=ne(),n=R();e.addScopeListener(hE(t)),Mc(VS(t)),Hn(Db(t)),aE(t);const r=Ob(t,!$a(n));n&&n.addEventProcessor?n.addEventProcessor(r):vu(r),$a(n)&&(n.on("beforeSendEvent",Rb(t)),n.on("afterSendEvent",dd(t)),n.on("createDsc",s=>{const i=t.getSessionId();i&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("startTransaction",s=>{t.lastTransaction=s}),n.on("finishTransaction",s=>{t.lastTransaction=s}),n.on("beforeSendFeedback",(s,i)=>{const o=t.getSessionId();i&&i.includeReplay&&t.isEnabled()&&o&&s.contexts&&s.contexts.feedback&&(s.contexts.feedback.replay_id=o)}))}function $a(t){return!!(t&&t.on)}async function yE(t){try{return Promise.all(os(t,[SE(K.performance.memory)]))}catch{return[]}}function SE(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function bE(t,e,n){let r,s,i;const o=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return c(),r=t(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?a():r}function l(){return s&&clearTimeout(s),s=setTimeout(a,e),o&&i===void 0&&(i=setTimeout(a,o)),r}return l.cancel=c,l.flush=u,l}function EE(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){q&&h.warn("[Replay] Received replay event after session expired.");return}const s=r||!e;e=!0,t.clickDetector&&WS(t.clickDetector,n),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!go(t,n,s))return!0;if(!s)return!1;if(TE(t,s),t.session&&t.session.previousSessionId)return!0;if(t.recordingMode==="buffer"&&t.session&&t.eventBuffer){const i=t.eventBuffer.getEarliestTimestamp();i&&(de(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,t.getOptions()._experiments.traceInternals),t.session.started=i,t.getOptions().stickySession&&mo(t.session))}return t.recordingMode==="session"&&t.flush(),!0})}}function vE(t){const e=t.getOptions();return{type:O.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function TE(t,e){!e||!t.session||t.session.segmentId!==0||go(t,vE(t),!1)}function IE(t,e,n,r){return st(Wc(t,Mi(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function wE({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+t.length),n.set(i),n.set(t,i.length)}return n}async function kE({client:t,scope:e,replayId:n,event:r}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,i={event_id:n,integrations:s};t.emit&&t.emit("preprocessEvent",r,i);const o=await Li(t.getOptions(),r,i,e,t,$e());if(!o)return null;o.platform=o.platform||"javascript";const a=t.getSdkMetadata&&t.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},o}async function RE({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=wE({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=R(),f=ne(),p=d&&d.getTransport(),m=d&&d.getDsn();if(!d||!p||!m||!i.sampled)return;const _={type:dy,replay_start_timestamp:l/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:e,segment_id:n,replay_type:i.sampled},y=await kE({scope:f,client:d,replayId:e,event:_});if(!y){d.recordDroppedEvent("event_processor","replay",_),de("An event processor returned `null`, will not send event.");return}delete y.sdkProcessingMetadata;const g=IE(y,o,m,d.getOptions().tunnel);let S;try{S=await p.send(g)}catch(k){const D=new Error(io);try{D.cause=k}catch{}throw D}if(!S)return S;if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new yd(S.statusCode);const b=qc({},S);if(Gc(b,"replay"))throw new Sd(b);return S}class yd extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Sd extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function bd(t,e={count:0,interval:_y}){const{recordingData:n,options:r}=t;if(n.length)try{return await RE(t),!0}catch(s){if(s instanceof yd||s instanceof Sd)throw s;if(Jc("Replays",{_retryCount:e.count}),q&&r._experiments&&r._experiments.captureExceptions&&Wn(s),e.count>=yy){const i=new Error(`${io} - max retries exceeded`);try{i.cause=s}catch{}throw i}return e.interval*=++e.count,new Promise((i,o)=>{setTimeout(async()=>{try{await bd(t,e),i(!0)}catch(a){o(a)}},e.interval)})}}const Ed="__THROTTLED",CE="__SKIPPED";function xE(t,e,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=e){const l=o;return o=!0,l?CE:Ed}o=!1;const u=r.get(c)||0;return r.set(c,u+1),t(...a)}}class Ke{constructor({options:e,recordingOptions:n}){Ke.prototype.__init.call(this),Ke.prototype.__init2.call(this),Ke.prototype.__init3.call(this),Ke.prototype.__init4.call(this),Ke.prototype.__init5.call(this),Ke.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:fy,sessionIdleExpire:py},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=bE(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=xE((o,a)=>Eb(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(Sy,r),timeout:r,scrollTimeout:by,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new BS(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(e),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",qt(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");qt("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=Cs({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");qt("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=Cs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Qe({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:gy},emit:EE(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{de(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,gb(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),de("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),de("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();de("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&li(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${K.location.pathname}${K.location.hash}${K.location.search}`,n=`${K.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===Ed){const s=Oe({category:"replay.throttled"});this.addUpdate(()=>!go(this,{type:NS,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastTransaction||ne().getTransaction(),r=(e&&H(e).data||{})[Q];if(!(!e||!r||!["route","custom"].includes(r)))return H(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=pb({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){q&&h.error("[Replay]",e),q&&this._options._experiments&&this._options._experiments.captureExceptions&&Wn(e)}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=Cs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return cd(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{K.document.addEventListener("visibilitychange",this._handleVisibilityChange),K.addEventListener("blur",this._handleWindowBlur),K.addEventListener("focus",this._handleWindowFocus),K.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(_E(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=ab(this)}_removeListeners(){try{K.document.removeEventListener("visibilitychange",this._handleVisibilityChange),K.removeEventListener("blur",this._handleWindowBlur),K.removeEventListener("focus",this._handleWindowFocus),K.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{K.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Oe({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Oe({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{ZS(this,e)}}_doChangeToBackgroundTasks(e){!this.session||ad(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){de("[Replay] Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:O.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=tb(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(os(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){q&&h.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await yE(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await bd({replayId:e,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=R();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){q&&h.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){de(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&de("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){q&&h.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&mo(this.session)}__init6(){this._onMutationHandler=e=>{const n=e.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const o=Oe({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Tn(t,e,n,r){const s=typeof r=="string"?r.split(","):[],i=[...t,...s,...e];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),Et(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}function AE({mask:t,unmask:e,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const l=['base[href="/"]'],d=Tn(t,[".sentry-mask","[data-sentry-mask]"],a,c),f=Tn(e,[".sentry-unmask","[data-sentry-unmask]"]),p={maskTextSelector:d,unmaskTextSelector:f,blockSelector:Tn(n,[".sentry-block","[data-sentry-block]",...l],i,o),unblockSelector:Tn(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Tn(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(p.blockClass=i),a instanceof RegExp&&(p.maskTextClass=a),p}function ME({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?i:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Fa='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',OE=["content-length","content-type","accept"];let Ba=!1;const NE=t=>new Qn(t);class Qn{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=hy,flushMaxDelay:n=my,minReplayDuration:r=Ey,maxReplayDuration:s=ba,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:u,errorSampleRate:l,maskAllText:d=!0,maskAllInputs:f=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:m=750,mutationLimit:_=1e4,slowClickTimeout:y=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:S=[],networkDetailDenyUrls:b=[],networkCaptureBodies:k=!0,networkRequestHeaders:D=[],networkResponseHeaders:w=[],mask:v=[],maskAttributes:L=["title","placeholder"],unmask:z=[],block:E=[],unblock:x=[],ignore:Y=[],maskFn:re,beforeAddRecordingEvent:ee,beforeErrorSampling:ge,blockClass:G,blockSelector:we,maskInputOptions:J,maskTextClass:pe,maskTextSelector:ke,ignoreClass:bn}={}){this.name=Qn.id;const it=AE({mask:v,unmask:z,block:E,unblock:x,ignore:Y,blockClass:G,blockSelector:we,maskTextClass:pe,maskTextSelector:ke,ignoreClass:bn});if(this._recordingOptions={maskAllInputs:f,maskAllText:d,maskInputOptions:{...J||{},password:!0},maskTextFn:re,maskInputFn:re,maskAttributeFn:(ot,Mt,tr)=>ME({maskAttributes:L,maskAllText:d,privacyOptions:it,key:ot,value:Mt,el:tr}),...it,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ot=>{try{ot.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,vy),maxReplayDuration:Math.min(s,ba),stickySession:i,sessionSampleRate:u,errorSampleRate:l,useCompression:o,workerUrl:a,blockAllMedia:p,maskAllInputs:f,maskAllText:d,mutationBreadcrumbLimit:m,mutationLimit:_,slowClickTimeout:y,slowClickIgnoreSelectors:g,networkDetailAllowUrls:S,networkDetailDenyUrls:b,networkCaptureBodies:k,networkRequestHeaders:Ha(D),networkResponseHeaders:Ha(w),beforeAddRecordingEvent:ee,beforeErrorSampling:ge,_experiments:c},typeof u=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${u} })`),this._initialOptions.sessionSampleRate=u),typeof l=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Fa}`:Fa),this._isInitialized&&zs())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ba}set _isInitialized(e){Ba=e}setupOnce(){zs()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=DE(this._initialOptions);this._replay=new Ke({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=R().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}Qn.__initStatic();function DE(t){const e=R(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...ce(t)};return n?(t.sessionSampleRate==null&&t.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Et(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Et(()=>{console.warn("SDK client is not available.")}),r)}function Ha(t){return[...OE,...t.map(e=>e.toLowerCase())]}function LE(){const t=R();return t&&t.getIntegrationByName&&t.getIntegrationByName("Replay")}var Ua;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(Ua||(Ua={}));function PE(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function pi(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:pi(t.parentNode,e,n,r+1)}function ja(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(PE(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}const $t=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Wa={map:{},getId(){return console.error($t),-1},getNode(){return console.error($t),null},removeNodeFromMap(){console.error($t)},has(){return console.error($t),!1},reset(){console.error($t)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Wa=new Proxy(Wa,{get(t,e,n){return e==="map"&&console.error($t),Reflect.get(t,e,n)}}));function yo(t,e,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>yo(t,e,i||{},!0)}function So(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}/[1-9][0-9]{12}/.test(Date.now().toString());function us(t,e,n,r,s){if(!t)return!1;const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!i)return!1;const o=ja(e,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=pi(i,o);let c=-1;return a<0?!1:(r&&(c=pi(i,ja(null,r))),a>-1&&c<0?!0:a<c)}let xs;function $E(){if(xs)return xs;const t=window.document;let e=window.requestAnimationFrame;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(e=r.requestAnimationFrame),t.head.removeChild(n)}catch{}return xs=e.bind(window)}function lt(...t){return $E()(...t)}var an=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(an||{});let Ir;function FE(t){Ir=t}const za=t=>Ir?(...n)=>{try{return t(...n)}catch(r){if(Ir&&Ir(r)===!0)return()=>{};throw r}}:t;var jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BE=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mr=0;mr<jt.length;mr++)BE[jt.charCodeAt(mr)]=mr;var HE=function(t){var e=new Uint8Array(t),n,r=e.length,s="";for(n=0;n<r;n+=3)s+=jt[e[n]>>2],s+=jt[(e[n]&3)<<4|e[n+1]>>4],s+=jt[(e[n+1]&15)<<2|e[n+2]>>6],s+=jt[e[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Ga=new Map;function UE(t,e){let n=Ga.get(t);return n||(n=new Map,Ga.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}const vd=(t,e,n)=>{if(!t||!(Id(t,e)||typeof t=="object"))return;const r=t.constructor.name,s=UE(n,r);let i=s.indexOf(t);return i===-1&&(i=s.length,s.push(t)),i};function wr(t,e,n){if(t instanceof Array)return t.map(r=>wr(r,e,n));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const r=t.constructor.name,s=HE(t);return{rr_type:r,base64:s}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[wr(t.buffer,e,n),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const r=t.constructor.name,{src:s}=t;return{rr_type:r,src:s}}else if(t instanceof HTMLCanvasElement){const r="HTMLImageElement",s=t.toDataURL();return{rr_type:r,src:s}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[wr(t.data,e,n),t.width,t.height]};if(Id(t,e)||typeof t=="object"){const r=t.constructor.name,s=vd(t,e,n);return{rr_type:r,index:s}}}}return t}const Td=(t,e,n)=>t.map(r=>wr(r,e,n)),Id=(t,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof e[s]=="function").find(s=>t instanceof e[s]);function jE(t,e,n,r,s){const i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of o)try{if(typeof e.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=So(e.CanvasRenderingContext2D.prototype,a,function(u){return function(...l){return us(this.canvas,n,r,s,!0)||setTimeout(()=>{const d=Td(l,e,this);t(this.canvas,{type:an["2D"],property:a,args:d})},0),u.apply(this,l)}});i.push(c)}catch{const u=yo(e.CanvasRenderingContext2D.prototype,a,{set(l){t(this.canvas,{type:an["2D"],property:a,args:[l],setter:!0})}});i.push(u)}return()=>{i.forEach(a=>a())}}function WE(t){return t==="experimental-webgl"?"webgl":t}function qa(t,e,n,r,s){const i=[];try{const o=So(t.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!us(this,e,n,r,!0)){const l=WE(c);if("__context"in this||(this.__context=l),s&&["webgl","webgl2"].includes(l))if(u[0]&&typeof u[0]=="object"){const d=u[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function Ya(t,e,n,r,s,i,o,a){const c=[],u=Object.getOwnPropertyNames(t);for(const l of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof t[l]!="function")continue;const d=So(t,l,function(f){return function(...p){const m=f.apply(this,p);if(vd(m,a,this),"tagName"in this.canvas&&!us(this.canvas,r,s,i,!0)){const _=Td(p,a,this),y={type:e,property:l,args:_};n(this.canvas,y)}return m}});c.push(d)}catch{const f=yo(t,l,{set(p){n(this.canvas,{type:e,property:l,args:[p],setter:!0})}});c.push(f)}return c}function zE(t,e,n,r,s,i){const o=[];return o.push(...Ya(e.WebGLRenderingContext.prototype,an.WebGL,t,n,r,s,i,e)),typeof e.WebGL2RenderingContext<"u"&&o.push(...Ya(e.WebGL2RenderingContext.prototype,an.WebGL2,t,n,r,s,i,e)),()=>{o.forEach(a=>a())}}var GE='for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="undefined"==typeof Uint8Array?[]:new Uint8Array(256),n=0;n<64;n++)e[t.charCodeAt(n)]=n;var a=function(e){var n,a=new Uint8Array(e),s=a.length,r="";for(n=0;n<s;n+=3)r+=t[a[n]>>2],r+=t[(3&a[n])<<4|a[n+1]>>4],r+=t[(15&a[n+1])<<2|a[n+2]>>6],r+=t[63&a[n+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r};const s=new Map,r=new Map;const i=self;i.onmessage=async function(t){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:t.data.id});{const{id:e,bitmap:n,width:o,height:f,dataURLOptions:c}=t.data,g=async function(t,e,n){const s=t+"-"+e;if("OffscreenCanvas"in globalThis){if(r.has(s))return r.get(s);const i=new OffscreenCanvas(t,e);i.getContext("2d");const o=await i.convertToBlob(n),f=await o.arrayBuffer(),c=a(f);return r.set(s,c),c}return""}(o,f,c),d=new OffscreenCanvas(o,f);d.getContext("2d").drawImage(n,0,0),n.close();const u=await d.convertToBlob(c),h=u.type,w=await u.arrayBuffer(),l=a(w);if(!s.has(e)&&await g===l)return s.set(e,l),i.postMessage({id:e});if(s.get(e)===l)return i.postMessage({id:e});i.postMessage({id:e,type:h,base64:l,width:o,height:f}),s.set(e,l)}};';function qE(){const t=new Blob([GE]);return URL.createObjectURL(t)}class YE{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(l,d)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(d)};const{sampling:n="all",win:r,blockClass:s,blockSelector:i,unblockSelector:o,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&FE(u),!e.enableManualSnapshot&&za(()=>{a&&n==="all"&&this.initCanvasMutationObserver(r,s,i,o),a&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,s,i,o,{dataURLOptions:c})})()}initCanvasFPSObserver(e,n,r,s,i,o){const a=qa(n,r,s,i,!0),c=this.takeSnapshot(!1,e,n,r,s,i,o.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,n,r,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=qa(e,n,r,s,!1),o=jE(this.processMutation.bind(this),e,n,r,s),a=zE(this.processMutation.bind(this),e,n,r,s,this.mirror);this.resetObservers=()=>{i(),o(),a()}}snapshot(e){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.win,n.blockClass,n.blockSelector,n.unblockSelector,n.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(r)}}takeSnapshot(e,n,r,s,i,o,a,c){const u=new Map,l=new Worker(qE());l.onmessage=y=>{const g=y.data,{id:S}=g;if(u.set(S,!1),!("base64"in g))return;const{base64:b,type:k,width:D,height:w}=g;this.mutationCb({id:S,type:an["2D"],commands:[{property:"clearRect",args:[0,0,D,w]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:b}],type:k}]},0,0]}]})};const d=1e3/n;let f=0,p;const m=y=>{if(y)return[y];const g=[];return r.document.querySelectorAll("canvas").forEach(S=>{us(S,s,i,o,!0)||g.push(S)}),g},_=y=>{if(f&&y-f<d){p=lt(_);return}f=y,m(c).forEach(g=>{const S=this.mirror.getId(g);if(!u.get(S)){if(u.set(S,!0),!e&&["webgl","webgl2"].includes(g.__context)){const b=g.getContext(g.__context);Er([b,"optionalAccess",k=>k.getContextAttributes,"call",k=>k(),"optionalAccess",k=>k.preserveDrawingBuffer])===!1&&b.clear(b.COLOR_BUFFER_BIT)}createImageBitmap(g).then(b=>{l.postMessage({id:S,bitmap:b,width:g.width,height:g.height,dataURLOptions:a},[b])}).catch(b=>{za(()=>{throw b})()})}}),p=lt(_)};return p=lt(_),p}startPendingCanvasMutationFlusher(){lt(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=n=>{this.rafStamps.latestId=n,lt(e)};lt(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),lt(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||n===-1)return;const s=r.map(o=>{const{type:a,...c}=o;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(e)}}const Va={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},wd="ReplayCanvas",VE=(t={})=>{const e={quality:t.quality||"medium",enableManualSnapshot:t.enableManualSnapshot};let n;const r=new Promise(s=>n=s);return{name:wd,setupOnce(){},getOptions(){const{quality:s,enableManualSnapshot:i}=e;return{enableManualSnapshot:i,recordCanvas:!0,getCanvasManager:o=>{const a=new YE({...o,enableManualSnapshot:i,errorHandler:c=>{try{typeof c=="object"&&(c.__rrweb__=!0)}catch{}}});return n(a),a},...Va[s||"medium"]||Va.medium}},async snapshot(s){(await r).snapshot(s)}}},kd=VE,KE=me(wd,kd),At=M,As="#ffffff",Ka="inherit",Ms="rgba(108, 95, 199, 1)",Xa={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:As,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"12px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Ms,submitBorder:Ms,submitOutlineFocus:"#29232f",submitForeground:As,submitForegroundHover:As,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Ka,inputForeground:Ka,inputBorder:"var(--border)",inputOutlineFocus:Ms,formBorderRadius:"20px",formContentBorderRadius:"6px"},Ja={light:Xa,dark:{...Xa,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"}},XE="Report a Bug",JE="Cancel",ZE="Send Bug Report",QE="Report a Bug",ev="your.email@example.org",tv="Email",nv="What's the bug? What did you expect?",rv="Description",sv="Your Name",iv="Name",ov="Thank you for your report!",Rd="widget",Cd="api";async function av({client:t,scope:e,event:n}){const r={};t.emit&&t.emit("preprocessEvent",n,r);const s=await Li(t.getOptions(),n,r,e,t,$e());return s===null?(t.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}async function cv({feedback:{message:t,email:e,name:n,source:r,url:s}},{includeReplay:i=!0}={}){const o=R(),a=o&&o.getTransport(),c=o&&o.getDsn();if(!o||!a||!c)return;const u={contexts:{feedback:{contact_email:e,name:n,message:t,url:s,source:r}},type:"feedback"};return Ct(async l=>{l.clearBreadcrumbs(),[Cd,Rd].includes(String(r))&&l.setLevel("info");const d=await av({scope:l,client:o,event:u});if(!d)return;o.emit&&o.emit("beforeSendFeedback",d,{includeReplay:!!i});const f=fu(d,c,o.getOptions()._metadata,o.getOptions().tunnel);let p;try{p=await a.send(f)}catch(m){const _=new Error("Unable to send Feedback");try{_.cause=m}catch{}throw _}if(p){if(typeof p.statusCode=="number"&&(p.statusCode<200||p.statusCode>=300))throw new Error("Unable to send Feedback");return p}})}function xd({name:t,email:e,message:n,source:r=Cd,url:s=Sc()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return cv({feedback:{name:t,email:e,message:n,url:s,source:r}},i)}const ft=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Za(t,e){return{...t,...e,themeDark:{...t.themeDark,...e.themeDark},themeLight:{...t.themeLight,...e.themeLight}}}function uv(t){const e=t.createElement("style");return e.textContent=`
.widget__actor {
  line-height: 25px;

  display: flex;
  align-items: center;
  gap: 8px;

  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  padding: 12px 16px;
  text-decoration: none;
  z-index: 9000;

  color: var(--foreground);
  background-color: var(--background);
  border: var(--border);
  box-shadow: var(--box-shadow);
  opacity: 1;
  transition: opacity 0.1s ease-in-out;
}

.widget__actor:hover {
  background-color: var(--background-hover);
}

.widget__actor svg {
  width: 16px;
  height: 16px;
}

.widget__actor--hidden {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}

.widget__actor__text {
}

.feedback-icon path {
  fill: var(--foreground);
}
`,e}function lv(t){const e=t.createElement("style");return e.textContent=`
.dialog {
  line-height: 25px;
  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  position: fixed;
  inset: 0;
  z-index: 10000;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);

  border: var(--border);
  border-radius: var(--form-border-radius);
  background-color: var(--background);
  color: var(--foreground);

  width: 320px;
  max-width: 100%;
  max-height: calc(100% - 2rem);
  display: flex;
  flex-direction: column;
  box-shadow: var(--box-shadow);
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}

.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 20px;
  font-weight: 600;
  padding: 24px 24px 0 24px;
  margin: 0;
  margin-bottom: 16px;
}

.brand-link {
  display: inline-flex;
}

.error {
  color: var(--error);
  margin-bottom: 16px;
}

.form {
  display: grid;
  overflow: auto;
  flex-direction: column;
  gap: 16px;
  padding: 0 24px 24px;
}

.form__error-container {
  color: var(--error);
}

.form__error-container--hidden {
  display: none;
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: grid;
  gap: 4px;
  align-items: center;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background-color: var(--input-background);
  box-sizing: border-box;
  border: var(--input-border);
  border-radius: var(--form-content-border-radius);
  color: var(--input-foreground);
  font-size: 14px;
  font-weight: 500;
  padding: 6px 12px;
}

.form__input:focus-visible {
  outline: 1px auto var(--input-outline-focus);
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.btn-group {
  display: grid;
  gap: 8px;
  margin-top: 8px;
}

.btn {
  line-height: inherit;
  border: var(--cancel-border);
  border-radius: var(--form-content-border-radius);
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  padding: 6px 16px;
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  background-color: var(--submit-background);
  border-color: var(--submit-border);
  color: var(--submit-foreground);
}
.btn--primary:hover {
  background-color: var(--submit-background-hover);
  color: var(--submit-foreground-hover);
}
.btn--primary:focus-visible {
  outline: 1px auto var(--submit-outline-focus);
}

.btn--default {
  background-color: var(--cancel-background);
  color: var(--cancel-foreground);
  font-weight: 500;
}
.btn--default:hover {
  background-color: var(--cancel-background-hover);
  color: var(--cancel-foreground-hover);
}
.btn--default:focus-visible {
  outline: 1px auto var(--cancel-outline-focus);
}

.success-message {
  background-color: var(--background);
  border: var(--border);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  font-weight: 600;
  color: var(--success);
  padding: 12px 24px;
  line-height: 25px;
  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success-icon path {
  fill: var(--success);
}
`,e}function Qa(t){return`
  --background: ${t.background};
  --background-hover: ${t.backgroundHover};
  --foreground: ${t.foreground};
  --error: ${t.error};
  --success: ${t.success};
  --border: ${t.border};
  --border-radius: ${t.borderRadius};
  --box-shadow: ${t.boxShadow};

  --submit-background: ${t.submitBackground};
  --submit-background-hover: ${t.submitBackgroundHover};
  --submit-border: ${t.submitBorder};
  --submit-outline-focus: ${t.submitOutlineFocus};
  --submit-foreground: ${t.submitForeground};
  --submit-foreground-hover: ${t.submitForegroundHover};

  --cancel-background: ${t.cancelBackground};
  --cancel-background-hover: ${t.cancelBackgroundHover};
  --cancel-border: ${t.cancelBorder};
  --cancel-outline-focus: ${t.cancelOutlineFocus};
  --cancel-foreground: ${t.cancelForeground};
  --cancel-foreground-hover: ${t.cancelForegroundHover};

  --input-background: ${t.inputBackground};
  --input-foreground: ${t.inputForeground};
  --input-border: ${t.inputBorder};
  --input-outline-focus: ${t.inputOutlineFocus};

  --form-border-radius: ${t.formBorderRadius};
  --form-content-border-radius: ${t.formContentBorderRadius};
  `}function dv(t,e,n){const r=t.createElement("style");return r.textContent=`
:host {
  --bottom: 1rem;
  --right: 1rem;
  --top: auto;
  --left: auto;
  --z-index: 100000;
  --font-family: ${n.light.fontFamily};
  --font-size: ${n.light.fontSize};

  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);
  z-index: var(--z-index);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${Qa(e==="dark"?n.dark:n.light)}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Qa(n.dark)}
  }
}`:""}
}`,r}function fv({id:t,colorScheme:e,themeDark:n,themeLight:r}){try{const s=At.document,i=s.createElement("div");i.id=t;const o=i.attachShadow({mode:"open"});return o.appendChild(dv(s,e,{dark:n,light:r})),o.appendChild(lv(s)),{shadow:o,host:i}}catch{throw h.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function pv(t,e,n){if(!t)return;const r=()=>{t&&t.showError("There was a problem submitting feedback, please wait and try again.")};t.hideError();try{return await xd({...e,source:Rd},n)}catch(s){ft&&h.error(s),r()}}function _e(t,e){return Object.entries(e).forEach(([n,r])=>{t.setAttributeNS(null,n,r)}),t}const Dt=20,hv="http://www.w3.org/2000/svg";function mv(){const t=a=>At.document.createElementNS(hv,a),e=_e(t("svg"),{class:"feedback-icon",width:`${Dt}`,height:`${Dt}`,viewBox:`0 0 ${Dt} ${Dt}`,fill:"none"}),n=_e(t("g"),{clipPath:"url(#clip0_57_80)"}),r=_e(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});e.appendChild(n).appendChild(r);const s=t("defs"),i=_e(t("clipPath"),{id:"clip0_57_80"}),o=_e(t("rect"),{width:`${Dt}`,height:`${Dt}`,fill:"white"});return i.appendChild(o),s.appendChild(i),e.appendChild(s).appendChild(i).appendChild(o),{get el(){return e}}}function X(t,e,...n){const s=At.document.createElement(t);e&&Object.entries(e).forEach(([i,o])=>{i==="className"&&typeof o=="string"?s.setAttribute("class",o):typeof o=="boolean"&&o?s.setAttribute(i,""):typeof o=="string"?s.setAttribute(i,o):i.startsWith("on")&&typeof o=="function"&&s.addEventListener(i.substring(2).toLowerCase(),o)});for(const i of n)Ad(s,i);return s}function Ad(t,e){const n=At.document;if(!(typeof e>"u"||e===null))if(Array.isArray(e))for(const r of e)Ad(t,r);else e===!1||(typeof e=="string"?t.appendChild(n.createTextNode(e)):e instanceof Node?t.appendChild(e):t.appendChild(n.createTextNode(String(e))))}function gv({buttonLabel:t,onClick:e}){function n(s){e&&e(s)}const r=X("button",{type:"button",className:"widget__actor","aria-label":t,"aria-hidden":"false"},mv().el,t?X("span",{className:"widget__actor__text"},t):null);return r.addEventListener("click",n),{get el(){return r},show:()=>{r.classList.remove("widget__actor--hidden"),r.setAttribute("aria-hidden","false")},hide:()=>{r.classList.add("widget__actor--hidden"),r.setAttribute("aria-hidden","true")}}}function _v({label:t}){return{el:X("button",{type:"submit",className:"btn btn--primary","aria-label":t},t)}}function Os(t,e){const n=t.get(e);return typeof n=="string"?n.trim():""}function yv({nameLabel:t,namePlaceholder:e,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:i,cancelButtonLabel:o,submitButtonLabel:a,showName:c,showEmail:u,isNameRequired:l,isEmailRequired:d,defaultName:f,defaultEmail:p,onCancel:m,onSubmit:_}){const{el:y}=_v({label:a});function g(E){if(E.preventDefault(),E.target instanceof HTMLFormElement)try{if(_){const x=new FormData(E.target),Y={name:Os(x,"name"),email:Os(x,"email"),message:Os(x,"message")};_(Y)}}catch{}}const S=X("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});function b(E){S.textContent=E,S.classList.remove("form__error-container--hidden"),S.setAttribute("aria-hidden","false")}function k(){S.textContent="",S.classList.add("form__error-container--hidden"),S.setAttribute("aria-hidden","true")}const D=X("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:l,className:"form__input",placeholder:e,value:f}),w=X("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:d,className:"form__input",placeholder:r,value:p}),v=X("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),L=X("button",{type:"button",className:"btn btn--default","aria-label":o,onClick:E=>{m&&m(E)}},o),z=X("form",{className:"form",onSubmit:g},[S,c&&X("label",{htmlFor:"name",className:"form__label"},[X("span",{className:"form__label__text"},t,l&&X("span",{className:"form__label__text--required"}," (required)")),D]),!c&&D,u&&X("label",{htmlFor:"email",className:"form__label"},[X("span",{className:"form__label__text"},n,d&&X("span",{className:"form__label__text--required"}," (required)")),w]),!u&&w,X("label",{htmlFor:"message",className:"form__label"},[X("span",{className:"form__label__text"},s,X("span",{className:"form__label__text--required"}," (required)")),v]),X("div",{className:"btn-group"},[y,L])]);return{get el(){return z},showError:b,hideError:k}}const Sv="http://www.w3.org/2000/svg";function bv({colorScheme:t}){const e=o=>At.document.createElementNS(Sv,o),n=_e(e("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=_e(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=e("defs"),i=e("style");return i.textContent=`
    path {
      fill: ${t==="dark"?"#fff":"#362d59"};
    }`,t==="system"&&(i.textContent+=`
    @media (prefers-color-scheme: dark) {
      path: {
        fill: '#fff';
      }
    }
    `),s.append(i),n.append(s),{get el(){return n}}}function Ev({formTitle:t,showBranding:e,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:i,colorScheme:o,defaultName:a,defaultEmail:c,onClosed:u,onCancel:l,onSubmit:d,...f}){let p=null;function m(){_(),u&&u()}function _(){p&&(p.open=!1)}function y(){p&&(p.open=!0)}function g(){return p&&p.open===!0||!1}const{el:S,showError:b,hideError:k}=yv({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:d,onCancel:l,...f});return p=X("dialog",{className:"dialog",open:!0,onClick:m},X("div",{className:"dialog__content",onClick:D=>{D.stopPropagation()}},X("h2",{className:"dialog__header"},t,e&&X("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},bv({colorScheme:o}).el)),S)),{get el(){return p},showError:b,hideError:k,open:y,close:_,checkIsOpen:g}}const gr=16,ec=17,vv="http://www.w3.org/2000/svg";function Tv(){const t=c=>At.document.createElementNS(vv,c),e=_e(t("svg"),{class:"success-icon",width:`${gr}`,height:`${ec}`,viewBox:`0 0 ${gr} ${ec}`,fill:"none"}),n=_e(t("g"),{clipPath:"url(#clip0_57_156)"}),r=_e(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=_e(t("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});e.appendChild(n).append(s,r);const i=t("defs"),o=_e(t("clipPath"),{id:"clip0_57_156"}),a=_e(t("rect"),{width:`${gr}`,height:`${gr}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),e.appendChild(i).appendChild(o).appendChild(a),{get el(){return e}}}function Iv({message:t,onRemove:e}){function n(){r&&(r.remove(),e&&e())}const r=X("div",{className:"success-message",onClick:n},Tv().el,t);return{el:r,remove:n}}function tc({shadow:t,options:{shouldCreateActor:e=!0,...n},attachTo:r}){let s,i,o=!1;function a(){if(t)try{const g=Iv({message:n.successMessageText,onRemove:()=>{S&&clearTimeout(S),l()}});if(!g.el)throw new Error("Unable to show success message");t.appendChild(g.el);const S=setTimeout(()=>{g&&g.remove()},5e3)}catch(g){h.error(g)}}async function c(g){if(!i)return;const S=[];if(n.isNameRequired&&!g.name&&S.push(n.nameLabel),n.isEmailRequired&&!g.email&&S.push(n.emailLabel),g.message||S.push(n.messageLabel),S.length>0){i.showError(`Please enter in the following required fields: ${S.join(", ")}`);return}if(!await pv(i,g)){n.onSubmitError&&n.onSubmitError();return}_(),a(),n.onSubmitSuccess&&n.onSubmitSuccess()}function u(){const g=R(),S=g&&g.getIntegrationByName&&g.getIntegrationByName("Replay");S&&S.flush().catch(b=>{ft&&h.error(b)})}function l(){s&&s.show()}function d(){s&&s.hide()}function f(){s&&s.el&&s.el.remove()}function p(){try{if(i){i.open(),o=!0,n.onFormOpen&&n.onFormOpen(),u();return}const g=n.useSentryUser,S=ne(),b=S&&S.getUser();if(i=Ev({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,defaultName:g&&b&&b[g.name]||"",defaultEmail:g&&b&&b[g.email]||"",onClosed:()=>{l(),o=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{m(),l()},onSubmit:c}),!i.el)throw new Error("Unable to open Feedback dialog");t.appendChild(i.el),d(),n.onFormOpen&&n.onFormOpen(),u()}catch(g){h.error(g)}}function m(){i&&(i.close(),o=!1,n.onFormClose&&n.onFormClose())}function _(){if(i){m();const g=i.el;g&&g.remove(),i=void 0}}function y(){o||p(),d()}return r?r.addEventListener("click",y):e&&(s=gv({buttonLabel:n.buttonLabel,onClick:y}),s.el&&t.appendChild(s.el)),{get actor(){return s},get dialog(){return i},showActor:l,hideActor:d,removeActor:f,openDialog:p,closeDialog:m,removeDialog:_}}const _r=At.document,wv=t=>new er(t);class er{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:n="sentry-feedback",isEmailRequired:r=!1,isNameRequired:s=!1,showBranding:i=!0,showEmail:o=!0,showName:a=!0,useSentryUser:c={email:"email",name:"username"},themeDark:u,themeLight:l,colorScheme:d="system",buttonLabel:f=XE,cancelButtonLabel:p=JE,submitButtonLabel:m=ZE,formTitle:_=QE,emailPlaceholder:y=ev,emailLabel:g=tv,messagePlaceholder:S=nv,messageLabel:b=rv,namePlaceholder:k=sv,nameLabel:D=iv,successMessageText:w=ov,onFormClose:v,onFormOpen:L,onSubmitError:z,onSubmitSuccess:E}={}){this.name=er.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:i,id:n,isEmailRequired:r,isNameRequired:s,showEmail:o,showName:a,useSentryUser:c,colorScheme:d,themeDark:{...Ja.dark,...u},themeLight:{...Ja.light,...l},buttonLabel:f,cancelButtonLabel:p,submitButtonLabel:m,formTitle:_,emailLabel:g,emailPlaceholder:y,messageLabel:b,messagePlaceholder:S,nameLabel:D,namePlaceholder:k,successMessageText:w,onFormClose:v,onFormOpen:L,onSubmitError:z,onSubmitSuccess:E}}setupOnce(){if(zs())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){ft&&h.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,n){try{const r=Za(this.options,n||{});return this._ensureShadowHost(r,({shadow:s})=>{const i=typeof e=="string"?_r.querySelector(e):typeof e.addEventListener=="function"?e:null;if(!i)return ft&&h.error("[Feedback] Unable to attach to target element"),null;const o=tc({shadow:s,options:r,attachTo:i});return this._widgets.add(o),this._widget||(this._widget=o),o})}catch(r){return ft&&h.error(r),null}}createWidget(e){try{return this._createWidget(Za(this.options,e||{}))}catch(n){return ft&&h.error(n),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(n){ft&&h.error(n)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=_r.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,({shadow:n})=>{const r=tc({shadow:n,options:e});return!this._hasInsertedActorStyles&&r.actor&&(n.appendChild(uv(_r)),this._hasInsertedActorStyles=!0),this._widgets.add(r),this._widget||(this._widget=r),r})}_ensureShadowHost(e,n){let r=!1;if(!this._shadow||!this._host){const{id:i,colorScheme:o,themeLight:a,themeDark:c}=e,{shadow:u,host:l}=fv({id:i,colorScheme:o,themeLight:a,themeDark:c});this._shadow=u,this._host=l,r=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const s=n({shadow:this._shadow,host:this._host});return r&&_r.body.appendChild(this._host),s}}er.__initStatic();function Fn(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function kv(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Fn(n);return s=>r.then(i=>s(i.transaction(e,"readwrite").objectStore(e)))}function Md(t){return Fn(t.getAllKeys())}function Rv(t,e,n){return t(r=>Md(r).then(s=>{if(!(s.length>=n))return r.put(e,Math.max(...s,0)+1),Fn(r.transaction)}))}function Cv(t){return t(e=>Md(e).then(n=>{if(n.length!==0)return Fn(e.get(n[0])).then(r=>(e.delete(n[0]),Fn(e.transaction).then(()=>r)))}))}function xv(t){let e;function n(){return e==null&&(e=kv(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{insert:async r=>{try{const s=await jc(r,t.textEncoder);await Rv(n(),s,t.maxQueueSize||30)}catch{}},pop:async()=>{try{const r=await Cv(n());if(r)return fp(r,t.textEncoder||new TextEncoder,t.textDecoder||new TextDecoder)}catch{}}}}function Av(t){return e=>t({...e,createStore:xv})}function Mv(t){return Av(Jh(t))}const nc=1e6,kr=String(0),Ov="main";let Od="",Nd="",Dd="",hi=T.navigator&&T.navigator.userAgent||"",Ld="";const Nv=T.navigator&&T.navigator.language||T.navigator&&T.navigator.languages&&T.navigator.languages[0]||"";function Dv(t){return typeof t=="object"&&t!==null&&"getHighEntropyValues"in t}const rc=T.navigator&&T.navigator.userAgentData;Dv(rc)&&rc.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(t=>{if(Od=t.platform||"",Dd=t.architecture||"",Ld=t.model||"",Nd=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const e=t.fullVersionList[t.fullVersionList.length-1];hi=`${e.brand} ${e.version}`}}).catch(t=>{});function Lv(t){return!("thread_metadata"in t)}function Pv(t){return Lv(t)?Bv(t):t}function $v(t){const e=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return typeof e=="string"&&e.length!==32&&F&&h.log(`[Profiling] Invalid traceId: ${e} on profiled event`),typeof e!="string"?"":e}function Fv(t,e,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=$v(r),i=Pv(n),o=e||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Date.now()),a=typeof r.timestamp=="number"?r.timestamp*1e3:Date.now();return{event_id:t,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||jn,runtime:{name:"javascript",version:T.navigator.userAgent},os:{name:Od,version:Nd,build_number:hi},device:{locale:Nv,model:Ld,manufacturer:hi,architecture:Dd,is_emulator:!1},debug_meta:{images:jv(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||j(),trace_id:s,active_thread_id:kr,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function Pd(t){return t.op==="pageload"}function Bv(t){let e,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[kr]:{name:Ov}}};if(!t.samples.length)return r;const s=t.samples[0].timestamp,i=typeof performance.timeOrigin=="number"?performance.timeOrigin:ue||0,o=i-(ue||i);for(let a=0;a<t.samples.length;a++){const c=t.samples[a];if(c.stackId===void 0){e===void 0&&(e=n,r.stacks[e]=[],n++),r.samples[a]={elapsed_since_start_ns:((c.timestamp+o-s)*nc).toFixed(0),stack_id:e,thread_id:kr};continue}let u=t.stacks[c.stackId];const l=[];for(;u;){l.push(u.frameId);const f=t.frames[u.frameId];r.frames[u.frameId]===void 0&&(r.frames[u.frameId]={function:f.name,abs_path:typeof f.resourceId=="number"?t.resources[f.resourceId]:void 0,lineno:f.line,colno:f.column}),u=u.parentId===void 0?void 0:t.stacks[u.parentId]}const d={elapsed_since_start_ns:((c.timestamp+o-s)*nc).toFixed(0),stack_id:n,thread_id:kr};r.stacks[n]=l,r.samples[a]=d,n++}return r}function Hv(t,e){if(!e.length)return t;for(const n of e)t[1].push([{type:"profile"},n]);return t}function Uv(t){const e=[];return Zt(t,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++){const i=n[s];i&&i.contexts&&i.contexts.profile&&i.contexts.profile.profile_id&&e.push(n[s])}}),e}const sc=new WeakMap;function jv(t){const e=M._sentryDebugIds;if(!e)return[];const n=R(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let i;const o=sc.get(s);o?i=o:(i=new Map,sc.set(s,i));const a=Object.keys(e).reduce((u,l)=>{let d;const f=i.get(l);f?d=f:(d=s(l),i.set(l,d));for(let p=d.length-1;p>=0;p--){const m=d[p],_=m&&m.filename;if(m&&_){u[_]=e[l];break}}return u},{}),c=[];for(const u of t)u&&a[u]&&c.push({type:"sourcemap",code_file:u,debug_id:a[u]});return c}function Wv(t){return typeof t!="number"&&typeof t!="boolean"||typeof t=="number"&&isNaN(t)?(F&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t===!0||t===!1?!0:t<0||t>1?(F&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function zv(t){return t.samples.length<2?(F&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):t.frames.length?!0:(F&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}let $d=!1;const Fd=3e4;function Gv(t){return typeof t=="function"}function qv(){const t=T.Profiler;if(!Gv(t)){F&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const e=10,n=Math.floor(Fd/e);try{return new t({sampleInterval:e,maxBufferSize:n})}catch{F&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),$d=!0}}function mi(t){if($d)return F&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!t.isRecording())return F&&h.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const e=R(),n=e&&e.getOptions();if(!n)return F&&h.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Wv(r)?r?(r===!0?!0:Math.random()<r)?!0:(F&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(F&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(F&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function Yv(t,e,n,r){return zv(n)?Fv(t,e,n,r):null}const gt=new Map;function Vv(){return gt.size}function Kv(t){const e=gt.get(t);return e&&gt.delete(t),e}function Xv(t,e){if(gt.set(t,e),gt.size>30){const n=gt.keys().next().value;gt.delete(n)}}function Jv(t){return t?mi(t)?gi(t):t:(F&&h.log("[Profiling] Transaction is undefined, skipping profiling"),t)}function gi(t){let e;Pd(t)&&(e=Le()*1e3);const n=qv();if(!n)return t;F&&h.log(`[Profiling] started profiling transaction: ${H(t).description}`);const r=j();async function s(){return!t||!n?null:n.stop().then(c=>(i&&(T.clearTimeout(i),i=void 0),F&&h.log(`[Profiling] stopped profiling of transaction: ${H(t).description}`),c?(Xv(r,c),null):(F&&h.log(`[Profiling] profiler returned null profile for: ${H(t).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null))).catch(c=>(F&&h.log("[Profiling] error while stopping profiler:",c),null))}let i=T.setTimeout(()=>{F&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",H(t).description),s()},Fd);const o=t.end.bind(t);function a(){return t?(s().then(()=>{t.setContext("profile",{profile_id:r,start_timestamp:e}),o()},()=>{o()}),t):o()}return t.end=a,t}const Bd="BrowserProfiling",Zv=()=>({name:Bd,setupOnce(){},setup(t){const n=ne().getTransaction();if(n&&Pd(n)&&mi(n)&&gi(n),typeof t.on!="function"){h.warn("[Profiling] Client does not support hooks, profiling will be disabled");return}t.on("startTransaction",r=>{mi(r)&&gi(r)}),t.on("beforeEnvelope",r=>{if(!Vv())return;const s=Uv(r);if(!s.length)return;const i=[];for(const o of s){const a=o&&o.contexts,c=a&&a.profile&&a.profile.profile_id,u=a&&a.profile&&a.profile.start_timestamp;if(typeof c!="string"){F&&h.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!c){F&&h.log("[Profiling] cannot find profile for a transaction without a profile context");continue}a&&a.profile&&delete a.profile;const l=Kv(c);if(!l){F&&h.log(`[Profiling] Could not retrieve profile for transaction: ${c}`);continue}const d=Yv(c,u,l,o);d&&i.push(d)}Hv(r,i)})}}),Hd=Zv,Qv=me(Bd,Hd);let Ud={};T.Sentry&&T.Sentry.Integrations&&(Ud=T.Sentry.Integrations);const eT={...Ud,...Bm,...ly};function tT(t){const e={...t};ku(e,"react"),sy(e)}const jd="ui.react.render",nT="ui.react.update",Wd="ui.react.mount",ic="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/profiler.tsx",rT="unknown";class bo extends ye.Component{static __initStatic(){this.defaultProps={disabled:!1,includeRender:!0,includeUpdates:!0}}constructor(e){super(e);const{name:n,disabled:r=!1}=this.props;r||(this._mountSpan=Ze({name:`<${n}>`,onlyIfParent:!0,op:Wd,origin:"auto.ui.react.profiler",attributes:{"ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:e,includeUpdates:n=!0}){if(n&&this._mountSpan&&e!==this.props.updateProps){const r=Object.keys(e).filter(s=>e[s]!==this.props.updateProps[s]);if(r.length>0){const s=Le();this._updateSpan=Vs(this._mountSpan,()=>Ze({name:`<${this.props.name}>`,onlyIfParent:!0,op:nT,origin:"auto.ui.react.profiler",startTimestamp:s,attributes:{"ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const e=Le(),{name:n,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const s=H(this._mountSpan).timestamp;Vs(this._mountSpan,()=>{const i=Ze({onlyIfParent:!0,name:`<${n}>`,op:jd,origin:"auto.ui.react.profiler",startTimestamp:s,attributes:{"ui.component_name":n}});i&&i.end(e)})}}render(){return this.props.children}}bo.__initStatic();function sT(t,e){const n=e&&e.name||t.displayName||t.name||rT,r=s=>ye.createElement(bo,{...e,name:n,updateProps:s,__self:this,__source:{fileName:ic,lineNumber:159}},ye.createElement(t,{...s,__self:this,__source:{fileName:ic,lineNumber:160}}));return r.displayName=`profiler(${n})`,Gr(r,t),r}function iT(t,e={disabled:!1,hasRenderSpan:!0}){const[n]=ye.useState(()=>{if(!(e&&e.disabled))return Ze({name:`<${t}>`,onlyIfParent:!0,op:Wd,origin:"auto.ui.react.profiler",attributes:{"ui.component_name":t}})});ye.useEffect(()=>(n&&n.end(),()=>{if(n&&e.hasRenderSpan){const r=H(n).timestamp,s=Le(),i=Ze({name:`<${t}>`,onlyIfParent:!0,op:jd,origin:"auto.ui.react.profiler",startTimestamp:r,attributes:{"ui.component_name":t}});i&&i.end(s)}}),[])}const Eo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,oc="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/errorboundary.tsx";function oT(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}const aT="unknown",ac={componentStack:null,error:null,eventId:null};function cT(t,e){const n=new WeakMap;function r(s,i){if(!n.has(s)){if(s.cause)return n.set(s,!0),r(s.cause,i);s.cause=i}}r(t,e)}class ls extends ye.Component{constructor(e){super(e),ls.prototype.__init.call(this),this.state=ac,this._openFallbackReportDialog=!0;const n=R();n&&n.on&&e.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&si({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,{componentStack:n}){const{beforeCapture:r,onError:s,showDialog:i,dialogOptions:o}=this.props;Ct(a=>{if(oT(ye.version)&&vi(e)){const u=new Error(e.message);u.name=`React ErrorBoundary ${e.name}`,u.stack=n,cT(e,u)}r&&r(a,e,n);const c=Wn(e,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!!this.props.fallback}});s&&s(e,n,c),i&&(this._lastEventId=c,this._openFallbackReportDialog&&si({...o,eventId:c})),this.setState({error:e,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:s}=this.props;s&&s(e,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:r,eventId:s}=this.state;e&&e(n,r,s),this.setState(ac)}}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.error){let s;return typeof e=="function"?s=e({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):s=e,ye.isValidElement(s)?s:(e&&Eo&&h.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}function uT(t,e){const n=t.displayName||t.name||aT,r=s=>ye.createElement(ls,{...e,__self:this,__source:{fileName:oc,lineNumber:240}},ye.createElement(t,{...s,__self:this,__source:{fileName:oc,lineNumber:241}}));return r.displayName=`errorBoundary(${n})`,Gr(r,t),r}const lT="redux.action",dT="info",fT={attachReduxState:!0,actionTransformer:t=>t,stateTransformer:t=>t||null};function pT(t){const e={...fT,...t};return n=>(r,s)=>(e.attachReduxState&&eu().addEventProcessor((o,a)=>{try{o.type===void 0&&o.contexts.state.state.type==="redux"&&(a.attachments=[...a.attachments||[],{filename:"redux_state.json",data:JSON.stringify(o.contexts.state.state.value)}])}catch{}return o}),n((o,a)=>{const c=r(o,a),u=ne(),l=e.actionTransformer(a);typeof l<"u"&&l!==null&&u.addBreadcrumb({category:lT,data:l,type:dT});const d=e.stateTransformer(c);if(typeof d<"u"&&d!==null){const p=R(),m=p&&p.getOptions(),_=m&&m.normalizeDepth||3,y={state:{type:"redux",value:d}};nt(y,"__sentry_override_normalization_depth__",3+_),u.setContext("state",y)}else u.setContext("state",null);const{configureScopeWithState:f}=e;return typeof f=="function"&&f(u,c),c},s))}function hT(t){const e=Kn({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,match:s,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=t;return{...e,afterAllSetup(a){e.afterAllSetup(a);const c=d=>{_n(a,d)},u=d=>{yn(a,d)},l=zd(n,r,s);l(c,i,!1),l(u,!1,o)}}}function zd(t,e,n){return(r,s=!0,i=!0)=>{let o,a;s&&T&&T.location&&cc(e,T.location,n,(c,u="url")=>{a=c,o=r({name:a,attributes:{[Se]:"pageload",[he]:"auto.pageload.react.reactrouter_v3",[Q]:u}})}),i&&t.listen&&t.listen(c=>{(c.action==="PUSH"||c.action==="POP")&&(o&&o.end(),cc(e,c,n,(u,l="url")=>{a=u;const d={[Se]:"navigation",[he]:"auto.navigation.react.reactrouter_v3",[Q]:l};o=r({name:a,attributes:d})}))})}}function cc(t,e,n,r){let s=e.pathname;n({location:e,routes:t},(i,o,a)=>{if(i||!a)return r(s);const c=mT(a.routes||[]);return c.length===0||c==="/*"?r(s):(s=c,r(s,"route"))})}function mT(t){if(!Array.isArray(t)||t.length===0)return"";const e=t.filter(r=>!!r.path);let n=-1;for(let r=e.length-1;r>=0;r--){const s=e[r];if(s.path&&s.path.startsWith("/")){n=r;break}}return e.slice(n).filter(({path:r})=>!!r).map(({path:r})=>r).join("")}const gT="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/reactrouter.tsx";let Wt;function _T(t){const e=Kn({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:s,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=t;return{...e,afterAllSetup(a){e.afterAllSetup(a);const c=d=>{_n(a,d)},u=d=>{yn(a,d)},l=Gd(n,r,s);l(c,i,!1),l(u,!1,o)}}}function yT(t){const e=Kn({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:s}=t;return{...e,afterAllSetup(i){e.afterAllSetup(i);const o=u=>{_n(i,u)},a=u=>{yn(i,u)},c=qd(n,r,s);c(o,t.instrumentPageLoad,!1),c(a,!1,t.instrumentNavigation)}}}function Gd(t,e,n){return Yd(t,"reactrouter_v4",e,n)}function qd(t,e,n){return Yd(t,"reactrouter_v5",e,n)}function Yd(t,e,n=[],r){function s(){if(t&&t.location)return t.location.pathname;if(T&&T.location)return T.location.pathname}function i(o){if(n.length===0||!r)return[o,"url"];const a=Vd(n,o,r);for(let c=0;c<a.length;c++)if(a[c].match.isExact)return[a[c].match.path,"route"];return[o,"url"]}return(o,a=!0,c=!0)=>{const u=s();if(a&&u){const[l,d]=i(u);Wt=o({name:l,attributes:{[Se]:"pageload",[he]:`auto.pageload.react.${e}`,[Q]:d}})}c&&t.listen&&t.listen((l,d)=>{if(d&&(d==="PUSH"||d==="POP")){Wt&&Wt.end();const[f,p]=i(l.pathname);Wt=o({name:f,attributes:{[Se]:"navigation",[he]:`auto.navigation.react.${e}`,[Q]:p}})}})}}function Vd(t,e,n,r=[]){return t.some(s=>{const i=s.path?n(e,s):r.length?r[r.length-1].match:ST(e);return i&&(r.push({route:s,match:i}),s.routes&&Vd(s.routes,e,n,r)),!!i}),r}function ST(t){return{path:"/",url:"/",params:{},isExact:t==="/"}}function bT(t){const e=t.displayName||t.name,n=ET(),r=s=>(n&&s&&s.computedMatch&&s.computedMatch.isExact&&(n.updateName(s.computedMatch.path),n.setAttribute(Q,"route")),ye.createElement(t,{...s,__self:this,__source:{fileName:gT,lineNumber:277}}));return r.displayName=`sentryRoute(${e})`,Gr(r,t),r}function ET(){if(Wt)return Wt;const t=xt(),e=t?Qt(t):void 0;if(!e)return;const n=H(e).op;return n==="navigation"||n==="pageload"?e:void 0}const Kd="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/reactrouterv6.tsx";let Yt,_t,yt,St,On,It,cn,ds,pt=!1;function vT(t){const e=Kn({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:n,useLocation:r,useNavigationType:s,createRoutesFromChildren:i,matchRoutes:o,stripBasename:a,instrumentPageLoad:c=!0,instrumentNavigation:u=!0}=t;return{...e,afterAllSetup(l){e.afterAllSetup(l);const d=p=>{yn(l,p)},f=T&&T.location&&T.location.pathname;c&&f&&_n(l,{name:f,attributes:{[Q]:"url",[Se]:"pageload",[he]:"auto.pageload.react.reactrouter_v6"}}),_t=n,yt=r,St=s,It=o,On=i,pt=a||!1,cn=d,ds=u}}}function TT(t,e,n,r,s,i){return(o,a=!0,c=!0)=>{const u=T&&T.location&&T.location.pathname;a&&u&&(Yt=o({name:u,attributes:{[Q]:"url",[Se]:"pageload",[he]:"auto.pageload.react.reactrouter_v6"}})),_t=t,yt=e,St=n,It=s,On=r,pt=i||!1,cn=o,ds=c}}function Ns(t,e){if(!e||e==="/"||!t.toLowerCase().startsWith(e.toLowerCase()))return t;const n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?t:t.slice(n)||"/"}function Xd(t,e,n,r=""){if(!t||t.length===0)return[pt?Ns(e.pathname,r):e.pathname,"url"];let s="";if(n)for(let i=0;i<n.length;i++){const o=n[i],a=o.route;if(a){if(a.index)return[pt?Ns(o.pathname,r):o.pathname,"route"];const c=a.path;if(c){const u=c[0]==="/"||s[s.length-1]==="/"?c:`/${c}`;if(s+=u,r+o.pathname===e.pathname)return Uo(s)!==Uo(o.pathname)&&s.slice(-2)!=="/*"?[(pt?"":r)+u,"route"]:[(pt?"":r)+s,"route"]}}}return[pt?Ns(e.pathname,r):e.pathname,"url"]}function vo(t,e,n,r,s){const i=Array.isArray(r)?r:It(n,e,s);if(t&&i){const[o,a]=Xd(n,e,i,s);t.updateName(o),t.setAttribute(Q,a)}}function To(t,e,n,r,s){const i=Array.isArray(r)?r:It(e,t,s);if(ds&&(n==="PUSH"||n==="POP")&&i){Yt&&Yt.end();const[o,a]=Xd(e,t,i,s);Yt=cn({name:o,attributes:{[Q]:a,[Se]:"navigation",[he]:"auto.navigation.react.reactrouter_v6"}})}}function IT(t){if(!_t||!yt||!St||!On||!It||!cn)return Eo&&h.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${_t}. useLocation: ${yt}. useNavigationType: ${St}.
      createRoutesFromChildren: ${On}. matchRoutes: ${It}. customStartTransaction: ${cn}.`),t;let e=!0;const n=r=>{const s=yt(),i=St();return _t(()=>{const o=On(r.children);e?(vo(Io(),s,o),e=!1):To(s,o,i)},[s,i]),ye.createElement(t,{...r,__self:this,__source:{fileName:Kd,lineNumber:329}})};return Gr(n,t),n}function wT(t){if(!_t||!yt||!St||!It||!cn)return Eo&&h.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),t;let e=!0;const n=r=>{const{routes:s,locationArg:i}=r,o=t(s,i),a=yt(),c=St(),u=typeof i=="string"||i&&i.pathname?i:a;return _t(()=>{const l=typeof u=="string"?{pathname:u}:u;e?(vo(Io(),l,s),e=!1):To(l,s,c)},[c,u]),o};return(r,s)=>ye.createElement(n,{routes:r,locationArg:s,__self:this,__source:{fileName:Kd,lineNumber:386}})}function kT(t){return function(e,n){const r=t(e,n),s=n&&n.basename,i=Io();return r.state.historyAction==="POP"&&i&&vo(i,r.state.location,e,void 0,s),r.subscribe(o=>{const a=o.location;ds&&(o.historyAction==="PUSH"||o.historyAction==="POP")&&To(a,e,o.historyAction,void 0,s)}),r}}function Io(){if(Yt)return Yt;const t=xt(),e=t?Qt(t):void 0;if(!e)return;const n=H(e).op;return n==="navigation"||n==="pageload"?e:void 0}const JT=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:yl,BrowserClient:cl,BrowserProfilingIntegration:Qv,BrowserTracing:qg,Dedupe:bl,ErrorBoundary:ls,Feedback:er,FunctionToString:Nu,GlobalHandlers:Il,HttpContext:Cl,Hub:$i,InboundFilters:Mu,Integrations:eT,LinkedErrors:Al,ModuleMetadata:dm,Profiler:bo,Replay:Qn,ReplayCanvas:KE,SDK_VERSION:xr,SEMANTIC_ATTRIBUTE_SENTRY_OP:Se,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:he,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:ht,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Q,Scope:tn,TryCatch:Ol,WINDOW:T,addBreadcrumb:Ge,addEventProcessor:vu,addGlobalEventProcessor:Yc,addIntegration:Ch,addTracingExtensions:Hi,breadcrumbsIntegration:Zi,browserApiErrorsIntegration:ro,browserProfilingIntegration:Hd,browserTracingIntegration:Kn,captureEvent:zn,captureException:Wn,captureMessage:Dp,captureSession:Xs,captureUserFeedback:uy,chromeStackLineParser:dl,close:zp,configureScope:Lp,continueTrace:uh,createReduxEnhancer:pT,createTransport:ji,createUserFeedbackEnvelope:al,dedupeIntegration:Qi,defaultIntegrations:Nl,defaultRequestInstrumentationOptions:Nn,defaultStackLineParsers:hl,defaultStackParser:ml,endSession:Pi,eventFromException:il,eventFromMessage:ol,exceptionFromError:Ki,extractTraceparentData:nh,feedbackIntegration:wv,flush:Wp,forceLoad:iy,functionToStringIntegration:zi,geckoStackLineParser:fl,getActiveSpan:xt,getActiveTransaction:Pe,getClient:R,getCurrentHub:W,getCurrentScope:ne,getDefaultIntegrations:Dl,getHubFromCarrier:Ar,getReplay:LE,getSpanStatusFromHttpCode:Fi,globalHandlersIntegration:eo,httpContextIntegration:to,inboundFiltersIntegration:Wi,init:tT,instrumentOutgoingRequests:Vi,isInitialized:qp,lastEventId:Gp,linkedErrorsIntegration:no,makeBrowserOfflineTransport:Mv,makeFetchTransport:ul,makeMain:Js,makeMultiplexedTransport:Qh,makeXHRTransport:ll,metrics:Fm,moduleMetadataIntegration:xu,onLoad:oy,onProfilingStartRouteTransaction:Jv,opera10StackLineParser:R_,opera11StackLineParser:A_,parameterize:im,reactRouterV3BrowserTracingIntegration:hT,reactRouterV3Instrumentation:zd,reactRouterV4BrowserTracingIntegration:_T,reactRouterV4Instrumentation:Gd,reactRouterV5BrowserTracingIntegration:yT,reactRouterV5Instrumentation:qd,reactRouterV6BrowserTracingIntegration:vT,reactRouterV6Instrumentation:TT,replayCanvasIntegration:kd,replayIntegration:NE,sendFeedback:xd,setContext:Jc,setCurrentClient:Tu,setExtra:$p,setExtras:Pp,setHttpStatus:Qr,setMeasurement:du,setTag:Bp,setTags:Fp,setUser:Hp,showReportDialog:si,spanStatusfromHttpCode:sh,startBrowserTracingNavigationSpan:yn,startBrowserTracingPageLoadSpan:_n,startInactiveSpan:Ze,startSession:Ks,startSpan:ah,startSpanManual:ch,startTransaction:jp,trace:oh,useProfiler:iT,winjsStackLineParser:pl,withActiveSpan:Vs,withErrorBoundary:uT,withIsolationScope:Up,withProfiler:sT,withScope:Ct,withSentryReactRouterV6Routing:IT,withSentryRouting:bT,wrap:ay,wrapCreateBrowserRouter:kT,wrapUseRoutes:wT},Symbol.toStringTag,{value:"Module"})),RT=Object.prototype.toString;function CT(t,e){return RT.call(t)===`[object ${e}]`}function Jd(t){return CT(t,"Object")}function Zd(t){return!!(t&&t.then&&typeof t.then=="function")}function yr(t){return t&&t.Math==Math?t:void 0}const De=typeof globalThis=="object"&&yr(globalThis)||typeof window=="object"&&yr(window)||typeof self=="object"&&yr(self)||typeof globalThis=="object"&&yr(globalThis)||function(){return this}()||{};function xT(){return De}function Qd(t,e,n){const r=n||De,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const AT="Sentry Logger ",uc=["debug","info","warn","error","log","assert","trace"],lc={};function ef(t){if(!("console"in De))return t();const e=De.console,n={},r=Object.keys(lc);r.forEach(s=>{const i=lc[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function MT(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?uc.forEach(n=>{e[n]=(...r)=>{t&&ef(()=>{De.console[n](`${AT}[${n}]:`,...r)})}}):uc.forEach(n=>{e[n]=()=>{}}),e}const _i=MT();function OT(t){return yi(t,new Map)}function yi(t,e){if(Jd(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const s of Object.keys(t))typeof t[s]<"u"&&(r[s]=yi(t[s],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(s=>{r.push(yi(s,e))}),r}return t}function bt(){const t=De,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>e.getRandomValues(new Uint8Array(1))[0])}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function NT(t){return Array.isArray(t)?t:[t]}function DT(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function LT(){return!DT()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function PT(t,e){return t.require(e)}var He;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(He||(He={}));class Xe{constructor(e){Xe.prototype.__init.call(this),Xe.prototype.__init2.call(this),Xe.prototype.__init3.call(this),Xe.prototype.__init4.call(this),this._state=He.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Xe((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Xe((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=e=>{this._setResult(He.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(He.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===He.PENDING){if(Zd(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===He.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===He.RESOLVED&&n[1](this._value),this._state===He.REJECTED&&n[2](this._value),n[0]=!0)})}}}const tf=xT(),Si={nowSeconds:()=>Date.now()/1e3};function $T(){const{performance:t}=tf;if(!t||!t.now)return;const e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function FT(){try{return PT(module,"perf_hooks").performance}catch{return}}const Ds=LT()?FT():$T(),dc=Ds===void 0?Si:{nowSeconds:()=>(Ds.timeOrigin+Ds.now())/1e3},nf=Si.nowSeconds.bind(Si),rf=dc.nowSeconds.bind(dc);(()=>{const{performance:t}=tf;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,o=t.timing&&t.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,u=c<e;return i||u?s<=c?t.timeOrigin:o:r})();const BT="production";function HT(){return Qd("globalEventProcessors",()=>[])}function bi(t,e,n,r=0){return new Xe((s,i)=>{const o=t[r];if(e===null||typeof o!="function")s(e);else{const a=o({...e},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&o.id&&a===null&&_i.log(`Event processor "${o.id}" dropped event`),Zd(a)?a.then(c=>bi(t,c,n,r+1).then(s)).then(null,i):bi(t,a,n,r+1).then(s).then(null,i)}})}function UT(t){const e=rf(),n={sid:bt(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>WT(n)};return t&&fs(n,t),n}function fs(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||rf(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:bt()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function jT(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),fs(t,n)}function WT(t){return OT({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const zT=100;class Vt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=fc()}static clone(e){const n=new Vt;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata},n._propagationContext={...e._propagationContext}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&fs(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof Vt?n:this}return e instanceof Vt?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):Jd(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=fc(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:zT;if(r<=0)return this;const s={timestamp:nf(),...e},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={},r){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const o=this._span.transaction;if(o){e.sdkProcessingMetadata={dynamicSamplingContext:o.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const a=o.name;a&&(e.tags={transaction:a,...e.tags})}}this._applyFingerprint(e);const s=this._getBreadcrumbs(),i=[...e.breadcrumbs||[],...s];return e.breadcrumbs=i.length>0?i:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},bi([...r||[],...HT(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?NT(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function fc(){return{traceId:bt(),spanId:bt().substring(16)}}const sf=4,GT=100;class of{constructor(e,n=new Vt,r=sf){this._version=r,this._stack=[{scope:n}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Vt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:bt(),s=new Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},o)}),r}captureMessage(e,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:bt(),i=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},a)}),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:bt();return e.type||(this._lastEventId=r),this._withClient((s,i)=>{s.captureEvent(e,{...n,event_id:r},i)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=GT}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:nf(),...e},u=i?ef(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=pc(this);try{e(this)}finally{pc(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_i.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!r){const s=this.getClient();console.warn(s?`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`:"Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&jT(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=BT}=r&&r.getOptions()||{},{userAgent:o}=De.navigator||{},a=UT({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&fs(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){const{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){const s=ps().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_i.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ps(){return De.__SENTRY__=De.__SENTRY__||{extensions:{},hub:void 0},De}function pc(t){const e=ps(),n=Ei(e);return af(e,t),n}function qT(){const t=ps();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return YT(t)}function YT(t=ps()){return(!VT(t)||Ei(t).isOlderThan(sf))&&af(t,new of),Ei(t)}function VT(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Ei(t){return Qd("hub",()=>new of,t)}function af(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function ZT(t,e){return qT().captureException(t,{captureContext:e})}export{ls as E,JT as S,ZT as a,Wn as c,Um as h,tT as i,Hp as s,sT as w};
//# sourceMappingURL=sentry-DqLGBvFk.js.map
