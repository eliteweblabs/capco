import{R as pr}from"./vendor-BvG50M3B.js";const Ze={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},bt=console,qt={};Object.keys(Ze).forEach(t=>{qt[t]=bt[t]});const he="Datadog Browser SDK:",C={debug:qt.debug.bind(bt,he),log:qt.log.bind(bt,he),info:qt.info.bind(bt,he),warn:qt.warn.bind(bt,he),error:qt.error.bind(bt,he)},Qe="https://docs.datadoghq.com",gi=`${Qe}/real_user_monitoring/browser/troubleshooting`,Bn="More details:";function ss(t,e){return(...n)=>{try{return t(...n)}catch(r){C.error(e,r)}}}function wt(t){return t!==0&&Math.random()*100<=t}function Ye(t,e){return+t.toFixed(e)}function _i(t){return ke(t)&&t>=0&&t<=100}function ke(t){return typeof t=="number"}const G=1e3,J=60*G,os=60*J,bi=24*os,is=365*bi;function tn(t){return{relative:t,timeStamp:vi(t)}}function yi(t){return{relative:$n(t),timeStamp:t}}function vi(t){const e=st()-performance.now();return e>xe()?Math.round(re(e,t)):Ei(t)}function Si(){return Math.round(st()-re(xe(),performance.now()))}function S(t){return ke(t)?Ye(t*1e6,0):t}function st(){return new Date().getTime()}function V(){return st()}function ot(){return performance.now()}function $(){return{relative:ot(),timeStamp:V()}}function as(){return{relative:0,timeStamp:xe()}}function z(t,e){return e-t}function re(t,e){return t+e}function $n(t){return t-xe()}function Ei(t){return Math.round(re(xe(),t))}function wi(t){return t<is}let fn;function xe(){return fn===void 0&&(fn=performance.timing.navigationStart),fn}const Ee=1024,cs=1024*Ee,Ti=/[^\u0000-\u007F]/;function us(t){return Ti.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length}function Ii(t){const e=t.reduce((s,o)=>s+o.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function we(t){return{...t}}function We(t,e){return Object.keys(t).some(n=>t[n]===e)}function Mt(t){return Object.keys(t).length===0}function Ai(t,e){const n={};for(const r of Object.keys(t))n[r]=e(t[r]);return n}function pt(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,typeof t!="object"&&(typeof self=="object"?t=self:typeof window=="object"?t=window:t={}),t}function Tt(t,e){const n=pt();let r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}let Nn,ls=!1;function Ci(t){Nn=t}function Ri(t){ls=t}function E(t){return function(){return It(t,this,arguments)}}function It(t,e,n){try{return t.apply(e,n)}catch(r){yt(r)}}function yt(t){if(Ln(t),Nn)try{Nn(t)}catch(e){Ln(e)}}function Ln(...t){ls&&C.error("[MONITOR]",...t)}function U(t,e){return Tt(pt(),"setTimeout")(E(t),e)}function W(t){Tt(pt(),"clearTimeout")(t)}function se(t,e){return Tt(pt(),"setInterval")(E(t),e)}function en(t){Tt(pt(),"clearInterval")(t)}class k{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.observers.push(e),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter(n=>e!==n),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(e){this.observers.forEach(n=>n(e))}}function ds(...t){return new k(e=>{const n=t.map(r=>r.subscribe(s=>e.notify(s)));return()=>n.forEach(r=>r.unsubscribe())})}function At(t,e,n){const r=n&&n.leading!==void 0?n.leading:!0,s=n&&n.trailing!==void 0?n.trailing:!0;let o=!1,i,a;return{throttled:(...c)=>{if(o){i=c;return}r?t(...c):i=c,o=!0,a=U(()=>{s&&i&&t(...i),o=!1,i=void 0},e)},cancel:()=>{W(a),o=!1,i=void 0}}}function A(){}function B(t){return t?(parseInt(t,10)^Math.random()*16>>parseInt(t,10)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,B)}const qe=/([\w-]+)\s*=\s*([^;]+)/g;function Te(t,e){for(qe.lastIndex=0;;){const n=qe.exec(t);if(n){if(n[1]===e)return n[2]}else break}}function ki(t){const e=new Map;for(qe.lastIndex=0;;){const n=qe.exec(t);if(n)e.set(n[1],n[2]);else break}return e}function fs(t,e,n=""){const r=t.charCodeAt(e-1),o=r>=55296&&r<=56319?e+1:e;return t.length<=o?t:`${t.slice(0,o)}${n}`}function xi(){return ps()===0}function Oi(){return ps()===1}let Pe;function ps(){return Pe??(Pe=Ni())}function Ni(t=window){var e;const n=t.navigator.userAgent;return t.chrome||/HeadlessChrome/.test(n)?0:((e=t.navigator.vendor)===null||e===void 0?void 0:e.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}function Oe(t,e,n=0,r){const s=new Date;s.setTime(s.getTime()+n);const o=`expires=${s.toUTCString()}`,i=r&&r.crossSite?"none":"strict",a=r&&r.domain?`;domain=${r.domain}`:"",c=r&&r.secure?";secure":"",l=r&&r.partitioned?";partitioned":"";document.cookie=`${t}=${e};${o};path=/;samesite=${i}${a}${c}${l}`}function Gn(t){return Te(document.cookie,t)}let pn;function St(t){return pn||(pn=ki(document.cookie)),pn.get(t)}function hs(t,e){Oe(t,"",0,e)}function Li(t){if(document.cookie===void 0||document.cookie===null)return!1;try{const e=`dd_cookie_test_${B()}`,n="test";Oe(e,n,J,t);const r=Gn(e)===n;return hs(e,t),r}catch(e){return C.error(e),!1}}let hn;function Mi(){if(hn===void 0){const t=`dd_site_test_${B()}`,e="test",n=window.location.hostname.split(".");let r=n.pop();for(;n.length&&!Gn(t);)r=`${n.pop()}.${r}`,Oe(t,e,G,{domain:r});hs(t,{domain:r}),hn=r}return hn}const oe="_dd_s";function Pi(t,e){for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(e(r,n,t))return r}}function ms(t){return Object.values(t)}function Hn(t){return Object.entries(t)}const Ft=4*os,gs=15*J,Di=is,Ie={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},_s=/^([a-zA-Z]+)=([a-z0-9-]+)$/,jn="&";function Ui(t){return!!t&&(t.indexOf(jn)!==-1||_s.test(t))}const Vi="1";function Ot(t,e){const n={isExpired:Vi};return e.trackAnonymousUser&&(t!=null&&t.anonymousId?n.anonymousId=t==null?void 0:t.anonymousId:n.anonymousId=B()),n}function Be(t){return Mt(t)}function bs(t){return!Be(t)}function Ke(t){return t.isExpired!==void 0||!Fi(t)}function Fi(t){return(t.created===void 0||st()-Number(t.created)<Ft)&&(t.expire===void 0||st()<Number(t.expire))}function ys(t){t.expire=String(st()+gs)}function Yn(t){return Hn(t).map(([e,n])=>e==="anonymousId"?`aid=${n}`:`${e}=${n}`).join(jn)}function vs(t){const e={};return Ui(t)&&t.split(jn).forEach(n=>{const r=_s.exec(n);if(r!==null){const[,s,o]=r;s==="aid"?e.anonymousId=o:e[s]=o}}),e}const zi="_dd",Bi="_dd_r",$i="_dd_l",Gi="rum",Hi="logs";function ji(t){if(!St(oe)){const n=St(zi),r=St(Bi),s=St($i),o={};n&&(o.id=n),s&&/^[01]$/.test(s)&&(o[Hi]=s),r&&/^[012]$/.test(r)&&(o[Gi]=r),bs(o)&&(ys(o),t.persistSession(o))}}function hr(t){const e=Xi(t);return Li(e)?{type:Ie.COOKIE,cookieOptions:e}:void 0}function Yi(t,e){const n={isLockEnabled:xi(),persistSession:Wi(e),retrieveSession:Ki,expireSession:r=>qi(e,r,t)};return ji(n),n}function Wi(t){return e=>{Oe(oe,Yn(e),gs,t)}}function qi(t,e,n){const r=Ot(e,n);Oe(oe,Yn(r),n.trackAnonymousUser?Di:Ft,t)}function Ki(){const t=Gn(oe);return vs(t)}function Xi(t){const e={};return e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains&&(e.domain=Mi()),e}const Ji="_dd_test_";function mr(){try{const t=B(),e=`${Ji}${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:Ie.LOCAL_STORAGE}:void 0}catch{return}}function Zi(t){return{isLockEnabled:!1,persistSession:Ss,retrieveSession:Qi,expireSession:e=>ta(e,t)}}function Ss(t){localStorage.setItem(oe,Yn(t))}function Qi(){const t=localStorage.getItem(oe);return vs(t)}function ta(t,e){Ss(Ot(t,e))}const ea=10,na=100,Es=[];let $e;function Nt(t,e,n=0){var r;const{isLockEnabled:s,persistSession:o,expireSession:i}=e,a=f=>o({...f,lock:l}),c=()=>{const f=e.retrieveSession(),p=f.lock;return f.lock&&delete f.lock,{session:f,lock:p}};if($e||($e=t),t!==$e){Es.push(t);return}if(s&&n>=na){gr(e);return}let l,u=c();if(s){if(u.lock){De(t,e,n);return}if(l=B(),a(u.session),u=c(),u.lock!==l){De(t,e,n);return}}let d=t.process(u.session);if(s&&(u=c(),u.lock!==l)){De(t,e,n);return}if(d&&(Ke(d)?i(d):(ys(d),s?a(d):o(d))),s&&!(d&&Ke(d))){if(u=c(),u.lock!==l){De(t,e,n);return}o(u.session),d=u.session}(r=t.after)===null||r===void 0||r.call(t,d||u.session),gr(e)}function De(t,e,n){U(()=>{Nt(t,e,n+1)},ea)}function gr(t){$e=void 0;const e=Es.shift();e&&Nt(e,t)}const _r=G;function ra(t){switch(t.sessionPersistence){case Ie.COOKIE:return hr(t);case Ie.LOCAL_STORAGE:return mr();case void 0:{let e=hr(t);return!e&&t.allowFallbackToLocalStorage&&(e=mr()),e}default:C.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function sa(t,e,n,r){const s=new k,o=new k,i=new k,a=t.type===Ie.COOKIE?Yi(e,t.cookieOptions):Zi(e),{expireSession:c}=a,l=se(h,_r);let u;y();const{throttled:d,cancel:f}=At(()=>{Nt({process:b=>{if(Be(b))return;const Z=m(b);return w(Z),Z},after:b=>{bs(b)&&!I()&&x(b),u=b}},a)},_r);function p(){Nt({process:b=>I()?m(b):void 0},a)}function h(){Nt({process:b=>Ke(b)?Ot(b,e):void 0,after:m},a)}function m(b){return Ke(b)&&(b=Ot(b,e)),I()&&(g(b)?_():(i.notify({previousState:u,newState:b}),u=b)),b}function y(){Nt({process:b=>{if(Be(b))return Ot(b,e)},after:b=>{u=b}},a)}function w(b){if(Be(b))return!1;const{trackingType:Z,isTracked:T}=r(b[n]);b[n]=Z,delete b.isExpired,T&&!b.id&&(b.id=B(),b.created=String(st()))}function I(){return u[n]!==void 0}function g(b){return u.id!==b.id||u[n]!==b[n]}function _(){u=Ot(u,e),o.notify()}function x(b){u=b,s.notify()}function Q(b){Nt({process:Z=>({...Z,...b}),after:m},a)}return{expandOrRenewSession:d,expandSession:p,getSession:()=>u,renewObservable:s,expireObservable:o,sessionStateUpdateObservable:i,restartSession:y,expire:()=>{f(),c(u),m(Ot(u,e))},stop:()=>{en(l)},updateSessionState:Q}}const Mn={GRANTED:"granted",NOT_GRANTED:"not-granted"};function oa(t){const e=new k;return{tryToInit(n){t||(t=n)},update(n){t=n,e.notify()},isGranted(){return t===Mn.GRANTED},observable:e}}function ie(t,e,n){if(typeof t!="object"||t===null)return JSON.stringify(t);const r=Kt(Object.prototype),s=Kt(Array.prototype),o=Kt(Object.getPrototypeOf(t)),i=Kt(t);try{return JSON.stringify(t,e,n)}catch{return"<error: unable to serialize object>"}finally{r(),s(),o(),i()}}function Kt(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):A}function Wn(t){return nn(t,location.href).href}function ia(t){try{return!!nn(t)}catch{return!1}}function aa(t){const e=nn(t).pathname;return e[0]==="/"?e:`/${e}`}function nn(t,e){const n=ca();if(n)try{return e!==void 0?new n(t,e):new n(t)}catch(o){throw new Error(`Failed to construct URL: ${String(o)} ${ie({url:t,base:e})}`)}if(e===void 0&&!/:/.test(t))throw new Error(`Invalid URL: '${t}'`);let r=document;const s=r.createElement("a");if(e!==void 0){r=document.implementation.createHTMLDocument("");const o=r.createElement("base");o.href=e,r.head.appendChild(o),r.body.appendChild(s)}return s.href=t,s}const br=URL;let Ue;function ca(){if(Ue===void 0)try{Ue=new br("http://test/path").href==="http://test/path"}catch{Ue=!1}return Ue?br:void 0}const ws="datad0g.com",ua="dd0g-gov.com",Lt="datadoghq.com",la="datadoghq.eu",da="ddog-gov.com",fa="pci.browser-intake-datadoghq.com",pa=["ddsource","ddtags"];function Xt(t,e,n){const r=ha(t,e);return{build(s,o){const i=ma(t,e,n,s,o);return r(i)},tags:n,urlPrefix:r(""),trackType:e}}function ha(t,e){const n=`/api/v2/${e}`,r=t.proxy;if(typeof r=="string"){const o=Wn(r);return i=>`${o}?ddforward=${encodeURIComponent(`${n}?${i}`)}`}if(typeof r=="function")return o=>r({path:n,parameters:o});const s=Ts(e,t);return o=>`https://${s}${n}?${o}`}function Ts(t,e){const{site:n=Lt,internalAnalyticsSubdomain:r}=e;if(t==="logs"&&e.usePciIntake&&n===Lt)return fa;if(r&&n===Lt)return`${r}.${Lt}`;if(n===ua)return`http-intake.logs.${n}`;const s=n.split("."),o=s.pop();return`browser-intake-${s.join("-")}.${o}`}function ma({clientToken:t,internalAnalyticsSubdomain:e},n,r,s,{retry:o,encoding:i}){const a=["sdk_version:6.6.3",`api:${s}`].concat(r);o&&a.push(`retry_count:${o.count}`,`retry_after:${o.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("6.6.3")}`,"dd-evp-origin=browser",`dd-request-id=${B()}`];return i&&c.push(`dd-evp-encoding=${i}`),n==="rum"&&c.push(`batch_time=${V()}`),e&&c.reverse(),c.join("&")}const ga=200;function _a(t){const{env:e,service:n,version:r,datacenter:s}=t,o=[];return e&&o.push(Ve("env",e)),n&&o.push(Ve("service",n)),r&&o.push(Ve("version",r)),s&&o.push(Ve("datacenter",s)),o}function Ve(t,e){const n=ga-t.length-1;(e.length>n||ba(e))&&C.warn(`${t} value doesn't meet tag requirements and will be sanitized. ${Bn} ${Qe}/getting_started/tagging/#defining-tags`);const r=e.replace(/,/g,"_");return`${t}:${r}`}function ba(t){return ya()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t):!1}function ya(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}function va(t){const e=t.site||Lt,n=_a(t),r=Sa(t,n);return{replica:Ea(t,n),site:e,...r}}function Sa(t,e){return{logsEndpointBuilder:Xt(t,"logs",e),rumEndpointBuilder:Xt(t,"rum",e),profilingEndpointBuilder:Xt(t,"profile",e),sessionReplayEndpointBuilder:Xt(t,"replay",e)}}function Ea(t,e){if(!t.replica)return;const n={...t,site:Lt,clientToken:t.replica.clientToken},r={logsEndpointBuilder:Xt(n,"logs",e),rumEndpointBuilder:Xt(n,"rum",e)};return{applicationId:t.replica.applicationId,...r}}function wa(t){return pa.every(e=>t.includes(e))}const ve={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Pn={ALL:"all",SAMPLED:"sampled"};function mn(t,e){return t!=null&&typeof t!="string"?(C.error(`${e} must be defined as a string`),!1):!0}function Ta(t){return t&&typeof t=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(t)?(C.error(`Site should be a valid Datadog site. ${Bn} ${Qe}/getting_started/site/.`),!1):!0}function Jt(t,e){return t!==void 0&&!_i(t)?(C.error(`${e} Sample Rate should be a number between 0 and 100`),!1):!0}function Ia(t){var e,n,r,s,o,i;if(!t||!t.clientToken){C.error("Client Token is not configured, we will not send any data.");return}if(!(!Ta(t.site)||!Jt(t.sessionSampleRate,"Session")||!Jt(t.telemetrySampleRate,"Telemetry")||!Jt(t.telemetryConfigurationSampleRate,"Telemetry Configuration")||!Jt(t.telemetryUsageSampleRate,"Telemetry Usage")||!mn(t.version,"Version")||!mn(t.env,"Env")||!mn(t.service,"Service"))){if(t.trackingConsent!==void 0&&!We(Mn,t.trackingConsent)){C.error('Tracking Consent should be either "granted" or "not-granted"');return}return{beforeSend:t.beforeSend&&ss(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:ra(t),sessionSampleRate:(e=t.sessionSampleRate)!==null&&e!==void 0?e:100,telemetrySampleRate:(n=t.telemetrySampleRate)!==null&&n!==void 0?n:20,telemetryConfigurationSampleRate:(r=t.telemetryConfigurationSampleRate)!==null&&r!==void 0?r:5,telemetryUsageSampleRate:(s=t.telemetryUsageSampleRate)!==null&&s!==void 0?s:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:(o=t.trackingConsent)!==null&&o!==void 0?o:Mn.GRANTED,trackAnonymousUser:(i=t.trackAnonymousUser)!==null&&i!==void 0?i:!0,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16*Ee,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*G,batchMessagesLimit:50,messageBytesLimit:256*Ee,...va(t)}}}function Aa(t){return{session_sample_rate:t.sessionSampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:t.telemetryUsageSampleRate,use_before_send:!!t.beforeSend,use_partitioned_cross_site_session_cookie:t.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:!!t.proxy,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_anonymous_user:t.trackAnonymousUser,session_persistence:t.sessionPersistence,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages,allow_untrusted_events:!!t.allowUntrustedEvents,tracking_consent:t.trackingConsent}}var Dt;(function(t){t.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",t.MISSING_URL_CONTEXT_TELEMETRY="missing_url_context_telemetry",t.USER_ACCOUNT_TRACE_HEADER="user_account_trace_header",t.PROFILING="profiling"})(Dt||(Dt={}));const qn=new Set;function Ca(t){Array.isArray(t)&&Ra(t.filter(e=>We(Dt,e)))}function Ra(t){t.forEach(e=>{qn.add(e)})}function Xe(t){return qn.has(t)}function ka(){return qn}const Ne="?";function Ct(t){const e=[];let n=gn(t,"stack");const r=String(t);return n&&n.startsWith(r)&&(n=n.slice(r.length)),n&&n.split(`
`).forEach(s=>{const o=Na(s)||Ma(s)||Da(s)||Fa(s);o&&(!o.func&&o.line&&(o.func=Ne),e.push(o))}),{message:gn(t,"message"),name:gn(t,"name"),stack:e}}const Is="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",ee="(?::(\\d+))",xa=new RegExp(`^\\s*at (.*?) ?\\(${Is}${ee}?${ee}?\\)?\\s*$`,"i"),Oa=new RegExp(`\\((\\S*)${ee}${ee}\\)`);function Na(t){const e=xa.exec(t);if(!e)return;const n=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,s=Oa.exec(e[2]);return r&&s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3]),{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||Ne,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}const La=new RegExp(`^\\s*at ?${Is}${ee}?${ee}??\\s*$`,"i");function Ma(t){const e=La.exec(t);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:Ne,line:e[2]?+e[2]:void 0,url:e[1]}}const Pa=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Da(t){const e=Pa.exec(t);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||Ne,line:+e[3],url:e[2]}}const Ua=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Va=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Fa(t){const e=Ua.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,r=Va.exec(e[3]);return n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||Ne,line:e[4]?+e[4]:void 0,url:e[3]}}function gn(t,e){if(typeof t!="object"||!t||!(e in t))return;const n=t[e];return typeof n=="string"?n:void 0}function za(t,e,n,r){const s=[{url:e,column:r,line:n}],{name:o,message:i}=$a(t);return{name:o,message:i,stack:s}}const Ba=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function $a(t){let e,n;return{}.toString.call(t)==="[object String]"&&([,e,n]=Ba.exec(t)),{name:e,message:n}}function Ae(t){const n=new Error(t);n.name="HandlingStack";let r;return It(()=>{const s=Ct(n);s.stack=s.stack.slice(2),r=ae(s)}),r}function ae(t){let e=As(t);return t.stack.forEach(n=>{const r=n.func==="?"?"<anonymous>":n.func,s=n.args&&n.args.length>0?`(${n.args.join(", ")})`:"",o=n.line?`:${n.line}`:"",i=n.line&&n.column?`:${n.column}`:"";e+=`
  at ${r}${s} @ ${n.url}${o}${i}`}),e}function As(t){return`${t.name||"Error"}: ${t.message}`}function K(t,e,n,{computeHandlingStack:r}={}){let s=t[e];if(typeof s!="function")if(e in t&&e.startsWith("on"))s=A;else return{stop:A};let o=!1;const i=function(){if(o)return s.apply(this,arguments);const a=Array.from(arguments);let c;It(n,null,[{target:this,parameters:a,onPostCall:u=>{c=u},handlingStack:r?Ae("instrumented method"):void 0}]);const l=s.apply(this,a);return c&&It(c,null,[l]),l};return t[e]=i,{stop:()=>{o=!0,t[e]===i&&(t[e]=s)}}}function me(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set||!r.configurable)return{stop:A};const s=A;let o=(a,c)=>{U(()=>{o!==s&&n(a,c)},0)};const i=function(a){r.set.call(this,a),o(this,a)};return Object.defineProperty(t,e,{set:i}),{stop:()=>{var a;((a=Object.getOwnPropertyDescriptor(t,e))===null||a===void 0?void 0:a.set)===i&&Object.defineProperty(t,e,r),o=s}}}const Ga=220*Ee,Ha="$",ja=3;function L(t,e=Ga){const n=Kt(Object.prototype),r=Kt(Array.prototype),s=[],o=new WeakMap,i=_n(t,Ha,void 0,s,o),a=JSON.stringify(i);let c=a?a.length:0;if(c>e){bn(e,"discarded",t);return}for(;s.length>0&&c<e;){const l=s.shift();let u=0;if(Array.isArray(l.source))for(let d=0;d<l.source.length;d++){const f=_n(l.source[d],l.path,d,s,o);if(f!==void 0?c+=JSON.stringify(f).length:c+=4,c+=u,u=1,c>e){bn(e,"truncated",t);break}l.target[d]=f}else for(const d in l.source)if(Object.prototype.hasOwnProperty.call(l.source,d)){const f=_n(l.source[d],l.path,d,s,o);if(f!==void 0&&(c+=JSON.stringify(f).length+u+d.length+ja,u=1),c>e){bn(e,"truncated",t);break}l.target[d]=f}}return n(),r(),i}function _n(t,e,n,r,s){const o=qa(t);if(!o||typeof o!="object")return Ya(o);const i=Dn(o);if(i!=="[Object]"&&i!=="[Array]"&&i!=="[Error]")return i;const a=t;if(s.has(a))return`[Reference seen at ${s.get(a)}]`;const c=n!==void 0?`${e}.${n}`:e,l=Array.isArray(o)?[]:{};return s.set(a,c),r.push({source:o,target:l,path:c}),l}function Ya(t){return typeof t=="bigint"?`[BigInt] ${t.toString()}`:typeof t=="function"?`[Function] ${t.name||"unknown"}`:typeof t=="symbol"?`[Symbol] ${t.description||t.toString()}`:t}function Dn(t){try{if(t instanceof Event)return Wa(t);if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;const n=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch{}return"[Unserializable]"}function Wa(t){return{type:t.type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?Dn(t.currentTarget):null,target:t.target?Dn(t.target):null}}function qa(t){const e=t;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return t}function bn(t,e,n){C.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}const Cs="No stack, consider using an instance of Error";function Rs({stackTrace:t,originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:o,source:i,handling:a}){const c=Rt(e),l=Ka(t,c,o,e),u=Xa(c,t)?ae(t):Cs,d=c?Os(e,i):void 0,f=t?t.name:void 0,p=ks(e),h=xs(e);return{startClocks:s,source:i,handling:a,handlingStack:n,componentStack:r,originalError:e,type:f,message:l,stack:u,causes:d,fingerprint:p,context:h}}function Ka(t,e,n,r){return t!=null&&t.message&&(t!=null&&t.name)?t.message:e?"Empty message":`${n} ${ie(L(r))}`}function Xa(t,e){return e===void 0?!1:t?!0:e.stack.length>0&&(e.stack.length>1||e.stack[0].url!==void 0)}function ks(t){return Rt(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function xs(t){if(t!==null&&typeof t=="object"&&"dd_context"in t)return t.dd_context}function Rt(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}function Os(t,e){let n=t;const r=[];for(;Rt(n==null?void 0:n.cause)&&r.length<10;){const s=Ct(n.cause);r.push({message:n.cause.message,source:e,type:s==null?void 0:s.name,stack:s&&ae(s)}),n=n.cause}return r.length?r:void 0}const ce={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Ja(t){const e=(s,o)=>{const i=Rs({stackTrace:s,originalError:o,startClocks:$(),nonErrorPrefix:"Uncaught",source:ce.SOURCE,handling:"unhandled"});t.notify(i)},{stop:n}=Za(e),{stop:r}=Qa(e);return{stop:()=>{n(),r()}}}function Za(t){return K(window,"onerror",({parameters:[e,n,r,s,o]})=>{let i;Rt(o)?i=Ct(o):i=za(e,n,r,s),t(i,o??e)})}function Qa(t){return K(window,"onunhandledrejection",({parameters:[e]})=>{const n=e.reason||"Empty reason",r=Ct(n);t(r,n)})}function tc(t){const e={version:"6.6.3",onReady(n){n()},...t};return Object.defineProperty(e,"_setDebug",{get(){return Ri},enumerable:!1}),e}function ec(t,e,n){const r=t[e];r&&!r.q&&r.version&&C.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach(s=>ss(s,"onReady callback threw an error:")())}function Ns(t,e){e.silentMultipleInit||C.error(`${t} is already initialized.`)}function N(t,e,n,r,s){return X(t,e,[n],r,s)}function X(t,e,n,r,{once:s,capture:o,passive:i}={}){const a=E(f=>{!f.isTrusted&&!f.__ddIsTrusted&&!t.allowUntrustedEvents||(s&&d(),r(f))}),c=i?{capture:o,passive:i}:o,l=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,u=Tt(l,"addEventListener");n.forEach(f=>u.call(e,f,a,c));function d(){const f=Tt(l,"removeEventListener");n.forEach(p=>f.call(e,p,a,c))}return{stop:d}}const Ce={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function nc(t,e){const n=[];e.includes(Ce.cspViolation)&&n.push(sc(t));const r=e.filter(s=>s!==Ce.cspViolation);return r.length&&n.push(rc(r)),ds(...n)}function rc(t){return new k(e=>{if(!window.ReportingObserver)return;const n=E((s,o)=>s.forEach(i=>e.notify(oc(i)))),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),()=>{r.disconnect()}})}function sc(t){return new k(e=>{const{stop:n}=N(t,document,"securitypolicyviolation",r=>{e.notify(ic(r))});return n})}function oc(t){const{type:e,body:n}=t;return Ls({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:Ms(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function ic(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return Ls({type:t.effectiveDirective,message:`${Ce.cspViolation}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:Ms(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${fs(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}function Ls(t){return{startClocks:$(),source:ce.REPORT,handling:"unhandled",...t}}function Ms(t,e,n,r,s){return n?ae({name:t,message:e,stack:[{func:"?",url:n,line:r??void 0,column:s??void 0}]}):void 0}function Kn(t,e){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function zt(t){return t===null?"null":Array.isArray(t)?"array":typeof t}function Je(t,e,n=ac()){if(e===void 0)return t;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const s=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,s)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const s=Array.isArray(t)?t:[];for(let o=0;o<e.length;++o)s[o]=Je(s[o],e[o],n);return s}const r=zt(t)==="object"?t:{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Je(r[s],e[s],n));return r}function Xn(t){return Je(void 0,t)}function ct(...t){let e;for(const n of t)n!=null&&(e=Je(e,n));return e}function ac(){if(typeof WeakSet<"u"){const e=new WeakSet;return{hasAlreadyBeenSeen(n){const r=e.has(n);return r||e.add(n),r}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}function Ps(){var t;const e=window.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:(t=e.connection)===null||t===void 0?void 0:t.effectiveType}}function Ds(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}const cc=500;function Us(){const t=[];return{add:s=>{t.push(s)>cc&&t.splice(0,1)},remove:s=>{Ds(t,s)},drain:s=>{t.forEach(o=>o(s)),t.length=0}}}const Pt={log:"log",configuration:"configuration",usage:"usage"},uc=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],lc=[da];let Vs=Us(),ue=t=>{Vs.add(()=>ue(t))};function dc(t,e){let n;const r=new k,s=new Set,o=!lc.includes(e.site)&&wt(e.telemetrySampleRate),i={[Pt.log]:o,[Pt.configuration]:o&&wt(e.telemetryConfigurationSampleRate),[Pt.usage]:o&&wt(e.telemetryUsageSampleRate)},a=fc();ue=l=>{const u=ie(l);if(i[l.type]&&s.size<e.maxTelemetryEventsPerPage&&!s.has(u)){const d=c(t,l,a);r.notify(d),Kn("telemetry",d),s.add(u)}},Ci(Jn);function c(l,u,d){return ct({type:"telemetry",date:V(),service:l,version:"6.6.3",source:"browser",_dd:{format_version:2},telemetry:ct(u,{runtime_env:d,connectivity:Ps(),sdk_setup:"npm"}),experimental_features:Array.from(ka())},n!==void 0?n():{})}return{setContextProvider:l=>{n=l},observable:r,enabled:o}}function fc(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function pc(){Vs.drain()}function hc(t){return t.site===ws}function vt(t,e){Ln(Ze.debug,t,e),ue({type:Pt.log,message:t,status:"debug",...e})}function Jn(t,e){ue({type:Pt.log,status:"error",...gc(t),...e})}function mc(t){ue({type:Pt.configuration,configuration:t})}function H(t){ue({type:Pt.usage,usage:t})}function gc(t){if(Rt(t)){const e=Ct(t);return{error:{kind:e.name,stack:ae(_c(e))},message:e.message}}return{error:{stack:Cs},message:`Uncaught ${ie(t)}`}}function _c(t){return t.stack=t.stack.filter(e=>!e.url||uc.some(n=>e.url.startsWith(n))),t}const ge=1/0,bc=J;let _e=null;const Ge=new Set;function yc(){Ge.forEach(t=>t())}function le({expireDelay:t,maxEntries:e}){let n=[];const r=[];_e||(_e=se(()=>yc(),bc));const s=()=>{const p=ot()-t;for(;n.length>0&&n[n.length-1].endTime<p;){const h=n.pop();h&&r.push(h.startTime)}};Ge.add(s);function o(p,h){const m={value:p,startTime:h,endTime:ge,remove:()=>{Ds(n,m)},close:y=>{m.endTime=y}};return e&&n.length>=e&&n.pop(),n.unshift(m),m}function i(p=ge,h={returnInactive:!1}){for(const m of n)if(m.startTime<=p){if(h.returnInactive||p<=m.endTime)return m.value;break}}function a(p){const h=n[0];h&&h.endTime===ge&&h.close(p)}function c(p=ge,h=0){const m=re(p,h);return n.filter(y=>y.startTime<=m&&p<=y.endTime).map(y=>y.value)}function l(){return n.map(({startTime:p,endTime:h,value:m})=>({startTime:p,endTime:h===ge?"Infinity":h,value:m}))}function u(){return r}function d(){n=[]}function f(){Ge.delete(s),Ge.size===0&&_e&&(en(_e),_e=null)}return{add:o,find:i,closeActive:a,findAll:c,reset:d,stop:f,getAllEntries:l,getDeletedEntries:u}}const vc=J,Sc=Ft;function Ec(t,e,n,r){const s=new k,o=new k,i=sa(t.sessionStoreStrategyType,t,e,n),a=le({expireDelay:Sc});i.renewObservable.subscribe(()=>{a.add(c(),ot()),s.notify()}),i.expireObservable.subscribe(()=>{o.notify(),a.closeActive(ot())}),i.expandOrRenewSession(),a.add(c(),as().relative),r.observable.subscribe(()=>{r.isGranted()?i.expandOrRenewSession():i.expire()}),wc(t,()=>{r.isGranted()&&i.expandOrRenewSession()}),Tc(t,()=>i.expandSession()),Ic(t,()=>i.restartSession());function c(){return{id:i.getSession().id,trackingType:i.getSession()[e],isReplayForced:!!i.getSession().forcedReplay,anonymousId:i.getSession().anonymousId}}return{findSession:(l,u)=>a.find(l,u),renewObservable:s,expireObservable:o,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function wc(t,e){X(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0})}function Tc(t,e){const n=()=>{document.visibilityState==="visible"&&e()};N(t,document,"visibilitychange",n),se(n,vc)}function Ic(t,e){N(t,window,"resume",e,{capture:!0})}function Ac(t){return t>=500}function Cc(t){try{return t.clone()}catch{return}}const Rc=80*Ee,kc=32,Fs=3*cs,xc=J,zs=G;function Bs(t,e,n,r,s){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(t)?Gs(t,e,n,{onSuccess:()=>Hs(0,e,n,r,s),onFailure:()=>{e.queuedPayloads.enqueue(t),$s(e,n,r,s)}}):e.queuedPayloads.enqueue(t)}function $s(t,e,n,r){t.transportStatus===2&&U(()=>{const s=t.queuedPayloads.first();Gs(s,t,e,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=zs,Hs(1,t,e,n,r)},onFailure:()=>{t.currentBackoffTime=Math.min(xc,t.currentBackoffTime*2),$s(t,e,n,r)}})},t.currentBackoffTime)}function Gs(t,e,n,{onSuccess:r,onFailure:s}){e.bandwidthMonitor.add(t),n(t,o=>{e.bandwidthMonitor.remove(t),Oc(o)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:o.status},s()):(e.transportStatus=0,r())})}function Hs(t,e,n,r,s){t===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(s({message:`Reached max ${r} events size queued for upload: ${Fs/cs}MiB`,source:ce.AGENT,startClocks:$()}),e.queueFullReported=!0);const o=e.queuedPayloads;for(e.queuedPayloads=js();o.size()>0;)Bs(o.dequeue(),e,n,r,s)}function Oc(t){return t.type!=="opaque"&&(t.status===0&&!navigator.onLine||t.status===408||t.status===429||Ac(t.status))}function Nc(){return{transportStatus:0,currentBackoffTime:zs,bandwidthMonitor:Lc(),queuedPayloads:js(),queueFullReported:!1}}function js(){const t=[];return{bytesCount:0,enqueue(e){this.isFull()||(t.push(e),this.bytesCount+=e.bytesCount)},first(){return t[0]},dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size(){return t.length},isFull(){return this.bytesCount>=Fs}}}function Lc(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return this.ongoingRequestCount===0||this.ongoingByteCount+t.bytesCount<=Rc&&this.ongoingRequestCount<kc},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount}}}function Ys(t,e,n){const r=Nc(),s=(o,i)=>Dc(t,e,o,i);return{send:o=>{Bs(o,r,s,t.trackType,n)},sendOnExit:o=>{Mc(t,e,o)}}}function Mc(t,e,n){if(!!navigator.sendBeacon&&n.bytesCount<e)try{const s=t.build("beacon",n);if(navigator.sendBeacon(s,n.data))return}catch(s){Pc(s)}Un(t,n)}let yr=!1;function Pc(t){yr||(yr=!0,yt(t))}function Dc(t,e,n,r){if(Uc()&&n.bytesCount<e){const o=t.build("fetch-keepalive",n);fetch(o,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(E(i=>r==null?void 0:r({status:i.status,type:i.type}))).catch(E(()=>Un(t,n,r)))}else Un(t,n,r)}function Un(t,e,n){const r=t.build("fetch",e);fetch(r,{method:"POST",body:e.data,mode:"cors"}).then(E(s=>n==null?void 0:n({status:s.status,type:s.type}))).catch(E(()=>n==null?void 0:n({status:0})))}function Uc(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function de(){const t=Vc();if(t)return{getCapabilities(){var e;return JSON.parse(((e=t.getCapabilities)===null||e===void 0?void 0:e.call(t))||"[]")},getPrivacyLevel(){var e;return(e=t.getPrivacyLevel)===null||e===void 0?void 0:e.call(t)},getAllowedWebViewHosts(){return JSON.parse(t.getAllowedWebViewHosts())},send(e,n,r){const s=r?{id:r}:void 0;t.send(JSON.stringify({eventType:e,event:n,view:s}))}}}function Ws(t){const e=de();return!!e&&e.getCapabilities().includes(t)}function Ut(t){var e;t===void 0&&(t=(e=pt().location)===null||e===void 0?void 0:e.hostname);const n=de();return!!n&&n.getAllowedWebViewHosts().some(r=>t===r||t.endsWith(`.${r}`))}function Vc(){return pt().DatadogEventBridge}const Qt={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Fc(t){return new k(e=>{const{stop:n}=X(t,window,["visibilitychange","freeze"],s=>{s.type==="visibilitychange"&&document.visibilityState==="hidden"?e.notify({reason:Qt.HIDDEN}):s.type==="freeze"&&e.notify({reason:Qt.FROZEN})},{capture:!0}),r=N(t,window,"beforeunload",()=>{e.notify({reason:Qt.UNLOADING})}).stop;return()=>{n(),r()}})}function qs(t){return ms(Qt).includes(t)}function zc({encoder:t,request:e,flushController:n,messageBytesLimit:r}){let s={};const o=n.flushObservable.subscribe(d=>u(d));function i(d,f,p){n.notifyBeforeAddMessage(f),p!==void 0?(s[p]=d,n.notifyAfterAddMessage()):t.write(t.isEmpty?d:`
${d}`,h=>{n.notifyAfterAddMessage(h-f)})}function a(d){return d!==void 0&&s[d]!==void 0}function c(d){const f=s[d];delete s[d];const p=t.estimateEncodedBytesCount(f);n.notifyAfterRemoveMessage(p)}function l(d,f){const p=ie(d),h=t.estimateEncodedBytesCount(p);if(h>=r){C.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. ${Bn} ${gi}/#technical-limitations`);return}a(f)&&c(f),i(p,h,f)}function u(d){const f=ms(s).join(`
`);s={};const p=qs(d.reason),h=p?e.sendOnExit:e.send;if(p&&t.isAsync){const m=t.finishSync();m.outputBytesCount&&h(vr(m));const y=[m.pendingData,f].filter(Boolean).join(`
`);y&&h({data:y,bytesCount:us(y)})}else f&&t.write(t.isEmpty?f:`
${f}`),t.finish(m=>{h(vr(m))})}return{flushController:n,add:l,upsert:l,stop:o.unsubscribe}}function vr(t){let e;return typeof t.output=="string"?e=t.output:e=new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}function Bc({messagesLimit:t,bytesLimit:e,durationLimit:n,pageMayExitObservable:r,sessionExpireObservable:s}){const o=r.subscribe(h=>u(h.reason)),i=s.subscribe(()=>u("session_expire")),a=new k(()=>()=>{o.unsubscribe(),i.unsubscribe()});let c=0,l=0;function u(h){if(l===0)return;const m=l,y=c;l=0,c=0,p(),a.notify({reason:h,messagesCount:m,bytesCount:y})}let d;function f(){d===void 0&&(d=U(()=>{u("duration_limit")},n))}function p(){W(d),d=void 0}return{flushObservable:a,get messagesCount(){return l},notifyBeforeAddMessage(h){c+h>=e&&u("bytes_limit"),l+=1,c+=h,f()},notifyAfterAddMessage(h=0){c+=h,l>=t?u("messages_limit"):c>=e&&u("bytes_limit")},notifyAfterRemoveMessage(h){c-=h,l-=1,l===0&&p()}}}function $c(t,e,n,r,s,o,i=zc){const a=l(t,e),c=n&&l(t,n);function l(u,{endpoint:d,encoder:f}){return i({encoder:f,request:Ys(d,u.batchBytesLimit,r),flushController:Bc({messagesLimit:u.batchMessagesLimit,bytesLimit:u.batchBytesLimit,durationLimit:u.flushTimeout,pageMayExitObservable:s,sessionExpireObservable:o}),messageBytesLimit:u.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(u,d=!0){a.add(u),c&&d&&c.add(n.transformMessage?n.transformMessage(u):u)},upsert:(u,d)=>{a.upsert(u,d),c&&c.upsert(n.transformMessage?n.transformMessage(u):u,d)},stop:()=>{a.stop(),c&&c.stop()}}}function Gc(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,r){const s=us(n);e+=s,t+=n,r&&r(s)},finish(n){n(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount(n){return n.length}}}class Hc{constructor(){this.callbacks={}}notify(e,n){const r=this.callbacks[e];r&&r.forEach(s=>s(n))}subscribe(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(r=>n!==r)}}}}function yn(t,e,n){let r=0,s=!1;return{isLimitReached(){if(r===0&&U(()=>{r=0},J),r+=1,r<=e||s)return s=!1,!1;if(r===e+1){s=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:ce.AGENT,startClocks:$()})}finally{s=!1}}return!0}}}function Zn(t,e,n){return document.readyState===e||document.readyState==="complete"?(n(),{stop:A}):N(t,window,e==="complete"?"load":"DOMContentLoaded",n,{once:!0})}function jc(t,e){return new Promise(n=>{Zn(t,e,n)})}let vn;const Qn=new WeakMap;function Yc(t){return vn||(vn=Wc(t)),vn}function Wc(t){return new k(e=>{const{stop:n}=K(XMLHttpRequest.prototype,"open",qc),{stop:r}=K(XMLHttpRequest.prototype,"send",o=>{Kc(o,t,e)},{computeHandlingStack:!0}),{stop:s}=K(XMLHttpRequest.prototype,"abort",Xc);return()=>{n(),r(),s()}})}function qc({target:t,parameters:[e,n]}){Qn.set(t,{state:"open",method:String(e).toUpperCase(),url:Wn(String(n))})}function Kc({target:t,handlingStack:e},n,r){const s=Qn.get(t);if(!s)return;const o=s;o.state="start",o.startClocks=$(),o.isAborted=!1,o.xhr=t,o.handlingStack=e;let i=!1;const{stop:a}=K(t,"onreadystatechange",()=>{t.readyState===XMLHttpRequest.DONE&&c()}),c=()=>{if(l(),a(),i)return;i=!0;const u=s;u.state="complete",u.duration=z(o.startClocks.timeStamp,V()),u.status=t.status,r.notify(we(u))},{stop:l}=N(n,t,"loadend",c);r.notify(o)}function Xc({target:t}){const e=Qn.get(t);e&&(e.isAborted=!0)}let Sn;function Ks(){return Sn||(Sn=Jc()),Sn}function Jc(){return new k(t=>{if(!window.fetch)return;const{stop:e}=K(window,"fetch",n=>Zc(n,t),{computeHandlingStack:!0});return e})}function Zc({parameters:t,onPostCall:e,handlingStack:n},r){const[s,o]=t;let i=o&&o.method;i===void 0&&s instanceof Request&&(i=s.method);const a=i!==void 0?String(i).toUpperCase():"GET",c=s instanceof Request?s.url:Wn(String(s)),l=$(),u={state:"start",init:o,input:s,method:a,startClocks:l,url:c,handlingStack:n};r.notify(u),t[0]=u.input,t[1]=u.init,e(d=>Qc(r,d,u))}function Qc(t,e,n){const r=n;function s(o){r.state="resolve",Object.assign(r,o),t.notify(r)}e.then(E(o=>{s({response:o,responseType:o.type,status:o.status,isAborted:!1})}),E(o=>{var i,a;s({status:0,isAborted:((a=(i=r.init)===null||i===void 0?void 0:i.signal)===null||a===void 0?void 0:a.aborted)||o instanceof DOMException&&o.code===DOMException.ABORT_ERR,error:o})}))}function Xs(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(E(t),e);return()=>window.cancelIdleCallback(n)}return eu(t)}const tu=50;function eu(t){const e=st(),n=U(()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,tu-(st()-e))})},0);return()=>W(n)}const nu=G,ru=30;function su(){const t=[];function e(r){let s;if(r.didTimeout){const o=performance.now();s=()=>ru-(performance.now()-o)}else s=r.timeRemaining.bind(r);for(;s()>0&&t.length;)t.shift()();t.length&&n()}function n(){Xs(e,{timeout:nu})}return{push(r){t.push(r)===1&&n()}}}let En={};function ou(t){const e=t.map(n=>(En[n]||(En[n]=iu(n)),En[n]));return ds(...e)}function iu(t){return new k(e=>{const n=bt[t];return bt[t]=(...r)=>{n.apply(console,r);const s=Ae("console error");It(()=>{e.notify(au(r,t,s))})},()=>{bt[t]=n}})}function au(t,e,n){const r=t.map(o=>cu(o)).join(" ");let s;if(e===Ze.error){const o=t.find(Rt);s={stack:o?ae(Ct(o)):void 0,fingerprint:ks(o),causes:o?Os(o,"console"):void 0,startClocks:$(),message:r,source:ce.CONSOLE,handling:"handled",handlingStack:n,context:xs(o),originalError:o}}return{api:e,message:r,error:s,handlingStack:n}}function cu(t){return typeof t=="string"?L(t):Rt(t)?As(Ct(t)):ie(L(t),void 0,2)}function uu(t){const e=zt(t)==="object";return e||C.error("Unsupported context:",t),e}function wn(t,e,n){const r={...t};for(const[s,{required:o,type:i}]of Object.entries(e))i==="string"&&s in r&&(r[s]=String(r[s])),o&&!(s in t)&&C.warn(`The property ${s} of ${n} is required; context will not be sent to the intake.`);return r}function rn(t="",{propertiesConfig:e={}}={}){let n={};const r=new k,s={getContext:()=>Xn(n),setContext:o=>{uu(o)?n=L(wn(o,e,t)):s.clearContext(),r.notify()},setContextProperty:(o,i)=>{n=L(wn({...n,[o]:i},e,t)),r.notify()},removeContextProperty:o=>{delete n[o],wn(n,e,t),r.notify()},clearContext:()=>{n={},r.notify()},changeObservable:r};return s}const lu="_dd_c",du=[];function tr(t,e,n,r){const s=fu(n,r);du.push(N(t,window,"storage",({key:l})=>{s===l&&i()})),e.changeObservable.subscribe(a);const o=ct(c(),e.getContext());Mt(o)||e.setContext(o);function i(){e.setContext(c())}function a(){localStorage.setItem(s,JSON.stringify(e.getContext()))}function c(){const l=localStorage.getItem(s);return l?JSON.parse(l):{}}}function fu(t,e){return`${lu}_${t}_${e}`}const D={userContext:"userContext",globalContext:"globalContext",accountContext:"accountContext"},j={getContext:"getContext",setContext:"setContext",setContextProperty:"setContextProperty",removeContextProperty:"removeContextProperty",clearContext:"clearContext"};function pu(t,e,n){const r=t.getReader(),s=[];let o=0;i();function i(){r.read().then(E(c=>{if(c.done){a();return}n.collectStreamBody&&s.push(c.value),o+=c.value.length,o>n.bytesLimit?a():i()}),E(c=>e(c)))}function a(){r.cancel().catch(A);let c,l;if(n.collectStreamBody){let u;if(s.length===1)u=s[0];else{u=new Uint8Array(o);let d=0;s.forEach(f=>{u.set(f,d),d+=f.length})}c=u.slice(0,n.bytesLimit),l=u.length>n.bytesLimit}e(void 0,c,l)}}const hu="datadog-synthetics-public-id",mu="datadog-synthetics-result-id",gu="datadog-synthetics-injects-rum";function Js(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||St(gu))}function _u(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||St(hu);return typeof t=="string"?t:void 0}function bu(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||St(mu);return typeof t=="string"?t:void 0}function er(t){const e=zt(t);return e==="string"||e==="function"||t instanceof RegExp}function Zs(t,e,n=!1){return t.some(r=>{try{if(typeof r=="function")return r(e);if(r instanceof RegExp)return r.test(e);if(typeof r=="string")return n?e.startsWith(r):r===e}catch(s){C.error(s)}return!1})}function yu(){return{vitalsByName:new Map,vitalsByReference:new WeakMap}}function vu(t,e,n){function r(o){return!e.wasInPageStateDuringPeriod("frozen",o.startClocks.relative,o.duration)}function s(o){r(o)&&t.notify(12,Eu(o,!0))}return{addDurationVital:s,startDurationVital:(o,i={})=>Qs(n,o,i),stopDurationVital:(o,i={})=>{to(s,n,o,i)}}}function Qs({vitalsByName:t,vitalsByReference:e},n,r={}){const s={name:n,startClocks:$(),context:r.context,description:r.description},o={__dd_vital_reference:!0};return t.set(n,s),e.set(o,s),o}function to(t,{vitalsByName:e,vitalsByReference:n},r,s={}){const o=typeof r=="string"?e.get(r):n.get(r);o&&(t(Su(o,o.startClocks,s,$())),typeof r=="string"?e.delete(r):n.delete(r))}function Su(t,e,n,r){var s;return{name:t.name,type:"duration",startClocks:e,duration:z(e.timeStamp,r.timeStamp),context:ct(t.context,n.context),description:(s=n.description)!==null&&s!==void 0?s:t.description}}function Eu(t,e){const n={date:t.startClocks.timeStamp,vital:{id:B(),type:t.type,name:t.name,duration:S(t.duration),description:t.description},type:"vital"};return e&&(n._dd={vital:{computed_value:!0}}),{rawRumEvent:n,startTime:t.startClocks.relative,duration:t.duration,customerContext:t.context,domainContext:{}}}function eo(t,e,n){if(t)for(const r of t){const s=r[e];s&&s(n)}}function wu(){return ro(64)}function no(){return ro(63)}function ro(t){const e=crypto.getRandomValues(new Uint32Array(2));return t===63&&(e[e.length-1]>>>=1),{toString(n=10){let r=e[1],s=e[0],o="";do{const i=r%n*4294967296+s;r=Math.floor(r/n),s=Math.floor(i/n),o=(i%n).toString(n)+o}while(r||s);return o}}}function jt(t){return t.toString(16).padStart(16,"0")}let Fe;function Tu(t,e){if(e===100)return!0;if(e===0)return!1;if(Fe&&t===Fe.sessionId)return Fe.decision;let n;return window.BigInt?n=Iu(BigInt(`0x${t.split("-")[4]}`),e):n=wt(e),Fe={sessionId:t,decision:n},n}function Iu(t,e){const n=BigInt("1111111111111111111"),r=BigInt("0x10000000000000000"),s=t*n%r;return Number(s)<=e/100*Number(r)}function Au(t){const e=t;return zt(e)==="object"&&er(e.match)&&Array.isArray(e.propagatorTypes)}function Cu(t){t.status===0&&!t.isAborted&&(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function Ru(t,e,n){return{clearTracingIfNeeded:Cu,traceFetch:r=>Sr(t,r,e,n,s=>{var o;if(r.input instanceof Request&&!(!((o=r.init)===null||o===void 0)&&o.headers))r.input=new Request(r.input),Object.keys(s).forEach(i=>{r.input.headers.append(i,s[i])});else{r.init=we(r.init);const i=[];r.init.headers instanceof Headers?r.init.headers.forEach((a,c)=>{i.push([c,a])}):Array.isArray(r.init.headers)?r.init.headers.forEach(a=>{i.push(a)}):r.init.headers&&Object.keys(r.init.headers).forEach(a=>{i.push([a,r.init.headers[a]])}),r.init.headers=i.concat(Hn(s))}}),traceXhr:(r,s)=>Sr(t,r,e,n,o=>{Object.keys(o).forEach(i=>{s.setRequestHeader(i,o[i])})})}}function Sr(t,e,n,r,s){const o=n.findTrackedSession();if(!o)return;const i=t.allowedTracingUrls.find(l=>Zs([l.match],e.url,!0));if(!i)return;const a=Tu(o.id,t.traceSampleRate);(a||t.traceContextInjection===Pn.ALL)&&(e.traceSampled=a,e.traceId=wu(),e.spanId=no(),s(ku(e.traceId,e.spanId,e.traceSampled,i.propagatorTypes,r,t)))}function ku(t,e,n,r,s,o){const i={};if(r.forEach(a=>{switch(a){case"datadog":{Object.assign(i,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toString(),"x-datadog-sampling-priority":n?"1":"0","x-datadog-trace-id":t.toString()});break}case"tracecontext":{Object.assign(i,{traceparent:`00-0000000000000000${jt(t)}-${jt(e)}-0${n?"1":"0"}`,tracestate:`dd=s:${n?"1":"0"};o:rum`});break}case"b3":{Object.assign(i,{b3:`${jt(t)}-${jt(e)}-${n?"1":"0"}`});break}case"b3multi":{Object.assign(i,{"X-B3-TraceId":jt(t),"X-B3-SpanId":jt(e),"X-B3-Sampled":n?"1":"0"});break}}}),Xe(Dt.USER_ACCOUNT_TRACE_HEADER)&&o.propagateTraceBaggage){const a=s().user.id,c=s().account.id,l=[];typeof a=="string"&&l.push(`usr.id=${encodeURIComponent(a)}`),typeof c=="string"&&l.push(`account.id=${encodeURIComponent(c)}`),l.length>0&&(i.baggage=l.join(","))}return i}const so=["tracecontext","datadog"];function xu(t){var e,n,r,s,o,i,a;if(t.trackFeatureFlagsForEvents!==void 0&&!Array.isArray(t.trackFeatureFlagsForEvents)&&C.warn("trackFeatureFlagsForEvents should be an array"),!t.applicationId){C.error("Application ID is not configured, no RUM data will be collected.");return}if(!Jt(t.sessionReplaySampleRate,"Session Replay")||!Jt(t.traceSampleRate,"Trace"))return;if(t.excludedActivityUrls!==void 0&&!Array.isArray(t.excludedActivityUrls)){C.error("Excluded Activity Urls should be an array");return}const c=Ou(t);if(!c)return;const l=Ia(t);if(!l)return;const u=Xe(Dt.PROFILING),d=(e=t.sessionReplaySampleRate)!==null&&e!==void 0?e:0;return{applicationId:t.applicationId,version:t.version||void 0,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:d,startSessionReplayRecordingManually:t.startSessionReplayRecordingManually!==void 0?!!t.startSessionReplayRecordingManually:d===0,traceSampleRate:(n=t.traceSampleRate)!==null&&n!==void 0?n:100,rulePsr:ke(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:c,excludedActivityUrls:(r=t.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!(!((s=t.trackUserInteractions)!==null&&s!==void 0)||s),trackViewsManually:!!t.trackViewsManually,trackResources:!!(!((o=t.trackResources)!==null&&o!==void 0)||o),trackLongTasks:!!(!((i=t.trackLongTasks)!==null&&i!==void 0)||i),subdomain:t.subdomain,defaultPrivacyLevel:We(ve,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:ve.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:We(Pn,t.traceContextInjection)?t.traceContextInjection:Pn.SAMPLED,plugins:t.plugins||[],trackFeatureFlagsForEvents:t.trackFeatureFlagsForEvents||[],profilingSampleRate:u&&(a=t.profilingSampleRate)!==null&&a!==void 0?a:0,propagateTraceBaggage:!!t.propagateTraceBaggage,...l}}function Ou(t){if(t.allowedTracingUrls===void 0)return[];if(!Array.isArray(t.allowedTracingUrls)){C.error("Allowed Tracing URLs should be an array");return}if(t.allowedTracingUrls.length!==0&&t.service===void 0){C.error("Service needs to be configured when tracing is enabled");return}const e=[];return t.allowedTracingUrls.forEach(n=>{er(n)?e.push({match:n,propagatorTypes:so}):Au(n)?e.push(n):C.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),e}function Nu(t){const e=new Set;return Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0&&t.allowedTracingUrls.forEach(n=>{er(n)?so.forEach(r=>e.add(r)):zt(n)==="object"&&Array.isArray(n.propagatorTypes)&&n.propagatorTypes.forEach(r=>e.add(r))}),Array.from(e)}function Lu(t){var e;const n=Aa(t);return{session_replay_sample_rate:t.sessionReplaySampleRate,start_session_replay_recording_manually:t.startSessionReplayRecordingManually,trace_sample_rate:t.traceSampleRate,trace_context_injection:t.traceContextInjection,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(t.allowedTracingUrls)&&t.allowedTracingUrls.length>0,selected_tracing_propagators:Nu(t),default_privacy_level:t.defaultPrivacyLevel,enable_privacy_for_action_name:t.enablePrivacyForActionName,use_excluded_activity_urls:Array.isArray(t.excludedActivityUrls)&&t.excludedActivityUrls.length>0,use_worker_url:!!t.workerUrl,compress_intake_requests:t.compressIntakeRequests,track_views_manually:t.trackViewsManually,track_user_interactions:t.trackUserInteractions,track_resources:t.trackResources,track_long_task:t.trackLongTasks,plugins:(e=t.plugins)===null||e===void 0?void 0:e.map(r=>{var s;return{name:r.name,...(s=r.getConfigurationTelemetry)===null||s===void 0?void 0:s.call(r)}}),track_feature_flags_for_events:t.trackFeatureFlagsForEvents,...n}}const Mu="v1";function Pu(t,e){Uu(t,n=>{e(Du(t,n))})}function Du(t,e){return{...t,...e}}function Uu(t,e){const n=new XMLHttpRequest;N(t,n,"load",function(){if(n.status===200){const r=JSON.parse(n.responseText);e(r.rum)}else Er()}),N(t,n,"error",function(){Er()}),n.open("GET",Vu(t)),n.send()}function Vu(t){return`https://sdk-configuration.${Ts("rum",t)}/${Mu}/${encodeURIComponent(t.remoteConfigurationId)}.json`}function Er(){C.error("Error fetching the remote configuration.")}function Fu(t){const e=oo();return t.storeContextsAcrossPages&&tr(t,e,"rum",2),e}function oo(){return rn("global context")}function zu(t){const e=io();return t.storeContextsAcrossPages&&tr(t,e,"rum",1),e}function io(){return rn("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}function Bu(t){const e=ao();return t.storeContextsAcrossPages&&tr(t,e,"rum",4),e}function ao(){return rn("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function $u({ignoreInitIfSyntheticsWillInjectRum:t,startDeflateWorker:e},n,r,s){const o=Us(),i=oo();Tn(i,D.globalContext,o);const a=io();Tn(a,D.userContext,o);const c=ao();Tn(c,D.accountContext,o);let l,u,d,f;const p=n.observable.subscribe(m),h={};function m(){if(!d||!f||!n.isGranted())return;p.unsubscribe();let g;if(f.trackViewsManually){if(!l)return;o.remove(l.callback),g=l.options}const _=s(f,u,g);o.drain(_)}function y(g){const _=Ut();if(_&&(g=Gu(g)),d=g,mc(Lu(g)),f){Ns("DD_RUM",g);return}const x=xu(g);if(x){if(!_&&!x.sessionStoreStrategyType){C.warn("No storage available for session. We will not send any data.");return}x.compressIntakeRequests&&!_&&e&&(u=e(x,"Datadog RUM",A),!u)||(f=x,Ks().subscribe(A),n.tryToInit(x.trackingConsent),m())}}const w=g=>{o.add(_=>_.addDurationVital(g))};return{init(g,_){if(!g){C.error("Missing configuration");return}Ca(g.enableExperimentalFeatures),d=g,!(t&&Js())&&(eo(g.plugins,"onInit",{initConfiguration:g,publicApi:_}),g.remoteConfigurationId?Pu(g,y):y(g))},get initConfiguration(){return d},getInternalContext:A,stopSession:A,addTiming(g,_=V()){o.add(x=>x.addTiming(g,_))},startView(g,_=$()){const x=Q=>{Q.startView(g,_)};o.add(x),l||(l={options:g,callback:x},m())},setViewName(g){o.add(_=>_.setViewName(g))},setViewContext(g){o.add(_=>_.setViewContext(g))},setViewContextProperty(g,_){o.add(x=>x.setViewContextProperty(g,_))},getViewContext:()=>h,globalContext:i,userContext:a,accountContext:c,addAction(g){o.add(_=>_.addAction(g))},addError(g){o.add(_=>_.addError(g))},addFeatureFlagEvaluation(g,_){o.add(x=>x.addFeatureFlagEvaluation(g,_))},startDurationVital(g,_){return Qs(r,g,_)},stopDurationVital(g,_){to(w,r,g,_)},addDurationVital:w}}function Gu(t){var e,n;return{...t,applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:(e=t.defaultPrivacyLevel)!==null&&e!==void 0?e:(n=de())===null||n===void 0?void 0:n.getPrivacyLevel()}}function Tn(t,e,n){t.changeObservable.subscribe(()=>{const r=t.getContext();n.add(s=>s[e].setContext(r))})}function Hu(t,e,n,r={}){const s=oa(),o=yu();let i=$u(r,s,o,(u,d,f)=>{const p=t(u,e,n,f,d&&r.createDeflateEncoder?h=>r.createDeflateEncoder(u,d,h):Gc,s,o);return e.onRumStart(p.lifeCycle,u,p.session,p.viewHistory,d),n.onRumStart(p.lifeCycle,u,p.session,p.viewHistory),i=ju(i,p),eo(u.plugins,"onRumStart",{strategy:i}),p});const a=E(u=>{const d=typeof u=="object"?u:{name:u};i.startView(d),H({feature:"start-view"})});function c(u,d,f){return E((...p)=>(H({feature:f}),i[u][d](...p)))}const l=tc({init:E(u=>{i.init(u,l)}),setTrackingConsent:E(u=>{s.update(u),H({feature:"set-tracking-consent",tracking_consent:u})}),setViewName:E(u=>{i.setViewName(u),H({feature:"set-view-name"})}),setViewContext:E(u=>{i.setViewContext(u),H({feature:"set-view-context"})}),setViewContextProperty:E((u,d)=>{i.setViewContextProperty(u,d),H({feature:"set-view-context-property"})}),getViewContext:E(()=>(H({feature:"set-view-context-property"}),i.getViewContext())),getInternalContext:E(u=>i.getInternalContext(u)),getInitConfiguration:E(()=>Xn(i.initConfiguration)),addAction:(u,d)=>{const f=Ae("action");It(()=>{i.addAction({name:L(u),context:L(d),startClocks:$(),type:"custom",handlingStack:f}),H({feature:"add-action"})})},addError:(u,d)=>{const f=Ae("error");It(()=>{i.addError({error:u,handlingStack:f,context:L(d),startClocks:$()}),H({feature:"add-error"})})},addTiming:E((u,d)=>{i.addTiming(L(u),d)}),setGlobalContext:c(D.globalContext,j.setContext,"set-global-context"),getGlobalContext:c(D.globalContext,j.getContext,"get-global-context"),setGlobalContextProperty:c(D.globalContext,j.setContextProperty,"set-global-context-property"),removeGlobalContextProperty:c(D.globalContext,j.removeContextProperty,"remove-global-context-property"),clearGlobalContext:c(D.globalContext,j.clearContext,"clear-global-context"),setUser:c(D.userContext,j.setContext,"set-user"),getUser:c(D.userContext,j.getContext,"get-user"),setUserProperty:c(D.userContext,j.setContextProperty,"set-user-property"),removeUserProperty:c(D.userContext,j.removeContextProperty,"remove-user-property"),clearUser:c(D.userContext,j.clearContext,"clear-user"),setAccount:c(D.accountContext,j.setContext,"set-account"),getAccount:c(D.accountContext,j.getContext,"get-account"),setAccountProperty:c(D.accountContext,j.setContextProperty,"set-account-property"),removeAccountProperty:c(D.accountContext,j.removeContextProperty,"remove-account-property"),clearAccount:c(D.accountContext,j.clearContext,"clear-account"),startView:a,stopSession:E(()=>{i.stopSession(),H({feature:"stop-session"})}),addFeatureFlagEvaluation:E((u,d)=>{i.addFeatureFlagEvaluation(L(u),L(d)),H({feature:"add-feature-flag-evaluation"})}),getSessionReplayLink:E(()=>e.getSessionReplayLink()),startSessionReplayRecording:E(u=>{e.start(u),H({feature:"start-session-replay-recording",force:u&&u.force})}),stopSessionReplayRecording:E(()=>e.stop()),addDurationVital:E((u,d)=>{H({feature:"add-duration-vital"}),i.addDurationVital({name:L(u),type:"duration",startClocks:yi(d.startTime),duration:d.duration,context:L(d&&d.context),description:L(d&&d.description)})}),startDurationVital:E((u,d)=>(H({feature:"start-duration-vital"}),i.startDurationVital(L(u),{context:L(d&&d.context),description:L(d&&d.description)}))),stopDurationVital:E((u,d)=>{H({feature:"stop-duration-vital"}),i.stopDurationVital(typeof u=="string"?L(u):u,{context:L(d&&d.context),description:L(d&&d.description)})})});return l}function ju(t,e){return{init:n=>{Ns("DD_RUM",n)},initConfiguration:t.initConfiguration,...e}}function Yu(){const t=co();return new k(e=>{if(!t)return;const n=new t(E(()=>e.notify()));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()})}function co(){let t;const e=window;if(e.Zone&&(t=Tt(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=new e.MutationObserver(A),r=Tt(n,"originalInstance");t=r&&r.constructor}return t||(t=e.MutationObserver),t}function Wu(){const t=new k,{stop:e}=K(window,"open",()=>t.notify());return{observable:t,stop:e}}function qu(t,e,n,r,s){return{get:o=>{const i=n.findView(o),a=s.findUrl(o),c=e.findTrackedSession(o);if(c&&i&&a){const l=r.findActionId(o);return{application_id:t,session_id:c.id,user_action:l?{id:l}:void 0,view:{id:i.id,name:i.name,referrer:a.referrer,url:a.url}}}}}}const Ku=Hc,Xu=Ft;function Ju(t){const e=le({expireDelay:Xu});t.subscribe(1,r=>{e.add(n(r),r.startClocks.relative)}),t.subscribe(6,({endClocks:r})=>{e.closeActive(r.relative)}),t.subscribe(3,r=>{const s=e.find(r.startClocks.relative);s&&r.name&&(s.name=r.name),s&&r.context&&(s.context=r.context)}),t.subscribe(10,()=>{e.reset()});function n(r){return{service:r.service,version:r.version,context:r.context,id:r.id,name:r.name,startClocks:r.startClocks}}return{findView:r=>e.find(r),getAllEntries:()=>e.getAllEntries(),getDeletedEntries:()=>e.getDeletedEntries(),stop:()=>{e.stop()}}}const uo="initial_document",Zu=[["document",t=>uo===t],["xhr",t=>t==="xmlhttprequest"],["fetch",t=>t==="fetch"],["beacon",t=>t==="beacon"],["css",(t,e)=>/\.css$/i.test(e)],["js",(t,e)=>/\.js$/i.test(e)],["image",(t,e)=>["image","img","icon"].includes(t)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)!==null],["font",(t,e)=>/\.(woff|eot|woff2|ttf)$/i.exec(e)!==null],["media",(t,e)=>["audio","video"].includes(t)||/\.(mp3|mp4)$/i.exec(e)!==null]];function Qu(t){const e=t.name;if(!ia(e))return vt(`Failed to construct URL for "${t.name}"`),"other";const n=aa(e);for(const[r,s]of Zu)if(s(t.initiatorType,n))return r;return"other"}function wr(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function tl(t){return t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch"}function lo(t){const{duration:e,startTime:n,responseEnd:r}=t;return e===0&&n<r?z(n,r):e}function el(t){if(!po(t))return;const{startTime:e,fetchStart:n,workerStart:r,redirectStart:s,redirectEnd:o,domainLookupStart:i,domainLookupEnd:a,connectStart:c,secureConnectionStart:l,connectEnd:u,requestStart:d,responseStart:f,responseEnd:p}=t,h={download:xt(e,f,p),first_byte:xt(e,d,f)};return 0<r&&r<n&&(h.worker=xt(e,r,n)),n<u&&(h.connect=xt(e,c,u),c<=l&&l<=u&&(h.ssl=xt(e,l,u))),n<a&&(h.dns=xt(e,i,a)),e<o&&(h.redirect=xt(e,s,o)),h}function fo(t){return t.duration>=0}function po(t){const e=wr(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=nl(t)?wr(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart):!0;return e&&n}function nl(t){return t.redirectEnd>t.startTime}function xt(t,e,n){if(t<=e&&e<=n)return{duration:S(z(e,n)),start:S(z(t,e))}}function ho(t){return t.nextHopProtocol===""?void 0:t.nextHopProtocol}function mo(t){return t.deliveryType===""?"other":t.deliveryType}function rl(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:r}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:r}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function nr(t){return t&&!wa(t)}const sl=/data:(.+)?(;base64)?,/g,Tr=24e3;function go(t){return t.length<=Tr?!1:t.substring(0,5)==="data:"?(t=t.substring(0,Tr),!0):!1}function _o(t){return`${t.match(sl)[0]}[...]`}let Ir=1;function ol(t,e,n,r){const s=Ru(e,n,r);il(t,e,s),al(t,s)}function il(t,e,n){const r=Yc(e).subscribe(s=>{const o=s;if(nr(o.url))switch(o.state){case"start":n.traceXhr(o,o.xhr),o.requestIndex=bo(),t.notify(7,{requestIndex:o.requestIndex,url:o.url});break;case"complete":n.clearTracingIfNeeded(o),t.notify(8,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr,isAborted:o.isAborted,handlingStack:o.handlingStack});break}});return{stop:()=>r.unsubscribe()}}function al(t,e){const n=Ks().subscribe(r=>{const s=r;if(nr(s.url))switch(s.state){case"start":e.traceFetch(s),s.requestIndex=bo(),t.notify(7,{requestIndex:s.requestIndex,url:s.url});break;case"resolve":cl(s,o=>{e.clearTracingIfNeeded(s),t.notify(8,{duration:o,method:s.method,requestIndex:s.requestIndex,responseType:s.responseType,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:"fetch",url:s.url,response:s.response,init:s.init,input:s.input,isAborted:s.isAborted,handlingStack:s.handlingStack})});break}});return{stop:()=>n.unsubscribe()}}function bo(){const t=Ir;return Ir+=1,t}function cl(t,e){const n=t.response&&Cc(t.response);!n||!n.body?e(z(t.startClocks.timeStamp,V())):pu(n.body,()=>{e(z(t.startClocks.timeStamp,V()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function yo(t){return ke(t)&&t<0?void 0:t}function vo({lifeCycle:t,isChildEvent:e,onChange:n=A}){const r={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},s=t.subscribe(13,o=>{var i;if(!(o.type==="view"||o.type==="vital"||!e(o)))switch(o.type){case"error":r.errorCount+=1,n();break;case"action":r.actionCount+=1,o.action.frustration&&(r.frustrationCount+=o.action.frustration.type.length),n();break;case"long_task":r.longTaskCount+=1,n();break;case"resource":!((i=o._dd)===null||i===void 0)&&i.discarded||(r.resourceCount+=1,n());break}});return{stop:()=>{s.unsubscribe()},eventCounts:r}}function ul(t,e){const n=st();let r=!1;const{stop:s}=X(t,window,["click","mousedown","keydown","touchstart","pointerdown"],a=>{if(!a.cancelable)return;const c={entryType:"first-input",processingStart:ot(),processingEnd:ot(),startTime:a.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};a.type==="pointerdown"?o(t,c):i(c)},{passive:!0,capture:!0});return{stop:s};function o(a,c){X(a,window,["pointerup","pointercancel"],l=>{l.type==="pointerup"&&i(c)},{once:!0})}function i(a){if(!r){r=!0,s();const c=a.processingStart-a.startTime;c>=0&&c<st()-n&&e(a)}}}var R;(function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource",t.VISIBILITY_STATE="visibility-state"})(R||(R={}));function ft(t,e){return new k(n=>{if(!window.PerformanceObserver)return;const r=c=>{const l=fl(c);l.length>0&&n.notify(l)};let s,o=!0;const i=new PerformanceObserver(E(c=>{o?s=U(()=>r(c.getEntries())):r(c.getEntries())}));try{i.observe(e)}catch{if([R.RESOURCE,R.NAVIGATION,R.LONG_TASK,R.PAINT].includes(e.type)){e.buffered&&(s=U(()=>r(performance.getEntriesByType(e.type))));try{i.observe({entryTypes:[e.type]})}catch{return}}}o=!1,ll(t);let a;return!Bt(R.FIRST_INPUT)&&e.type===R.FIRST_INPUT&&({stop:a}=ul(t,c=>{r([c])})),()=>{i.disconnect(),a&&a(),W(s)}})}let be;function ll(t){return!be&&dl()&&"addEventListener"in performance&&(be=N(t,performance,"resourcetimingbufferfull",()=>{performance.clearResourceTimings()})),()=>{be==null||be.stop()}}function dl(){return window.performance!==void 0&&"getEntries"in performance}function Bt(t){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(t)}function fl(t){return t.filter(e=>!pl(e))}function pl(t){return t.entryType===R.RESOURCE&&(!nr(t.name)||!fo(t))}const So=100,hl=100;function rr(t,e,n,r,s,o){const i=gl(t,e,n,r);return ml(i,s,o)}function ml(t,e,n){let r,s=!1;const o=U(E(()=>l({hadActivity:!1})),So),i=n!==void 0?U(E(()=>l({hadActivity:!0,end:V()})),n):void 0,a=t.subscribe(({isBusy:u})=>{W(o),W(r);const d=V();u||(r=U(E(()=>l({hadActivity:!0,end:d})),hl))}),c=()=>{s=!0,W(o),W(r),W(i),a.unsubscribe()};function l(u){s||(c(),e(u))}return{stop:c}}function gl(t,e,n,r){return new k(s=>{const o=[];let i,a=0;return o.push(e.subscribe(c),n.subscribe(c),ft(r,{type:R.RESOURCE}).subscribe(l=>{l.some(u=>!In(r,u.name))&&c()}),t.subscribe(7,l=>{In(r,l.url)||(i===void 0&&(i=l.requestIndex),a+=1,c())}),t.subscribe(8,l=>{In(r,l.url)||i===void 0||l.requestIndex<i||(a-=1,c())})),()=>{o.forEach(l=>l.unsubscribe())};function c(){s.notify({isBusy:a>0})}})}function In(t,e){return Zs(t.excludedActivityUrls,e)}function Eo(t){return t.nodeType===Node.TEXT_NODE}function _l(t){return t.nodeType===Node.COMMENT_NODE}function fe(t){return t.nodeType===Node.ELEMENT_NODE}function sn(t){return fe(t)&&!!t.shadowRoot}function sr(t){const e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&fe(e.host)}function bl(t){return t.childNodes.length>0||sn(t)}function wo(t,e){let n=t.firstChild;for(;n;)e(n),n=n.nextSibling;sn(t)&&e(t.shadowRoot)}function on(t){return sr(t)?t.host:t.parentNode}const v={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:ve.ALLOW,MASK:ve.MASK,MASK_USER_INPUT:ve.MASK_USER_INPUT},or="data-dd-privacy",yl="hidden",vl="dd-privacy-",Et="***",Ar="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",Sl={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},El="x";function ht(t,e,n){if(n&&n.has(t))return n.get(t);const r=on(t),s=r?ht(r,e,n):e,o=Io(t),i=To(o,s);return n&&n.set(t,i),i}function To(t,e){switch(e){case v.HIDDEN:case v.IGNORE:return e}switch(t){case v.ALLOW:case v.MASK:case v.MASK_USER_INPUT:case v.HIDDEN:case v.IGNORE:return t;default:return e}}function Io(t){if(fe(t)){if(t.tagName==="BASE")return v.ALLOW;if(t.tagName==="INPUT"){const e=t;if(e.type==="password"||e.type==="email"||e.type==="tel"||e.type==="hidden")return v.MASK;const n=e.getAttribute("autocomplete");if(n&&(n.startsWith("cc-")||n.endsWith("-password")))return v.MASK}if(t.matches(Zt(v.HIDDEN)))return v.HIDDEN;if(t.matches(Zt(v.MASK)))return v.MASK;if(t.matches(Zt(v.MASK_USER_INPUT)))return v.MASK_USER_INPUT;if(t.matches(Zt(v.ALLOW)))return v.ALLOW;if(Tl(t))return v.IGNORE}}function an(t,e){switch(e){case v.MASK:case v.HIDDEN:case v.IGNORE:return!0;case v.MASK_USER_INPUT:return Eo(t)?Cr(t.parentNode):Cr(t);default:return!1}}function Cr(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;const e=t;if(e.tagName==="INPUT")switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!Sl[e.tagName]}const wl=t=>t.replace(/\S/g,El);function Ao(t,e,n){var r;const s=(r=t.parentElement)===null||r===void 0?void 0:r.tagName;let o=t.textContent||"";if(e&&!o.trim())return;const i=n;if(s==="SCRIPT")o=Et;else if(i===v.HIDDEN)o=Et;else if(an(t,i))if(s==="DATALIST"||s==="SELECT"||s==="OPTGROUP"){if(!o.trim())return}else s==="OPTION"?o=Et:o=wl(o);return o}function Tl(t){if(t.nodeName==="SCRIPT")return!0;if(t.nodeName==="LINK"){const n=e("rel");return/preload|prefetch/i.test(n)&&e("as")==="script"||n==="shortcut icon"||n==="icon"}if(t.nodeName==="META"){const n=e("name"),r=e("rel"),s=e("property");return/^msapplication-tile(image|color)$/.test(n)||n==="application-name"||r==="icon"||r==="apple-touch-icon"||r==="shortcut icon"||n==="keywords"||n==="description"||/^(og|twitter|fb):/.test(s)||/^(og|twitter):/.test(n)||n==="pinterest"||n==="robots"||n==="googlebot"||n==="bingbot"||t.hasAttribute("http-equiv")||n==="author"||n==="generator"||n==="framework"||n==="publisher"||n==="progid"||/^article:/.test(s)||/^product:/.test(s)||n==="google-site-verification"||n==="yandex-verification"||n==="csrf-token"||n==="p:domain_verify"||n==="verify-v1"||n==="verification"||n==="shopify-checkout-api-token"}function e(n){return(t.getAttribute(n)||"").toLowerCase()}return!1}function Zt(t){return`[${or}="${t}"], .${vl}${t}`}const ir="data-dd-action-name",Il="Masked Element";function Al(t,{enablePrivacyForActionName:e,actionNameAttribute:n},r){const s=Rr(t,ir)||n&&Rr(t,n);return s?{name:s,nameSource:"custom_attribute"}:r===v.MASK?{name:Il,nameSource:"mask_placeholder"}:kr(t,n,Cl,e)||kr(t,n,Rl,e)||{name:"",nameSource:"blank"}}function Rr(t,e){const n=t.closest(`[${e}]`);if(!n)return;const r=n.getAttribute(e);return Ro(Co(r.trim()))}const Cl=[(t,e)=>{if("labels"in t&&t.labels&&t.labels.length>0)return He(t.labels[0],e)},t=>{if(t.nodeName==="INPUT"){const e=t,n=e.getAttribute("type");if(n==="button"||n==="submit"||n==="reset")return{name:e.value,nameSource:"text_content"}}},(t,e,n)=>{if(t.nodeName==="BUTTON"||t.nodeName==="LABEL"||t.getAttribute("role")==="button")return He(t,e,n)},t=>ye(t,"aria-label"),(t,e,n)=>{const r=t.getAttribute("aria-labelledby");if(r)return{name:r.split(/\s+/).map(s=>xl(t,s)).filter(s=>!!s).map(s=>ko(s,e,n)).join(" "),nameSource:"text_content"}},t=>ye(t,"alt"),t=>ye(t,"name"),t=>ye(t,"title"),t=>ye(t,"placeholder"),(t,e)=>{if("options"in t&&t.options.length>0)return He(t.options[0],e)}],Rl=[(t,e,n)=>He(t,e,n)],kl=10;function kr(t,e,n,r){let s=t,o=0;for(;o<=kl&&s&&s.nodeName!=="BODY"&&s.nodeName!=="HTML"&&s.nodeName!=="HEAD";){for(const i of n){const a=i(s,e,r);if(a){const{name:c,nameSource:l}=a,u=c&&c.trim();if(u)return{name:Ro(Co(u)),nameSource:l}}}if(s.nodeName==="FORM")break;s=s.parentElement,o+=1}}function Co(t){return t.replace(/\s+/g," ")}function Ro(t){return t.length>100?`${fs(t,100)} [...]`:t}function xl(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}function ye(t,e){return{name:t.getAttribute(e)||"",nameSource:"standard_attribute"}}function He(t,e,n){return{name:ko(t,e,n)||"",nameSource:"text_content"}}function ko(t,e,n){if(!t.isContentEditable){if("innerText"in t){let r=t.innerText;const s=o=>{const i=t.querySelectorAll(o);for(let a=0;a<i.length;a+=1){const c=i[a];if("innerText"in c){const l=c.innerText;l&&l.trim().length>0&&(r=r.replace(l,""))}}};return s(`[${ir}]`),e&&s(`[${e}]`),n&&s(`${Zt(v.HIDDEN)}, ${Zt(v.MASK)}`),r}return t.textContent}}const xo=[ir,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],Ol=[No,Ll],Nl=[No,Ml,Pl];function Le(t,e){if(!t.isConnected)return;let n,r=t;for(;r&&r.nodeName!=="HTML";){const s=xr(r,Ol,Ul,e,n);if(s)return s;n=xr(r,Nl,Vl,e,n)||cn(Dl(r),n),r=r.parentElement}return n}function Oo(t){return/[0-9]/.test(t)}function Ll(t){if(t.id&&!Oo(t.id))return`#${CSS.escape(t.id)}`}function Ml(t){if(t.tagName==="BODY")return;const e=t.classList;for(let n=0;n<e.length;n+=1){const r=e[n];if(!Oo(r))return`${CSS.escape(t.tagName)}.${CSS.escape(r)}`}}function Pl(t){return CSS.escape(t.tagName)}function No(t,e){if(e){const r=n(e);if(r)return r}for(const r of xo){const s=n(r);if(s)return s}function n(r){if(t.hasAttribute(r))return`${CSS.escape(t.tagName)}[${r}="${CSS.escape(t.getAttribute(r))}"]`}}function Dl(t){let e=t.parentElement.firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${CSS.escape(t.tagName)}:nth-of-type(${n})`}function xr(t,e,n,r,s){for(const o of e){const i=o(t,r);if(i&&n(t,i,s))return cn(i,s)}}function Ul(t,e,n){return t.ownerDocument.querySelectorAll(cn(e,n)).length===1}function Vl(t,e,n){let r;if(n===void 0)r=i=>i.matches(e);else{const i=cn(`${e}:scope`,n);r=a=>a.querySelector(i)!==null}let o=t.parentElement.firstElementChild;for(;o;){if(o!==t&&r(o))return!1;o=o.nextElementSibling}return!0}function cn(t,e){return e?`${t}>${e}`:t}const Lo=G,Fl=100;function zl(t,e){const n=[];let r=0,s;o(t);function o(c){c.stopObservable.subscribe(i),n.push(c),W(s),s=U(a,Lo)}function i(){r===1&&n.every(c=>c.isStopped())&&(r=2,e(n))}function a(){W(s),r===0&&(r=1,i())}return{tryAppend:c=>r!==0?!1:n.length>0&&!Bl(n[n.length-1].event,c.event)?(a(),!1):(o(c),!0),stop:()=>{a()}}}function Bl(t,e){return t.target===e.target&&$l(t,e)<=Fl&&t.timeStamp-e.timeStamp<=Lo}function $l(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}function Gl(t,{onPointerDown:e,onPointerUp:n}){let r,s={selection:!1,input:!1,scroll:!1},o;const i=[N(t,window,"pointerdown",a=>{Nr(a)&&(r=Or(),s={selection:!1,input:!1,scroll:!1},o=e(a))},{capture:!0}),N(t,window,"selectionchange",()=>{(!r||!Or())&&(s.selection=!0)},{capture:!0}),N(t,window,"scroll",()=>{s.scroll=!0},{capture:!0,passive:!0}),N(t,window,"pointerup",a=>{if(Nr(a)&&o){const c=s;n(o,a,()=>c),o=void 0}},{capture:!0}),N(t,window,"input",()=>{s.input=!0},{capture:!0})];return{stop:()=>{i.forEach(a=>a.stop())}}}function Or(){const t=window.getSelection();return!t||t.isCollapsed}function Nr(t){return t.target instanceof Element&&t.isPrimary!==!1}const Lr=3;function Hl(t,e){if(jl(t))return e.addFrustration("rage_click"),t.some(Mr)&&e.addFrustration("dead_click"),e.hasError&&e.addFrustration("error_click"),{isRage:!0};const n=t.some(r=>r.getUserActivity().selection);return t.forEach(r=>{r.hasError&&r.addFrustration("error_click"),Mr(r)&&!n&&r.addFrustration("dead_click")}),{isRage:!1}}function jl(t){if(t.some(e=>e.getUserActivity().selection||e.getUserActivity().scroll))return!1;for(let e=0;e<t.length-(Lr-1);e+=1)if(t[e+Lr-1].event.timeStamp-t[e].event.timeStamp<=G)return!0;return!1}const Yl='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function Mr(t){return t.hasPageActivity||t.getUserActivity().input||t.getUserActivity().scroll?!1:!t.event.target.matches(Yl)}const Mo=10*G,Se=new Map;function Wl(t){const e=Se.get(t);return Se.delete(t),e}function Po(t,e){Se.set(t,e),Se.forEach((n,r)=>{z(r,ot())>Mo&&Se.delete(r)})}const ql=5*J;function Kl(t,e,n,r){const s=le({expireDelay:ql}),o=new k;let i;t.subscribe(10,()=>{s.reset()}),t.subscribe(5,u),t.subscribe(11,d=>{d.reason===Qt.UNLOADING&&u()});const{stop:a}=Gl(r,{onPointerDown:d=>Xl(r,t,e,d,n),onPointerUp:({clickActionBase:d,hadActivityOnPointerDown:f},p,h)=>{Jl(r,t,e,n,s,o,l,d,p,h,f)}});return{stop:()=>{u(),o.notify(),a()},actionContexts:{findActionId:d=>s.findAll(d)}};function l(d){if(!i||!i.tryAppend(d)){const f=d.clone();i=zl(d,p=>{Ql(p,f)})}}function u(){i&&i.stop()}}function Xl(t,e,n,r,s){const o=t.enablePrivacyForActionName?ht(r.target,t.defaultPrivacyLevel):v.ALLOW;if(o===v.HIDDEN)return;const i=Zl(r,o,t);let a=!1;return rr(e,n,s,t,c=>{a=c.hadActivity},So),{clickActionBase:i,hadActivityOnPointerDown:()=>a}}function Jl(t,e,n,r,s,o,i,a,c,l,u){var d;const f=Do(e,s,l,a,c);i(f);const p=(d=a==null?void 0:a.target)===null||d===void 0?void 0:d.selector;p&&Po(c.timeStamp,p);const{stop:h}=rr(e,n,r,t,w=>{w.hadActivity&&w.end<f.startClocks.timeStamp?f.discard():w.hadActivity?f.stop(w.end):u()?f.stop(f.startClocks.timeStamp):f.stop()},Mo),m=e.subscribe(5,({endClocks:w})=>{f.stop(w.timeStamp)}),y=o.subscribe(()=>{f.stop()});f.stopObservable.subscribe(()=>{m.unsubscribe(),h(),y.unsubscribe()})}function Zl(t,e,n){const r=t.target.getBoundingClientRect(),s=Le(t.target,n.actionNameAttribute);s&&Po(t.timeStamp,s);const o=Al(t.target,n,e);return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:s},position:{x:Math.round(t.clientX-r.left),y:Math.round(t.clientY-r.top)},name:o.name,nameSource:o.nameSource}}function Do(t,e,n,r,s){const o=B(),i=$(),a=e.add(o,i.relative),c=vo({lifeCycle:t,isChildEvent:h=>h.action!==void 0&&(Array.isArray(h.action.id)?h.action.id.includes(o):h.action.id===o)});let l=0,u;const d=[],f=new k;function p(h){l===0&&(u=h,l=1,u?a.close($n(u)):a.remove(),c.stop(),f.notify())}return{event:s,stop:p,stopObservable:f,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return u!==void 0},getUserActivity:n,addFrustration:h=>{d.push(h)},startClocks:i,isStopped:()=>l===1||l===2,clone:()=>Do(t,e,n,r,s),validate:h=>{if(p(),l!==1)return;const{resourceCount:m,errorCount:y,longTaskCount:w}=c.eventCounts,I={duration:u&&z(i.timeStamp,u),startClocks:i,id:o,frustrationTypes:d,counts:{resourceCount:m,errorCount:y,longTaskCount:w},events:h??[s],event:s,...r};t.notify(0,I),l=2},discard:()=>{p(),l=2}}}function Ql(t,e){const{isRage:n}=Hl(t,e);n?(t.forEach(r=>r.discard()),e.stop(V()),e.validate(t.map(r=>r.event))):(e.discard(),t.forEach(r=>r.validate()))}function td(t,e,n,r,s){t.subscribe(0,a=>t.notify(12,Pr(a))),e.register(0,({startTime:a,eventType:c})=>{if(c!=="error"&&c!=="resource"&&c!=="long_task")return;const l=o.findActionId(a);if(l)return{type:c,action:{id:l}}});let o={findActionId:A},i=A;return s.trackUserInteractions&&({actionContexts:o,stop:i}=Kl(t,n,r,s)),{addAction:a=>{t.notify(12,Pr(a))},actionContexts:o,stop:i}}function Pr(t){const e=ze(t)?{action:{id:t.id,loading_time:yo(S(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:t.nameSource}}}:void 0,n=ct({action:{id:B(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:"action"},e),r=ze(t)?t.duration:void 0,s=ze(t)?void 0:t.context,o=ze(t)?{events:t.events}:{handlingStack:t.handlingStack};return{customerContext:s,rawRumEvent:n,duration:r,startTime:t.startClocks.relative,domainContext:o}}function ze(t){return t.type!=="custom"}function ed(t){const e=ou([Ze.error]).subscribe(n=>t.notify(n.error));return{stop:()=>{e.unsubscribe()}}}function nd(t,e){const n=nc(t,[Ce.cspViolation,Ce.intervention]).subscribe(r=>e.notify(r));return{stop:()=>{n.unsubscribe()}}}function rd(t,e){const n=new k;return ed(n),Ja(n),nd(e,n),n.subscribe(r=>t.notify(14,{error:r})),sd(t)}function sd(t){return t.subscribe(14,({error:e,customerContext:n})=>{n=ct(e.context,n),t.notify(12,{customerContext:n,...od(e)})}),{addError:({error:e,handlingStack:n,componentStack:r,startClocks:s,context:o})=>{const i=Rt(e)?Ct(e):void 0,a=Rs({stackTrace:i,originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:"Provided",source:ce.CUSTOM,handling:"handled"});t.notify(14,{customerContext:o,error:a})}}}function od(t){const e={date:t.startClocks.timeStamp,error:{id:B(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,component_stack:t.componentStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:"error"},n={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:e,startTime:t.startClocks.relative,domainContext:n}}const Dr=new WeakSet;function id(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter(r=>!Dr.has(r)).filter(r=>fo(r)&&po(r)).filter(r=>ad(r,t.startClocks.relative,Uo({startTime:t.startClocks.relative,duration:t.duration})));if(n.length===1)return Dr.add(n[0]),n[0].toJSON()}function Uo(t){return re(t.startTime,t.duration)}function ad(t,e,n){return t.startTime>=e-1&&Uo(t)<=re(n,1)}const cd=2*J;function ud(t){const e=ld(t)||dd(t);if(!(!e||e.traceTime<=st()-cd))return e.traceId}function ld(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return Vo(e&&e.content,n&&n.content)}function dd(t){const e=fd(t);if(e)return Vo(Te(e,"trace-id"),Te(e,"trace-time"))}function Vo(t,e){const n=e&&Number(e);if(!(!t||!n))return{traceId:t,traceTime:n}}function fd(t){for(let e=0;e<t.childNodes.length;e+=1){const n=Ur(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],r=Ur(n);if(r)return r;if(!Eo(n))break}}function Ur(t){if(t&&_l(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function Fo(){if(Bt(R.NAVIGATION)){const n=performance.getEntriesByType(R.NAVIGATION)[0];if(n)return n}const t=pd(),e={entryType:R.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.loadEventEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>({...e,toJSON:void 0}),...t};return e}function pd(){const t={},e=performance.timing;for(const n in e)if(ke(e[n])){const r=n,s=e[r];t[r]=s===0?0:$n(s)}return t}function hd(t,e,n=Fo){Zn(t,"interactive",()=>{const r=n(),s=Object.assign(r.toJSON(),{entryType:R.RESOURCE,initiatorType:uo,duration:r.responseEnd,traceId:ud(document),toJSON:()=>({...s,toJSON:void 0})});e(s)})}function md(t,e,n,r=su(),s=hd){t.subscribe(8,a=>{i(()=>gd(a,e,n))});const o=ft(e,{type:R.RESOURCE,buffered:!0}).subscribe(a=>{for(const c of a)tl(c)||i(()=>Vr(c,e))});s(e,a=>{i(()=>Vr(a,e))});function i(a){r.push(()=>{const c=a();c&&t.notify(12,c)})}return{stop:()=>{o.unsubscribe()}}}function gd(t,e,n){const r=id(t),s=r?tn(r.startTime):t.startClocks,o=_d(t,e);if(!e.trackResources&&!o)return;const i=t.type==="xhr"?"xhr":"fetch",a=r?zo(r):void 0,c=r?lo(r):yd(n,s,t.duration),l=ct({date:s.timeStamp,resource:{id:B(),type:i,duration:S(c),method:t.method,status_code:t.status,protocol:r&&ho(r),url:go(t.url)?_o(t.url):t.url,delivery_type:r&&mo(r)},type:"resource",_dd:{discarded:!e.trackResources}},o,a);return{startTime:s.relative,duration:c,rawRumEvent:l,domainContext:{performanceEntry:r,xhr:t.xhr,response:t.response,requestInput:t.input,requestInit:t.init,error:t.error,isAborted:t.isAborted,handlingStack:t.handlingStack}}}function Vr(t,e){const n=tn(t.startTime),r=bd(t,e);if(!e.trackResources&&!r)return;const s=Qu(t),o=zo(t),i=lo(t),a=ct({date:n.timeStamp,resource:{id:B(),type:s,duration:S(i),url:t.name,status_code:vd(t.responseStatus),protocol:ho(t),delivery_type:mo(t)},type:"resource",_dd:{discarded:!e.trackResources}},r,o);return{startTime:n.relative,duration:i,rawRumEvent:a,domainContext:{performanceEntry:t}}}function zo(t){const{renderBlockingStatus:e}=t;return{resource:{render_blocking_status:e,...rl(t),...el(t)}}}function _d(t,e){if(t.traceSampled&&t.traceId&&t.spanId)return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}function bd(t,e){if(t.traceId)return{_dd:{trace_id:t.traceId,span_id:no().toString(),rule_psr:e.rulePsr}}}function yd(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:n}function vd(t){return t===0?void 0:t}function Sd(t,e,n){const{stop:r,eventCounts:s}=vo({lifeCycle:t,isChildEvent:o=>o.view.id===e,onChange:n});return{stop:r,eventCounts:s}}const Ed=10*J;function wd(t,e,n){return{stop:ft(t,{type:R.PAINT,buffered:!0}).subscribe(s=>{const o=s.find(i=>i.name==="first-contentful-paint"&&i.startTime<e.timeStamp&&i.startTime<Ed);o&&n(o.startTime)}).unsubscribe}}function Td(t,e,n){const r=ft(t,{type:R.FIRST_INPUT,buffered:!0}).subscribe(s=>{const o=s.find(i=>i.startTime<e.timeStamp);if(o){const i=z(o.startTime,o.processingStart);let a;o.target&&fe(o.target)&&(a=Le(o.target,t.actionNameAttribute)),n({delay:i>=0?i:0,time:o.startTime,targetSelector:a})}});return{stop:()=>{r.unsubscribe()}}}function Id(t,e,n=Fo){return Rd(t,()=>{const r=n();Cd(r)||e(Ad(r))})}function Ad(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=ot()?t.responseStart:void 0}}function Cd(t){return t.loadEventEnd<=0}function Rd(t,e){let n;const{stop:r}=Zn(t,"complete",()=>{n=U(()=>e())});return{stop:()=>{r(),W(n)}}}const kd=10*J;function xd(t,e,n,r){let s=1/0;const{stop:o}=X(t,n,["pointerdown","keydown"],c=>{s=c.timeStamp},{capture:!0,once:!0});let i=0;const a=ft(t,{type:R.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe(c=>{const l=Pi(c,u=>u.entryType===R.LARGEST_CONTENTFUL_PAINT&&u.startTime<s&&u.startTime<e.timeStamp&&u.startTime<kd&&u.size>i);if(l){let u;l.element&&(u=Le(l.element,t.actionNameAttribute)),r({value:l.startTime,targetSelector:u,resourceUrl:Od(l)}),i=l.size}});return{stop:()=>{o(),a.unsubscribe()}}}function Od(t){return t.url===""?void 0:t.url}function Bo(t,e=window){if(document.visibilityState==="hidden")return{timeStamp:0,stop:A};if(Bt(R.VISIBILITY_STATE)){const s=performance.getEntriesByType(R.VISIBILITY_STATE).find(o=>o.name==="hidden");if(s)return{timeStamp:s.startTime,stop:A}}let n=1/0;const{stop:r}=X(t,e,["pagehide","visibilitychange"],s=>{(s.type==="pagehide"||document.visibilityState==="hidden")&&(n=s.timeStamp,r())},{capture:!0});return{get timeStamp(){return n},stop:r}}function Nd(t,e,n){const r={},{stop:s}=Id(t,u=>{e(u.loadEvent),r.navigationTimings=u,n()}),o=Bo(t),{stop:i}=wd(t,o,u=>{r.firstContentfulPaint=u,n()}),{stop:a}=xd(t,o,window,u=>{r.largestContentfulPaint=u,n()}),{stop:c}=Td(t,o,u=>{r.firstInput=u,n()});function l(){s(),i(),a(),c(),o.stop()}return{stop:l,initialViewMetrics:r}}function Ld(t,e,n){if(!Vd())return{stop:A};let r=0,s;n({value:0});const o=Ud(),i=ft(t,{type:R.LAYOUT_SHIFT,buffered:!0}).subscribe(a=>{var c;for(const l of a){if(l.hadRecentInput||l.startTime<e)continue;const{cumulatedValue:u,isMaxValue:d}=o.update(l);if(d){const f=Md(l.sources);s={target:f!=null&&f.node?new WeakRef(f.node):void 0,time:z(e,l.startTime),previousRect:f==null?void 0:f.previousRect,currentRect:f==null?void 0:f.currentRect,devicePixelRatio:window.devicePixelRatio}}if(u>r){r=u;const f=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.deref();n({value:Ye(r,4),targetSelector:f&&Le(f,t.actionNameAttribute),time:s==null?void 0:s.time,previousRect:s!=null&&s.previousRect?Fr(s.previousRect):void 0,currentRect:s!=null&&s.currentRect?Fr(s.currentRect):void 0,devicePixelRatio:s==null?void 0:s.devicePixelRatio})}}});return{stop:()=>{i.unsubscribe()}}}function Md(t){return t.find(e=>!!e.node&&fe(e.node))}function Fr({x:t,y:e,width:n,height:r}){return{x:t,y:e,width:n,height:r}}const Pd=5*G,Dd=G;function Ud(){let t=0,e,n,r=0;return{update:s=>{const o=e===void 0||s.startTime-n>=Dd||s.startTime-e>=Pd;let i;return o?(e=n=s.startTime,r=t=s.value,i=!0):(t+=s.value,n=s.startTime,i=s.value>r,i&&(r=s.value)),{cumulatedValue:t,isMaxValue:i}}}}function Vd(){return Bt(R.LAYOUT_SHIFT)&&"WeakRef"in window}let je,$o=0,An=1/0,Cn=0;function Fd(){"interactionCount"in performance||je||(je=new window.PerformanceObserver(E(t=>{t.getEntries().forEach(e=>{const n=e;n.interactionId&&(An=Math.min(An,n.interactionId),Cn=Math.max(Cn,n.interactionId),$o=(Cn-An)/7+1)})})),je.observe({type:"event",buffered:!0,durationThreshold:0}))}const zr=()=>je?$o:window.performance.interactionCount||0,Br=10,zd=1*J;function Bd(t,e,n){if(!Hd())return{getInteractionToNextPaint:()=>{},setViewEnd:A,stop:A};const{getViewInteractionCount:r,stopViewInteractionCount:s}=Gd(n);let o=1/0;const i=$d(r);let a=-1,c,l;function u(p){for(const m of p)m.interactionId&&m.startTime>=e&&m.startTime<=o&&i.process(m);const h=i.estimateP98Interaction();h&&h.duration!==a&&(a=h.duration,l=z(e,h.startTime),c=Wl(h.startTime),!c&&h.target&&fe(h.target)&&(c=Le(h.target,t.actionNameAttribute)))}const d=ft(t,{type:R.FIRST_INPUT,buffered:!0}).subscribe(u),f=ft(t,{type:R.EVENT,durationThreshold:40,buffered:!0}).subscribe(u);return{getInteractionToNextPaint:()=>{if(a>=0)return{value:Math.min(a,zd),targetSelector:c,time:l};if(r())return{value:0}},setViewEnd:p=>{o=p,s()},stop:()=>{f.unsubscribe(),d.unsubscribe()}}}function $d(t){const e=[];function n(){e.sort((r,s)=>s.duration-r.duration).splice(Br)}return{process(r){const s=e.findIndex(i=>r.interactionId===i.interactionId),o=e[e.length-1];s!==-1?r.duration>e[s].duration&&(e[s]=r,n()):(e.length<Br||r.duration>o.duration)&&(e.push(r),n())},estimateP98Interaction(){const r=Math.min(e.length-1,Math.floor(t()/50));return e[r]}}}function Gd(t){Fd();const e=t==="initial_load"?0:zr();let n={stopped:!1};function r(){return zr()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:r(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:r()}}}}function Hd(){return Bt(R.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function jd(t,e,n,r,s,o,i){let a=s==="initial_load",c=!0;const l=[],u=Bo(r);function d(){if(!c&&!a&&l.length>0){const p=Math.max(...l);p<u.timeStamp&&i(p)}}const{stop:f}=rr(t,e,n,r,p=>{c&&(c=!1,p.hadActivity&&l.push(z(o.timeStamp,p.end)),d())});return{stop:()=>{f(),u.stop()},setLoadEvent:p=>{a&&(a=!1,l.push(p),d())}}}function Go(){let t;const e=window.visualViewport;return e?t=e.pageLeft-e.offsetLeft:window.scrollX!==void 0?t=window.scrollX:t=window.pageXOffset||0,Math.round(t)}function ar(){let t;const e=window.visualViewport;return e?t=e.pageTop-e.offsetTop:window.scrollY!==void 0?t=window.scrollY:t=window.pageYOffset||0,Math.round(t)}let Rn;function Ho(t){return Rn||(Rn=Yd(t)),Rn}function Yd(t){return new k(e=>{const{throttled:n}=At(()=>{e.notify(un())},200);return N(t,window,"resize",n,{capture:!0,passive:!0}).stop})}function un(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}const Wd=G;function qd(t,e,n,r=Xd(t)){let s=0,o=0,i=0;const a=r.subscribe(({scrollDepth:c,scrollTop:l,scrollHeight:u})=>{let d=!1;if(c>s&&(s=c,d=!0),u>o){o=u;const f=ot();i=z(e.relative,f),d=!0}d&&n({maxDepth:Math.min(s,o),maxDepthScrollTop:l,maxScrollHeight:o,maxScrollHeightTime:i})});return{stop:()=>a.unsubscribe()}}function Kd(){const t=ar(),{height:e}=un(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}function Xd(t,e=Wd){return new k(n=>{function r(){n.notify(Kd())}if(window.ResizeObserver){const s=At(r,e,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,i=new ResizeObserver(E(s.throttled));o&&i.observe(o);const a=N(t,window,"scroll",s.throttled,{passive:!0});return()=>{s.cancel(),i.disconnect(),a.stop()}}})}function Jd(t,e,n,r,s,o,i){const a={},{stop:c,setLoadEvent:l}=jd(t,e,n,r,o,i,m=>{a.loadingTime=m,s()}),{stop:u}=qd(r,i,m=>{a.scroll=m}),{stop:d}=Ld(r,i.relative,m=>{a.cumulativeLayoutShift=m,s()}),{stop:f,getInteractionToNextPaint:p,setViewEnd:h}=Bd(r,i.relative,o);return{stop:()=>{c(),d(),u()},stopINPTracking:f,setLoadEvent:l,setViewEnd:h,getCommonViewMetrics:()=>(a.interactionToNextPaint=p(),a)}}const Zd=3e3,Qd=5*J,tf=5*J;function ef(t,e,n,r,s,o,i,a){const c=new Set;let l=d("initial_load",as(),a);f();let u;i&&(u=p(o));function d(h,m,y){const w=nf(e,n,r,s,t,h,m,y);return c.add(w),w.stopObservable.subscribe(()=>{c.delete(w)}),w}function f(){e.subscribe(10,()=>{l=d("route_change",void 0,{name:l.name,service:l.service,version:l.version,context:l.contextManager.getContext()})}),e.subscribe(9,()=>{l.end({sessionIsActive:!1})})}function p(h){return h.subscribe(({oldLocation:m,newLocation:y})=>{sf(m,y)&&(l.end(),l=d("route_change"))})}return{addTiming:(h,m=V())=>{l.addTiming(h,m)},startView:(h,m)=>{l.end({endClocks:m}),l=d("route_change",m,h)},setViewContext:h=>{l.contextManager.setContext(h)},setViewContextProperty:(h,m)=>{l.contextManager.setContextProperty(h,m)},setViewName:h=>{l.setViewName(h)},getViewContext:()=>l.contextManager.getContext(),stop:()=>{u&&u.unsubscribe(),l.end(),c.forEach(h=>h.stop())}}}function nf(t,e,n,r,s,o,i=$(),a){const c=B(),l=new k,u={};let d=0,f;const p=we(s),h=rn();let m=!0,y=a==null?void 0:a.name;const w=(a==null?void 0:a.service)||r.service,I=(a==null?void 0:a.version)||r.version,g=a==null?void 0:a.context;g&&h.setContext(g);const _={id:c,name:y,startClocks:i,service:w,version:I,context:g};t.notify(1,_),t.notify(2,_);const{throttled:x,cancel:Q}=At(ut,Zd,{leading:!1}),{setLoadEvent:b,setViewEnd:Z,stop:T,stopINPTracking:O,getCommonViewMetrics:P}=Jd(t,e,n,r,mt,o,i),{stop:tt,initialViewMetrics:Y}=o==="initial_load"?Nd(r,b,mt):{stop:A,initialViewMetrics:{}},{stop:kt,eventCounts:pe}=Sd(t,c,mt),$t=se(ut,Qd),Gt=t.subscribe(11,et=>{et.reason===Qt.UNLOADING&&ut()});ut(),h.changeObservable.subscribe(mt);function Ht(){t.notify(3,{id:c,name:y,context:h.getContext(),startClocks:i})}function mt(){Ht(),x()}function ut(){Q(),Ht(),d+=1;const et=f===void 0?V():f.timeStamp;t.notify(4,{customTimings:u,documentVersion:d,id:c,name:y,service:w,version:I,context:h.getContext(),loadingType:o,location:p,startClocks:i,commonViewMetrics:P(),initialViewMetrics:Y,duration:z(i.timeStamp,et),isActive:f===void 0,sessionIsActive:m,eventCounts:pe})}return{get name(){return y},service:w,version:I,contextManager:h,stopObservable:l,end(et={}){var gt,_t;f||(f=(gt=et.endClocks)!==null&&gt!==void 0?gt:$(),m=(_t=et.sessionIsActive)!==null&&_t!==void 0?_t:!0,t.notify(5,{endClocks:f}),t.notify(6,{endClocks:f}),en($t),Z(f.relative),T(),Gt.unsubscribe(),ut(),U(()=>{this.stop()},tf))},stop(){tt(),kt(),O(),l.notify()},addTiming(et,gt){if(f)return;const _t=wi(gt)?gt:z(i.timeStamp,gt);u[rf(et)]=_t,mt()},setViewName(et){y=et,ut()}}}function rf(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return e!==t&&C.warn(`Invalid timing name: ${t}, sanitized to: ${e}`),e}function sf(t,e){return t.pathname!==e.pathname||!of(e.hash)&&$r(e.hash)!==$r(t.hash)}function of(t){const e=t.substring(1);return e!==""&&!!document.getElementById(e)}function $r(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function af(t,e,n,r,s,o,i,a,c,l){return t.subscribe(4,u=>t.notify(12,cf(u,n,a))),e.register(0,({startTime:u,eventType:d})=>{const{service:f,version:p,id:h,name:m,context:y}=c.findView(u);return{type:d,service:f,version:p,context:y,view:{id:h,name:m}}}),ef(r,t,s,o,n,i,!n.trackViewsManually,l)}function cf(t,e,n){var r,s,o,i,a,c,l,u,d,f,p,h,m,y,w,I,g,_;const x=n.getReplayStats(t.id),Q=(s=(r=t.commonViewMetrics)===null||r===void 0?void 0:r.cumulativeLayoutShift)===null||s===void 0?void 0:s.devicePixelRatio,b={_dd:{document_version:t.documentVersion,replay_stats:x,cls:Q?{device_pixel_ratio:Q}:void 0,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:"view",view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:(o=t.commonViewMetrics.cumulativeLayoutShift)===null||o===void 0?void 0:o.value,cumulative_layout_shift_time:S((i=t.commonViewMetrics.cumulativeLayoutShift)===null||i===void 0?void 0:i.time),cumulative_layout_shift_target_selector:(a=t.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:S((c=t.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.firstByte),dom_complete:S((l=t.initialViewMetrics.navigationTimings)===null||l===void 0?void 0:l.domComplete),dom_content_loaded:S((u=t.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domContentLoaded),dom_interactive:S((d=t.initialViewMetrics.navigationTimings)===null||d===void 0?void 0:d.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:S(t.initialViewMetrics.firstContentfulPaint),first_input_delay:S((f=t.initialViewMetrics.firstInput)===null||f===void 0?void 0:f.delay),first_input_time:S((p=t.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.time),first_input_target_selector:(h=t.initialViewMetrics.firstInput)===null||h===void 0?void 0:h.targetSelector,interaction_to_next_paint:S((m=t.commonViewMetrics.interactionToNextPaint)===null||m===void 0?void 0:m.value),interaction_to_next_paint_time:S((y=t.commonViewMetrics.interactionToNextPaint)===null||y===void 0?void 0:y.time),interaction_to_next_paint_target_selector:(w=t.commonViewMetrics.interactionToNextPaint)===null||w===void 0?void 0:w.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:S((I=t.initialViewMetrics.largestContentfulPaint)===null||I===void 0?void 0:I.value),largest_contentful_paint_target_selector:(g=t.initialViewMetrics.largestContentfulPaint)===null||g===void 0?void 0:g.targetSelector,load_event:S((_=t.initialViewMetrics.navigationTimings)===null||_===void 0?void 0:_.loadEvent),loading_time:yo(S(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},performance:uf(t.commonViewMetrics,t.initialViewMetrics),resource:{count:t.eventCounts.resourceCount},time_spent:S(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:S(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:x?!0:void 0,is_active:t.sessionIsActive?void 0:!1},privacy:{replay_level:e.defaultPrivacyLevel}};return Mt(t.customTimings)||(b.view.custom_timings=Ai(t.customTimings,S)),{rawRumEvent:b,startTime:t.startClocks.relative,duration:t.duration,domainContext:{location:t.location}}}function uf({cumulativeLayoutShift:t,interactionToNextPaint:e},{firstContentfulPaint:n,firstInput:r,largestContentfulPaint:s}){return{cls:t&&{score:t.value,timestamp:S(t.time),target_selector:t.targetSelector,previous_rect:t.previousRect,current_rect:t.currentRect},fcp:n&&{timestamp:S(n)},fid:r&&{duration:S(r.delay),timestamp:S(r.time),target_selector:r.targetSelector},inp:e&&{duration:S(e.value),timestamp:S(e.time),target_selector:e.targetSelector},lcp:s&&{timestamp:S(s.value),target_selector:s.targetSelector,resource_url:s.resourceUrl}}}const lf="rum";function df(t,e,n){const r=Ec(t,lf,s=>pf(t,s),n);return r.expireObservable.subscribe(()=>{e.notify(9)}),r.renewObservable.subscribe(()=>{e.notify(10)}),r.sessionStateUpdateObservable.subscribe(({previousState:s,newState:o})=>{if(!s.forcedReplay&&o.forcedReplay){const i=r.findSession();i&&(i.isReplayForced=!0)}}),{findTrackedSession:s=>{const o=r.findSession(s);if(!(!o||!jo(o.trackingType)))return{id:o.id,sessionReplay:o.trackingType==="1"?1:o.isReplayForced?2:0,anonymousId:o.anonymousId}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:()=>r.updateSessionState({forcedReplay:"1"})}}function ff(){const t={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:Ws("records")?1:0};return{findTrackedSession:()=>t,expire:A,expireObservable:new k,setForcedReplay:A}}function pf(t,e){let n;return hf(e)?n=e:wt(t.sessionSampleRate)?wt(t.sessionReplaySampleRate)?n="1":n="2":n="0",{trackingType:n,isTracked:jo(n)}}function hf(t){return t==="0"||t==="1"||t==="2"}function jo(t){return t==="2"||t==="1"}function mf(t,e,n,r,s,o,i){const a=t.replica,c=$c(t,{endpoint:t.rumEndpointBuilder,encoder:i(2)},a&&{endpoint:a.rumEndpointBuilder,transformMessage:l=>ct(l,{application:{id:a.applicationId}}),encoder:i(3)},r,s,o);return e.subscribe(13,l=>{l.type==="view"?c.upsert(l,l.view.id):c.add(l)}),n.subscribe(l=>c.add(l,hc(t))),c}function gf(t){const e=de();t.subscribe(13,n=>{e.send("rum",n)})}const _f=Ft;function bf(t,e,n,r){const s=le({expireDelay:_f});let o;t.subscribe(1,({startClocks:c})=>{const l=r.href;s.add(a({url:l,referrer:o||document.referrer}),c.relative),o=l}),t.subscribe(6,({endClocks:c})=>{s.closeActive(c.relative)});const i=n.subscribe(({newLocation:c})=>{const l=s.find();if(l){const u=ot();s.closeActive(u),s.add(a({url:c.href,referrer:l.referrer}),u)}});function a({url:c,referrer:l}){return{url:c,referrer:l}}return e.register(0,({startTime:c,eventType:l})=>{const{url:u,referrer:d}=s.find(c);return{type:l,view:{url:u,referrer:d}}}),{findUrl:c=>s.find(c),getAllEntries:()=>s.getAllEntries(),getDeletedEntries:()=>s.getDeletedEntries(),stop:()=>{i.unsubscribe(),s.stop()}}}function yf(t,e){let n=we(e);return new k(r=>{const{stop:s}=vf(t,i),{stop:o}=Sf(t,i);function i(){if(n.href===e.href)return;const a=we(e);r.notify({newLocation:a,oldLocation:n}),n=a}return()=>{s(),o()}})}function vf(t,e){const{stop:n}=K(Gr("pushState"),"pushState",({onPostCall:o})=>{o(e)}),{stop:r}=K(Gr("replaceState"),"replaceState",({onPostCall:o})=>{o(e)}),{stop:s}=N(t,window,"popstate",e);return{stop:()=>{n(),r(),s()}}}function Sf(t,e){return N(t,window,"hashchange",e)}function Gr(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}const Ef=Ft;function wf(t,e,n){const r=le({expireDelay:Ef});return t.subscribe(1,({startClocks:s})=>{r.add({},s.relative)}),t.subscribe(6,({endClocks:s})=>{r.closeActive(s.relative)}),e.register(0,({startTime:s,eventType:o})=>{if(!n.trackFeatureFlagsForEvents.concat(["view","error"]).includes(o))return;const a=r.find(s);if(!(!a||Mt(a)))return{type:o,feature_flags:a}}),{addFeatureFlagEvaluation:(s,o)=>{const i=r.find();i&&(i[s]=o)}}}const Tf=10*G;let te,kn;function If(t,e,n,r){e.enabled&&wt(t.customerDataTelemetrySampleRate)&&(Yo(),kn=!1,n.subscribe(13,()=>{kn=!0}),r.subscribe(({bytesCount:o,messagesCount:i})=>{kn&&(te.batchCount+=1,jr(te.batchBytesCount,o),jr(te.batchMessagesCount,i))}),se(Af,Tf))}function Af(){te.batchCount!==0&&(vt("Customer data measures",te),Yo())}function Hr(){return{min:1/0,max:0,sum:0}}function jr(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function Yo(){te={batchCount:0,batchBytesCount:Hr(),batchMessagesCount:Hr()}}const Cf=4e3,Rf=500,kf=Ft;function xf(t,e,n=Rf){const r=le({expireDelay:kf,maxEntries:Cf});let s;i(Wo(),ot());const{stop:o}=X(e,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],c=>{i(Nf(c),c.timeStamp)},{capture:!0});function i(c,l=ot()){c!==s&&(s=c,r.closeActive(l),r.add({state:s,startTime:l},l))}function a(c,l,u){return r.findAll(l,u).some(d=>d.state===c)}return t.register(0,({startTime:c,duration:l=0,eventType:u})=>{if(u==="view"){const d=r.findAll(c,l);return{type:u,_dd:{page_states:Of(d,c,n)}}}if(u==="action"||u==="error")return{type:u,view:{in_foreground:a("active",c,0)}}}),{wasInPageStateDuringPeriod:a,addPageState:i,stop:()=>{o(),r.stop()}}}function Of(t,e,n){if(t.length!==0)return t.slice(-n).reverse().map(({state:r,startTime:s})=>({state:r,start:S(z(e,s))}))}function Nf(t){return t.type==="freeze"?"frozen":t.type==="pagehide"?t.persisted?"frozen":"terminated":Wo()}function Wo(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function Lf(t){let e;const n=requestAnimationFrame(E(()=>{e=un()})),r=Ho(t).subscribe(s=>{e=s}).unsubscribe;return{get:()=>e?{viewport:e}:void 0,stop:()=>{r(),n&&cancelAnimationFrame(n)}}}const Mf=G;function Pf(t){return new k(e=>Df(t,n=>e.notify(n)))}function Df(t,e){const n=Te(document.cookie,t),r=se(()=>{const s=Te(document.cookie,t);s!==n&&e(s)},Mf);return()=>en(r)}const Yr="datadog-ci-visibility-test-execution-id";function Uf(t,e=Pf(Yr)){var n;let r=St(Yr)||((n=window.Cypress)===null||n===void 0?void 0:n.env("traceId"));const s=e.subscribe(o=>{r=o});return t.register(0,({eventType:o})=>{if(typeof r=="string")return{type:o,session:{type:"ci_test"},ci_test:{test_execution_id:r}}}),{stop:()=>{s.unsubscribe()}}}function Vf(t,e){const n=ft(e,{type:R.LONG_ANIMATION_FRAME,buffered:!0}).subscribe(r=>{for(const s of r){const o=tn(s.startTime),i={date:o.timeStamp,long_task:{id:B(),entry_type:"long-animation-frame",duration:S(s.duration),blocking_duration:S(s.blockingDuration),first_ui_event_timestamp:S(s.firstUIEventTimestamp),render_start:S(s.renderStart),style_and_layout_start:S(s.styleAndLayoutStart),start_time:S(s.startTime),scripts:s.scripts.map(a=>({duration:S(a.duration),pause_duration:S(a.pauseDuration),forced_style_and_layout_duration:S(a.forcedStyleAndLayoutDuration),start_time:S(a.startTime),execution_start:S(a.executionStart),source_url:a.sourceURL,source_function_name:a.sourceFunctionName,source_char_position:a.sourceCharPosition,invoker:a.invoker,invoker_type:a.invokerType,window_attribution:a.windowAttribution}))},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:i,startTime:o.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop:()=>n.unsubscribe()}}function Ff(t,e){const n=ft(e,{type:R.LONG_TASK,buffered:!0}).subscribe(r=>{for(const s of r){if(s.entryType!==R.LONG_TASK||!e.trackLongTasks)break;const o=tn(s.startTime),i={date:o.timeStamp,long_task:{id:B(),entry_type:"long-task",duration:S(s.duration)},type:"long_task",_dd:{discarded:!1}};t.notify(12,{rawRumEvent:i,startTime:o.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop(){n.unsubscribe()}}}function zf(){const t={};return{register(e,n){return t[e]||(t[e]=[]),t[e].push(n),{unregister:()=>{t[e]=t[e].filter(r=>r!==n)}}},triggerHook(e,n){const s=(t[e]||[]).map(o=>o(n));return ct(...s)}}}function Bf(t){t.register(0,({eventType:e})=>{const n=_u(),r=bu();if(!(!n||!r))return{type:e,session:{type:"synthetics"},synthetics:{test_id:n,result_id:r,injected:Js()}}})}function $f(t,e,n){const r=Xn(t),s=n(r);return Hn(e).forEach(([o,i])=>Vn(t,r,o.split(/\.|(?=\[\])/),i)),s}function Vn(t,e,n,r){const[s,...o]=n;if(s==="[]"){Array.isArray(t)&&Array.isArray(e)&&t.forEach((i,a)=>Vn(i,e[a],o,r));return}if(!(!Wr(t)||!Wr(e))){if(o.length>0)return Vn(t[s],e[s],o,r);Gf(t,s,e[s],r)}}function Gf(t,e,n,r){const s=zt(n);s===r?t[e]=L(n):r==="object"&&(s==="undefined"||s==="null")&&(t[e]={})}function Wr(t){return zt(t)==="object"}const Yt={"view.name":"string","view.url":"string","view.referrer":"string"},Wt={context:"object"},xn={service:"string",version:"string"};let qo;function Hf(t,e,n,r,s,o,i,a,c){qo={view:{"view.performance.lcp.resource_url":"string",...Wt,...Yt},error:{"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string",...Wt,...Yt,...xn},resource:{"resource.url":"string",...Xe(Dt.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},...Wt,...Yt,...xn},action:{"action.target.name":"string",...Wt,...Yt,...xn},long_task:{"long_task.scripts[].source_url":"string","long_task.scripts[].invoker":"string",...Wt,...Yt},vital:{...Wt,...Yt}};const l={error:yn("error",t.eventRateLimiterThreshold,c),action:yn("action",t.eventRateLimiterThreshold,c),vital:yn("vital",t.eventRateLimiterThreshold,c)};e.subscribe(12,({startTime:u,duration:d,rawRumEvent:f,domainContext:p,customerContext:h})=>{const m=s.findView(u),y=o.findUrl(u),w=r.findTrackedSession(u);if(w&&m&&!y&&Xe(Dt.MISSING_URL_CONTEXT_TELEMETRY)&&vt("Missing URL entry",{debug:{eventType:f.type,startTime:u,urlEntries:o.getAllEntries(),urlDeletedEntries:o.getDeletedEntries(),viewEntries:s.getAllEntries(),viewDeletedEntries:s.getDeletedEntries()}}),w&&m&&y){const I=a(),g={_dd:{format_version:2,drift:Si(),configuration:{session_sample_rate:Ye(t.sessionSampleRate,3),session_replay_sample_rate:Ye(t.sessionReplaySampleRate,3)},browser_sdk_version:Ut()?"6.6.3":void 0},application:{id:t.applicationId},date:V(),source:"browser",session:{id:w.id,type:"user"},display:i.get(),connectivity:Ps(),context:I.context},_=ct(g,n.triggerHook(0,{eventType:f.type,startTime:u,duration:d}),{context:h},f);"has_replay"in _.session||(_.session.has_replay=I.hasReplay),_.type==="view"&&(_.session.sampled_for_replay=w.sessionReplay===1),w.anonymousId&&!I.user.anonymous_id&&t.trackAnonymousUser&&(I.user.anonymous_id=w.anonymousId),Mt(I.user)||(_.usr=I.user),!Mt(I.account)&&I.account.id&&(_.account=I.account),jf(_,t.beforeSend,p,l)&&(Mt(_.context)&&delete _.context,e.notify(13,_))}})}function jf(t,e,n,r){var s;if(e){const i=$f(t,qo[t.type],a=>e(a,n));if(i===!1&&t.type!=="view")return!1;i===!1&&C.warn("Can't dismiss view events using beforeSend!")}return!((s=r[t.type])===null||s===void 0?void 0:s.isLimitReached())}function Yf(t,e,n,r){return{context:t.getContext(),user:e.getContext(),account:n.getContext(),hasReplay:r.isRecording()?!0:void 0}}function Wf(t,e,n,r,s,o,i){const a=[],c=new Ku,l=zf();c.subscribe(13,F=>Kn("rum",F));const u=qf(t);u.setContextProvider(()=>{var F,dn;return{application:{id:t.applicationId},session:{id:(F=h.findTrackedSession())===null||F===void 0?void 0:F.id},view:{id:(dn=I.findView())===null||dn===void 0?void 0:dn.id},action:{id:P.findActionId()}}});const d=F=>{c.notify(14,{error:F}),vt("Error reported to customer",{"error.message":F.message})},f=Fc(t),p=f.subscribe(F=>{c.notify(11,F)});a.push(()=>p.unsubscribe());const h=Ut()?ff():df(t,c,o);if(Ut())gf(c);else{const F=mf(t,c,u.observable,d,f,h.expireObservable,s);a.push(()=>F.stop()),If(t,u,c,F.flushObservable)}const m=Yu(),y=yf(t,location),w=xf(l,t),I=Ju(c),g=bf(c,l,y,location),_=wf(c,l,t),{observable:x,stop:Q}=Wu();a.push(Q);const b=Fu(t),Z=zu(t),T=Bu(t),O=()=>Yf(b,Z,T,e),{actionContexts:P,addAction:tt,stop:Y}=Kf(c,l,t,h,w,m,x,g,I,O,d);a.push(Y),pc();const{addTiming:kt,startView:pe,setViewName:$t,setViewContext:Gt,setViewContextProperty:Ht,getViewContext:mt,stop:ut}=af(c,l,t,location,m,x,y,e,I,r);a.push(ut);const{stop:et}=md(c,t,w);if(a.push(et),t.trackLongTasks)if(Bt(R.LONG_ANIMATION_FRAME)){const{stop:F}=Vf(c,t);a.push(F)}else Ff(c,t);const{addError:gt}=rd(c,t);ol(c,t,h,O);const _t=vu(c,w,i),mi=qu(t.applicationId,h,I,P,g);return a.push(()=>n.stop()),{addAction:tt,addError:gt,addTiming:kt,addFeatureFlagEvaluation:_.addFeatureFlagEvaluation,startView:pe,setViewContext:Gt,setViewContextProperty:Ht,getViewContext:mt,setViewName:$t,lifeCycle:c,viewHistory:I,session:h,stopSession:()=>h.expire(),getInternalContext:mi.get,startDurationVital:_t.startDurationVital,stopDurationVital:_t.stopDurationVital,addDurationVital:_t.addDurationVital,globalContext:b,userContext:Z,accountContext:T,stop:()=>{a.forEach(F=>F())}}}function qf(t){const e=dc("browser-rum-sdk",t);if(Ut()){const n=de();e.observable.subscribe(r=>n.send("internal_telemetry",r))}return e}function Kf(t,e,n,r,s,o,i,a,c,l,u){const d=td(t,e,o,i,n),f=Lf(n),p=Uf(e);return Bf(e),Hf(n,t,e,r,c,a,f,l,u),{pageStateHistory:s,addAction:d.addAction,actionContexts:d.actionContexts,stop:()=>{d.stop(),p.stop(),f.stop(),c.stop(),s.stop(),a.stop()}}}function Xf(t,{session:e,viewContext:n,errorType:r}){const s=e?e.id:"no-session-id",o=[];r!==void 0&&o.push(`error-type=${r}`),n&&(o.push(`seed=${n.id}`),o.push(`from=${n.startClocks.timeStamp}`));const i=Jf(t),a=`/rum/replay/sessions/${s}`;return`${i}${a}?${o.join("&")}`}function Jf(t){const e=t.site,n=t.subdomain||Zf(t);return`https://${n?`${n}.`:""}${e}`}function Zf(t){switch(t.site){case Lt:case la:return"app";case ws:return"dd";default:return}}const Qf=1e3;let nt;function tp(t){return ln(t).segments_count}function ep(t){ln(t).segments_count+=1}function np(t){ln(t).records_count+=1}function rp(t,e){ln(t).segments_total_raw_size+=e}function sp(t){return nt==null?void 0:nt.get(t)}function ln(t){nt||(nt=new Map);let e;return nt.has(t)?e=nt.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},nt.set(t,e),nt.size>Qf&&op()),e}function op(){if(!nt)return;const t=nt.keys().next().value;t&&nt.delete(t)}function Ko(t,e,n){let r=0,s=[],o,i=0;const a=[],{stop:c}=N(t,e,"message",({data:d})=>{if(d.type!=="wrote"||d.streamId!==n)return;r+=d.additionalBytesCount,s.push(d.result),o=d.trailer;const f=a.shift();f&&f.id===d.id?f.writeCallback?f.writeCallback(d.result.byteLength):f.finishCallback&&f.finishCallback():(c(),vt("Worker responses received out of order."))});function l(){const d=s.length===0?new Uint8Array(0):Ii(s.concat(o)),f={rawBytesCount:r,output:d,outputBytesCount:d.byteLength,encoding:"deflate"};return r=0,s=[],f}function u(){i>0&&(e.postMessage({action:"reset",streamId:n}),i=0)}return{isAsync:!0,get isEmpty(){return i===0},write(d,f){e.postMessage({action:"write",id:i,data:d,streamId:n}),a.push({id:i,writeCallback:f,data:d}),i+=1},finish(d){u(),a.length?(a.forEach(f=>{delete f.writeCallback}),a[a.length-1].finishCallback=()=>d(l())):d(l())},finishSync(){u();const d=a.map(f=>(delete f.writeCallback,delete f.finishCallback,f.data)).join("");return{...l(),pendingData:d}},estimateEncodedBytesCount(d){return d.length/8},stop(){c()}}}function cr({configuredUrl:t,error:e,source:n,scriptType:r}){if(C.error(`${n} failed to start: an error occurred while initializing the ${r}:`,e),e instanceof Event||e instanceof Error&&ip(e.message)){let s;t?s=`Please make sure the ${r} URL ${t} is correct and CSP is correctly configured.`:s="Please make sure CSP is correctly configured.",C.error(`${s} See documentation at ${Qe}/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay`)}else r==="worker"&&Jn(e)}function ip(t){return t.includes("Content Security Policy")||t.includes("requires 'TrustedScriptURL'")}const ap=30*G;function Xo(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['(()=>{function t(t){const e=t.reduce(((t,e)=>t+e.length),0),a=new Uint8Array(e);let n=0;for(const e of t)a.set(e,n),n+=e.length;return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=Array(576);e(s);var h=Array(60);e(h);var l=Array(512);e(l);var _=Array(256);e(_);var o=Array(29);e(o);var d,u,f,c=Array(30);function p(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(c);var v=function(t){return t<256?l[t]:l[256+(t>>>7)]},w=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},m=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},b=function(t,e,a){m(t,a[2*e],a[2*e+1])},y=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},z=function(t,e,a){var n,r,i=Array(16),s=0;for(n=1;n<=15;n++)i[n]=s=s+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=y(i[h]++,h))}},k=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},x=function(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},A=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},U=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&A(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!A(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},B=function(t,e,r){var i,s,h,l,d=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],s=t.pending_buf[t.l_buf+d],d++,0===i?b(t,s,e):(h=_[s],b(t,h+256+1,e),0!==(l=a[h])&&(s-=o[h],m(t,s,l)),i--,h=v(i),b(t,h,r),0!==(l=n[h])&&(i-=c[h],m(t,i,l)))}while(d<t.last_lit);b(t,256,e)},I=function(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,_=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==i[2*a]?(t.heap[++t.heap_len]=_=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=_<2?++_:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=s[2*r+1]);for(e.max_code=_,a=t.heap_len>>1;a>=1;a--)U(t,i,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,U(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,i,s,h,l=e.dyn_tree,_=e.max_code,o=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,p=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(i=l[2*l[2*(n=t.heap[a])+1]+1]+1)>c&&(i=c,p++),l[2*n+1]=i,n>_||(t.bl_count[i]++,s=0,n>=f&&(s=u[n-f]),h=l[2*n],t.opt_len+=h*(i+s),d&&(t.static_len+=h*(o[2*n+1]+s)));if(0!==p){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,p-=2}while(p>0);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)(r=t.heap[--a])>_||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}}(t,e),z(i,_,t.bl_count)},E=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<_?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4))},C=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<_)do{b(t,r,t.bl_tree)}while(0!=--h);else 0!==r?(r!==i&&(b(t,r,t.bl_tree),h--),b(t,16,t.bl_tree),m(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),m(t,h-3,3)):(b(t,18,t.bl_tree),m(t,h-11,7));h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4)}},D=!1,M=function(t,e,a,n){m(t,0+(n?1:0),3),function(t,e,a){x(t),w(t,a),w(t,~a),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a)},j=M,L=function(t,e,a,n){for(var r=65535&t,i=t>>>16&65535,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16},S=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),T=function(t,e,a,n){var r=S,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return~t},O={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q=j,F=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(_[a]+256+1)]++,t.dyn_dtree[2*v(e)]++),t.last_lit===t.lit_bufsize-1},G=-2,H=258,J=262,K=103,N=113,P=666,Q=function(t,e){return t.msg=O[e],e},R=function(t){return(t<<1)-(t>4?9:0)},V=function(t){for(var e=t.length;--e>=0;)t[e]=0},W=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},X=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Y=function(t,e){(function(t,e,a,n){var r,l,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),_=function(t){var e;for(E(t,t.dyn_ltree,t.l_desc.max_code),E(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*i[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=r&&(r=l)):r=l=a+5,a+4<=r&&-1!==e?M(t,e,a,n):4===t.strategy||l===r?(m(t,2+(n?1:0),3),B(t,s,h)):(m(t,4+(n?1:0),3),function(t,e,a,n){var r;for(m(t,e-257,5),m(t,a-1,5),m(t,n-4,4),r=0;r<n;r++)m(t,t.bl_tree[2*i[r]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),B(t,t.dyn_ltree,t.dyn_dtree)),k(t),n&&x(t)})(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,X(t.strm)},Z=function(t,e){t.pending_buf[t.pending++]=e},$=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},tt=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,_=t.window,o=t.w_mask,d=t.prev,u=t.strstart+H,f=_[i+s-1],c=_[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(a=e)+s]===c&&_[a+s-1]===f&&_[a]===_[i]&&_[++a]===_[i+1]){i+=2,a++;do{}while(_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&i<u);if(n=H-(u-i),i=u-H,n>s){if(t.match_start=e,s=n,n>=h)break;f=_[i+s-1],c=_[i+s]}}}while((e=d[e&o])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},et=function(t){var e,a,n,r,i,s,h,l,_,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-J)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,h=t.window,l=t.strstart+t.lookahead,_=r,o=void 0,(o=s.avail_in)>_&&(o=_),a=0===o?0:(s.avail_in-=o,h.set(s.input.subarray(s.next_in,s.next_in+o),l),1===s.state.wrap?s.adler=L(s.adler,h,o,l):2===s.state.wrap&&(s.adler=T(s.adler,h,o,l)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=W(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=W(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<J&&0!==t.strm.avail_in)},at=function(t,e){for(var a,n;;){if(t.lookahead<J){if(et(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-J&&(t.match_length=tt(t,a)),t.match_length>=3)if(n=F(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=W(t,t.ins_h,t.window[t.strstart+1]);else n=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2},nt=function(t,e){for(var a,n,r;;){if(t.lookahead<J){if(et(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-J&&(t.match_length=tt(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=F(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Y(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=F(t,0,t.window[t.strstart-1]))&&Y(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=F(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2};function rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var it=[new rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(et(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Y(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-J&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Y(t,!1),t.strm.avail_out),1)})),new rt(4,4,8,4,at),new rt(4,5,16,8,at),new rt(4,6,32,32,at),new rt(4,4,16,16,nt),new rt(8,16,32,32,nt),new rt(8,16,128,128,nt),new rt(8,32,128,256,nt),new rt(32,128,258,1024,nt),new rt(32,258,258,4096,nt)];function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}for(var ht=function(t){var e,i=function(t){if(!t||!t.state)return Q(t,G);t.total_in=t.total_out=0,t.data_type=2;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:N,t.adler=2===e.wrap?0:1,e.last_flush=0,function(t){D||(function(){var t,e,i,g,v,w=Array(16);for(i=0,g=0;g<28;g++)for(o[g]=i,t=0;t<1<<a[g];t++)_[i++]=g;for(_[i-1]=g,v=0,g=0;g<16;g++)for(c[g]=v,t=0;t<1<<n[g];t++)l[v++]=g;for(v>>=7;g<30;g++)for(c[g]=v<<7,t=0;t<1<<n[g]-7;t++)l[256+v++]=g;for(e=0;e<=15;e++)w[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,w[8]++;for(;t<=255;)s[2*t+1]=9,t++,w[9]++;for(;t<=279;)s[2*t+1]=7,t++,w[7]++;for(;t<=287;)s[2*t+1]=8,t++,w[8]++;for(z(s,287,w),t=0;t<30;t++)h[2*t+1]=5,h[2*t]=y(t,5);d=new p(s,a,257,286,15),u=new p(h,n,0,30,15),f=new p([],r,0,19,7)}(),D=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,u),t.bl_desc=new g(t.bl_tree,f),t.bi_buf=0,t.bi_valid=0,k(t)}(e),0}(t);return 0===i&&((e=t.state).window_size=2*e.w_size,V(e.head),e.max_lazy_match=it[e.level].max_lazy,e.good_match=it[e.level].good_length,e.nice_match=it[e.level].nice_length,e.max_chain_length=it[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i},lt=function(t,e){var a,n;if(!t||!t.state||e>5||e<0)return t?Q(t,G):G;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===P&&4!==e)return Q(t,0===t.avail_out?-5:G);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Z(r,31),Z(r,139),Z(r,8),r.gzhead?(Z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Z(r,255&r.gzhead.time),Z(r,r.gzhead.time>>8&255),Z(r,r.gzhead.time>>16&255),Z(r,r.gzhead.time>>24&255),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Z(r,255&r.gzhead.extra.length),Z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=T(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,3),r.status=N);else{var h=8+(r.w_bits-8<<4)<<8;h|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(h|=32),h+=31-h%31,r.status=N,$(r,h),0!==r.strstart&&($(r,t.adler>>>16),$(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending!==r.pending_buf_size));)Z(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=K)}else r.status=K;if(r.status===K&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&X(t),r.pending+2<=r.pending_buf_size&&(Z(r,255&t.adler),Z(r,t.adler>>8&255),t.adler=0,r.status=N)):r.status=N),0!==r.pending){if(X(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&R(e)<=R(i)&&4!==e)return Q(t,-5);if(r.status===P&&0!==t.avail_in)return Q(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&r.status!==P){var l=2===r.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(et(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=H){if(et(t),t.lookahead<=H&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+H;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=H-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=F(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):it[r.level].func(r,e);if(3!==l&&4!==l||(r.status=P),1===l||3===l)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===l&&(1===e?function(t){m(t,2,3),b(t,256,s),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}(r):5!==e&&(q(r,0,0,!1),3===e&&(V(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),X(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Z(r,255&t.adler),Z(r,t.adler>>8&255),Z(r,t.adler>>16&255),Z(r,t.adler>>24&255),Z(r,255&t.total_in),Z(r,t.total_in>>8&255),Z(r,t.total_in>>16&255),Z(r,t.total_in>>24&255)):($(r,t.adler>>>16),$(r,65535&t.adler)),X(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},_t=function(t){if(!t||!t.state)return G;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==K&&e!==N&&e!==P?Q(t,G):(t.state=null,e===N?Q(t,-3):0)},ot=new Uint8Array(256),dt=0;dt<256;dt++)ot[dt]=dt>=252?6:dt>=248?5:dt>=240?4:dt>=224?3:dt>=192?2:1;ot[254]=ot[254]=1;var ut=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ft=Object.prototype.toString;function ct(){this.options={level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ut,this.strm.avail_out=0;var e,a,n=function(t,e,a,n,r,i){if(!t)return G;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||8!==a||n<8||n>15||e<0||e>9||i<0||i>4)return Q(t,G);8===n&&(n=9);var h=new st;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,ht(t)}(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw Error(O[n]);if(t.header&&(e=this.strm,a=t.header,e&&e.state&&(2!==e.state.wrap||(e.state.gzhead=a))),t.dictionary){var r;if(r="[object ArrayBuffer]"===ft.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=function(t,e){var a=e.length;if(!t||!t.state)return G;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return G;if(1===r&&(t.adler=L(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(V(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,h=t.next_in,l=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,et(n);n.lookahead>=3;){var _=n.strstart,o=n.lookahead-2;do{n.ins_h=W(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--o);n.strstart=_,n.lookahead=2,et(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,n.wrap=r,0}(this.strm,r)))throw Error(O[n]);this._dict_set=!0}}function pt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:e+"",streamId:a})}}function gt(t){const e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}ct.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?4:0,"[object ArrayBuffer]"===ft.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(2===n||3===n)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(1===(a=lt(r,n)))return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=_t(this.strm),this.onEnd(a),this.ended=!0,0===a;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ct.prototype.onData=function(t){this.chunks.push(t)},ct.prototype.onEnd=function(t){0===t&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,h=t.length;i<h;i++){var l=t[i];r.set(l,s),s+=l.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e=self){try{const a=new Map;e.addEventListener("message",(n=>{try{const r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"6.6.3"};case"write":{let n=e.get(a.streamId);n||(n=new ct,e.set(a.streamId,n));const r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(h),i=0,r=0;i<h;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,2),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:gt(n),additionalBytesCount:i.length}}case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){pt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){pt(e,t)}}()})();'])))}let M={status:0};function Jo(t,e,n,r=Xo){switch(M.status===0&&cp(t,e,r),M.status){case 1:return M.initializationFailureCallbacks.push(n),M.worker;case 3:return M.worker}}function qr(){return M.status}function cp(t,e,n=Xo){try{const r=n(t),{stop:s}=N(t,r,"error",a=>{On(t,e,a)}),{stop:o}=N(t,r,"message",({data:a})=>{a.type==="errored"?On(t,e,a.error,a.streamId):a.type==="initialized"&&lp(a.version)});r.postMessage({action:"init"}),U(()=>up(e),ap),M={status:1,worker:r,stop:()=>{s(),o()},initializationFailureCallbacks:[]}}catch(r){On(t,e,r)}}function up(t){M.status===1&&(C.error(`${t} failed to start: a timeout occurred while initializing the Worker`),M.initializationFailureCallbacks.forEach(e=>e()),M={status:2})}function lp(t){M.status===1&&(M={status:3,worker:M.worker,stop:M.stop,version:t})}function On(t,e,n,r){M.status===1||M.status===0?(cr({configuredUrl:t.workerUrl,error:n,source:e,scriptType:"worker"}),M.status===1&&M.initializationFailureCallbacks.forEach(s=>s()),M={status:2}):Jn(n,{worker_version:M.status===3&&M.version,stream_id:r})}function Zo(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function dp(t,e,n,r){const s=e.findTrackedSession(),o=fp(s,r),i=n.findView();return Xf(t,{viewContext:i,errorType:o,session:s})}function fp(t,e){if(!Zo())return"browser-not-supported";if(!t)return"rum-not-tracked";if(t.sessionReplay===0)return"incorrect-session-plan";if(!e)return"replay-not-started"}function pp(t,e,n,r,s,o){let i=0,a;e.subscribe(9,()=>{(i===2||i===3)&&(u(),i=1)}),e.subscribe(10,()=>{i===1&&l()});const c=async()=>{const[d]=await Promise.all([s(),jc(t,"interactive")]);if(i!==2)return;const f=o();if(!f||!d){i=0;return}({stop:a}=d(e,t,n,r,f)),i=3};function l(d){const f=n.findTrackedSession();if(hp(f,d)){i=1;return}mp(i)||(i=2,c().catch(yt),gp(f,d)&&n.setForcedReplay())}function u(){i===3&&(a==null||a()),i=0}return{start:l,stop:u,getSessionReplayLink(){return dp(t,n,r,i!==0)},isRecording:()=>i===3}}function hp(t,e){return!t||t.sessionReplay===0&&(!e||!e.force)}function mp(t){return t===2||t===3}function gp(t,e){return e&&e.force&&t.sessionReplay===0}function _p(){let t=0;return{strategy:{start(){t=1},stop(){t=2},isRecording:()=>!1,getSessionReplayLink:A},shouldStartImmediately(e){return t===1||t===0&&!e.startSessionReplayRecordingManually}}}function bp(t,e){if(Ut()&&!Ws("records")||!Zo())return{start:A,stop:A,getReplayStats:()=>{},onRumStart:A,isRecording:()=>!1,getSessionReplayLink:()=>{}};let{strategy:n,shouldStartImmediately:r}=_p();return{start:o=>n.start(o),stop:()=>n.stop(),getSessionReplayLink:()=>n.getSessionReplayLink(),onRumStart:s,isRecording:()=>qr()===3&&n.isRecording(),getReplayStats:o=>qr()===3?sp(o):void 0};function s(o,i,a,c,l){let u;function d(){return u||(l??(l=Jo(i,"Datadog Session Replay",()=>{n.stop()},e)),l&&(u=Ko(i,l,1))),u}n=pp(i,o,a,c,t,d),r(i)&&n.start()}}const yp="modulepreload",vp=function(t){return"/"+t},Kr={},Qo=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(c=>{if(c=vp(c),c in Kr)return;Kr[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let p=o.length-1;p>=0;p--){const h=o[p];if(h.href===c&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":yp,l||(f.as="script",f.crossOrigin=""),f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};async function Sp(t=Ep){try{return await t()}catch(e){cr({error:e,source:"Recorder",scriptType:"module"})}}async function Ep(){return(await Qo(()=>Promise.resolve().then(()=>Uh),void 0)).startRecording}function wp(){return pt().Profiler!==void 0}async function Tp(t=Ip){try{return await t()}catch(e){cr({error:e,source:"Profiler",scriptType:"module"})}}async function Ip(){return(await Qo(()=>Promise.resolve().then(()=>Jh),void 0)).createRumProfiler}function Ap(){let t;function e(n,r,s,o){!wp()||!wt(r.profilingSampleRate)||Tp().then(i=>{if(!i){vt("[DD_RUM] Failed to lazy load the RUM Profiler");return}t=i(r,n,s),t.start(o.findView())}).catch(yt)}return{onRumStart:e,stop:()=>{t==null||t.stop().catch(yt)}}}const Cp=bp(Sp),Rp=Ap(),kp=Hu(Wf,Cp,Rp,{startDeflateWorker:Jo,createDeflateEncoder:Ko});ec(pt(),"DD_RUM",kp);let Xr,Jr,Fn;const xp=[],ti=[];function Qh(t={}){return{name:"react",onInit({publicApi:e,initConfiguration:n}){Xr=e,Jr=t;for(const r of xp)r(Jr,Xr);t.router&&(n.trackViewsManually=!0)},onRumStart({strategy:e}){Fn=e;for(const n of ti)n(e)},getConfigurationTelemetry(){return{router:!!t.router}}}}function Op(t){Fn?t(Fn):ti.push(t)}function Np(t,e){const n=Ae("react error"),r=$();Op(s=>{It(()=>{var o;s.addError({error:t,handlingStack:n,componentStack:(o=e.componentStack)!==null&&o!==void 0?o:void 0,context:{framework:"react"},startClocks:r})})})}const Zr={didCatch:!1,error:null};class tm extends pr.Component{constructor(e){super(e),this.resetError=()=>{this.setState(Zr)},this.state=Zr}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}componentDidCatch(e,n){Np(e,n)}render(){return this.state.didCatch?pr.createElement(this.props.fallback,{error:this.state.error,resetError:this.resetError}):this.props.children}}const ur=new WeakMap;function dt(t){return ur.has(t)}function Lp(t){let e=t;for(;e;){if(!dt(e)&&!sr(e))return!1;e=on(e)}return!0}function q(t){return ur.get(t)}function Mp(t,e){ur.set(t,e)}function lr(t,e){const n=t.tagName,r=t.value;if(an(t,e)){const s=t.type;return n==="INPUT"&&(s==="button"||s==="submit"||s==="reset")?r:!r||n==="OPTION"?void 0:Et}if(n==="OPTION"||n==="SELECT")return t.value;if(!(n!=="INPUT"&&n!=="TEXTAREA"))return r}const Pp=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,Dp=/^[A-Za-z]+:|^\/\//,Up=/^data:.*,/i;function Vp(t,e){return t.replace(Pp,(n,r,s,o,i,a)=>{const c=s||i||a;if(!e||!c||Dp.test(c)||Up.test(c))return n;const l=r||o||"";return`url(${l}${Fp(c,e)}${l})`})}function Fp(t,e){try{return nn(t,e).href}catch{return t}}const zp=/[^a-z1-6-_]/;function ei(t){const e=t.toLowerCase().trim();return zp.test(e)?"div":e}function Qr(t,e){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${e}' style='background-color:silver'%3E%3C/svg%3E`}const lt={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},Vt={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},rt={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},it={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},ts={Play:0,Pause:1};function ni(t){if(!(t===void 0||t.length===0))return t.map(e=>{const n=e.cssRules||e.rules;return{cssRules:Array.from(n,o=>o.cssText),disabled:e.disabled||void 0,media:e.media.length>0?Array.from(e.media):void 0}})}function ri(t,e,n,r){if(e===v.HIDDEN)return null;const s=t.getAttribute(n);if(e===v.MASK&&n!==or&&!xo.includes(n)&&n!==r.actionNameAttribute){const o=t.tagName;switch(n){case"title":case"alt":case"placeholder":return Et}if(o==="IMG"&&(n==="src"||n==="srcset")){const i=t;if(i.naturalWidth>0)return Qr(i.naturalWidth,i.naturalHeight);const{width:a,height:c}=t.getBoundingClientRect();return a>0||c>0?Qr(a,c):Ar}if(o==="SOURCE"&&(n==="src"||n==="srcset"))return Ar;if(o==="A"&&n==="href"||s&&n.startsWith("data-")||o==="IFRAME"&&n==="srcdoc")return Et}return!s||typeof s!="string"?s:go(s)?_o(s):s}function Bp(t,e,n){if(e===v.HIDDEN)return{};const r={},s=ei(t.tagName),o=t.ownerDocument;for(let u=0;u<t.attributes.length;u+=1){const f=t.attributes.item(u).name,p=ri(t,e,f,n.configuration);p!==null&&(r[f]=p)}if(t.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){const u=lr(t,e);u!==void 0&&(r.value=u)}if(s==="option"&&e===v.ALLOW){const u=t;u.selected&&(r.selected=u.selected)}if(s==="link"){const u=Array.from(o.styleSheets).find(f=>f.href===t.href),d=zn(u);d&&u&&(r._cssText=d)}if(s==="style"&&t.sheet){const u=zn(t.sheet);u&&(r._cssText=u)}const i=t;if(s==="input"&&(i.type==="radio"||i.type==="checkbox")&&(e===v.ALLOW?r.checked=!!i.checked:an(i,e)&&delete r.checked),s==="audio"||s==="video"){const u=t;r.rr_mediaState=u.paused?"paused":"played"}let a,c;const l=n.serializationContext;switch(l.status){case 0:a=Math.round(t.scrollTop),c=Math.round(t.scrollLeft),(a||c)&&l.elementsScrollPositions.set(t,{scrollTop:a,scrollLeft:c});break;case 1:l.elementsScrollPositions.has(t)&&({scrollTop:a,scrollLeft:c}=l.elementsScrollPositions.get(t));break}return c&&(r.rr_scrollLeft=c),a&&(r.rr_scrollTop=a),r}function zn(t){if(!t)return null;let e;try{e=t.rules||t.cssRules}catch{}if(!e)return null;const n=Array.from(e,Oi()?$p:si).join("");return Vp(n,t.href)}function $p(t){if(Hp(t)&&t.selectorText.includes(":")){const e=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return t.cssText.replace(e,"$1\\$2")}return si(t)}function si(t){return Gp(t)&&zn(t.styleSheet)||t.cssText}function Gp(t){return"styleSheet"in t}function Hp(t){return"selectorText"in t}function dr(t,e){const n=Wp(t,e);if(!n)return null;const r=q(t)||Yp(),s=n;return s.id=r,Mp(t,r),e.serializedNodeIds&&e.serializedNodeIds.add(r),s}let jp=1;function Yp(){return jp++}function fr(t,e){const n=[];return wo(t,r=>{const s=dr(r,e);s&&n.push(s)}),n}function Wp(t,e){switch(t.nodeType){case t.DOCUMENT_NODE:return qp(t,e);case t.DOCUMENT_FRAGMENT_NODE:return Kp(t,e);case t.DOCUMENT_TYPE_NODE:return Xp(t);case t.ELEMENT_NODE:return Jp(t,e);case t.TEXT_NODE:return Qp(t,e);case t.CDATA_SECTION_NODE:return th()}}function qp(t,e){return{type:Vt.Document,childNodes:fr(t,e),adoptedStyleSheets:ni(t.adoptedStyleSheets)}}function Kp(t,e){const n=sr(t);return n&&e.serializationContext.shadowRootsController.addShadowRoot(t),{type:Vt.DocumentFragment,childNodes:fr(t,e),isShadowRoot:n,adoptedStyleSheets:n?ni(t.adoptedStyleSheets):void 0}}function Xp(t){return{type:Vt.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId}}function Jp(t,e){const n=ei(t.tagName),r=Zp(t)||void 0,s=To(Io(t),e.parentNodePrivacyLevel);if(s===v.HIDDEN){const{width:a,height:c}=t.getBoundingClientRect();return{type:Vt.Element,tagName:n,attributes:{rr_width:`${a}px`,rr_height:`${c}px`,[or]:yl},childNodes:[],isSVG:r}}if(s===v.IGNORE)return;const o=Bp(t,s,e);let i=[];if(bl(t)&&n!=="style"){let a;e.parentNodePrivacyLevel===s&&e.ignoreWhiteSpace===(n==="head")?a=e:a={...e,parentNodePrivacyLevel:s,ignoreWhiteSpace:n==="head"},i=fr(t,a)}return{type:Vt.Element,tagName:n,attributes:o,childNodes:i,isSVG:r}}function Zp(t){return t.tagName==="svg"||t instanceof SVGElement}function Qp(t,e){const n=Ao(t,e.ignoreWhiteSpace||!1,e.parentNodePrivacyLevel);if(n!==void 0)return{type:Vt.Text,textContent:n}}function th(){return{type:Vt.CDATA,textContent:""}}function eh(t,e,n){return dr(t,{serializationContext:n,parentNodePrivacyLevel:e.defaultPrivacyLevel,configuration:e})}function oi(t){return!!t.changedTouches}function Me(t){return t.composed===!0&&sn(t.target)?t.composedPath()[0]:t.target}const es=25;function nh(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>es||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>es}const rh=(t,e)=>{const n=window.visualViewport,r={layoutViewportX:t,layoutViewportY:e,visualViewportX:t,visualViewportY:e};if(n)nh(n)?(r.layoutViewportX=Math.round(t+n.offsetLeft),r.layoutViewportY=Math.round(e+n.offsetTop)):(r.visualViewportX=Math.round(t-n.offsetLeft),r.visualViewportY=Math.round(e-n.offsetTop));else return r;return r},ii=t=>({scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width});function at(t,e){return{data:{source:t,...e},type:lt.IncrementalSnapshot,timestamp:V()}}const sh=50;function oh(t,e){const{throttled:n,cancel:r}=At(o=>{const i=Me(o);if(dt(i)){const a=ai(o);if(!a)return;const c={id:q(i),timeOffset:0,x:a.x,y:a.y};e(at(oi(o)?rt.TouchMove:rt.MouseMove,{positions:[c]}))}},sh,{trailing:!1}),{stop:s}=X(t,document,["mousemove","touchmove"],n,{capture:!0,passive:!0});return{stop:()=>{s(),r()}}}function ai(t){let{clientX:e,clientY:n}=oi(t)?t.changedTouches[0]:t;if(window.visualViewport){const{visualViewportX:r,visualViewportY:s}=rh(e,n);e=r,n=s}if(!Number.isFinite(e)||!Number.isFinite(n)){t.isTrusted&&vt("mouse/touch event without x/y");return}return{x:e,y:n}}const ns={pointerup:it.MouseUp,mousedown:it.MouseDown,click:it.Click,contextmenu:it.ContextMenu,dblclick:it.DblClick,focus:it.Focus,blur:it.Blur,touchstart:it.TouchStart,touchend:it.TouchEnd};function ih(t,e,n){const r=s=>{const o=Me(s);if(ht(o,t.defaultPrivacyLevel)===v.HIDDEN||!dt(o))return;const i=q(o),a=ns[s.type];let c;if(a!==it.Blur&&a!==it.Focus){const u=ai(s);if(!u)return;c={id:i,type:a,x:u.x,y:u.y}}else c={id:i,type:a};const l={id:n.getIdForEvent(s),...at(rt.MouseInteraction,c)};e(l)};return X(t,document,Object.keys(ns),r,{capture:!0,passive:!0})}const ah=100;function ci(t,e,n,r=document){const{throttled:s,cancel:o}=At(a=>{const c=Me(a);if(!c||ht(c,t.defaultPrivacyLevel)===v.HIDDEN||!dt(c))return;const l=q(c),u=c===document?{scrollTop:ar(),scrollLeft:Go()}:{scrollTop:Math.round(c.scrollTop),scrollLeft:Math.round(c.scrollLeft)};n.set(c,u),e(at(rt.Scroll,{id:l,x:u.scrollLeft,y:u.scrollTop}))},ah),{stop:i}=N(t,r,"scroll",s,{capture:!0,passive:!0});return{stop:()=>{i(),o()}}}const ch=200;function uh(t,e){const n=Ho(t).subscribe(r=>{e(at(rt.ViewportResize,r))});return{stop:()=>{n.unsubscribe()}}}function lh(t,e){const n=window.visualViewport;if(!n)return{stop:A};const{throttled:r,cancel:s}=At(()=>{e({data:ii(n),type:lt.VisualViewport,timestamp:V()})},ch,{trailing:!1}),{stop:o}=X(t,n,["resize","scroll"],r,{capture:!0,passive:!0});return{stop:()=>{o(),s()}}}function dh(t,e){return X(t,document,["play","pause"],n=>{const r=Me(n);!r||ht(r,t.defaultPrivacyLevel)===v.HIDDEN||!dt(r)||e(at(rt.MediaInteraction,{id:q(r),type:n.type==="play"?ts.Play:ts.Pause}))},{capture:!0,passive:!0})}function fh(t){function e(s,o){s&&dt(s.ownerNode)&&o(q(s.ownerNode))}const n=[K(CSSStyleSheet.prototype,"insertRule",({target:s,parameters:[o,i]})=>{e(s,a=>t(at(rt.StyleSheetRule,{id:a,adds:[{rule:o,index:i}]})))}),K(CSSStyleSheet.prototype,"deleteRule",({target:s,parameters:[o]})=>{e(s,i=>t(at(rt.StyleSheetRule,{id:i,removes:[{index:o}]})))})];typeof CSSGroupingRule<"u"?r(CSSGroupingRule):(r(CSSMediaRule),r(CSSSupportsRule));function r(s){n.push(K(s.prototype,"insertRule",({target:o,parameters:[i,a]})=>{e(o.parentStyleSheet,c=>{const l=rs(o);l&&(l.push(a||0),t(at(rt.StyleSheetRule,{id:c,adds:[{rule:i,index:l}]})))})}),K(s.prototype,"deleteRule",({target:o,parameters:[i]})=>{e(o.parentStyleSheet,a=>{const c=rs(o);c&&(c.push(i),t(at(rt.StyleSheetRule,{id:a,removes:[{index:c}]})))})}))}return{stop:()=>{n.forEach(s=>s.stop())}}}function rs(t){const e=[];let n=t;for(;n.parentRule;){const i=Array.from(n.parentRule.cssRules).indexOf(n);e.unshift(i),n=n.parentRule}if(!n.parentStyleSheet)return;const s=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return e.unshift(s),e}function ph(t,e){return X(t,window,["focus","blur"],()=>{e({data:{has_focus:document.hasFocus()},type:lt.Focus,timestamp:V()})})}function hh(t,e,n){const r=t.subscribe(12,s=>{var o,i;s.rawRumEvent.type==="action"&&s.rawRumEvent.action.type==="click"&&(!((i=(o=s.rawRumEvent.action.frustration)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.length)&&"events"in s.domainContext&&s.domainContext.events&&s.domainContext.events.length&&e({timestamp:s.rawRumEvent.date,type:lt.FrustrationRecord,data:{frustrationTypes:s.rawRumEvent.action.frustration.type,recordIds:s.domainContext.events.map(a=>n.getIdForEvent(a))}})});return{stop:()=>{r.unsubscribe()}}}function mh(t,e){const n=t.subscribe(5,()=>{e({timestamp:V(),type:lt.ViewEnd})});return{stop:()=>{n.unsubscribe()}}}function ui(t,e,n=document){const r=t.defaultPrivacyLevel,s=new WeakMap,o=n!==document,{stop:i}=X(t,n,o?["change"]:["input","change"],u=>{const d=Me(u);(d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement||d instanceof HTMLSelectElement)&&c(d)},{capture:!0,passive:!0});let a;if(o)a=A;else{const u=[me(HTMLInputElement.prototype,"value",c),me(HTMLInputElement.prototype,"checked",c),me(HTMLSelectElement.prototype,"value",c),me(HTMLTextAreaElement.prototype,"value",c),me(HTMLSelectElement.prototype,"selectedIndex",c)];a=()=>{u.forEach(d=>d.stop())}}return{stop:()=>{a(),i()}};function c(u){const d=ht(u,r);if(d===v.HIDDEN)return;const f=u.type;let p;if(f==="radio"||f==="checkbox"){if(an(u,d))return;p={isChecked:u.checked}}else{const m=lr(u,d);if(m===void 0)return;p={text:m}}l(u,p);const h=u.name;f==="radio"&&h&&u.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(h)}"]`).forEach(m=>{m!==u&&l(m,{isChecked:!1})})}function l(u,d){if(!dt(u))return;const f=s.get(u);(!f||f.text!==d.text||f.isChecked!==d.isChecked)&&(s.set(u,d),e(at(rt.Input,{id:q(u),...d})))}}const gh=100,_h=16;function bh(t){let e=A,n=[];function r(){e(),t(n),n=[]}const{throttled:s,cancel:o}=At(r,_h,{leading:!1});return{addMutations:i=>{n.length===0&&(e=Xs(s,{timeout:gh})),n.push(...i)},flush:r,stop:()=>{e(),o()}}}function li(t,e,n,r){const s=co();if(!s)return{stop:A,flush:A};const o=bh(a=>{yh(a.concat(i.takeRecords()),t,e,n)}),i=new s(E(o.addMutations));return i.observe(r,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{i.disconnect(),o.stop()},flush:()=>{o.flush()}}}function yh(t,e,n,r){const s=new Map;t.filter(d=>d.type==="childList").forEach(d=>{d.removedNodes.forEach(f=>{di(f,r.removeShadowRoot)})});const o=t.filter(d=>d.target.isConnected&&Lp(d.target)&&ht(d.target,n.defaultPrivacyLevel,s)!==v.HIDDEN),{adds:i,removes:a,hasBeenSerialized:c}=vh(o.filter(d=>d.type==="childList"),n,r,s),l=Sh(o.filter(d=>d.type==="characterData"&&!c(d.target)),n,s),u=Eh(o.filter(d=>d.type==="attributes"&&!c(d.target)),n,s);!l.length&&!u.length&&!a.length&&!i.length||e(at(rt.Mutation,{adds:i,removes:a,texts:l,attributes:u}))}function vh(t,e,n,r){const s=new Set,o=new Map;for(const f of t)f.addedNodes.forEach(p=>{s.add(p)}),f.removedNodes.forEach(p=>{s.has(p)||o.set(p,f.target),s.delete(p)});const i=Array.from(s);wh(i);const a=new Set,c=[];for(const f of i){if(u(f))continue;const p=ht(f.parentNode,e.defaultPrivacyLevel,r);if(p===v.HIDDEN||p===v.IGNORE)continue;const h=dr(f,{serializedNodeIds:a,parentNodePrivacyLevel:p,serializationContext:{status:2,shadowRootsController:n},configuration:e});if(!h)continue;const m=on(f);c.push({nextId:d(f),parentId:q(m),node:h})}const l=[];return o.forEach((f,p)=>{dt(p)&&l.push({parentId:q(f),id:q(p)})}),{adds:c,removes:l,hasBeenSerialized:u};function u(f){return dt(f)&&a.has(q(f))}function d(f){let p=f.nextSibling;for(;p;){if(dt(p))return q(p);p=p.nextSibling}return null}}function Sh(t,e,n){var r;const s=[],o=new Set,i=t.filter(a=>o.has(a.target)?!1:(o.add(a.target),!0));for(const a of i){if(a.target.textContent===a.oldValue)continue;const l=ht(on(a.target),e.defaultPrivacyLevel,n);l===v.HIDDEN||l===v.IGNORE||s.push({id:q(a.target),value:(r=Ao(a.target,!1,l))!==null&&r!==void 0?r:null})}return s}function Eh(t,e,n){const r=[],s=new Map,o=t.filter(a=>{const c=s.get(a.target);return c&&c.has(a.attributeName)?!1:(c?c.add(a.attributeName):s.set(a.target,new Set([a.attributeName])),!0)}),i=new Map;for(const a of o){if(a.target.getAttribute(a.attributeName)===a.oldValue)continue;const l=ht(a.target,e.defaultPrivacyLevel,n),u=ri(a.target,l,a.attributeName,e);let d;if(a.attributeName==="value"){const p=lr(a.target,l);if(p===void 0)continue;d=p}else typeof u=="string"?d=u:d=null;let f=i.get(a.target);f||(f={id:q(a.target),attributes:{}},r.push(f),i.set(a.target,f)),f.attributes[a.attributeName]=d}return r}function wh(t){t.sort((e,n)=>{const r=e.compareDocumentPosition(n);return r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_CONTAINS||r&Node.DOCUMENT_POSITION_FOLLOWING?1:r&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function di(t,e){sn(t)&&e(t.shadowRoot),wo(t,n=>di(n,e))}function Th(){const t=new WeakMap;return{set(e,n){e===document&&!document.scrollingElement||t.set(e===document?document.scrollingElement:e,n)},get(e){return t.get(e)},has(e){return t.has(e)}}}const Ih=(t,e,n)=>{const r=new Map,s={addShadowRoot:o=>{if(r.has(o))return;const i=li(e,t,s,o),a=ui(t,e,o),c=ci(t,e,n,o);r.set(o,{flush:()=>i.flush(),stop:()=>{i.stop(),a.stop(),c.stop()}})},removeShadowRoot:o=>{const i=r.get(o);i&&(i.stop(),r.delete(o))},stop:()=>{r.forEach(({stop:o})=>o())},flush:()=>{r.forEach(({flush:o})=>o())}};return s};function Ah(t,e,n,r,s,o){const i=(c=V(),l={status:0,elementsScrollPositions:t,shadowRootsController:e})=>{const{width:u,height:d}=un(),f=[{data:{height:d,href:window.location.href,width:u},type:lt.Meta,timestamp:c},{data:{has_focus:document.hasFocus()},type:lt.Focus,timestamp:c},{data:{node:eh(document,r,l),initialOffset:{left:Go(),top:ar()}},type:lt.FullSnapshot,timestamp:c}];return window.visualViewport&&f.push({data:ii(window.visualViewport),type:lt.VisualViewport,timestamp:c}),f};o(i());const{unsubscribe:a}=n.subscribe(2,c=>{s(),o(i(c.startClocks.timeStamp,{shadowRootsController:e,status:1,elementsScrollPositions:t}))});return{stop:a}}function Ch(){const t=new WeakMap;let e=1;return{getIdForEvent(n){return t.has(n)||t.set(n,e++),t.get(n)}}}function Rh(t){const{emit:e,configuration:n,lifeCycle:r}=t;if(!e)throw new Error("emit function is required");const s=f=>{e(f),Kn("record",{record:f});const p=t.viewHistory.findView();np(p.id)},o=Th(),i=Ih(n,s,o),{stop:a}=Ah(o,i,r,n,c,f=>f.forEach(p=>s(p)));function c(){i.flush(),u.flush()}const l=Ch(),u=li(s,n,i,document),d=[u,oh(n,s),ih(n,s,l),ci(n,s,o,document),uh(n,s),ui(n,s),dh(n,s),fh(s),ph(n,s),lh(n,s),hh(r,s,l),mh(r,f=>{c(),s(f)})];return{stop:()=>{i.stop(),d.forEach(f=>f.stop()),a()},flushMutations:c,shadowRootsController:i}}function kh(t,e,n){const r=new FormData;r.append("segment",new Blob([t],{type:"application/octet-stream"}),`${e.session.id}-${e.start}`);const s={raw_segment_size:n,compressed_segment_size:t.byteLength,...e},o=JSON.stringify(s);return r.append("event",new Blob([o],{type:"application/json"})),{data:r,bytesCount:t.byteLength}}function xh({context:t,creationReason:e,encoder:n}){let r=0;const s=t.view.id,o={start:1/0,end:-1/0,creation_reason:e,records_count:0,has_full_snapshot:!1,index_in_view:tp(s),source:"browser",...t};ep(s);function i(c,l){o.start=Math.min(o.start,c.timestamp),o.end=Math.max(o.end,c.timestamp),o.records_count+=1,o.has_full_snapshot||(o.has_full_snapshot=c.type===lt.FullSnapshot);const u=n.isEmpty?'{"records":[':",";n.write(u+JSON.stringify(c),d=>{r+=d,l(r)})}function a(c){if(n.isEmpty)throw new Error("Empty segment flushed");n.write(`],${JSON.stringify(o).slice(1)}
`),n.finish(l=>{rp(o.view.id,l.rawBytesCount),c(o,l)})}return{addRecord:i,flush:a}}const Oh=5*G;let fi=6e4;function Nh(t,e,n,r,s,o){return Lh(t,()=>Mh(e.applicationId,n,r),s,o)}function Lh(t,e,n,r){let s={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:o}=t.subscribe(2,()=>{a("view_change")}),{unsubscribe:i}=t.subscribe(11,c=>{a(c.reason)});function a(c){s.status===1&&(s.segment.flush((l,u)=>{const d=kh(u.output,l,u.rawBytesCount);qs(c)?n.sendOnExit(d):n.send(d)}),W(s.expirationTimeoutId)),c!=="stop"?s={status:0,nextSegmentCreationReason:c}:s={status:2}}return{addRecord:c=>{if(s.status!==2){if(s.status===0){const l=e();if(!l)return;s={status:1,segment:xh({encoder:r,context:l,creationReason:s.nextSegmentCreationReason}),expirationTimeoutId:U(()=>{a("segment_duration_limit")},Oh)}}s.segment.addRecord(c,l=>{l>fi&&a("segment_bytes_limit")})}},stop:()=>{a("stop"),o(),i()}}}function Mh(t,e,n){const r=e.findTrackedSession(),s=n.findView();if(!(!r||!s))return{application:{id:t},session:{id:r.id},view:{id:s.id}}}function Ph(t){const e=de();return{addRecord:n=>{const r=t.findView();e.send("record",n,r.id)}}}function Dh(t,e,n,r,s,o){const i=[],a=d=>{t.notify(14,{error:d}),vt("Error reported to customer",{"error.message":d.message})},c=o||Ys(e.sessionReplayEndpointBuilder,fi,a);let l;if(Ut())({addRecord:l}=Ph(r));else{const d=Nh(t,e,n,r,c,s);l=d.addRecord,i.push(d.stop)}const{stop:u}=Rh({emit:l,configuration:e,lifeCycle:t,viewHistory:r});return i.push(u),{stop:()=>{i.forEach(d=>d())}}}const Uh=Object.freeze(Object.defineProperty({__proto__:null,startRecording:Dh},Symbol.toStringTag,{value:"Module"}));function Vh(t){let e=0;for(const n of t)n.stackId!==void 0&&e++;return e}const Re=new Map;let ne=!1;function Fh(){ne=performance.now()}function zh(){ne=!1,Re.clear()}function Bh(t,e){Re.set(e,t)}function pi(t){if(!(ne===!1||t.startTime<ne))return Re.get(t.startTime)}function $h(t){if(!(ne===!1||t<ne))for(const e of Re.keys())e<t&&Re.delete(e)}function Gh({rawRumEvent:t,startTime:e}){if(t.type!=="long_task")return;const n=t.long_task.id;Bh(n,e)}const Hh=(t,e,n,r)=>{const s=jh(t,e,n,r),o=Wh(t,s),i=e.build("fetch",o);return vt("Sending profile to public profiling intake",{profilingIntakeURL:i,applicationId:n,sessionId:r}),fetch(i,{body:o.data,method:"POST"})};function jh(t,e,n,r){const s=e.tags,o=qh(t,n,r),i=Yh(s),a=new Date(t.timeOrigin+t.startTime),c=new Date(t.timeOrigin+t.endTime);return{...o,attachments:["wall-time.json"],start:a.toISOString(),end:c.toISOString(),family:"chrome",runtime:"chrome",format:"json",version:4,tags_profiler:i.join(",")}}function Yh(t){return t.concat(["language:javascript","runtime:chrome","family:chrome","host:browser"])}function Wh(t,e){const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=new FormData;return r.append("event",new Blob([JSON.stringify(e)],{type:"application/json"}),"event.json"),r.append("wall-time.json",n,"wall-time.json"),{data:r,bytesCount:0}}function qh(t,e,n){const r={application:{id:e}};n&&(r.session={id:n});const s=Array.from(new Set(t.views.map(i=>i.viewId)));s.length&&(r.view={id:s});const o=t.longTasks.map(i=>pi(i)).filter(i=>i!==void 0);return o.length&&(r.long_task={id:o}),r}const Kh={sendProfile:Hh},hi={sampleIntervalMs:10,collectIntervalMs:6e4,minProfileDurationMs:5e3,minNumberOfSamples:50};function Xh(t,e,n,r=hi){const s=Bt(R.LONG_ANIMATION_FRAME);let o;const i=[];let a={state:"stopped"};function c(T){a.state!=="running"&&(o=T?{startTime:T.startClocks.relative,viewId:T.id,viewName:T.name}:void 0,i.push(N(t,window,"visibilitychange",g).stop,N(t,window,"beforeunload",_).stop),d())}async function l(){await p("stopped"),zh(),i.forEach(T=>T())}function u(T){if(T.state==="running")return{cleanupTasks:T.cleanupTasks,observer:T.observer};const O=[];let P;if(t.trackLongTasks){P=new PerformanceObserver(w),P.observe({entryTypes:[x()]});const Y=e.subscribe(12,kt=>{Gh(kt)});Fh(),O.push(()=>P==null?void 0:P.disconnect()),O.push(Y.unsubscribe)}const tt=e.subscribe(2,Y=>{h({viewId:Y.id,viewName:Y.name,startTime:Y.startClocks.relative})});return O.push(tt.unsubscribe),{cleanupTasks:O,observer:P}}function d(){const T=pt().Profiler;if(!T)throw new Error("RUM Profiler is not supported in this browser.");f(a).catch(yt);const{cleanupTasks:O,observer:P}=u(a);let tt;try{tt=new T({sampleInterval:r.sampleIntervalMs,maxBufferSize:Math.round(r.collectIntervalMs*1.5/r.sampleIntervalMs)})}catch(Y){C.warn("[DD_RUM] Profiler startup failed. Ensure your server includes the `Document-Policy: js-profiling` response header when serving HTML pages.",Y);return}a={state:"running",startTime:performance.now(),profiler:tt,timeoutId:U(d,r.collectIntervalMs),longTasks:[],views:[],cleanupTasks:O,observer:P},h(o),tt.addEventListener("samplebufferfull",y)}async function f(T){var O,P;if(T.state!=="running")return;I((P=(O=T.observer)===null||O===void 0?void 0:O.takeRecords())!==null&&P!==void 0?P:[]),W(T.timeoutId),T.profiler.removeEventListener("samplebufferfull",y);const{startTime:tt,longTasks:Y,views:kt}=T,pe=performance.now();await T.profiler.stop().then($t=>{const Gt=performance.now(),Ht=Y.length>0,mt=Gt-tt<r.minProfileDurationMs,ut=Vh($t.samples)<r.minNumberOfSamples;!Ht&&(mt||ut)||(m(Object.assign($t,{startTime:tt,endTime:Gt,timeOrigin:performance.timeOrigin,longTasks:Y,views:kt,sampleInterval:r.sampleIntervalMs})),$h(pe))}).catch(yt)}async function p(T){a.state==="running"&&(a.cleanupTasks.forEach(O=>O()),await f(a),a={state:T})}function h(T){a.state!=="running"||!T||a.views.push(T)}function m(T){var O;const P=(O=n.findTrackedSession())===null||O===void 0?void 0:O.id;Kh.sendProfile(T,t.profilingEndpointBuilder,t.applicationId,P).catch(yt)}function y(){d()}function w(T){I(T.getEntries())}function I(T){if(a.state==="running")for(const O of T)O.duration<r.sampleIntervalMs||a.longTasks.push({id:pi(O),duration:O.duration,entryType:O.entryType,startTime:O.startTime})}function g(){document.visibilityState==="hidden"&&a.state==="running"?p("paused").catch(yt):document.visibilityState==="visible"&&a.state==="paused"&&d()}function _(){d()}function x(){return s?"long-animation-frame":"longtask"}function Q(){return a.state==="stopped"}function b(){return a.state==="running"}function Z(){return a.state==="paused"}return{start:c,stop:l,isStopped:Q,isRunning:b,isPaused:Z}}const Jh=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_RUM_PROFILER_CONFIGURATION:hi,createRumProfiler:Xh},Symbol.toStringTag,{value:"Module"}));export{Qo as _,kp as d,Qh as r};
//# sourceMappingURL=datadog-CPn9TOhM.js.map
