"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2212],{75693:(t,e,i)=>{i.d(e,{N:()=>p});var s=i(66691);let o={type:"change"},n={type:"start"},a={type:"end"},r=new s.RlV,h=new s.Zcv,l=Math.cos(70*s.cj9.DEG2RAD),c=new s.Pq0,u=2*Math.PI;class p extends s.H2z{constructor(t,e=null){super(t,e),this.state=-1,this.target=new s.Pq0,this.cursor=new s.Pq0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:s.kBv.ROTATE,MIDDLE:s.kBv.DOLLY,RIGHT:s.kBv.PAN},this.touches={ONE:s.wtR.ROTATE,TWO:s.wtR.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new s.Pq0,this._lastQuaternion=new s.PTz,this._lastTargetPosition=new s.Pq0,this._quat=new s.PTz().setFromUnitVectors(t.up,new s.Pq0(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new s.YHV,this._sphericalDelta=new s.YHV,this._scale=1,this._panOffset=new s.Pq0,this._rotateStart=new s.I9Y,this._rotateEnd=new s.I9Y,this._rotateDelta=new s.I9Y,this._panStart=new s.I9Y,this._panEnd=new s.I9Y,this._panDelta=new s.I9Y,this._dollyStart=new s.I9Y,this._dollyEnd=new s.I9Y,this._dollyDelta=new s.I9Y,this._dollyDirection=new s.Pq0,this._mouse=new s.I9Y,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=y.bind(this),this._onPointerDown=d.bind(this),this._onPointerUp=m.bind(this),this._onContextMenu=w.bind(this),this._onMouseWheel=f.bind(this),this._onKeyDown=g.bind(this),this._onTouchStart=x.bind(this),this._onTouchMove=v.bind(this),this._onMouseDown=_.bind(this),this._onMouseMove=b.bind(this),this._interceptControlDown=P.bind(this),this._interceptControlUp=M.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(o),this.update(),this.state=-1}update(t=null){let e=this.object.position;c.copy(e).sub(this.target),c.applyQuaternion(this._quat),this._spherical.setFromVector3(c),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(i)&&isFinite(n)&&(i<-Math.PI?i+=u:i>Math.PI&&(i-=u),n<-Math.PI?n+=u:n>Math.PI&&(n-=u),i<=n?this._spherical.theta=Math.max(i,Math.min(n,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+n)/2?Math.max(i,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let a=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),a=t!=this._spherical.radius}if(c.setFromSpherical(this._spherical),c.applyQuaternion(this._quatInverse),e.copy(this.target).add(c),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){let e=c.length();t=this._clampDistance(e*this._scale);let i=e-t;this.object.position.addScaledVector(this._dollyDirection,i),this.object.updateMatrixWorld(),a=!!i}else if(this.object.isOrthographicCamera){let e=new s.Pq0(this._mouse.x,this._mouse.y,0);e.unproject(this.object);let i=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),a=i!==this.object.zoom;let o=new s.Pq0(this._mouse.x,this._mouse.y,0);o.unproject(this.object),this.object.position.sub(o).add(e),this.object.updateMatrixWorld(),t=c.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(r.origin.copy(this.object.position),r.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(r.direction))<l?this.object.lookAt(this.target):(h.setFromNormalAndCoplanarPoint(this.object.up,this.target),r.intersectPlane(h,this.target))))}else if(this.object.isOrthographicCamera){let t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),a=!0)}return this._scale=1,this._performCursorZoom=!1,!!(a||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(o),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?u/60*this.autoRotateSpeed*t:u/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){c.setFromMatrixColumn(e,0),c.multiplyScalar(-t),this._panOffset.add(c)}_panUp(t,e){!0===this.screenSpacePanning?c.setFromMatrixColumn(e,1):(c.setFromMatrixColumn(e,0),c.crossVectors(this.object.up,c)),c.multiplyScalar(t),this._panOffset.add(c)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let s=this.object.position;c.copy(s).sub(this.target);let o=c.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/i.clientHeight,this.object.matrix),this._panUp(2*e*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),s=t-i.left,o=e-i.top,n=i.width,a=i.height;this._mouse.x=s/n*2-1,this._mouse.y=-(o/a*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(u*this._rotateDelta.x/e.clientHeight),this._rotateUp(u*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(u*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-u*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(u*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-u*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panStart.set(i,s)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,o=Math.sqrt(i*i+s*s);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(u*this._rotateDelta.x/e.clientHeight),this._rotateUp(u*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,o=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let n=(t.pageX+e.x)*.5,a=(t.pageY+e.y)*.5;this._updateZoomParameters(n,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return void this._pointers.splice(e,1)}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new s.I9Y,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function d(t){!1===this.enabled||(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function y(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function m(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(a),this.state=-1;break;case 1:let e=this._pointers[0],i=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:i.x,pageY:i.y})}}function _(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case s.kBv.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=1;break;case s.kBv.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=0}break;case s.kBv.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(n)}function b(t){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function f(t){!1!==this.enabled&&!1!==this.enableZoom&&-1===this.state&&(t.preventDefault(),this.dispatchEvent(n),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(a))}function g(t){!1!==this.enabled&&this._handleKeyDown(t)}function x(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case s.wtR.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=3;break;case s.wtR.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case s.wtR.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=5;break;case s.wtR.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(n)}function v(t){switch(this._trackPointer(t),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=-1}}function w(t){!1!==this.enabled&&t.preventDefault()}function P(t){"Control"===t.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M(t){"Control"===t.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}},91376:(t,e,i)=>{i.d(e,{c:()=>n});var s=i(66691);let o=s.er$;class n extends s.aHM{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,i,o){let n=this,a=new s.Y9S(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(t,function(i){try{e(n.parse(i))}catch(e){o?o(e):console.error(e),n.manager.itemError(t)}},i,o)}parse(t){let e=this;function i(t,e,i,s,o,a,r,h){if(0==e||0==i)return void t.lineTo(h.x,h.y);s=s*Math.PI/180,e=Math.abs(e),i=Math.abs(i);let l=(r.x-h.x)/2,c=(r.y-h.y)/2,u=Math.cos(s)*l+Math.sin(s)*c,p=-Math.sin(s)*l+Math.cos(s)*c,d=e*e,y=i*i,m=u*u,_=p*p,b=m/d+_/y;if(b>1){let t=Math.sqrt(b);e*=t,i*=t,d=e*e,y=i*i}let f=d*_+y*m,g=Math.sqrt(Math.max(0,(d*y-f)/f));o===a&&(g=-g);let x=g*e*p/i,v=-g*i*u/e,w=Math.cos(s)*x-Math.sin(s)*v+(r.x+h.x)/2,P=Math.sin(s)*x+Math.cos(s)*v+(r.y+h.y)/2,M=n(1,0,(u-x)/e,(p-v)/i),k=n((u-x)/e,(p-v)/i,(-u-x)/e,(-p-v)/i)%(2*Math.PI);t.currentPath.absellipse(w,P,e,i,M,M+k,0===a,s)}function n(t,e,i,s){let o=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+s*s),n=Math.acos(Math.max(-1,Math.min(1,(t*i+e*s)/o)));return t*s-e*i<0&&(n=-n),n}function a(t,e){e=Object.assign({},e);let i={};if(t.hasAttribute("class")){let e=t.getAttribute("class").split(/\s/).filter(Boolean).map(t=>t.trim());for(let t=0;t<e.length;t++)i=Object.assign(i,m["."+e[t]])}function s(s,o,n){void 0===n&&(n=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(s)&&(e[o]=n(t.getAttribute(s))),i[s]&&(e[o]=n(i[s])),t.style&&""!==t.style[s]&&(e[o]=n(t.style[s]))}function o(t){return Math.max(0,Math.min(1,c(t)))}function n(t){return Math.max(0,c(t))}return t.hasAttribute("id")&&(i=Object.assign(i,m["#"+t.getAttribute("id")])),s("fill","fill"),s("fill-opacity","fillOpacity",o),s("fill-rule","fillRule"),s("opacity","opacity",o),s("stroke","stroke"),s("stroke-opacity","strokeOpacity",o),s("stroke-width","strokeWidth",n),s("stroke-linejoin","strokeLineJoin"),s("stroke-linecap","strokeLineCap"),s("stroke-miterlimit","strokeMiterLimit",n),s("visibility","visibility"),e}function r(t,e,i){let s;if("string"!=typeof t)throw TypeError("Invalid input: "+typeof t);let o=/[ \t\r\n]/,n=/[\d]/,a=/[-+]/,r=/\./,h=/,/,l=/e/i,c=/[01]/,u=0,p=!0,d="",y="",m=[];function _(t,e,i){let s=SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw s.partial=i,s}function b(){""!==d&&(""===y?m.push(Number(d)):m.push(Number(d)*Math.pow(10,Number(y)))),d="",y=""}let f=t.length;for(let g=0;g<f;g++){if(s=t[g],Array.isArray(e)&&e.includes(m.length%i)&&c.test(s)){u=1,d=s,b();continue}if(0===u){if(o.test(s))continue;if(n.test(s)||a.test(s)){u=1,d=s;continue}if(r.test(s)){u=2,d=s;continue}h.test(s)&&(p&&_(s,g,m),p=!0)}if(1===u){if(n.test(s)){d+=s;continue}if(r.test(s)){d+=s,u=2;continue}if(l.test(s)){u=3;continue}a.test(s)&&1===d.length&&a.test(d[0])&&_(s,g,m)}if(2===u){if(n.test(s)){d+=s;continue}if(l.test(s)){u=3;continue}r.test(s)&&"."===d[d.length-1]&&_(s,g,m)}if(3===u){if(n.test(s)){y+=s;continue}if(a.test(s)){if(""===y){y+=s;continue}1===y.length&&a.test(y)&&_(s,g,m)}}o.test(s)?(b(),u=0,p=!1):h.test(s)?(b(),u=0,p=!0):a.test(s)?(b(),u=1,d=s):r.test(s)?(b(),u=2,d=s):_(s,g,m)}return b(),m}let h=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(t){let i,s="px";if("string"==typeof t||t instanceof String)for(let e=0,i=h.length;e<i;e++){let i=h[e];if(t.endsWith(i)){s=i,t=t.substring(0,t.length-i.length);break}}return"px"===s&&"px"!==e.defaultUnit?i=l.in[e.defaultUnit]/e.defaultDPI:(i=l[s][e.defaultUnit])<0&&(i=l[s].in*e.defaultDPI),i*parseFloat(t)}function u(t){let e=t.elements;return e[0]*e[4]-e[1]*e[3]<0}function p(t){let e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function d(t){let e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}let y=[],m={},_=[],b=new s.dwI,f=new s.dwI,g=new s.dwI,x=new s.dwI,v=new s.I9Y,w=new s.Pq0,P=new s.dwI,M=new DOMParser().parseFromString(t,"image/svg+xml");return!function t(e,n){var h,l,M,k,E,S;if(1!==e.nodeType)return;let T=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;let e=function(t){let e=new s.dwI;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){let i=c(t.getAttribute("x")||0),s=c(t.getAttribute("y")||0);e.translate(i,s)}if(t.hasAttribute("transform")){let i=t.getAttribute("transform").split(")");for(let t=i.length-1;t>=0;t--){let s=i[t].trim();if(""===s)continue;let o=s.indexOf("("),n=s.length;if(o>0&&o<n){let t=s.slice(0,o),e=r(s.slice(o+1));switch(b.identity(),t){case"translate":if(e.length>=1){let t=e[0],i=0;e.length>=2&&(i=e[1]),b.translate(t,i)}break;case"rotate":if(e.length>=1){let t=0,i=0,s=0;t=e[0]*Math.PI/180,e.length>=3&&(i=e[1],s=e[2]),f.makeTranslation(-i,-s),g.makeRotation(t),x.multiplyMatrices(g,f),f.makeTranslation(i,s),b.multiplyMatrices(f,x)}break;case"scale":if(e.length>=1){let t=e[0],i=t;e.length>=2&&(i=e[1]),b.scale(t,i)}break;case"skewX":1===e.length&&b.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&b.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&b.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(b)}}return e}(t);return _.length>0&&e.premultiply(_[_.length-1]),P.copy(e),_.push(e),e}(e),A=!1,D=null;switch(e.nodeName){case"svg":case"g":n=a(e,n);break;case"style":!function(t){if(t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length)for(let e=0;e<t.sheet.cssRules.length;e++){let i=t.sheet.cssRules[e];if(1!==i.type)continue;let s=i.selectorText.split(/,/gm).filter(Boolean).map(t=>t.trim());for(let t=0;t<s.length;t++){let e=Object.fromEntries(Object.entries(i.style).filter(([,t])=>""!==t));m[s[t]]=Object.assign(m[s[t]]||{},e)}}}(e);break;case"path":n=a(e,n),e.hasAttribute("d")&&(D=function(t){let e=new s.Ld9,o=new s.I9Y,n=new s.I9Y,a=new s.I9Y,h=!0,l=!1,c=t.getAttribute("d");if(""===c||"none"===c)return null;let u=c.match(/[a-df-z][^a-df-z]*/ig);for(let t=0,s=u.length;t<s;t++){var p,d,y,m,_,b,f,g;let s,c=u[t],x=c.charAt(0),v=c.slice(1).trim();switch(!0===h&&(l=!0,h=!1),x){case"M":s=r(v);for(let t=0,i=s.length;t<i;t+=2)o.x=s[t+0],o.y=s[t+1],n.x=o.x,n.y=o.y,0===t?e.moveTo(o.x,o.y):e.lineTo(o.x,o.y),0===t&&a.copy(o);break;case"H":s=r(v);for(let t=0,i=s.length;t<i;t++)o.x=s[t],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"V":s=r(v);for(let t=0,i=s.length;t<i;t++)o.y=s[t],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"L":s=r(v);for(let t=0,i=s.length;t<i;t+=2)o.x=s[t+0],o.y=s[t+1],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"C":s=r(v);for(let t=0,i=s.length;t<i;t+=6)e.bezierCurveTo(s[t+0],s[t+1],s[t+2],s[t+3],s[t+4],s[t+5]),n.x=s[t+2],n.y=s[t+3],o.x=s[t+4],o.y=s[t+5],0===t&&!0===l&&a.copy(o);break;case"S":s=r(v);for(let t=0,i=s.length;t<i;t+=4){e.bezierCurveTo((p=o.x,p-(n.x-p)),(d=o.y,d-(n.y-d)),s[t+0],s[t+1],s[t+2],s[t+3]),n.x=s[t+0],n.y=s[t+1],o.x=s[t+2],o.y=s[t+3],0===t&&!0===l&&a.copy(o)}break;case"Q":s=r(v);for(let t=0,i=s.length;t<i;t+=4)e.quadraticCurveTo(s[t+0],s[t+1],s[t+2],s[t+3]),n.x=s[t+0],n.y=s[t+1],o.x=s[t+2],o.y=s[t+3],0===t&&!0===l&&a.copy(o);break;case"T":s=r(v);for(let t=0,i=s.length;t<i;t+=2){let i=(y=o.x,y-(n.x-y)),r=(m=o.y,m-(n.y-m));e.quadraticCurveTo(i,r,s[t+0],s[t+1]),n.x=i,n.y=r,o.x=s[t+0],o.y=s[t+1],0===t&&!0===l&&a.copy(o)}break;case"A":s=r(v,[3,4],7);for(let t=0,r=s.length;t<r;t+=7){if(s[t+5]==o.x&&s[t+6]==o.y)continue;let r=o.clone();o.x=s[t+5],o.y=s[t+6],n.x=o.x,n.y=o.y,i(e,s[t],s[t+1],s[t+2],s[t+3],s[t+4],r,o),0===t&&!0===l&&a.copy(o)}break;case"m":s=r(v);for(let t=0,i=s.length;t<i;t+=2)o.x+=s[t+0],o.y+=s[t+1],n.x=o.x,n.y=o.y,0===t?e.moveTo(o.x,o.y):e.lineTo(o.x,o.y),0===t&&a.copy(o);break;case"h":s=r(v);for(let t=0,i=s.length;t<i;t++)o.x+=s[t],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"v":s=r(v);for(let t=0,i=s.length;t<i;t++)o.y+=s[t],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"l":s=r(v);for(let t=0,i=s.length;t<i;t+=2)o.x+=s[t+0],o.y+=s[t+1],n.x=o.x,n.y=o.y,e.lineTo(o.x,o.y),0===t&&!0===l&&a.copy(o);break;case"c":s=r(v);for(let t=0,i=s.length;t<i;t+=6)e.bezierCurveTo(o.x+s[t+0],o.y+s[t+1],o.x+s[t+2],o.y+s[t+3],o.x+s[t+4],o.y+s[t+5]),n.x=o.x+s[t+2],n.y=o.y+s[t+3],o.x+=s[t+4],o.y+=s[t+5],0===t&&!0===l&&a.copy(o);break;case"s":s=r(v);for(let t=0,i=s.length;t<i;t+=4){e.bezierCurveTo((_=o.x,_-(n.x-_)),(b=o.y,b-(n.y-b)),o.x+s[t+0],o.y+s[t+1],o.x+s[t+2],o.y+s[t+3]),n.x=o.x+s[t+0],n.y=o.y+s[t+1],o.x+=s[t+2],o.y+=s[t+3],0===t&&!0===l&&a.copy(o)}break;case"q":s=r(v);for(let t=0,i=s.length;t<i;t+=4)e.quadraticCurveTo(o.x+s[t+0],o.y+s[t+1],o.x+s[t+2],o.y+s[t+3]),n.x=o.x+s[t+0],n.y=o.y+s[t+1],o.x+=s[t+2],o.y+=s[t+3],0===t&&!0===l&&a.copy(o);break;case"t":s=r(v);for(let t=0,i=s.length;t<i;t+=2){let i=(f=o.x,f-(n.x-f)),r=(g=o.y,g-(n.y-g));e.quadraticCurveTo(i,r,o.x+s[t+0],o.y+s[t+1]),n.x=i,n.y=r,o.x=o.x+s[t+0],o.y=o.y+s[t+1],0===t&&!0===l&&a.copy(o)}break;case"a":s=r(v,[3,4],7);for(let t=0,r=s.length;t<r;t+=7){if(0==s[t+5]&&0==s[t+6])continue;let r=o.clone();o.x+=s[t+5],o.y+=s[t+6],n.x=o.x,n.y=o.y,i(e,s[t],s[t+1],s[t+2],s[t+3],s[t+4],r,o),0===t&&!0===l&&a.copy(o)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(o.copy(a),e.currentPath.currentPoint.copy(o),h=!0);break;default:console.warn(c)}l=!1}return e}(e));break;case"rect":let I,R,C,L,Y,j,O;n=a(e,n),I=c((h=e).getAttribute("x")||0),R=c(h.getAttribute("y")||0),C=c(h.getAttribute("rx")||h.getAttribute("ry")||0),L=c(h.getAttribute("ry")||h.getAttribute("rx")||0),Y=c(h.getAttribute("width")),j=c(h.getAttribute("height")),(O=new s.Ld9).moveTo(I+C,R),O.lineTo(I+Y-C,R),(0!==C||0!==L)&&O.bezierCurveTo(I+Y-.448084975506*C,R,I+Y,R+.448084975506*L,I+Y,R+L),O.lineTo(I+Y,R+j-L),(0!==C||0!==L)&&O.bezierCurveTo(I+Y,R+j-.448084975506*L,I+Y-.448084975506*C,R+j,I+Y-C,R+j),O.lineTo(I+C,R+j),(0!==C||0!==L)&&O.bezierCurveTo(I+.448084975506*C,R+j,I,R+j-.448084975506*L,I,R+j-L),O.lineTo(I,R+L),(0!==C||0!==L)&&O.bezierCurveTo(I,R+.448084975506*L,I+.448084975506*C,R,I+C,R),D=O;break;case"polygon":let z,q;n=a(e,n),l=e,z=new s.Ld9,q=0,l.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,function(t,e,i){let s=c(e),o=c(i);0===q?z.moveTo(s,o):z.lineTo(s,o),q++}),z.currentPath.autoClose=!0,D=z;break;case"polyline":let N,Z;n=a(e,n),M=e,N=new s.Ld9,Z=0,M.getAttribute("points").replace(/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,function(t,e,i){let s=c(e),o=c(i);0===Z?N.moveTo(s,o):N.lineTo(s,o),Z++}),N.currentPath.autoClose=!1,D=N;break;case"circle":let W,K,V,U,X;n=a(e,n),W=c((k=e).getAttribute("cx")||0),K=c(k.getAttribute("cy")||0),V=c(k.getAttribute("r")||0),(U=new s.wAk).absarc(W,K,V,0,2*Math.PI),(X=new s.Ld9).subPaths.push(U),D=X;break;case"ellipse":let H,B,F,G,Q,J;n=a(e,n),H=c((E=e).getAttribute("cx")||0),B=c(E.getAttribute("cy")||0),F=c(E.getAttribute("rx")||0),G=c(E.getAttribute("ry")||0),(Q=new s.wAk).absellipse(H,B,F,G,0,2*Math.PI),(J=new s.Ld9).subPaths.push(Q),D=J;break;case"line":let $,tt,te,ti,ts;n=a(e,n),$=c((S=e).getAttribute("x1")||0),tt=c(S.getAttribute("y1")||0),te=c(S.getAttribute("x2")||0),ti=c(S.getAttribute("y2")||0),(ts=new s.Ld9).moveTo($,tt),ts.lineTo(te,ti),ts.currentPath.autoClose=!1,D=ts;break;case"defs":A=!0;break;case"use":n=a(e,n);let to=(e.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),tn=e.viewportElement.getElementById(to);tn?t(tn,n):console.warn("SVGLoader: 'use node' references non-existent node id: "+to)}D&&(void 0!==n.fill&&"none"!==n.fill&&D.color.setStyle(n.fill,o),function(t,e){function i(t){w.set(t.x,t.y,1).applyMatrix3(e),t.set(w.x,w.y)}let o=t.subPaths;for(let t=0,n=o.length;t<n;t++){let n=o[t].curves;for(let t=0;t<n.length;t++){let o=n[t];o.isLineCurve?(i(o.v1),i(o.v2)):o.isCubicBezierCurve?(i(o.v0),i(o.v1),i(o.v2),i(o.v3)):o.isQuadraticBezierCurve?(i(o.v0),i(o.v1),i(o.v2)):o.isEllipseCurve&&(v.set(o.aX,o.aY),i(v),o.aX=v.x,o.aY=v.y,function(t){let e=t.elements,i=e[0]*e[3]+e[1]*e[4];return 0!==i&&Math.abs(i/(p(t)*d(t)))>Number.EPSILON}(e)?function(t){let i=t.xRadius,o=t.yRadius,n=Math.cos(t.aRotation),a=Math.sin(t.aRotation),r=new s.Pq0(i*n,i*a,0),h=new s.Pq0(-o*a,o*n,0),l=r.applyMatrix3(e),c=h.applyMatrix3(e),p=b.set(l.x,c.x,0,l.y,c.y,0,0,0,1),d=f.copy(p).invert(),y=g.copy(d).transpose().multiply(d).elements,m=function(t,e,i){let s,o,n,a,r,h=t+i,l=t-i,c=Math.sqrt(l*l+4*e*e);return h>0?o=t*(r=1/(s=.5*(h+c)))*i-e*r*e:h<0?o=.5*(h-c):(s=.5*c,o=-.5*c),Math.abs(n=l>0?l+c:l-c)>2*Math.abs(e)?(a=1/Math.sqrt(1+(r=-2*e/n)*r),n=r*a):0===Math.abs(e)?(n=1,a=0):(n=1/Math.sqrt(1+(r=-.5*n/e)*r),a=r*n),l>0&&(r=n,n=-a,a=r),{rt1:s,rt2:o,cs:n,sn:a}}(y[0],y[1],y[4]),_=Math.sqrt(m.rt1),x=Math.sqrt(m.rt2);if(t.xRadius=1/_,t.yRadius=1/x,t.aRotation=Math.atan2(m.sn,m.cs),!((t.aEndAngle-t.aStartAngle)%(2*Math.PI)<Number.EPSILON)){let i=f.set(_,0,0,0,x,0,0,0,1),o=g.set(m.cs,m.sn,0,-m.sn,m.cs,0,0,0,1),n=i.multiply(o).multiply(p),a=t=>{let{x:e,y:i}=new s.Pq0(Math.cos(t),Math.sin(t),0).applyMatrix3(n);return Math.atan2(i,e)};t.aStartAngle=a(t.aStartAngle),t.aEndAngle=a(t.aEndAngle),u(e)&&(t.aClockwise=!t.aClockwise)}}(o):function(t){let i=p(e),s=d(e);t.xRadius*=i,t.yRadius*=s;let o=i>Number.EPSILON?Math.atan2(e.elements[1],e.elements[0]):Math.atan2(-e.elements[3],e.elements[4]);t.aRotation+=o,u(e)&&(t.aStartAngle*=-1,t.aEndAngle*=-1,t.aClockwise=!t.aClockwise)}(o))}}}(D,P),y.push(D),D.userData={node:e,style:n});let ta=e.childNodes;for(let e=0;e<ta.length;e++){let i=ta[e];A&&"style"!==i.nodeName&&"defs"!==i.nodeName||t(i,n)}T&&(_.pop(),_.length>0?P.copy(_[_.length-1]):P.identity())}(M.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:y,xml:M.documentElement}}static createShapes(t){let e={loc:0,t:0};function i(t,i,s){let o=s.x-i.x,n=s.y-i.y,a=t.x-i.x,r=t.y-i.y,h=o*r-a*n;if(t.x===i.x&&t.y===i.y){e.loc=0,e.t=0;return}if(t.x===s.x&&t.y===s.y){e.loc=1,e.t=1;return}if(h<-Number.EPSILON){e.loc=3;return}if(h>Number.EPSILON){e.loc=4;return}if(o*a<0||n*r<0){e.loc=5;return}if(Math.sqrt(o*o+n*n)<Math.sqrt(a*a+r*r)){e.loc=6;return}e.loc=2,e.t=0!==o?a/o:r/n}let o=0x3b9ac9ff,n=-0x3b9ac9ff,a=t.subPaths.map(t=>{let e=t.getPoints(),i=-0x3b9ac9ff,a=0x3b9ac9ff,r=-0x3b9ac9ff,h=0x3b9ac9ff;for(let t=0;t<e.length;t++){let s=e[t];s.y>i&&(i=s.y),s.y<a&&(a=s.y),s.x>r&&(r=s.x),s.x<h&&(h=s.x)}return n<=r&&(n=r+1),o>=h&&(o=h-1),{curves:t.curves,points:e,isCW:s.xJ6.isClockWise(e),identifier:-1,boundingBox:new s.UtB(new s.I9Y(h,a),new s.I9Y(r,i))}});a=a.filter(t=>t.points.length>1);for(let t=0;t<a.length;t++)a[t].identifier=t;let r=a.map(r=>(function(t,o,n,a,r){var h,l;let c,u;(null==r||""===r)&&(r="nonzero");let p=new s.I9Y;t.boundingBox.getCenter(p);let d=(h=[new s.I9Y(n,p.y),new s.I9Y(a,p.y)],l=t.boundingBox,c=new s.I9Y,l.getCenter(c),u=[],o.forEach(t=>{t.boundingBox.containsPoint(c)&&(function(t,o){let n=[],a=[];for(let r=1;r<t.length;r++){let h=t[r-1],l=t[r];for(let t=1;t<o.length;t++){let r=function(t,s,o,n){let a=t.x,r=s.x,h=o.x,l=n.x,c=t.y,u=s.y,p=o.y,d=n.y,y=(l-h)*(c-p)-(d-p)*(a-h),m=(d-p)*(r-a)-(l-h)*(u-c),_=y/m,b=((r-a)*(c-p)-(u-c)*(a-h))/m;if(0===m&&0!==y||_<=0||_>=1||b<0||b>1)return null;if(0===y&&0===m){for(let h=0;h<2;h++){if(i(0===h?o:n,t,s),0==e.loc){let t=0===h?o:n;return{x:t.x,y:t.y,t:e.t}}if(2==e.loc)return{x:+(a+e.t*(r-a)).toPrecision(10),y:+(c+e.t*(u-c)).toPrecision(10),t:e.t}}return null}for(let a=0;a<2;a++)if(i(0===a?o:n,t,s),0==e.loc){let t=0===a?o:n;return{x:t.x,y:t.y,t:e.t}}return{x:+(a+_*(r-a)).toPrecision(10),y:+(c+_*(u-c)).toPrecision(10),t:_}}(h,l,o[t-1],o[t]);null!==r&&void 0===n.find(t=>t.t<=r.t+Number.EPSILON&&t.t>=r.t-Number.EPSILON)&&(n.push(r),a.push(new s.I9Y(r.x,r.y)))}}return a})(h,t.points).forEach(e=>{u.push({identifier:t.identifier,isCW:t.isCW,point:e})})}),u.sort((t,e)=>t.point.x-e.point.x),u);d.sort((t,e)=>t.point.x-e.point.x);let y=[],m=[];d.forEach(e=>{e.identifier===t.identifier?y.push(e):m.push(e)});let _=y[0].point.x,b=[],f=0;for(;f<m.length&&m[f].point.x<_;)b.length>0&&b[b.length-1]===m[f].identifier?b.pop():b.push(m[f].identifier),f++;if(b.push(t.identifier),"evenodd"===r){let e=b.length%2==0,i=b[b.length-2];return{identifier:t.identifier,isHole:e,for:i}}if("nonzero"===r){let e=!0,i=null,s=null;for(let t=0;t<b.length;t++){let n=b[t];e?(s=o[n].isCW,e=!1,i=n):s!==o[n].isCW&&(s=o[n].isCW,e=!0)}return{identifier:t.identifier,isHole:e,for:i}}console.warn('fill-rule: "'+r+'" is currently not implemented.')})(r,a,o,n,t.userData?t.userData.style.fillRule:void 0)),h=[];return a.forEach(t=>{if(!r[t.identifier].isHole){let e=new s.ypk;e.curves=t.curves,r.filter(e=>e.isHole&&e.for===t.identifier).forEach(t=>{let i=a[t.identifier],o=new s.wAk;o.curves=i.curves,e.holes.push(o)}),h.push(e)}}),h}static getStrokeStyle(t,e,i,s,o){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:i=void 0!==i?i:"miter",strokeLineCap:s=void 0!==s?s:"butt",strokeMiterLimit:o=void 0!==o?o:4}}static pointsToStroke(t,e,i,o){let a=[],r=[],h=[];if(0===n.pointsToStrokeWithBuffers(t,e,i,o,a,r,h))return null;let l=new s.LoY;return l.setAttribute("position",new s.qtW(a,3)),l.setAttribute("normal",new s.qtW(r,3)),l.setAttribute("uv",new s.qtW(h,2)),l}static pointsToStrokeWithBuffers(t,e,i,o,n,a,r,h){let l,c,u,p,d,y=new s.I9Y,m=new s.I9Y,_=new s.I9Y,b=new s.I9Y,f=new s.I9Y,g=new s.I9Y,x=new s.I9Y,v=new s.I9Y,w=new s.I9Y,P=new s.I9Y,M=new s.I9Y,k=new s.I9Y,E=new s.I9Y,S=new s.I9Y,T=new s.I9Y,A=new s.I9Y,D=new s.I9Y;i=void 0!==i?i:12,o=void 0!==o?o:.001,h=void 0!==h?h:0;let I=(t=function(t){let e=!1;for(let i=1,s=t.length-1;i<s;i++)if(t[i].distanceTo(t[i+1])<o){e=!0;break}if(!e)return t;let i=[];i.push(t[0]);for(let e=1,s=t.length-1;e<s;e++)t[e].distanceTo(t[e+1])>=o&&i.push(t[e]);return i.push(t[t.length-1]),i}(t)).length;if(I<2)return 0;let R=t[0].equals(t[I-1]),C=t[0],L=e.strokeWidth/2,Y=1/(I-1),j=0,O,z=!1,q=0,N=3*h,Z=2*h;W(t[0],t[1],y).multiplyScalar(L),v.copy(t[0]).sub(y),w.copy(t[0]).add(y),P.copy(v),M.copy(w);for(let i=1;i<I;i++){if(l=t[i],c=i===I-1?R?t[1]:void 0:t[i+1],W(C,l,y),_.copy(y).multiplyScalar(L),k.copy(l).sub(_),E.copy(l).add(_),O=j+Y,u=!1,void 0!==c){W(l,c,m),_.copy(m).multiplyScalar(L),S.copy(l).sub(_),T.copy(l).add(_),p=!0,_.subVectors(c,C),0>y.dot(_)&&(p=!1),1===i&&(z=p),_.subVectors(c,l),_.normalize();let t=Math.abs(y.dot(_));if(t>Number.EPSILON){let i=L/t;_.multiplyScalar(-i),b.subVectors(l,C),f.copy(b).setLength(i).add(_),A.copy(f).negate();let s=f.length(),o=b.length();b.divideScalar(o),g.subVectors(c,l);let n=g.length();switch(g.divideScalar(n),b.dot(A)<o&&g.dot(A)<n&&(u=!0),D.copy(f).add(l),A.add(l),d=!1,u?p?(T.copy(A),E.copy(A)):(S.copy(A),k.copy(A)):U(),e.strokeLineJoin){case"bevel":X(p,u,O);break;case"round":H(p,u),p?V(l,k,S,O,0):V(l,T,E,O,1);break;default:let a=L*e.strokeMiterLimit/s;a<1?"miter-clip"!==e.strokeLineJoin?X(p,u,O):(H(p,u),p?(g.subVectors(D,k).multiplyScalar(a).add(k),x.subVectors(D,S).multiplyScalar(a).add(S),K(k,O,0),K(g,O,0),K(l,O,.5),K(l,O,.5),K(g,O,0),K(x,O,0),K(l,O,.5),K(x,O,0),K(S,O,0)):(g.subVectors(D,E).multiplyScalar(a).add(E),x.subVectors(D,T).multiplyScalar(a).add(T),K(E,O,1),K(g,O,1),K(l,O,.5),K(l,O,.5),K(g,O,1),K(x,O,1),K(l,O,.5),K(x,O,1),K(T,O,1))):(u?(p?(K(w,j,1),K(v,j,0),K(D,O,0),K(w,j,1),K(D,O,0),K(A,O,1)):(K(w,j,1),K(v,j,0),K(D,O,1),K(v,j,0),K(A,O,0),K(D,O,1)),p?S.copy(D):T.copy(D)):p?(K(k,O,0),K(D,O,0),K(l,O,.5),K(l,O,.5),K(D,O,0),K(S,O,0)):(K(E,O,1),K(D,O,1),K(l,O,.5),K(l,O,.5),K(D,O,1),K(T,O,1)),d=!0)}}else U()}else U();R||i!==I-1||B(t[0],P,M,p,!0,j),j=O,C=l,v.copy(S),w.copy(T)}if(R){if(u&&n){let t=D,e=A;z!==p&&(t=A,e=D),p?(d||z)&&(e.toArray(n,0),e.toArray(n,9),d&&t.toArray(n,3)):(d||!z)&&(e.toArray(n,3),e.toArray(n,9),d&&t.toArray(n,0))}}else B(l,k,E,p,!1,O);return q;function W(t,e,i){return i.subVectors(e,t),i.set(-i.y,i.x).normalize()}function K(t,e,i){n&&(n[N]=t.x,n[N+1]=t.y,n[N+2]=0,a&&(a[N]=0,a[N+1]=0,a[N+2]=1),N+=3,r&&(r[Z]=e,r[Z+1]=i,Z+=2)),q+=3}function V(t,e,s,o,n){y.copy(e).sub(t).normalize(),m.copy(s).sub(t).normalize();let a=Math.PI,r=y.dot(m);1>Math.abs(r)&&(a=Math.abs(Math.acos(r))),a/=i,_.copy(e);for(let e=0,s=i-1;e<s;e++)b.copy(_).rotateAround(t,a),K(_,o,n),K(b,o,n),K(t,o,.5),_.copy(b);K(b,o,n),K(s,o,n),K(t,o,.5)}function U(){K(w,j,1),K(v,j,0),K(k,O,0),K(w,j,1),K(k,O,0),K(E,O,1)}function X(t,e,i){e?t?(K(w,j,1),K(v,j,0),K(k,O,0),K(w,j,1),K(k,O,0),K(A,O,1),K(k,i,0),K(S,i,0),K(A,i,.5)):(K(w,j,1),K(v,j,0),K(E,O,1),K(v,j,0),K(A,O,0),K(E,O,1),K(E,i,1),K(A,i,0),K(T,i,1)):(t?(K(k,i,0),K(S,i,0)):(K(E,i,1),K(T,i,0)),K(l,i,.5))}function H(t,e){e&&(t?(K(w,j,1),K(v,j,0),K(k,O,0),K(w,j,1),K(k,O,0),K(A,O,1),K(k,j,0),K(l,O,.5),K(A,O,1),K(l,O,.5),K(S,j,0),K(A,O,1)):(K(w,j,1),K(v,j,0),K(E,O,1),K(v,j,0),K(A,O,0),K(E,O,1),K(E,j,1),K(A,O,0),K(l,O,.5),K(l,O,.5),K(A,O,0),K(T,j,1)))}function B(t,i,s,o,a,h){switch(e.strokeLineCap){case"round":a?V(t,s,i,h,.5):V(t,i,s,h,.5);break;case"square":if(a)y.subVectors(i,t),m.set(y.y,-y.x),_.addVectors(y,m).add(t),b.subVectors(m,y).add(t),o?(_.toArray(n,3),b.toArray(n,0),b.toArray(n,9)):(_.toArray(n,3),1===r[7]?b.toArray(n,9):_.toArray(n,9),b.toArray(n,0));else{y.subVectors(s,t),m.set(y.y,-y.x),_.addVectors(y,m).add(t),b.subVectors(m,y).add(t);let e=n.length;o?(_.toArray(n,e-3),b.toArray(n,e-6)):(b.toArray(n,e-6),_.toArray(n,e-3)),b.toArray(n,e-12)}}}}}}}]);