# CAPCo Fire Protection Systems - Project Context

This app facilitates PDF submission and review for fire protection systems.

## Core Information

- **Purpose**: Clients submit PDFs, Admins review/approve for fire protection systems
- **Users**: Admins (review/manage) & Clients (submit/download)
- **Auth**: Password protected, redirects to index with latest project

## Tech Stack (IMPORTANT)

- Astro framework
- Tailwind CSS + Flowbite components
- BoxIcons for icons
- Supabase (database/auth)
- **NO REACT** - Use vanilla JS/TypeScript only

## Database Schema Key Points

- `projects`: id (int), author_id (uuid), address, title, status (int), sq_ft, new_construction
- `files`: id (int), project_id (int), author_id (uuid), file_path, uploaded_at, status
- `profiles`: id (uuid), name, phone, role ('Admin'/'Client')
- **Common Issues**: Use `id` not `project_id` in files, `author_id` references user ID not project ID

## RLS Policies

- Admins: Full access to all files/projects
- Clients: Can only view/edit their own projects (projects.author_id = auth.uid())

## Development Guidelines

- Use Astro components (.astro files)
- Vanilla JS/TS in <script> tags, no React components
- Tailwind for styling
- Supabase for backend operations
- Always consider RLS policies when querying data

Always reference this context when making suggestions or implementing features.
