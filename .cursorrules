# Project Context

This app is a website and admin for fire protection systems.

## Core Information

- **Purpose**: Clients submit files, Admins review/approve for fire protection systems
- **Users**: Admins (review/manage) & Clients (submit/download)
- **Auth**: Password protected, redirects to /project/dashboard

## Tech Stack (IMPORTANT)

- Astro framework
- Tailwind CSS + Flowbite components
- BoxIcons for icons
- Supabase (database/auth)
- Railway Hosted, deployed from Github

## Database Schema Key Points

- `projects`: id (int), author_id (uuid), address, title, status (int), sq_ft, new_construction
- `files`: id (int), project_id (int), author_id (uuid), file_path, uploaded_at, status
- `profiles`: id (uuid), name, phone, role ('Admin'/'Client')
- **Common Issues**: Use `id` not `projectId` in files, `authorId` references user ID not project ID

## RLS Policies

- Admins: Full access to all files/projects
- Clients: Can only view/edit their own projects (projects.author_id = auth.uid())

## Development Guidelines

- Use Astro components (.astro files)
- Vanilla JS/TS in <script> tags, no React components
- Tailwind for styling
- Supabase for backend operations
- Always consider RLS policies when querying

- database tables and columns are always camelCase
- 6 minutes after syncing to github, mcp to railway and ensure that capco and rothco are working as expected.
- MCP ALWAYS DO NOT WAIT
- save instructional markdowns in /markdowns
- always check for exisitng components / templates to use over generating html. For example, <button> should be Button.astro. SVG icons should be <SimpleIcon> which maps to custom culled list of svgs
- always use DeleteConfirmButton.astro for delete buttons
- always use CloseButton.astro for modals, etc.
- save .sql files to /sql-queriers
- save .sh scripts to /scripts
- **IMPORTANT**: site-config\*.json files MUST stay in root directory (required by src/lib/content.ts)

## Protected Code (DO NOT MODIFY WITHOUT USER APPROVAL)

- **MultiStepForm Placeholder Stagger Delay** (src/components/form/MultiStepForm.astro, line ~944):
  - The `staggerDelay = stepIndex * 100` calculation is PROTECTED
  - Creates cascading animation effect for successive placeholders
  - Has been accidentally removed multiple times - DO NOT REMOVE
  - See: .cursor/rules/multistep-form-placeholder-stagger.md for details

Always reference this context when making suggestions or implementing features.

never use - ${globalCompanyName} in App.astro title, it is addeed globally in the App.astro component.
