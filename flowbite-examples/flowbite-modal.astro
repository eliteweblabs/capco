---
import CloseButton from "../src/components/ui/CloseButton.astro";
// Flowbite Modal Component Example
// Based on https://flowbite.com/application-ui/preview/
---

<!-- Modal toggle button -->
<button
  data-modal-target="default-modal"
  data-modal-toggle="default-modal"
  class="block rounded-lg bg-primary-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
  type="button"
>
  Toggle modal
</button>

<!-- Main modal -->
<div
  id="default-modal"
  tabindex="-1"
  aria-hidden="true"
  class="fixed left-0 right-0 top-0 z-50 hidden h-[calc(100%-1rem)] max-h-full w-full items-center justify-center overflow-y-auto overflow-x-hidden md:inset-0"
>
  <div class="relative max-h-full w-full max-w-2xl p-4">
    <!-- Modal content -->
    <div class="relative rounded-lg bg-white shadow dark:bg-gray-700">
      <!-- Modal header -->
      <div
        class="flex items-center justify-between rounded-t border-b p-4 dark:border-gray-600 md:p-5"
      >
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Terms of Service</h3>
        <CloseButton
          data-modal-hide="default-modal"
          tooltipText="Close modal"
        />
      </div>
      <!-- Modal body -->
      <div class="space-y-4 p-4 md:p-5">
        <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
          With less than a month to go before the European Union enacts new consumer privacy laws
          for its citizens, companies around the world are updating their terms of service
          agreements to comply.
        </p>
        <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
          The European Union's General Data Protection Regulation (G.D.P.R.) goes into effect on May
          25 and is meant to ensure a common set of data rights in the European Union. It requires
          organizations to notify users as soon as possible of high-risk data breaches that could
          personally affect them.
        </p>
      </div>
      <!-- Modal footer -->
      <div
        class="flex items-center rounded-b border-t border-gray-200 p-4 dark:border-gray-600 md:p-5"
      >
        <button
          data-modal-hide="default-modal"
          type="button"
          class="rounded-lg bg-primary-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
          >I accept</button
        >
        <button
          data-modal-hide="default-modal"
          type="button"
          class="ms-3 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700"
          >Decline</button
        >
      </div>
    </div>
  </div>
</div>

<script>
  // Flowbite modal JavaScript
  document.addEventListener("DOMContentLoaded", function () {
    const modalToggle = document.querySelector('[data-modal-toggle="default-modal"]');
    const modal = document.getElementById("default-modal");
    const closeButtons = document.querySelectorAll('[data-modal-hide="default-modal"]');

    if (modalToggle && modal) {
      modalToggle.addEventListener("click", function () {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      });
    }

    closeButtons.forEach((button) => {
      button.addEventListener("click", function () {
        modal?.classList.add("hidden");
        modal?.classList.remove("flex");
      });
    });

    // Close on backdrop click
    modal?.addEventListener("click", function (e) {
      if (e.target === modal) {
        modal?.classList.add("hidden");
        modal?.classList.remove("flex");
      }
    });
  });
</script>
